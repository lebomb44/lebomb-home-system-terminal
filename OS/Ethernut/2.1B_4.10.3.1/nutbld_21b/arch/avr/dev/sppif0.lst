GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 1


   1               		.file	"sppif0.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	Sppi0SetMode
  10               		.type	Sppi0SetMode, @function
  11               	Sppi0SetMode:
  12               	/* prologue: function */
  13               	/* frame size = 0 */
  14 0000 8430      		cpi r24,lo8(4)
  15 0002 00F4      		brsh .L2
  16 0004 6430      		cpi r22,lo8(4)
  17 0006 00F4      		brsh .L2
  18 0008 E82F      		mov r30,r24
  19 000a F0E0      		ldi r31,lo8(0)
  20 000c DF01      		movw r26,r30
  21 000e A050      		subi r26,lo8(-(sppi0_spcr))
  22 0010 B040      		sbci r27,hi8(-(sppi0_spcr))
  23 0012 660F      		lsl r22
  24 0014 660F      		lsl r22
  25 0016 6365      		ori r22,lo8(83)
  26 0018 6C93      		st X,r22
  27 001a E050      		subi r30,lo8(-(sppi0_spsr))
  28 001c F040      		sbci r31,hi8(-(sppi0_spsr))
  29 001e 1082      		st Z,__zero_reg__
  30 0020 20E0      		ldi r18,lo8(0)
  31 0022 30E0      		ldi r19,hi8(0)
  32 0024 00C0      		rjmp .L3
  33               	.L2:
  34 0026 2FEF      		ldi r18,lo8(-1)
  35 0028 3FEF      		ldi r19,hi8(-1)
  36               	.L3:
  37 002a C901      		movw r24,r18
  38               	/* epilogue start */
  39 002c 0895      		ret
  40               		.size	Sppi0SetMode, .-Sppi0SetMode
  41               	.global	Sppi0Enable
  42               		.type	Sppi0Enable, @function
  43               	Sppi0Enable:
  44               	/* prologue: function */
  45               	/* frame size = 0 */
  46 002e A82F      		mov r26,r24
  47 0030 B0E0      		ldi r27,lo8(0)
  48 0032 FD01      		movw r30,r26
  49 0034 E050      		subi r30,lo8(-(sppi0_spcr))
  50 0036 F040      		sbci r31,hi8(-(sppi0_spcr))
  51 0038 E081      		ld r30,Z
  52 003a E3FF      		sbrs r30,3
  53 003c 00C0      		rjmp .L6
  54 003e C198      		cbi 56-32,1
  55 0040 00C0      		rjmp .L7
  56               	.L6:
  57 0042 C19A      		sbi 56-32,1
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 2


  58               	.L7:
  59 0044 B99A      		sbi 55-32,1
  60 0046 C298      		cbi 56-32,2
  61 0048 BA9A      		sbi 55-32,2
  62 004a C39A      		sbi 56-32,3
  63 004c B89B      		sbis 55-32,0
  64 004e C09A      		sbi 56-32,0
  65               	.L8:
  66 0050 EDB9      		out 45-32,r30
  67 0052 A050      		subi r26,lo8(-(sppi0_spsr))
  68 0054 B040      		sbci r27,hi8(-(sppi0_spsr))
  69 0056 8C91      		ld r24,X
  70 0058 8EB9      		out 46-32,r24
  71 005a 8EB1      		in r24,46-32
  72 005c 8FB1      		in r24,47-32
  73               	/* epilogue start */
  74 005e 0895      		ret
  75               		.size	Sppi0Enable, .-Sppi0Enable
  76               	.global	Sppi0ChipReset
  77               		.type	Sppi0ChipReset, @function
  78               	Sppi0ChipReset:
  79               	/* prologue: function */
  80               	/* frame size = 0 */
  81 0060 8130      		cpi r24,lo8(1)
  82 0062 01F4      		brne .L11
  83 0064 6623      		tst r22
  84 0066 01F0      		breq .L12
  85 0068 C69A      		sbi 56-32,6
  86 006a 00C0      		rjmp .L13
  87               	.L12:
  88 006c C698      		cbi 56-32,6
  89               	.L13:
  90 006e BE9A      		sbi 55-32,6
  91 0070 0895      		ret
  92               	.L11:
  93 0072 8230      		cpi r24,lo8(2)
  94 0074 01F4      		brne .L17
  95 0076 6623      		tst r22
  96 0078 01F0      		breq .L15
  97 007a 949A      		sbi 50-32,4
  98 007c 00C0      		rjmp .L16
  99               	.L15:
 100 007e 9498      		cbi 50-32,4
 101               	.L16:
 102 0080 8C9A      		sbi 49-32,4
 103               	.L17:
 104 0082 0895      		ret
 105               		.size	Sppi0ChipReset, .-Sppi0ChipReset
 106               	.global	Sppi0ChipSelect
 107               		.type	Sppi0ChipSelect, @function
 108               	Sppi0ChipSelect:
 109               	/* prologue: function */
 110               	/* frame size = 0 */
 111 0084 8823      		tst r24
 112 0086 01F4      		brne .L19
 113 0088 6623      		tst r22
 114 008a 01F0      		breq .L20
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 3


 115 008c C49A      		sbi 56-32,4
 116 008e 00C0      		rjmp .L21
 117               	.L20:
 118 0090 C498      		cbi 56-32,4
 119               	.L21:
 120 0092 BC9A      		sbi 55-32,4
 121 0094 0895      		ret
 122               	.L19:
 123 0096 8130      		cpi r24,lo8(1)
 124 0098 01F4      		brne .L23
 125 009a 6623      		tst r22
 126 009c 01F0      		breq .L24
 127 009e C09A      		sbi 56-32,0
 128 00a0 00C0      		rjmp .L25
 129               	.L24:
 130 00a2 C098      		cbi 56-32,0
 131               	.L25:
 132 00a4 B89A      		sbi 55-32,0
 133 00a6 0895      		ret
 134               	.L23:
 135 00a8 8230      		cpi r24,lo8(2)
 136 00aa 01F4      		brne .L28
 137 00ac 6623      		tst r22
 138 00ae 01F0      		breq .L26
 139 00b0 979A      		sbi 50-32,7
 140 00b2 00C0      		rjmp .L27
 141               	.L26:
 142 00b4 9798      		cbi 50-32,7
 143               	.L27:
 144 00b6 8F9A      		sbi 49-32,7
 145               	.L28:
 146 00b8 0895      		ret
 147               		.size	Sppi0ChipSelect, .-Sppi0ChipSelect
 148               	.global	Sppi0SelectDevice
 149               		.type	Sppi0SelectDevice, @function
 150               	Sppi0SelectDevice:
 151 00ba 1F93      		push r17
 152               	/* prologue: function */
 153               	/* frame size = 0 */
 154 00bc 182F      		mov r17,r24
 155 00be 0E94 0000 		call Sppi0Enable
 156 00c2 812F      		mov r24,r17
 157 00c4 61E0      		ldi r22,lo8(1)
 158 00c6 0E94 0000 		call Sppi0ChipSelect
 159               	/* epilogue start */
 160 00ca 1F91      		pop r17
 161 00cc 0895      		ret
 162               		.size	Sppi0SelectDevice, .-Sppi0SelectDevice
 163               	.global	Sppi0DeselectDevice
 164               		.type	Sppi0DeselectDevice, @function
 165               	Sppi0DeselectDevice:
 166               	/* prologue: function */
 167               	/* frame size = 0 */
 168 00ce 60E0      		ldi r22,lo8(0)
 169 00d0 0E94 0000 		call Sppi0ChipSelect
 170               	/* epilogue start */
 171 00d4 0895      		ret
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 4


 172               		.size	Sppi0DeselectDevice, .-Sppi0DeselectDevice
 173               	.global	Sppi0NegSelectDevice
 174               		.type	Sppi0NegSelectDevice, @function
 175               	Sppi0NegSelectDevice:
 176 00d6 1F93      		push r17
 177               	/* prologue: function */
 178               	/* frame size = 0 */
 179 00d8 182F      		mov r17,r24
 180 00da 0E94 0000 		call Sppi0Enable
 181 00de 812F      		mov r24,r17
 182 00e0 60E0      		ldi r22,lo8(0)
 183 00e2 0E94 0000 		call Sppi0ChipSelect
 184               	/* epilogue start */
 185 00e6 1F91      		pop r17
 186 00e8 0895      		ret
 187               		.size	Sppi0NegSelectDevice, .-Sppi0NegSelectDevice
 188               	.global	Sppi0NegDeselectDevice
 189               		.type	Sppi0NegDeselectDevice, @function
 190               	Sppi0NegDeselectDevice:
 191               	/* prologue: function */
 192               	/* frame size = 0 */
 193 00ea 61E0      		ldi r22,lo8(1)
 194 00ec 0E94 0000 		call Sppi0ChipSelect
 195               	/* epilogue start */
 196 00f0 0895      		ret
 197               		.size	Sppi0NegDeselectDevice, .-Sppi0NegDeselectDevice
 198               	.global	Sppi0Byte
 199               		.type	Sppi0Byte, @function
 200               	Sppi0Byte:
 201               	/* prologue: function */
 202               	/* frame size = 0 */
 203 00f2 8FB9      		out 47-32,r24
 204               	.L38:
 205 00f4 779B      		sbis 46-32,7
 206 00f6 00C0      		rjmp .L38
 207 00f8 8FB1      		in r24,47-32
 208               	/* epilogue start */
 209 00fa 0895      		ret
 210               		.size	Sppi0Byte, .-Sppi0Byte
 211               	.global	Sppi0Transact
 212               		.type	Sppi0Transact, @function
 213               	Sppi0Transact:
 214               	/* prologue: function */
 215               	/* frame size = 0 */
 216 00fc DC01      		movw r26,r24
 217 00fe FC01      		movw r30,r24
 218 0100 6115      		cp r22,__zero_reg__
 219 0102 7105      		cpc r23,__zero_reg__
 220 0104 01F0      		breq .L52
 221 0106 20E0      		ldi r18,lo8(0)
 222 0108 30E0      		ldi r19,hi8(0)
 223 010a 00C0      		rjmp .L43
 224               	.L45:
 225 010c FD01      		movw r30,r26
 226 010e E20F      		add r30,r18
 227 0110 F31F      		adc r31,r19
 228 0112 8081      		ld r24,Z
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 5


 229 0114 8FB9      		out 47-32,r24
 230               	.L44:
 231 0116 779B      		sbis 46-32,7
 232 0118 00C0      		rjmp .L44
 233 011a 8FB1      		in r24,47-32
 234 011c FB01      		movw r30,r22
 235 011e E20F      		add r30,r18
 236 0120 F31F      		adc r31,r19
 237 0122 8083      		st Z,r24
 238 0124 2F5F      		subi r18,lo8(-(1))
 239 0126 3F4F      		sbci r19,hi8(-(1))
 240 0128 4150      		subi r20,lo8(-(-1))
 241 012a 5040      		sbci r21,hi8(-(-1))
 242               	.L43:
 243 012c 4115      		cp r20,__zero_reg__
 244 012e 5105      		cpc r21,__zero_reg__
 245 0130 01F4      		brne .L45
 246 0132 0895      		ret
 247               	.L48:
 248 0134 8081      		ld r24,Z
 249 0136 8FB9      		out 47-32,r24
 250               	.L47:
 251 0138 779B      		sbis 46-32,7
 252 013a 00C0      		rjmp .L47
 253 013c 8FB1      		in r24,47-32
 254 013e 3196      		adiw r30,1
 255 0140 4150      		subi r20,lo8(-(-1))
 256 0142 5040      		sbci r21,hi8(-(-1))
 257               	.L52:
 258 0144 4115      		cp r20,__zero_reg__
 259 0146 5105      		cpc r21,__zero_reg__
 260 0148 01F4      		brne .L48
 261 014a 0895      		ret
 262               		.size	Sppi0Transact, .-Sppi0Transact
 263               	.global	Sppi0SetSpeed
 264               		.type	Sppi0SetSpeed, @function
 265               	Sppi0SetSpeed:
 266 014c CF92      		push r12
 267 014e DF92      		push r13
 268 0150 EF92      		push r14
 269 0152 FF92      		push r15
 270 0154 1F93      		push r17
 271               	/* prologue: function */
 272               	/* frame size = 0 */
 273 0156 182F      		mov r17,r24
 274 0158 6A01      		movw r12,r20
 275 015a 7B01      		movw r14,r22
 276 015c 0E94 0000 		call NutGetCpuClock
 277 0160 A12F      		mov r26,r17
 278 0162 B0E0      		ldi r27,lo8(0)
 279 0164 FD01      		movw r30,r26
 280 0166 E050      		subi r30,lo8(-(sppi0_spcr))
 281 0168 F040      		sbci r31,hi8(-(sppi0_spcr))
 282 016a 3081      		ld r19,Z
 283 016c 20E0      		ldi r18,lo8(0)
 284               	.L55:
 285 016e 9695      		lsr r25
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 6


 286 0170 8795      		ror r24
 287 0172 7795      		ror r23
 288 0174 6795      		ror r22
 289 0176 C616      		cp r12,r22
 290 0178 D706      		cpc r13,r23
 291 017a E806      		cpc r14,r24
 292 017c F906      		cpc r15,r25
 293 017e 00F4      		brsh .L54
 294 0180 2F5F      		subi r18,lo8(-(1))
 295 0182 2730      		cpi r18,lo8(7)
 296 0184 01F4      		brne .L55
 297               	.L54:
 298 0186 FD01      		movw r30,r26
 299 0188 E050      		subi r30,lo8(-(sppi0_spcr))
 300 018a F040      		sbci r31,hi8(-(sppi0_spcr))
 301 018c 822F      		mov r24,r18
 302 018e 8695      		lsr r24
 303 0190 3C7F      		andi r19,lo8(-4)
 304 0192 832B      		or r24,r19
 305 0194 8083      		st Z,r24
 306 0196 2630      		cpi r18,lo8(6)
 307 0198 00F4      		brsh .L57
 308 019a A050      		subi r26,lo8(-(sppi0_spsr))
 309 019c B040      		sbci r27,hi8(-(sppi0_spsr))
 310 019e 2095      		com r18
 311 01a0 2170      		andi r18,lo8(1)
 312 01a2 2C93      		st X,r18
 313               	.L57:
 314               	/* epilogue start */
 315 01a4 1F91      		pop r17
 316 01a6 FF90      		pop r15
 317 01a8 EF90      		pop r14
 318 01aa DF90      		pop r13
 319 01ac CF90      		pop r12
 320 01ae 0895      		ret
 321               		.size	Sppi0SetSpeed, .-Sppi0SetSpeed
 322               		.lcomm sppi0_spcr,4
 323               		.lcomm sppi0_spsr,4
 324               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 sppif0.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:11     .text:00000000 Sppi0SetMode
                             .bss:00000000 sppi0_spcr
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:322    .bss:00000004 sppi0_spsr
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:43     .text:0000002e Sppi0Enable
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:78     .text:00000060 Sppi0ChipReset
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:108    .text:00000084 Sppi0ChipSelect
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:150    .text:000000ba Sppi0SelectDevice
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:165    .text:000000ce Sppi0DeselectDevice
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:175    .text:000000d6 Sppi0NegSelectDevice
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:190    .text:000000ea Sppi0NegDeselectDevice
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:200    .text:000000f2 Sppi0Byte
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:213    .text:000000fc Sppi0Transact
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccjd46z1.s:265    .text:0000014c Sppi0SetSpeed

UNDEFINED SYMBOLS
NutGetCpuClock
__do_clear_bss
