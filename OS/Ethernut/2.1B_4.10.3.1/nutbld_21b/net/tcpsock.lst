GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 1


   1               		.file	"tcpsock.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	NutTcpFindSocket
  10               		.type	NutTcpFindSocket, @function
  11               	NutTcpFindSocket:
  12 0000 0F93      		push r16
  13 0002 1F93      		push r17
  14 0004 CF93      		push r28
  15 0006 DF93      		push r29
  16               	/* prologue: function */
  17               	/* frame size = 0 */
  18 0008 8C01      		movw r16,r24
  19 000a C091 0000 		lds r28,tcpSocketList
  20 000e D091 0000 		lds r29,(tcpSocketList)+1
  21 0012 FE01      		movw r30,r28
  22 0014 00C0      		rjmp .L2
  23               	.L5:
  24 0016 808D      		ldd r24,Z+24
  25 0018 918D      		ldd r25,Z+25
  26 001a 8017      		cp r24,r16
  27 001c 9107      		cpc r25,r17
  28 001e 01F4      		brne .L3
  29 0020 828D      		ldd r24,Z+26
  30 0022 938D      		ldd r25,Z+27
  31 0024 A48D      		ldd r26,Z+28
  32 0026 B58D      		ldd r27,Z+29
  33 0028 8217      		cp r24,r18
  34 002a 9307      		cpc r25,r19
  35 002c A407      		cpc r26,r20
  36 002e B507      		cpc r27,r21
  37 0030 01F4      		brne .L3
  38 0032 868D      		ldd r24,Z+30
  39 0034 978D      		ldd r25,Z+31
  40 0036 8617      		cp r24,r22
  41 0038 9707      		cpc r25,r23
  42 003a 01F4      		brne .L3
  43 003c 8389      		ldd r24,Z+19
  44 003e 8823      		tst r24
  45 0040 01F0      		breq .L3
  46 0042 9F01      		movw r18,r30
  47 0044 00C0      		rjmp .L4
  48               	.L3:
  49 0046 0190      		ld __tmp_reg__,Z+
  50 0048 F081      		ld r31,Z
  51 004a E02D      		mov r30,__tmp_reg__
  52               	.L2:
  53 004c 3097      		sbiw r30,0
  54 004e 01F4      		brne .L5
  55 0050 00C0      		rjmp .L10
  56               	.L8:
  57 0052 8B89      		ldd r24,Y+19
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 2


  58 0054 8130      		cpi r24,lo8(1)
  59 0056 01F4      		brne .L7
  60 0058 888D      		ldd r24,Y+24
  61 005a 998D      		ldd r25,Y+25
  62 005c 8017      		cp r24,r16
  63 005e 9107      		cpc r25,r17
  64 0060 01F4      		brne .L7
  65 0062 9E01      		movw r18,r28
  66 0064 00C0      		rjmp .L4
  67               	.L7:
  68 0066 0990      		ld __tmp_reg__,Y+
  69 0068 D881      		ld r29,Y
  70 006a C02D      		mov r28,__tmp_reg__
  71               	.L10:
  72 006c 2097      		sbiw r28,0
  73 006e 01F4      		brne .L8
  74 0070 20E0      		ldi r18,lo8(0)
  75 0072 30E0      		ldi r19,hi8(0)
  76               	.L4:
  77 0074 C901      		movw r24,r18
  78               	/* epilogue start */
  79 0076 DF91      		pop r29
  80 0078 CF91      		pop r28
  81 007a 1F91      		pop r17
  82 007c 0F91      		pop r16
  83 007e 0895      		ret
  84               		.size	NutTcpFindSocket, .-NutTcpFindSocket
  85               	.global	NutTcpGetSockOpt
  86               		.type	NutTcpGetSockOpt, @function
  87               	NutTcpGetSockOpt:
  88 0080 CF93      		push r28
  89 0082 DF93      		push r29
  90               	/* prologue: function */
  91               	/* frame size = 0 */
  92 0084 FC01      		movw r30,r24
  93 0086 EA01      		movw r28,r20
  94 0088 0097      		sbiw r24,0
  95 008a 01F4      		brne .+2
  96 008c 00C0      		rjmp .L33
  97               	.L12:
  98 008e 80E1      		ldi r24,hi8(4098)
  99 0090 6230      		cpi r22,lo8(4098)
 100 0092 7807      		cpc r23,r24
 101 0094 01F0      		breq .L17
 102 0096 80E1      		ldi r24,hi8(4099)
 103 0098 6330      		cpi r22,lo8(4099)
 104 009a 7807      		cpc r23,r24
 105 009c 04F4      		brge .L20
 106 009e 6230      		cpi r22,2
 107 00a0 7105      		cpc r23,__zero_reg__
 108 00a2 01F0      		breq .L15
 109 00a4 6150      		subi r22,lo8(4097)
 110 00a6 7041      		sbci r23,hi8(4097)
 111 00a8 01F0      		breq .+2
 112 00aa 00C0      		rjmp .L14
 113 00ac 00C0      		rjmp .L38
 114               	.L20:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 3


 115 00ae 80E1      		ldi r24,hi8(4101)
 116 00b0 6530      		cpi r22,lo8(4101)
 117 00b2 7807      		cpc r23,r24
 118 00b4 01F0      		breq .L18
 119 00b6 6650      		subi r22,lo8(4102)
 120 00b8 7041      		sbci r23,hi8(4102)
 121 00ba 01F0      		breq .+2
 122 00bc 00C0      		rjmp .L14
 123 00be 00C0      		rjmp .L39
 124               	.L15:
 125 00c0 4115      		cp r20,__zero_reg__
 126 00c2 5105      		cpc r21,__zero_reg__
 127 00c4 01F0      		breq .L29
 128 00c6 2230      		cpi r18,2
 129 00c8 3105      		cpc r19,__zero_reg__
 130 00ca 01F4      		brne .L29
 131               	.L22:
 132 00cc ED5A      		subi r30,lo8(-(83))
 133 00ce FF4F      		sbci r31,hi8(-(83))
 134 00d0 00C0      		rjmp .L36
 135               	.L17:
 136 00d2 4115      		cp r20,__zero_reg__
 137 00d4 5105      		cpc r21,__zero_reg__
 138 00d6 01F0      		breq .L29
 139 00d8 2230      		cpi r18,2
 140 00da 3105      		cpc r19,__zero_reg__
 141 00dc 01F4      		brne .L29
 142               	.L24:
 143 00de E85B      		subi r30,lo8(-(72))
 144 00e0 FF4F      		sbci r31,hi8(-(72))
 145               	.L36:
 146 00e2 8081      		ld r24,Z
 147 00e4 9181      		ldd r25,Z+1
 148 00e6 00C0      		rjmp .L34
 149               	.L18:
 150 00e8 4115      		cp r20,__zero_reg__
 151 00ea 5105      		cpc r21,__zero_reg__
 152 00ec 01F0      		breq .L29
 153 00ee 2430      		cpi r18,4
 154 00f0 3105      		cpc r19,__zero_reg__
 155 00f2 01F4      		brne .L29
 156               	.L26:
 157 00f4 E559      		subi r30,lo8(-(107))
 158 00f6 FF4F      		sbci r31,hi8(-(107))
 159 00f8 00C0      		rjmp .L37
 160               	.L39:
 161 00fa 4115      		cp r20,__zero_reg__
 162 00fc 5105      		cpc r21,__zero_reg__
 163 00fe 01F0      		breq .L29
 164 0100 2430      		cpi r18,4
 165 0102 3105      		cpc r19,__zero_reg__
 166 0104 01F4      		brne .L29
 167               	.L28:
 168 0106 E959      		subi r30,lo8(-(103))
 169 0108 FF4F      		sbci r31,hi8(-(103))
 170               	.L37:
 171 010a 8081      		ld r24,Z
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 4


 172 010c 9181      		ldd r25,Z+1
 173 010e A281      		ldd r26,Z+2
 174 0110 B381      		ldd r27,Z+3
 175 0112 8883      		st Y,r24
 176 0114 9983      		std Y+1,r25
 177 0116 AA83      		std Y+2,r26
 178 0118 BB83      		std Y+3,r27
 179 011a 00C0      		rjmp .L35
 180               	.L38:
 181 011c 4115      		cp r20,__zero_reg__
 182 011e 5105      		cpc r21,__zero_reg__
 183 0120 01F0      		breq .L29
 184 0122 2230      		cpi r18,2
 185 0124 3105      		cpc r19,__zero_reg__
 186 0126 01F0      		breq .L30
 187               	.L29:
 188 0128 EF59      		subi r30,lo8(-(97))
 189 012a FF4F      		sbci r31,hi8(-(97))
 190 012c 86E1      		ldi r24,lo8(22)
 191 012e 90E0      		ldi r25,hi8(22)
 192 0130 00C0      		rjmp .L32
 193               	.L30:
 194 0132 8189      		ldd r24,Z+17
 195 0134 9289      		ldd r25,Z+18
 196               	.L34:
 197 0136 9983      		std Y+1,r25
 198 0138 8883      		st Y,r24
 199               	.L35:
 200 013a 20E0      		ldi r18,lo8(0)
 201 013c 30E0      		ldi r19,hi8(0)
 202 013e 00C0      		rjmp .L13
 203               	.L14:
 204 0140 EF59      		subi r30,lo8(-(97))
 205 0142 FF4F      		sbci r31,hi8(-(97))
 206 0144 8AE2      		ldi r24,lo8(42)
 207 0146 90E0      		ldi r25,hi8(42)
 208               	.L32:
 209 0148 9183      		std Z+1,r25
 210 014a 8083      		st Z,r24
 211               	.L33:
 212 014c 2FEF      		ldi r18,lo8(-1)
 213 014e 3FEF      		ldi r19,hi8(-1)
 214               	.L13:
 215 0150 C901      		movw r24,r18
 216               	/* epilogue start */
 217 0152 DF91      		pop r29
 218 0154 CF91      		pop r28
 219 0156 0895      		ret
 220               		.size	NutTcpGetSockOpt, .-NutTcpGetSockOpt
 221               	.global	NutTcpError
 222               		.type	NutTcpError, @function
 223               	NutTcpError:
 224               	/* prologue: function */
 225               	/* frame size = 0 */
 226 0158 FC01      		movw r30,r24
 227 015a 0097      		sbiw r24,0
 228 015c 01F4      		brne .L41
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 5


 229 015e 26E2      		ldi r18,lo8(38)
 230 0160 30E0      		ldi r19,hi8(38)
 231 0162 00C0      		rjmp .L42
 232               	.L41:
 233 0164 EF59      		subi r30,lo8(-(97))
 234 0166 FF4F      		sbci r31,hi8(-(97))
 235 0168 2081      		ld r18,Z
 236 016a 3181      		ldd r19,Z+1
 237               	.L42:
 238 016c C901      		movw r24,r18
 239               	/* epilogue start */
 240 016e 0895      		ret
 241               		.size	NutTcpError, .-NutTcpError
 242               	.global	NutTcpDeviceIOCtl
 243               		.type	NutTcpDeviceIOCtl, @function
 244               	NutTcpDeviceIOCtl:
 245 0170 CF93      		push r28
 246 0172 DF93      		push r29
 247               	/* prologue: function */
 248               	/* frame size = 0 */
 249 0174 DC01      		movw r26,r24
 250 0176 EA01      		movw r28,r20
 251 0178 6A30      		cpi r22,10
 252 017a 7105      		cpc r23,__zero_reg__
 253 017c 01F0      		breq .L46
 254 017e 6A30      		cpi r22,10
 255 0180 7105      		cpc r23,__zero_reg__
 256 0182 04F0      		brlt .L45
 257 0184 6B30      		cpi r22,11
 258 0186 7105      		cpc r23,__zero_reg__
 259 0188 01F0      		breq .L47
 260 018a 6C30      		cpi r22,12
 261 018c 7105      		cpc r23,__zero_reg__
 262 018e 01F0      		breq .L46
 263               	.L45:
 264 0190 2FEF      		ldi r18,lo8(-1)
 265 0192 3FEF      		ldi r19,hi8(-1)
 266 0194 00C0      		rjmp .L48
 267               	.L46:
 268 0196 FD01      		movw r30,r26
 269 0198 E65B      		subi r30,lo8(-(74))
 270 019a FF4F      		sbci r31,hi8(-(74))
 271 019c AA5B      		subi r26,lo8(-(70))
 272 019e BF4F      		sbci r27,hi8(-(70))
 273 01a0 8D91      		ld r24,X+
 274 01a2 9C91      		ld r25,X
 275 01a4 2081      		ld r18,Z
 276 01a6 3181      		ldd r19,Z+1
 277 01a8 821B      		sub r24,r18
 278 01aa 930B      		sbc r25,r19
 279 01ac AA27      		clr r26
 280 01ae 97FD      		sbrc r25,7
 281 01b0 A095      		com r26
 282 01b2 BA2F      		mov r27,r26
 283 01b4 00C0      		rjmp .L50
 284               	.L47:
 285 01b6 1D96      		adiw r26,13
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 6


 286 01b8 8D91      		ld r24,X+
 287 01ba 9C91      		ld r25,X
 288 01bc 1E97      		sbiw r26,13+1
 289 01be A0E0      		ldi r26,lo8(0)
 290 01c0 B0E0      		ldi r27,hi8(0)
 291               	.L50:
 292 01c2 8883      		st Y,r24
 293 01c4 9983      		std Y+1,r25
 294 01c6 AA83      		std Y+2,r26
 295 01c8 BB83      		std Y+3,r27
 296 01ca 20E0      		ldi r18,lo8(0)
 297 01cc 30E0      		ldi r19,hi8(0)
 298               	.L48:
 299 01ce C901      		movw r24,r18
 300               	/* epilogue start */
 301 01d0 DF91      		pop r29
 302 01d2 CF91      		pop r28
 303 01d4 0895      		ret
 304               		.size	NutTcpDeviceIOCtl, .-NutTcpDeviceIOCtl
 305               	.global	NutTcpDiscardBuffers
 306               		.type	NutTcpDiscardBuffers, @function
 307               	NutTcpDiscardBuffers:
 308 01d6 0F93      		push r16
 309 01d8 1F93      		push r17
 310 01da CF93      		push r28
 311 01dc DF93      		push r29
 312               	/* prologue: function */
 313               	/* frame size = 0 */
 314 01de EC01      		movw r28,r24
 315 01e0 8C01      		movw r16,r24
 316 01e2 035B      		subi r16,lo8(-(77))
 317 01e4 1F4F      		sbci r17,hi8(-(77))
 318 01e6 00C0      		rjmp .L52
 319               	.L53:
 320 01e8 8081      		ld r24,Z
 321 01ea 9181      		ldd r25,Z+1
 322 01ec D801      		movw r26,r16
 323 01ee 8D93      		st X+,r24
 324 01f0 9C93      		st X,r25
 325 01f2 CF01      		movw r24,r30
 326 01f4 0E94 0000 		call NutNetBufFree
 327               	.L52:
 328 01f8 D801      		movw r26,r16
 329 01fa ED91      		ld r30,X+
 330 01fc FC91      		ld r31,X
 331 01fe 3097      		sbiw r30,0
 332 0200 01F4      		brne .L53
 333 0202 00C0      		rjmp .L59
 334               	.L55:
 335 0204 8081      		ld r24,Z
 336 0206 9181      		ldd r25,Z+1
 337 0208 99AF      		std Y+57,r25
 338 020a 88AF      		std Y+56,r24
 339 020c CF01      		movw r24,r30
 340 020e 0E94 0000 		call NutNetBufFree
 341               	.L59:
 342 0212 E8AD      		ldd r30,Y+56
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 7


 343 0214 F9AD      		ldd r31,Y+57
 344 0216 3097      		sbiw r30,0
 345 0218 01F4      		brne .L55
 346 021a 00C0      		rjmp .L62
 347               	.L57:
 348 021c 8081      		ld r24,Z
 349 021e 9181      		ldd r25,Z+1
 350 0220 9983      		std Y+1,r25
 351 0222 8883      		st Y,r24
 352 0224 CF01      		movw r24,r30
 353 0226 0E94 0000 		call NutNetBufFree
 354 022a 00C0      		rjmp .L61
 355               	.L62:
 356 022c CF5A      		subi r28,lo8(-(81))
 357 022e DF4F      		sbci r29,hi8(-(81))
 358               	.L61:
 359 0230 E881      		ld r30,Y
 360 0232 F981      		ldd r31,Y+1
 361 0234 3097      		sbiw r30,0
 362 0236 01F4      		brne .L57
 363               	/* epilogue start */
 364 0238 DF91      		pop r29
 365 023a CF91      		pop r28
 366 023c 1F91      		pop r17
 367 023e 0F91      		pop r16
 368 0240 0895      		ret
 369               		.size	NutTcpDiscardBuffers, .-NutTcpDiscardBuffers
 370               	.global	NutTcpReceive
 371               		.type	NutTcpReceive, @function
 372               	NutTcpReceive:
 373 0242 2F92      		push r2
 374 0244 3F92      		push r3
 375 0246 4F92      		push r4
 376 0248 5F92      		push r5
 377 024a 6F92      		push r6
 378 024c 7F92      		push r7
 379 024e 8F92      		push r8
 380 0250 9F92      		push r9
 381 0252 AF92      		push r10
 382 0254 BF92      		push r11
 383 0256 CF92      		push r12
 384 0258 DF92      		push r13
 385 025a EF92      		push r14
 386 025c FF92      		push r15
 387 025e 0F93      		push r16
 388 0260 1F93      		push r17
 389 0262 DF93      		push r29
 390 0264 CF93      		push r28
 391 0266 00D0      		rcall .
 392 0268 00D0      		rcall .
 393 026a 00D0      		rcall .
 394 026c CDB7      		in r28,__SP_L__
 395 026e DEB7      		in r29,__SP_H__
 396               	/* prologue: function */
 397               	/* frame size = 6 */
 398 0270 9E83      		std Y+6,r25
 399 0272 8D83      		std Y+5,r24
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 8


 400 0274 7A83      		std Y+2,r23
 401 0276 6983      		std Y+1,r22
 402 0278 4A01      		movw r8,r20
 403 027a 0E94 0000 		call NutThreadYield
 404 027e 2D81      		ldd r18,Y+5
 405 0280 3E81      		ldd r19,Y+6
 406 0282 232B      		or r18,r19
 407 0284 01F0      		breq .L82
 408               	.L64:
 409 0286 ED81      		ldd r30,Y+5
 410 0288 FE81      		ldd r31,Y+6
 411 028a 8389      		ldd r24,Z+19
 412 028c 8430      		cpi r24,lo8(4)
 413 028e 01F0      		breq .L66
 414 0290 8389      		ldd r24,Z+19
 415 0292 8530      		cpi r24,lo8(5)
 416 0294 01F4      		brne .L81
 417               	.L66:
 418 0296 2981      		ldd r18,Y+1
 419 0298 3A81      		ldd r19,Y+2
 420 029a 232B      		or r18,r19
 421 029c 01F4      		brne .+2
 422 029e 00C0      		rjmp .L67
 423 02a0 8114      		cp r8,__zero_reg__
 424 02a2 9104      		cpc r9,__zero_reg__
 425 02a4 01F4      		brne .+2
 426 02a6 00C0      		rjmp .L65
 427 02a8 4FE4      		ldi r20,lo8(79)
 428 02aa A42E      		mov r10,r20
 429 02ac B12C      		mov r11,__zero_reg__
 430 02ae 6D81      		ldd r22,Y+5
 431 02b0 7E81      		ldd r23,Y+6
 432 02b2 A60E      		add r10,r22
 433 02b4 B71E      		adc r11,r23
 434 02b6 36E4      		ldi r19,lo8(70)
 435 02b8 C32E      		mov r12,r19
 436 02ba D12C      		mov r13,__zero_reg__
 437 02bc C60E      		add r12,r22
 438 02be D71E      		adc r13,r23
 439 02c0 2AE4      		ldi r18,lo8(74)
 440 02c2 E22E      		mov r14,r18
 441 02c4 F12C      		mov r15,__zero_reg__
 442 02c6 E60E      		add r14,r22
 443 02c8 F71E      		adc r15,r23
 444 02ca 8B01      		movw r16,r22
 445 02cc 0959      		subi r16,lo8(-(103))
 446 02ce 1F4F      		sbci r17,hi8(-(103))
 447 02d0 00C0      		rjmp .L68
 448               	.L70:
 449 02d2 ED81      		ldd r30,Y+5
 450 02d4 FE81      		ldd r31,Y+6
 451 02d6 8389      		ldd r24,Z+19
 452 02d8 8430      		cpi r24,lo8(4)
 453 02da 01F0      		breq .L69
 454               	.L81:
 455 02dc EF59      		subi r30,lo8(-(97))
 456 02de FF4F      		sbci r31,hi8(-(97))
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 9


 457 02e0 89E3      		ldi r24,lo8(57)
 458 02e2 90E0      		ldi r25,hi8(57)
 459 02e4 9183      		std Z+1,r25
 460 02e6 8083      		st Z,r24
 461               	.L82:
 462 02e8 8824      		clr r8
 463 02ea 8A94      		dec r8
 464 02ec 982C      		mov r9,r8
 465 02ee 00C0      		rjmp .L65
 466               	.L69:
 467 02f0 F801      		movw r30,r16
 468 02f2 4081      		ld r20,Z
 469 02f4 5181      		ldd r21,Z+1
 470 02f6 6281      		ldd r22,Z+2
 471 02f8 7381      		ldd r23,Z+3
 472 02fa C501      		movw r24,r10
 473 02fc 0E94 0000 		call NutEventWait
 474 0300 892B      		or r24,r25
 475 0302 01F0      		breq .+2
 476 0304 00C0      		rjmp .L67
 477               	.L68:
 478 0306 F601      		movw r30,r12
 479 0308 8081      		ld r24,Z
 480 030a 9181      		ldd r25,Z+1
 481 030c F701      		movw r30,r14
 482 030e 2081      		ld r18,Z
 483 0310 3181      		ldd r19,Z+1
 484 0312 8217      		cp r24,r18
 485 0314 9307      		cpc r25,r19
 486 0316 01F0      		breq .L70
 487 0318 821B      		sub r24,r18
 488 031a 930B      		sbc r25,r19
 489 031c 8815      		cp r24,r8
 490 031e 9905      		cpc r25,r9
 491 0320 04F4      		brge .L71
 492 0322 0097      		sbiw r24,0
 493 0324 01F4      		brne .+2
 494 0326 00C0      		rjmp .L67
 495               	.L72:
 496 0328 4C01      		movw r8,r24
 497               	.L71:
 498 032a 7901      		movw r14,r18
 499 032c 6624      		clr r6
 500 032e 7724      		clr r7
 501 0330 2D81      		ldd r18,Y+5
 502 0332 3E81      		ldd r19,Y+6
 503 0334 235B      		subi r18,lo8(-(77))
 504 0336 3F4F      		sbci r19,hi8(-(77))
 505 0338 3C83      		std Y+4,r19
 506 033a 2B83      		std Y+3,r18
 507 033c 96E4      		ldi r25,lo8(70)
 508 033e 292E      		mov r2,r25
 509 0340 312C      		mov r3,__zero_reg__
 510 0342 6D81      		ldd r22,Y+5
 511 0344 7E81      		ldd r23,Y+6
 512 0346 260E      		add r2,r22
 513 0348 371E      		adc r3,r23
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 10


 514 034a 8CE4      		ldi r24,lo8(76)
 515 034c 482E      		mov r4,r24
 516 034e 512C      		mov r5,__zero_reg__
 517 0350 460E      		add r4,r22
 518 0352 571E      		adc r5,r23
 519 0354 00C0      		rjmp .L73
 520               	.L77:
 521 0356 EB81      		ldd r30,Y+3
 522 0358 FC81      		ldd r31,Y+4
 523 035a A080      		ld r10,Z
 524 035c B180      		ldd r11,Z+1
 525 035e F501      		movw r30,r10
 526 0360 C188      		ldd r12,Z+17
 527 0362 D288      		ldd r13,Z+18
 528 0364 CE18      		sub r12,r14
 529 0366 DF08      		sbc r13,r15
 530 0368 8401      		movw r16,r8
 531 036a 0619      		sub r16,r6
 532 036c 1709      		sbc r17,r7
 533 036e C016      		cp r12,r16
 534 0370 D106      		cpc r13,r17
 535 0372 00F4      		brsh .L74
 536 0374 8601      		movw r16,r12
 537               	.L74:
 538 0376 4981      		ldd r20,Y+1
 539 0378 5A81      		ldd r21,Y+2
 540 037a 460D      		add r20,r6
 541 037c 571D      		adc r21,r7
 542 037e F501      		movw r30,r10
 543 0380 2785      		ldd r18,Z+15
 544 0382 3089      		ldd r19,Z+16
 545 0384 2E0D      		add r18,r14
 546 0386 3F1D      		adc r19,r15
 547 0388 CA01      		movw r24,r20
 548 038a B901      		movw r22,r18
 549 038c A801      		movw r20,r16
 550 038e 0E94 0000 		call memcpy
 551 0392 E00E      		add r14,r16
 552 0394 F11E      		adc r15,r17
 553 0396 0C15      		cp r16,r12
 554 0398 1D05      		cpc r17,r13
 555 039a 00F0      		brlo .L76
 556 039c F501      		movw r30,r10
 557 039e 8081      		ld r24,Z
 558 03a0 9181      		ldd r25,Z+1
 559 03a2 EB81      		ldd r30,Y+3
 560 03a4 FC81      		ldd r31,Y+4
 561 03a6 9183      		std Z+1,r25
 562 03a8 8083      		st Z,r24
 563 03aa F101      		movw r30,r2
 564 03ac 8081      		ld r24,Z
 565 03ae 9181      		ldd r25,Z+1
 566 03b0 8E19      		sub r24,r14
 567 03b2 9F09      		sbc r25,r15
 568 03b4 9183      		std Z+1,r25
 569 03b6 8083      		st Z,r24
 570 03b8 C501      		movw r24,r10
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 11


 571 03ba 0E94 0000 		call NutNetBufFree
 572 03be F201      		movw r30,r4
 573 03c0 8081      		ld r24,Z
 574 03c2 8150      		subi r24,lo8(-(-1))
 575 03c4 8083      		st Z,r24
 576 03c6 EE24      		clr r14
 577 03c8 FF24      		clr r15
 578               	.L76:
 579 03ca 600E      		add r6,r16
 580 03cc 711E      		adc r7,r17
 581               	.L73:
 582 03ce 6814      		cp r6,r8
 583 03d0 7904      		cpc r7,r9
 584 03d2 00F0      		brlo .L77
 585 03d4 2D81      		ldd r18,Y+5
 586 03d6 3E81      		ldd r19,Y+6
 587 03d8 265B      		subi r18,lo8(-(74))
 588 03da 3F4F      		sbci r19,hi8(-(74))
 589 03dc F901      		movw r30,r18
 590 03de F182      		std Z+1,r15
 591 03e0 E082      		st Z,r14
 592 03e2 EA54      		subi r30,lo8(-(-74))
 593 03e4 F040      		sbci r31,hi8(-(-74))
 594 03e6 FE83      		std Y+6,r31
 595 03e8 ED83      		std Y+5,r30
 596 03ea 8389      		ldd r24,Z+19
 597 03ec 8430      		cpi r24,lo8(4)
 598 03ee 01F4      		brne .L65
 599 03f0 EC5B      		subi r30,lo8(-(68))
 600 03f2 FF4F      		sbci r31,hi8(-(68))
 601 03f4 4081      		ld r20,Z
 602 03f6 5181      		ldd r21,Z+1
 603 03f8 3496      		adiw r30,4
 604 03fa 2081      		ld r18,Z
 605 03fc 3181      		ldd r19,Z+1
 606 03fe E854      		subi r30,lo8(-(-72))
 607 0400 F040      		sbci r31,hi8(-(-72))
 608 0402 FE83      		std Y+6,r31
 609 0404 ED83      		std Y+5,r30
 610 0406 C401      		movw r24,r8
 611 0408 840F      		add r24,r20
 612 040a 951F      		adc r25,r21
 613 040c 2817      		cp r18,r24
 614 040e 3907      		cpc r19,r25
 615 0410 04F4      		brge .L78
 616 0412 C901      		movw r24,r18
 617               	.L78:
 618 0414 2D81      		ldd r18,Y+5
 619 0416 3E81      		ldd r19,Y+6
 620 0418 2D5A      		subi r18,lo8(-(83))
 621 041a 3F4F      		sbci r19,hi8(-(83))
 622 041c F901      		movw r30,r18
 623 041e 2081      		ld r18,Z
 624 0420 3181      		ldd r19,Z+1
 625 0422 E355      		subi r30,lo8(-(-83))
 626 0424 F040      		sbci r31,hi8(-(-83))
 627 0426 FE83      		std Y+6,r31
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 12


 628 0428 ED83      		std Y+5,r30
 629 042a 2417      		cp r18,r20
 630 042c 3507      		cpc r19,r21
 631 042e 00F0      		brlo .L79
 632 0430 2817      		cp r18,r24
 633 0432 3907      		cpc r19,r25
 634 0434 00F4      		brsh .L79
 635 0436 EC5B      		subi r30,lo8(-(68))
 636 0438 FF4F      		sbci r31,hi8(-(68))
 637 043a 9183      		std Z+1,r25
 638 043c 8083      		st Z,r24
 639 043e E454      		subi r30,lo8(-(-68))
 640 0440 F040      		sbci r31,hi8(-(-68))
 641 0442 FE83      		std Y+6,r31
 642 0444 ED83      		std Y+5,r30
 643 0446 CF01      		movw r24,r30
 644 0448 0E94 0000 		call NutTcpStateWindowEvent
 645 044c 00C0      		rjmp .L65
 646               	.L79:
 647 044e 2D81      		ldd r18,Y+5
 648 0450 3E81      		ldd r19,Y+6
 649 0452 2C5B      		subi r18,lo8(-(68))
 650 0454 3F4F      		sbci r19,hi8(-(68))
 651 0456 F901      		movw r30,r18
 652 0458 9183      		std Z+1,r25
 653 045a 8083      		st Z,r24
 654 045c 00C0      		rjmp .L65
 655               	.L67:
 656 045e 8824      		clr r8
 657 0460 9924      		clr r9
 658               	.L65:
 659 0462 C401      		movw r24,r8
 660               	/* epilogue start */
 661 0464 2696      		adiw r28,6
 662 0466 0FB6      		in __tmp_reg__,__SREG__
 663 0468 F894      		cli
 664 046a DEBF      		out __SP_H__,r29
 665 046c 0FBE      		out __SREG__,__tmp_reg__
 666 046e CDBF      		out __SP_L__,r28
 667 0470 CF91      		pop r28
 668 0472 DF91      		pop r29
 669 0474 1F91      		pop r17
 670 0476 0F91      		pop r16
 671 0478 FF90      		pop r15
 672 047a EF90      		pop r14
 673 047c DF90      		pop r13
 674 047e CF90      		pop r12
 675 0480 BF90      		pop r11
 676 0482 AF90      		pop r10
 677 0484 9F90      		pop r9
 678 0486 8F90      		pop r8
 679 0488 7F90      		pop r7
 680 048a 6F90      		pop r6
 681 048c 5F90      		pop r5
 682 048e 4F90      		pop r4
 683 0490 3F90      		pop r3
 684 0492 2F90      		pop r2
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 13


 685 0494 0895      		ret
 686               		.size	NutTcpReceive, .-NutTcpReceive
 687               	.global	NutTcpDeviceRead
 688               		.type	NutTcpDeviceRead, @function
 689               	NutTcpDeviceRead:
 690               	/* prologue: function */
 691               	/* frame size = 0 */
 692 0496 0E94 0000 		call NutTcpReceive
 693               	/* epilogue start */
 694 049a 0895      		ret
 695               		.size	NutTcpDeviceRead, .-NutTcpDeviceRead
 696               	.global	NutTcpSend
 697               		.type	NutTcpSend, @function
 698               	NutTcpSend:
 699 049c 8F92      		push r8
 700 049e 9F92      		push r9
 701 04a0 AF92      		push r10
 702 04a2 BF92      		push r11
 703 04a4 CF92      		push r12
 704 04a6 DF92      		push r13
 705 04a8 EF92      		push r14
 706 04aa FF92      		push r15
 707 04ac 0F93      		push r16
 708 04ae 1F93      		push r17
 709 04b0 CF93      		push r28
 710 04b2 DF93      		push r29
 711               	/* prologue: function */
 712               	/* frame size = 0 */
 713 04b4 EC01      		movw r28,r24
 714 04b6 4B01      		movw r8,r22
 715 04b8 8A01      		movw r16,r20
 716 04ba 0E94 0000 		call NutThreadYield
 717 04be 2097      		sbiw r28,0
 718 04c0 01F4      		brne .+2
 719 04c2 00C0      		rjmp .L86
 720 04c4 8114      		cp r8,__zero_reg__
 721 04c6 9104      		cpc r9,__zero_reg__
 722 04c8 01F4      		brne .+2
 723 04ca 00C0      		rjmp .L87
 724 04cc 0115      		cp r16,__zero_reg__
 725 04ce 1105      		cpc r17,__zero_reg__
 726 04d0 01F4      		brne .+2
 727 04d2 00C0      		rjmp .L88
 728 04d4 CD5A      		subi r28,lo8(-(83))
 729 04d6 DF4F      		sbci r29,hi8(-(83))
 730 04d8 8881      		ld r24,Y
 731 04da 9981      		ldd r25,Y+1
 732 04dc C355      		subi r28,lo8(-(-83))
 733 04de D040      		sbci r29,hi8(-(-83))
 734 04e0 8017      		cp r24,r16
 735 04e2 9107      		cpc r25,r17
 736 04e4 00F4      		brsh .L89
 737 04e6 8C01      		movw r16,r24
 738               	.L89:
 739 04e8 FAE3      		ldi r31,lo8(58)
 740 04ea AF2E      		mov r10,r31
 741 04ec B12C      		mov r11,__zero_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 14


 742 04ee AC0E      		add r10,r28
 743 04f0 BD1E      		adc r11,r29
 744 04f2 E3E5      		ldi r30,lo8(83)
 745 04f4 CE2E      		mov r12,r30
 746 04f6 D12C      		mov r13,__zero_reg__
 747 04f8 CC0E      		add r12,r28
 748 04fa DD1E      		adc r13,r29
 749 04fc 7BE6      		ldi r23,lo8(107)
 750 04fe E72E      		mov r14,r23
 751 0500 F12C      		mov r15,__zero_reg__
 752 0502 EC0E      		add r14,r28
 753 0504 FD1E      		adc r15,r29
 754               	.L93:
 755 0506 8B89      		ldd r24,Y+19
 756 0508 8430      		cpi r24,lo8(4)
 757 050a 01F0      		breq .L90
 758 050c CF59      		subi r28,lo8(-(97))
 759 050e DF4F      		sbci r29,hi8(-(97))
 760 0510 89E3      		ldi r24,lo8(57)
 761 0512 90E0      		ldi r25,hi8(57)
 762 0514 9983      		std Y+1,r25
 763 0516 8883      		st Y,r24
 764 0518 00C0      		rjmp .L86
 765               	.L90:
 766 051a 49A5      		ldd r20,Y+41
 767 051c 5AA5      		ldd r21,Y+42
 768 051e 8DA1      		ldd r24,Y+37
 769 0520 9EA1      		ldd r25,Y+38
 770 0522 481B      		sub r20,r24
 771 0524 590B      		sbc r21,r25
 772 0526 9A01      		movw r18,r20
 773 0528 3695      		lsr r19
 774 052a 2795      		ror r18
 775 052c 3695      		lsr r19
 776 052e 2795      		ror r18
 777 0530 F601      		movw r30,r12
 778 0532 8081      		ld r24,Z
 779 0534 9181      		ldd r25,Z+1
 780 0536 2817      		cp r18,r24
 781 0538 3907      		cpc r19,r25
 782 053a 00F4      		brsh .L91
 783 053c 8DA9      		ldd r24,Y+53
 784 053e 9EA9      		ldd r25,Y+54
 785 0540 841B      		sub r24,r20
 786 0542 950B      		sbc r25,r21
 787 0544 8017      		cp r24,r16
 788 0546 9107      		cpc r25,r17
 789 0548 00F4      		brsh .L92
 790               	.L91:
 791 054a F701      		movw r30,r14
 792 054c 4081      		ld r20,Z
 793 054e 5181      		ldd r21,Z+1
 794 0550 6281      		ldd r22,Z+2
 795 0552 7381      		ldd r23,Z+3
 796 0554 C501      		movw r24,r10
 797 0556 0E94 0000 		call NutEventWait
 798 055a 892B      		or r24,r25
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 15


 799 055c 01F0      		breq .L93
 800 055e 00C0      		rjmp .L87
 801               	.L92:
 802 0560 88A1      		ldd r24,Y+32
 803 0562 8061      		ori r24,lo8(16)
 804 0564 88A3      		std Y+32,r24
 805 0566 CE01      		movw r24,r28
 806 0568 B401      		movw r22,r8
 807 056a A801      		movw r20,r16
 808 056c 0E94 0000 		call NutTcpOutput
 809 0570 892B      		or r24,r25
 810 0572 01F0      		breq .L88
 811               	.L86:
 812 0574 0FEF      		ldi r16,lo8(-1)
 813 0576 1FEF      		ldi r17,hi8(-1)
 814 0578 00C0      		rjmp .L88
 815               	.L87:
 816 057a 00E0      		ldi r16,lo8(0)
 817 057c 10E0      		ldi r17,hi8(0)
 818               	.L88:
 819 057e C801      		movw r24,r16
 820               	/* epilogue start */
 821 0580 DF91      		pop r29
 822 0582 CF91      		pop r28
 823 0584 1F91      		pop r17
 824 0586 0F91      		pop r16
 825 0588 FF90      		pop r15
 826 058a EF90      		pop r14
 827 058c DF90      		pop r13
 828 058e CF90      		pop r12
 829 0590 BF90      		pop r11
 830 0592 AF90      		pop r10
 831 0594 9F90      		pop r9
 832 0596 8F90      		pop r8
 833 0598 0895      		ret
 834               		.size	NutTcpSend, .-NutTcpSend
 835               		.type	SendBuffer, @function
 836               	SendBuffer:
 837 059a CF92      		push r12
 838 059c DF92      		push r13
 839 059e EF92      		push r14
 840 05a0 FF92      		push r15
 841 05a2 0F93      		push r16
 842 05a4 1F93      		push r17
 843 05a6 CF93      		push r28
 844 05a8 DF93      		push r29
 845               	/* prologue: function */
 846               	/* frame size = 0 */
 847 05aa 6C01      		movw r12,r24
 848 05ac 7B01      		movw r14,r22
 849 05ae 8A01      		movw r16,r20
 850 05b0 C0E0      		ldi r28,lo8(0)
 851 05b2 D0E0      		ldi r29,hi8(0)
 852 05b4 00C0      		rjmp .L96
 853               	.L99:
 854 05b6 B701      		movw r22,r14
 855 05b8 6C0F      		add r22,r28
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 16


 856 05ba 7D1F      		adc r23,r29
 857 05bc A801      		movw r20,r16
 858 05be 4C1B      		sub r20,r28
 859 05c0 5D0B      		sbc r21,r29
 860 05c2 C601      		movw r24,r12
 861 05c4 0E94 0000 		call NutTcpSend
 862 05c8 1816      		cp __zero_reg__,r24
 863 05ca 1906      		cpc __zero_reg__,r25
 864 05cc 04F0      		brlt .L97
 865 05ce CFEF      		ldi r28,lo8(-1)
 866 05d0 DFEF      		ldi r29,hi8(-1)
 867 05d2 00C0      		rjmp .L98
 868               	.L97:
 869 05d4 C80F      		add r28,r24
 870 05d6 D91F      		adc r29,r25
 871               	.L96:
 872 05d8 C017      		cp r28,r16
 873 05da D107      		cpc r29,r17
 874 05dc 04F0      		brlt .L99
 875               	.L98:
 876 05de CE01      		movw r24,r28
 877               	/* epilogue start */
 878 05e0 DF91      		pop r29
 879 05e2 CF91      		pop r28
 880 05e4 1F91      		pop r17
 881 05e6 0F91      		pop r16
 882 05e8 FF90      		pop r15
 883 05ea EF90      		pop r14
 884 05ec DF90      		pop r13
 885 05ee CF90      		pop r12
 886 05f0 0895      		ret
 887               		.size	SendBuffer, .-SendBuffer
 888               	.global	NutTcpDeviceWrite
 889               		.type	NutTcpDeviceWrite, @function
 890               	NutTcpDeviceWrite:
 891 05f2 AF92      		push r10
 892 05f4 BF92      		push r11
 893 05f6 CF92      		push r12
 894 05f8 DF92      		push r13
 895 05fa EF92      		push r14
 896 05fc FF92      		push r15
 897 05fe 0F93      		push r16
 898 0600 1F93      		push r17
 899 0602 CF93      		push r28
 900 0604 DF93      		push r29
 901               	/* prologue: function */
 902               	/* frame size = 0 */
 903 0606 8C01      		movw r16,r24
 904 0608 E72F      		mov r30,r23
 905 060a 6A01      		movw r12,r20
 906 060c 0097      		sbiw r24,0
 907 060e 01F4      		brne .+2
 908 0610 00C0      		rjmp .L102
 909 0612 DC01      		movw r26,r24
 910 0614 5396      		adiw r26,19
 911 0616 8C91      		ld r24,X
 912 0618 8430      		cpi r24,lo8(4)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 17


 913 061a 01F0      		breq .L103
 914 061c 0F59      		subi r16,lo8(-(97))
 915 061e 1F4F      		sbci r17,hi8(-(97))
 916 0620 89E3      		ldi r24,lo8(57)
 917 0622 90E0      		ldi r25,hi8(57)
 918 0624 F801      		movw r30,r16
 919 0626 9183      		std Z+1,r25
 920 0628 8083      		st Z,r24
 921 062a 00C0      		rjmp .L102
 922               	.L103:
 923 062c D801      		movw r26,r16
 924 062e 1D96      		adiw r26,13
 925 0630 4D91      		ld r20,X+
 926 0632 5C91      		ld r21,X
 927 0634 1E97      		sbiw r26,13+1
 928 0636 C114      		cp r12,__zero_reg__
 929 0638 D104      		cpc r13,__zero_reg__
 930 063a 01F4      		brne .L105
 931 063c 4115      		cp r20,__zero_reg__
 932 063e 5105      		cpc r21,__zero_reg__
 933 0640 01F4      		brne .+2
 934 0642 00C0      		rjmp .L104
 935 0644 1F96      		adiw r26,15
 936 0646 6D91      		ld r22,X+
 937 0648 7C91      		ld r23,X
 938 064a 5097      		sbiw r26,15+1
 939 064c C801      		movw r24,r16
 940 064e 0E94 0000 		call SendBuffer
 941 0652 F801      		movw r30,r16
 942 0654 2785      		ldd r18,Z+15
 943 0656 3089      		ldd r19,Z+16
 944 0658 97FF      		sbrs r25,7
 945 065a 00C0      		rjmp .L106
 946 065c C901      		movw r24,r18
 947 065e 00C0      		rjmp .L122
 948               	.L106:
 949 0660 C901      		movw r24,r18
 950 0662 0E94 0000 		call free
 951 0666 F801      		movw r30,r16
 952 0668 1686      		std Z+14,__zero_reg__
 953 066a 1586      		std Z+13,__zero_reg__
 954 066c 00C0      		rjmp .L104
 955               	.L105:
 956 066e C62F      		mov r28,r22
 957 0670 D72F      		mov r29,r23
 958 0672 5E01      		movw r10,r28
 959 0674 D801      		movw r26,r16
 960 0676 5196      		adiw r26,17
 961 0678 6D91      		ld r22,X+
 962 067a 7C91      		ld r23,X
 963 067c 5297      		sbiw r26,17+1
 964 067e 4115      		cp r20,__zero_reg__
 965 0680 5105      		cpc r21,__zero_reg__
 966 0682 01F4      		brne .L107
 967 0684 C616      		cp r12,r22
 968 0686 D706      		cpc r13,r23
 969 0688 00F4      		brsh .L108
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 18


 970 068a E601      		movw r28,r12
 971 068c 00C0      		rjmp .L109
 972               	.L108:
 973 068e C601      		movw r24,r12
 974 0690 0E94 0000 		call __udivmodhi4
 975 0694 EC01      		movw r28,r24
 976 0696 7601      		movw r14,r12
 977 0698 E81A      		sub r14,r24
 978 069a F90A      		sbc r15,r25
 979 069c C801      		movw r24,r16
 980 069e B501      		movw r22,r10
 981 06a0 A701      		movw r20,r14
 982 06a2 0E94 0000 		call SendBuffer
 983 06a6 97FD      		sbrc r25,7
 984 06a8 00C0      		rjmp .L102
 985 06aa 2097      		sbiw r28,0
 986 06ac 01F4      		brne .+2
 987 06ae 00C0      		rjmp .L104
 988 06b0 AE0C      		add r10,r14
 989 06b2 BF1C      		adc r11,r15
 990               	.L109:
 991 06b4 F801      		movw r30,r16
 992 06b6 8189      		ldd r24,Z+17
 993 06b8 9289      		ldd r25,Z+18
 994 06ba 0E94 0000 		call malloc
 995 06be D801      		movw r26,r16
 996 06c0 5096      		adiw r26,15+1
 997 06c2 9C93      		st X,r25
 998 06c4 8E93      		st -X,r24
 999 06c6 1F97      		sbiw r26,15
 1000 06c8 0097      		sbiw r24,0
 1001 06ca 01F4      		brne .+2
 1002 06cc 00C0      		rjmp .L102
 1003 06ce B501      		movw r22,r10
 1004 06d0 AE01      		movw r20,r28
 1005 06d2 0E94 0000 		call memcpy
 1006 06d6 F801      		movw r30,r16
 1007 06d8 C587      		std Z+13,r28
 1008 06da D687      		std Z+14,r29
 1009 06dc 00C0      		rjmp .L104
 1010               	.L107:
 1011 06de C601      		movw r24,r12
 1012 06e0 840F      		add r24,r20
 1013 06e2 951F      		adc r25,r21
 1014 06e4 D801      		movw r26,r16
 1015 06e6 1F96      		adiw r26,15
 1016 06e8 2D91      		ld r18,X+
 1017 06ea 3C91      		ld r19,X
 1018 06ec 5097      		sbiw r26,15+1
 1019 06ee 8617      		cp r24,r22
 1020 06f0 9707      		cpc r25,r23
 1021 06f2 00F4      		brsh .L111
 1022 06f4 240F      		add r18,r20
 1023 06f6 351F      		adc r19,r21
 1024 06f8 C901      		movw r24,r18
 1025 06fa 6C2F      		mov r22,r28
 1026 06fc 7E2F      		mov r23,r30
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 19


 1027 06fe A601      		movw r20,r12
 1028 0700 0E94 0000 		call memcpy
 1029 0704 F801      		movw r30,r16
 1030 0706 8585      		ldd r24,Z+13
 1031 0708 9685      		ldd r25,Z+14
 1032 070a 8C0D      		add r24,r12
 1033 070c 9D1D      		adc r25,r13
 1034 070e 9687      		std Z+14,r25
 1035 0710 8587      		std Z+13,r24
 1036 0712 00C0      		rjmp .L104
 1037               	.L111:
 1038 0714 7B01      		movw r14,r22
 1039 0716 E41A      		sub r14,r20
 1040 0718 F50A      		sbc r15,r21
 1041 071a 240F      		add r18,r20
 1042 071c 351F      		adc r19,r21
 1043 071e C901      		movw r24,r18
 1044 0720 6C2F      		mov r22,r28
 1045 0722 7E2F      		mov r23,r30
 1046 0724 A701      		movw r20,r14
 1047 0726 0E94 0000 		call memcpy
 1048 072a D801      		movw r26,r16
 1049 072c 1F96      		adiw r26,15
 1050 072e 6D91      		ld r22,X+
 1051 0730 7C91      		ld r23,X
 1052 0732 5097      		sbiw r26,15+1
 1053 0734 5196      		adiw r26,17
 1054 0736 4D91      		ld r20,X+
 1055 0738 5C91      		ld r21,X
 1056 073a 5297      		sbiw r26,17+1
 1057 073c C801      		movw r24,r16
 1058 073e 0E94 0000 		call SendBuffer
 1059 0742 97FF      		sbrs r25,7
 1060 0744 00C0      		rjmp .L114
 1061 0746 F801      		movw r30,r16
 1062 0748 8785      		ldd r24,Z+15
 1063 074a 9089      		ldd r25,Z+16
 1064               	.L122:
 1065 074c 0E94 0000 		call free
 1066 0750 D801      		movw r26,r16
 1067 0752 1E96      		adiw r26,13+1
 1068 0754 1C92      		st X,__zero_reg__
 1069 0756 1E92      		st -X,__zero_reg__
 1070 0758 1D97      		sbiw r26,13
 1071 075a 00C0      		rjmp .L102
 1072               	.L114:
 1073 075c 5E01      		movw r10,r28
 1074 075e AE0C      		add r10,r14
 1075 0760 BF1C      		adc r11,r15
 1076 0762 9601      		movw r18,r12
 1077 0764 2E19      		sub r18,r14
 1078 0766 3F09      		sbc r19,r15
 1079 0768 F801      		movw r30,r16
 1080 076a 6189      		ldd r22,Z+17
 1081 076c 7289      		ldd r23,Z+18
 1082 076e 2617      		cp r18,r22
 1083 0770 3707      		cpc r19,r23
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 20


 1084 0772 00F0      		brlo .L115
 1085 0774 C601      		movw r24,r12
 1086 0776 0E94 0000 		call __udivmodhi4
 1087 077a EC01      		movw r28,r24
 1088 077c 7901      		movw r14,r18
 1089 077e E81A      		sub r14,r24
 1090 0780 F90A      		sbc r15,r25
 1091 0782 C801      		movw r24,r16
 1092 0784 B501      		movw r22,r10
 1093 0786 A701      		movw r20,r14
 1094 0788 0E94 0000 		call SendBuffer
 1095 078c 97FF      		sbrs r25,7
 1096 078e 00C0      		rjmp .L116
 1097 0790 D801      		movw r26,r16
 1098 0792 1F96      		adiw r26,15
 1099 0794 8D91      		ld r24,X+
 1100 0796 9C91      		ld r25,X
 1101 0798 5097      		sbiw r26,15+1
 1102 079a 0E94 0000 		call free
 1103 079e F801      		movw r30,r16
 1104 07a0 1686      		std Z+14,__zero_reg__
 1105 07a2 1586      		std Z+13,__zero_reg__
 1106 07a4 00C0      		rjmp .L102
 1107               	.L116:
 1108 07a6 AE0C      		add r10,r14
 1109 07a8 BF1C      		adc r11,r15
 1110 07aa 00C0      		rjmp .L117
 1111               	.L115:
 1112 07ac E901      		movw r28,r18
 1113               	.L117:
 1114 07ae 2097      		sbiw r28,0
 1115 07b0 01F0      		breq .L118
 1116 07b2 D801      		movw r26,r16
 1117 07b4 1F96      		adiw r26,15
 1118 07b6 8C91      		ld r24,X
 1119 07b8 1F97      		sbiw r26,15
 1120 07ba 5096      		adiw r26,16
 1121 07bc 9C91      		ld r25,X
 1122 07be B501      		movw r22,r10
 1123 07c0 AE01      		movw r20,r28
 1124 07c2 0E94 0000 		call memcpy
 1125 07c6 00C0      		rjmp .L120
 1126               	.L118:
 1127 07c8 F801      		movw r30,r16
 1128 07ca 8785      		ldd r24,Z+15
 1129 07cc 9089      		ldd r25,Z+16
 1130 07ce 0E94 0000 		call free
 1131               	.L120:
 1132 07d2 D801      		movw r26,r16
 1133 07d4 1E96      		adiw r26,13+1
 1134 07d6 DC93      		st X,r29
 1135 07d8 CE93      		st -X,r28
 1136 07da 1D97      		sbiw r26,13
 1137 07dc 00C0      		rjmp .L104
 1138               	.L102:
 1139 07de CC24      		clr r12
 1140 07e0 CA94      		dec r12
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 21


 1141 07e2 DC2C      		mov r13,r12
 1142               	.L104:
 1143 07e4 C601      		movw r24,r12
 1144               	/* epilogue start */
 1145 07e6 DF91      		pop r29
 1146 07e8 CF91      		pop r28
 1147 07ea 1F91      		pop r17
 1148 07ec 0F91      		pop r16
 1149 07ee FF90      		pop r15
 1150 07f0 EF90      		pop r14
 1151 07f2 DF90      		pop r13
 1152 07f4 CF90      		pop r12
 1153 07f6 BF90      		pop r11
 1154 07f8 AF90      		pop r10
 1155 07fa 0895      		ret
 1156               		.size	NutTcpDeviceWrite, .-NutTcpDeviceWrite
 1157               	.global	NutTcpDeviceWrite_P
 1158               		.type	NutTcpDeviceWrite_P, @function
 1159               	NutTcpDeviceWrite_P:
 1160 07fc CF92      		push r12
 1161 07fe DF92      		push r13
 1162 0800 EF92      		push r14
 1163 0802 FF92      		push r15
 1164 0804 0F93      		push r16
 1165 0806 1F93      		push r17
 1166 0808 CF93      		push r28
 1167 080a DF93      		push r29
 1168               	/* prologue: function */
 1169               	/* frame size = 0 */
 1170 080c 6C01      		movw r12,r24
 1171 080e 7B01      		movw r14,r22
 1172 0810 8A01      		movw r16,r20
 1173 0812 4115      		cp r20,__zero_reg__
 1174 0814 5105      		cpc r21,__zero_reg__
 1175 0816 01F4      		brne .L124
 1176 0818 C0E0      		ldi r28,lo8(0)
 1177 081a D0E0      		ldi r29,hi8(0)
 1178 081c 00C0      		rjmp .L125
 1179               	.L124:
 1180 081e 80E0      		ldi r24,lo8(heapFreeList)
 1181 0820 90E0      		ldi r25,hi8(heapFreeList)
 1182 0822 BA01      		movw r22,r20
 1183 0824 0E94 0000 		call NutHeapRootAlloc
 1184 0828 EC01      		movw r28,r24
 1185 082a 0097      		sbiw r24,0
 1186 082c 01F0      		breq .L125
 1187 082e B701      		movw r22,r14
 1188 0830 A801      		movw r20,r16
 1189 0832 0E94 0000 		call memcpy_P
 1190               	.L125:
 1191 0836 C601      		movw r24,r12
 1192 0838 BE01      		movw r22,r28
 1193 083a A801      		movw r20,r16
 1194 083c 0E94 0000 		call NutTcpDeviceWrite
 1195 0840 182F      		mov r17,r24
 1196 0842 092F      		mov r16,r25
 1197 0844 2097      		sbiw r28,0
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 22


 1198 0846 01F0      		breq .L126
 1199 0848 80E0      		ldi r24,lo8(heapFreeList)
 1200 084a 90E0      		ldi r25,hi8(heapFreeList)
 1201 084c BE01      		movw r22,r28
 1202 084e 0E94 0000 		call NutHeapRootFree
 1203               	.L126:
 1204 0852 812F      		mov r24,r17
 1205 0854 902F      		mov r25,r16
 1206               	/* epilogue start */
 1207 0856 DF91      		pop r29
 1208 0858 CF91      		pop r28
 1209 085a 1F91      		pop r17
 1210 085c 0F91      		pop r16
 1211 085e FF90      		pop r15
 1212 0860 EF90      		pop r14
 1213 0862 DF90      		pop r13
 1214 0864 CF90      		pop r12
 1215 0866 0895      		ret
 1216               		.size	NutTcpDeviceWrite_P, .-NutTcpDeviceWrite_P
 1217               	.global	NutTcpCloseSocket
 1218               		.type	NutTcpCloseSocket, @function
 1219               	NutTcpCloseSocket:
 1220 0868 0F93      		push r16
 1221 086a 1F93      		push r17
 1222               	/* prologue: function */
 1223               	/* frame size = 0 */
 1224 086c 8C01      		movw r16,r24
 1225 086e 60E0      		ldi r22,lo8(0)
 1226 0870 70E0      		ldi r23,hi8(0)
 1227 0872 40E0      		ldi r20,lo8(0)
 1228 0874 50E0      		ldi r21,hi8(0)
 1229 0876 0E94 0000 		call NutTcpDeviceWrite
 1230 087a C801      		movw r24,r16
 1231 087c 0E94 0000 		call NutTcpStateCloseEvent
 1232               	/* epilogue start */
 1233 0880 1F91      		pop r17
 1234 0882 0F91      		pop r16
 1235 0884 0895      		ret
 1236               		.size	NutTcpCloseSocket, .-NutTcpCloseSocket
 1237               	.global	NutTcpSetSockOpt
 1238               		.type	NutTcpSetSockOpt, @function
 1239               	NutTcpSetSockOpt:
 1240 0886 0F93      		push r16
 1241 0888 1F93      		push r17
 1242 088a CF93      		push r28
 1243 088c DF93      		push r29
 1244               	/* prologue: function */
 1245               	/* frame size = 0 */
 1246 088e EC01      		movw r28,r24
 1247 0890 8A01      		movw r16,r20
 1248 0892 0097      		sbiw r24,0
 1249 0894 01F4      		brne .+2
 1250 0896 00C0      		rjmp .L153
 1251               	.L131:
 1252 0898 80E1      		ldi r24,hi8(4098)
 1253 089a 6230      		cpi r22,lo8(4098)
 1254 089c 7807      		cpc r23,r24
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 23


 1255 089e 01F0      		breq .L136
 1256 08a0 E0E1      		ldi r30,hi8(4099)
 1257 08a2 6330      		cpi r22,lo8(4099)
 1258 08a4 7E07      		cpc r23,r30
 1259 08a6 04F4      		brge .L139
 1260 08a8 6230      		cpi r22,2
 1261 08aa 7105      		cpc r23,__zero_reg__
 1262 08ac 01F0      		breq .L134
 1263 08ae 6150      		subi r22,lo8(4097)
 1264 08b0 7041      		sbci r23,hi8(4097)
 1265 08b2 01F0      		breq .+2
 1266 08b4 00C0      		rjmp .L133
 1267 08b6 00C0      		rjmp .L157
 1268               	.L139:
 1269 08b8 80E1      		ldi r24,hi8(4101)
 1270 08ba 6530      		cpi r22,lo8(4101)
 1271 08bc 7807      		cpc r23,r24
 1272 08be 01F0      		breq .L137
 1273 08c0 6650      		subi r22,lo8(4102)
 1274 08c2 7041      		sbci r23,hi8(4102)
 1275 08c4 01F0      		breq .+2
 1276 08c6 00C0      		rjmp .L133
 1277 08c8 00C0      		rjmp .L158
 1278               	.L134:
 1279 08ca 4115      		cp r20,__zero_reg__
 1280 08cc 5105      		cpc r21,__zero_reg__
 1281 08ce 01F4      		brne .+2
 1282 08d0 00C0      		rjmp .L149
 1283 08d2 2230      		cpi r18,2
 1284 08d4 3105      		cpc r19,__zero_reg__
 1285 08d6 01F0      		breq .+2
 1286 08d8 00C0      		rjmp .L149
 1287               	.L141:
 1288 08da 8B89      		ldd r24,Y+19
 1289 08dc 8823      		tst r24
 1290 08de 01F0      		breq .L142
 1291 08e0 CF59      		subi r28,lo8(-(97))
 1292 08e2 DF4F      		sbci r29,hi8(-(97))
 1293 08e4 88E3      		ldi r24,lo8(56)
 1294 08e6 90E0      		ldi r25,hi8(56)
 1295 08e8 00C0      		rjmp .L152
 1296               	.L142:
 1297 08ea CD5A      		subi r28,lo8(-(83))
 1298 08ec DF4F      		sbci r29,hi8(-(83))
 1299 08ee FA01      		movw r30,r20
 1300 08f0 8081      		ld r24,Z
 1301 08f2 9181      		ldd r25,Z+1
 1302 08f4 00C0      		rjmp .L155
 1303               	.L136:
 1304 08f6 4115      		cp r20,__zero_reg__
 1305 08f8 5105      		cpc r21,__zero_reg__
 1306 08fa 01F0      		breq .L149
 1307 08fc 2230      		cpi r18,2
 1308 08fe 3105      		cpc r19,__zero_reg__
 1309 0900 01F4      		brne .L149
 1310               	.L144:
 1311 0902 FA01      		movw r30,r20
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 24


 1312 0904 8081      		ld r24,Z
 1313 0906 9181      		ldd r25,Z+1
 1314 0908 C85B      		subi r28,lo8(-(72))
 1315 090a DF4F      		sbci r29,hi8(-(72))
 1316 090c 9983      		std Y+1,r25
 1317 090e 8883      		st Y,r24
 1318 0910 2497      		sbiw r28,4
 1319               	.L155:
 1320 0912 9983      		std Y+1,r25
 1321 0914 8883      		st Y,r24
 1322 0916 00C0      		rjmp .L154
 1323               	.L137:
 1324 0918 4115      		cp r20,__zero_reg__
 1325 091a 5105      		cpc r21,__zero_reg__
 1326 091c 01F0      		breq .L149
 1327 091e 2430      		cpi r18,4
 1328 0920 3105      		cpc r19,__zero_reg__
 1329 0922 01F4      		brne .L149
 1330               	.L146:
 1331 0924 C559      		subi r28,lo8(-(107))
 1332 0926 DF4F      		sbci r29,hi8(-(107))
 1333 0928 00C0      		rjmp .L156
 1334               	.L158:
 1335 092a 4115      		cp r20,__zero_reg__
 1336 092c 5105      		cpc r21,__zero_reg__
 1337 092e 01F0      		breq .L149
 1338 0930 2430      		cpi r18,4
 1339 0932 3105      		cpc r19,__zero_reg__
 1340 0934 01F4      		brne .L149
 1341               	.L148:
 1342 0936 C959      		subi r28,lo8(-(103))
 1343 0938 DF4F      		sbci r29,hi8(-(103))
 1344               	.L156:
 1345 093a F801      		movw r30,r16
 1346 093c 8081      		ld r24,Z
 1347 093e 9181      		ldd r25,Z+1
 1348 0940 A281      		ldd r26,Z+2
 1349 0942 B381      		ldd r27,Z+3
 1350 0944 8883      		st Y,r24
 1351 0946 9983      		std Y+1,r25
 1352 0948 AA83      		std Y+2,r26
 1353 094a BB83      		std Y+3,r27
 1354 094c 00C0      		rjmp .L154
 1355               	.L157:
 1356 094e 4115      		cp r20,__zero_reg__
 1357 0950 5105      		cpc r21,__zero_reg__
 1358 0952 01F0      		breq .L149
 1359 0954 2230      		cpi r18,2
 1360 0956 3105      		cpc r19,__zero_reg__
 1361 0958 01F0      		breq .L150
 1362               	.L149:
 1363 095a CF59      		subi r28,lo8(-(97))
 1364 095c DF4F      		sbci r29,hi8(-(97))
 1365 095e 86E1      		ldi r24,lo8(22)
 1366 0960 90E0      		ldi r25,hi8(22)
 1367 0962 00C0      		rjmp .L152
 1368               	.L150:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 25


 1369 0964 CE01      		movw r24,r28
 1370 0966 60E0      		ldi r22,lo8(0)
 1371 0968 70E0      		ldi r23,hi8(0)
 1372 096a 40E0      		ldi r20,lo8(0)
 1373 096c 50E0      		ldi r21,hi8(0)
 1374 096e 0E94 0000 		call NutTcpDeviceWrite
 1375 0972 F801      		movw r30,r16
 1376 0974 8081      		ld r24,Z
 1377 0976 9181      		ldd r25,Z+1
 1378 0978 9A8B      		std Y+18,r25
 1379 097a 898B      		std Y+17,r24
 1380               	.L154:
 1381 097c 20E0      		ldi r18,lo8(0)
 1382 097e 30E0      		ldi r19,hi8(0)
 1383 0980 00C0      		rjmp .L132
 1384               	.L133:
 1385 0982 CF59      		subi r28,lo8(-(97))
 1386 0984 DF4F      		sbci r29,hi8(-(97))
 1387 0986 8AE2      		ldi r24,lo8(42)
 1388 0988 90E0      		ldi r25,hi8(42)
 1389               	.L152:
 1390 098a 9983      		std Y+1,r25
 1391 098c 8883      		st Y,r24
 1392               	.L153:
 1393 098e 2FEF      		ldi r18,lo8(-1)
 1394 0990 3FEF      		ldi r19,hi8(-1)
 1395               	.L132:
 1396 0992 C901      		movw r24,r18
 1397               	/* epilogue start */
 1398 0994 DF91      		pop r29
 1399 0996 CF91      		pop r28
 1400 0998 1F91      		pop r17
 1401 099a 0F91      		pop r16
 1402 099c 0895      		ret
 1403               		.size	NutTcpSetSockOpt, .-NutTcpSetSockOpt
 1404               	.global	NutTcpAccept
 1405               		.type	NutTcpAccept, @function
 1406               	NutTcpAccept:
 1407               	/* prologue: function */
 1408               	/* frame size = 0 */
 1409 099e FC01      		movw r30,r24
 1410               	/* #APP */
 1411               	 ;  305 "../../nut/include/sys/types.h" 1
 1412 09a0 062E      		mov __tmp_reg__, r22
 1413 09a2 672F      		mov r22, r23
 1414 09a4 702D      		mov r23, __tmp_reg__
 1415               		
 1416               	 ;  0 "" 2
 1417               	/* #NOAPP */
 1418 09a6 718F      		std Z+25,r23
 1419 09a8 608F      		std Z+24,r22
 1420 09aa 0E94 0000 		call NutTcpStatePassiveOpenEvent
 1421               	/* epilogue start */
 1422 09ae 0895      		ret
 1423               		.size	NutTcpAccept, .-NutTcpAccept
 1424               	.global	NutTcpConnect
 1425               		.type	NutTcpConnect, @function
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 26


 1426               	NutTcpConnect:
 1427 09b0 EF92      		push r14
 1428 09b2 FF92      		push r15
 1429 09b4 0F93      		push r16
 1430 09b6 1F93      		push r17
 1431 09b8 CF93      		push r28
 1432 09ba DF93      		push r29
 1433               	/* prologue: function */
 1434               	/* frame size = 0 */
 1435 09bc EC01      		movw r28,r24
 1436 09be D901      		movw r26,r18
 1437 09c0 0097      		sbiw r24,0
 1438 09c2 01F4      		brne .+2
 1439 09c4 00C0      		rjmp .L178
 1440               	.L162:
 1441 09c6 8B89      		ldd r24,Y+19
 1442 09c8 8130      		cpi r24,lo8(1)
 1443 09ca 01F4      		brne .L164
 1444 09cc CF59      		subi r28,lo8(-(97))
 1445 09ce DF4F      		sbci r29,hi8(-(97))
 1446 09d0 8DE2      		ldi r24,lo8(45)
 1447 09d2 90E0      		ldi r25,hi8(45)
 1448 09d4 00C0      		rjmp .L177
 1449               	.L164:
 1450 09d6 8B89      		ldd r24,Y+19
 1451 09d8 8823      		tst r24
 1452 09da 01F0      		breq .L165
 1453 09dc CF59      		subi r28,lo8(-(97))
 1454 09de DF4F      		sbci r29,hi8(-(97))
 1455 09e0 88E3      		ldi r24,lo8(56)
 1456 09e2 90E0      		ldi r25,hi8(56)
 1457 09e4 00C0      		rjmp .L177
 1458               	.L165:
 1459 09e6 E090 0000 		lds r14,tcpSocketList
 1460 09ea F090 0000 		lds r15,tcpSocketList+1
 1461 09ee 00E0      		ldi r16,lo8(4096)
 1462 09f0 10E1      		ldi r17,hi8(4096)
 1463               	.L168:
 1464 09f2 8091 0000 		lds r24,last_local_port
 1465 09f6 9091 0000 		lds r25,(last_local_port)+1
 1466 09fa 0196      		adiw r24,1
 1467 09fc 9093 0000 		sts (last_local_port)+1,r25
 1468 0a00 8093 0000 		sts last_local_port,r24
 1469 0a04 8091 0000 		lds r24,last_local_port
 1470 0a08 9091 0000 		lds r25,(last_local_port)+1
 1471 0a0c 892B      		or r24,r25
 1472 0a0e 01F4      		brne .L166
 1473 0a10 1093 0000 		sts (last_local_port)+1,r17
 1474 0a14 0093 0000 		sts last_local_port,r16
 1475               	.L166:
 1476 0a18 F701      		movw r30,r14
 1477 0a1a 00C0      		rjmp .L167
 1478               	.L169:
 1479 0a1c 8091 0000 		lds r24,last_local_port
 1480 0a20 9091 0000 		lds r25,(last_local_port)+1
 1481               	/* #APP */
 1482               	 ;  305 "../../nut/include/sys/types.h" 1
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 27


 1483 0a24 082E      		mov __tmp_reg__, r24
 1484 0a26 892F      		mov r24, r25
 1485 0a28 902D      		mov r25, __tmp_reg__
 1486               		
 1487               	 ;  0 "" 2
 1488               	/* #NOAPP */
 1489 0a2a 208D      		ldd r18,Z+24
 1490 0a2c 318D      		ldd r19,Z+25
 1491 0a2e 2817      		cp r18,r24
 1492 0a30 3907      		cpc r19,r25
 1493 0a32 01F0      		breq .L168
 1494 0a34 0190      		ld __tmp_reg__,Z+
 1495 0a36 F081      		ld r31,Z
 1496 0a38 E02D      		mov r30,__tmp_reg__
 1497               	.L167:
 1498 0a3a 3097      		sbiw r30,0
 1499 0a3c 01F4      		brne .L169
 1500 0a3e 00C0      		rjmp .L179
 1501               	.L171:
 1502 0a40 0784      		ldd __tmp_reg__,Z+15
 1503 0a42 F089      		ldd r31,Z+16
 1504 0a44 E02D      		mov r30,__tmp_reg__
 1505 0a46 8385      		ldd r24,Z+11
 1506 0a48 9485      		ldd r25,Z+12
 1507 0a4a A585      		ldd r26,Z+13
 1508 0a4c B685      		ldd r27,Z+14
 1509 0a4e 8C8B      		std Y+20,r24
 1510 0a50 9D8B      		std Y+21,r25
 1511 0a52 AE8B      		std Y+22,r26
 1512 0a54 BF8B      		std Y+23,r27
 1513 0a56 CE01      		movw r24,r28
 1514 0a58 0E94 0000 		call NutTcpStateActiveOpenEvent
 1515 0a5c 9C01      		movw r18,r24
 1516 0a5e 00C0      		rjmp .L163
 1517               	.L180:
 1518 0a60 CF59      		subi r28,lo8(-(97))
 1519 0a62 DF4F      		sbci r29,hi8(-(97))
 1520 0a64 81E4      		ldi r24,lo8(65)
 1521 0a66 90E0      		ldi r25,hi8(65)
 1522               	.L177:
 1523 0a68 9983      		std Y+1,r25
 1524 0a6a 8883      		st Y,r24
 1525               	.L178:
 1526 0a6c 2FEF      		ldi r18,lo8(-1)
 1527 0a6e 3FEF      		ldi r19,hi8(-1)
 1528               	.L163:
 1529 0a70 C901      		movw r24,r18
 1530               	/* epilogue start */
 1531 0a72 DF91      		pop r29
 1532 0a74 CF91      		pop r28
 1533 0a76 1F91      		pop r17
 1534 0a78 0F91      		pop r16
 1535 0a7a FF90      		pop r15
 1536 0a7c EF90      		pop r14
 1537 0a7e 0895      		ret
 1538               	.L179:
 1539 0a80 8091 0000 		lds r24,last_local_port
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 28


 1540 0a84 9091 0000 		lds r25,(last_local_port)+1
 1541               	/* #APP */
 1542               	 ;  305 "../../nut/include/sys/types.h" 1
 1543 0a88 082E      		mov __tmp_reg__, r24
 1544 0a8a 892F      		mov r24, r25
 1545 0a8c 902D      		mov r25, __tmp_reg__
 1546               		
 1547               	 ;  0 "" 2
 1548               	/* #NOAPP */
 1549 0a8e 998F      		std Y+25,r25
 1550 0a90 888F      		std Y+24,r24
 1551               	/* #APP */
 1552               	 ;  305 "../../nut/include/sys/types.h" 1
 1553 0a92 0A2E      		mov __tmp_reg__, r26
 1554 0a94 AB2F      		mov r26, r27
 1555 0a96 B02D      		mov r27, __tmp_reg__
 1556               		
 1557               	 ;  0 "" 2
 1558               	/* #NOAPP */
 1559 0a98 BF8F      		std Y+31,r27
 1560 0a9a AE8F      		std Y+30,r26
 1561 0a9c 4A8F      		std Y+26,r20
 1562 0a9e 5B8F      		std Y+27,r21
 1563 0aa0 6C8F      		std Y+28,r22
 1564 0aa2 7D8F      		std Y+29,r23
 1565 0aa4 CB01      		movw r24,r22
 1566 0aa6 BA01      		movw r22,r20
 1567 0aa8 40E0      		ldi r20,lo8(0)
 1568 0aaa 50E0      		ldi r21,hi8(0)
 1569 0aac 0E94 0000 		call NutIpRouteQuery
 1570 0ab0 FC01      		movw r30,r24
 1571 0ab2 0097      		sbiw r24,0
 1572 0ab4 01F0      		breq .+2
 1573 0ab6 00C0      		rjmp .L171
 1574 0ab8 00C0      		rjmp .L180
 1575               		.size	NutTcpConnect, .-NutTcpConnect
 1576               	.global	NutTcpCreateSocket
 1577               		.type	NutTcpCreateSocket, @function
 1578               	NutTcpCreateSocket:
 1579 0aba 0F93      		push r16
 1580 0abc 1F93      		push r17
 1581 0abe CF93      		push r28
 1582 0ac0 DF93      		push r29
 1583               	/* prologue: function */
 1584               	/* frame size = 0 */
 1585 0ac2 8091 0000 		lds r24,registered
 1586 0ac6 8823      		tst r24
 1587 0ac8 01F4      		brne .L182
 1588 0aca 86E0      		ldi r24,lo8(6)
 1589 0acc 60E0      		ldi r22,lo8(gs(NutTcpInput))
 1590 0ace 70E0      		ldi r23,hi8(gs(NutTcpInput))
 1591 0ad0 0E94 0000 		call NutRegisterIpHandler
 1592 0ad4 892B      		or r24,r25
 1593 0ad6 01F0      		breq .+2
 1594 0ad8 00C0      		rjmp .L183
 1595 0ada 0E94 0000 		call NutTcpInitStateMachine
 1596 0ade 892B      		or r24,r25
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 29


 1597 0ae0 01F0      		breq .+2
 1598 0ae2 00C0      		rjmp .L183
 1599 0ae4 81E0      		ldi r24,lo8(1)
 1600 0ae6 8093 0000 		sts registered,r24
 1601               	.L182:
 1602 0aea 81E0      		ldi r24,lo8(1)
 1603 0aec 90E0      		ldi r25,hi8(1)
 1604 0aee 63E7      		ldi r22,lo8(115)
 1605 0af0 70E0      		ldi r23,hi8(115)
 1606 0af2 0E94 0000 		call calloc
 1607 0af6 EC01      		movw r28,r24
 1608 0af8 8C01      		movw r16,r24
 1609 0afa 0097      		sbiw r24,0
 1610 0afc 01F4      		brne .+2
 1611 0afe 00C0      		rjmp .L184
 1612 0b00 1B8A      		std Y+19,__zero_reg__
 1613 0b02 84E0      		ldi r24,lo8(4)
 1614 0b04 8C83      		std Y+4,r24
 1615 0b06 80E0      		ldi r24,lo8(gs(NutTcpDeviceRead))
 1616 0b08 90E0      		ldi r25,hi8(gs(NutTcpDeviceRead))
 1617 0b0a 9E83      		std Y+6,r25
 1618 0b0c 8D83      		std Y+5,r24
 1619 0b0e 80E0      		ldi r24,lo8(gs(NutTcpDeviceWrite))
 1620 0b10 90E0      		ldi r25,hi8(gs(NutTcpDeviceWrite))
 1621 0b12 9887      		std Y+8,r25
 1622 0b14 8F83      		std Y+7,r24
 1623 0b16 80E0      		ldi r24,lo8(gs(NutTcpDeviceWrite_P))
 1624 0b18 90E0      		ldi r25,hi8(gs(NutTcpDeviceWrite_P))
 1625 0b1a 9A87      		std Y+10,r25
 1626 0b1c 8987      		std Y+9,r24
 1627 0b1e 80E0      		ldi r24,lo8(gs(NutTcpDeviceIOCtl))
 1628 0b20 90E0      		ldi r25,hi8(gs(NutTcpDeviceIOCtl))
 1629 0b22 9C87      		std Y+12,r25
 1630 0b24 8B87      		std Y+11,r24
 1631 0b26 0E94 0000 		call NutGetTickCount
 1632 0b2a 69A3      		std Y+33,r22
 1633 0b2c 7AA3      		std Y+34,r23
 1634 0b2e 8BA3      		std Y+35,r24
 1635 0b30 9CA3      		std Y+36,r25
 1636 0b32 6DA3      		std Y+37,r22
 1637 0b34 7EA3      		std Y+38,r23
 1638 0b36 8FA3      		std Y+39,r24
 1639 0b38 98A7      		std Y+40,r25
 1640 0b3a 69A7      		std Y+41,r22
 1641 0b3c 7AA7      		std Y+42,r23
 1642 0b3e 8BA7      		std Y+43,r24
 1643 0b40 9CA7      		std Y+44,r25
 1644 0b42 0C5B      		subi r16,lo8(-(68))
 1645 0b44 1F4F      		sbci r17,hi8(-(68))
 1646 0b46 80E9      		ldi r24,lo8(3216)
 1647 0b48 9CE0      		ldi r25,hi8(3216)
 1648 0b4a F801      		movw r30,r16
 1649 0b4c 9183      		std Z+1,r25
 1650 0b4e 8083      		st Z,r24
 1651 0b50 0C5F      		subi r16,lo8(-(4))
 1652 0b52 1F4F      		sbci r17,hi8(-(4))
 1653 0b54 F801      		movw r30,r16
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 30


 1654 0b56 9183      		std Z+1,r25
 1655 0b58 8083      		st Z,r24
 1656 0b5a 055F      		subi r16,lo8(-(11))
 1657 0b5c 1F4F      		sbci r17,hi8(-(11))
 1658 0b5e 28E1      		ldi r18,lo8(536)
 1659 0b60 32E0      		ldi r19,hi8(536)
 1660 0b62 F801      		movw r30,r16
 1661 0b64 3183      		std Z+1,r19
 1662 0b66 2083      		st Z,r18
 1663 0b68 0A5F      		subi r16,lo8(-(6))
 1664 0b6a 1F4F      		sbci r17,hi8(-(6))
 1665 0b6c 88EE      		ldi r24,lo8(1000)
 1666 0b6e 93E0      		ldi r25,hi8(1000)
 1667 0b70 F801      		movw r30,r16
 1668 0b72 9183      		std Z+1,r25
 1669 0b74 8083      		st Z,r24
 1670 0b76 0955      		subi r16,lo8(-(-89))
 1671 0b78 1040      		sbci r17,hi8(-(-89))
 1672 0b7a 8091 0000 		lds r24,tcpSocketList
 1673 0b7e 9091 0000 		lds r25,(tcpSocketList)+1
 1674 0b82 9983      		std Y+1,r25
 1675 0b84 8883      		st Y,r24
 1676 0b86 3A8B      		std Y+18,r19
 1677 0b88 298B      		std Y+17,r18
 1678 0b8a 1093 0000 		sts (tcpSocketList)+1,r17
 1679 0b8e 0093 0000 		sts tcpSocketList,r16
 1680 0b92 00C0      		rjmp .L184
 1681               	.L183:
 1682 0b94 00E0      		ldi r16,lo8(0)
 1683 0b96 10E0      		ldi r17,hi8(0)
 1684               	.L184:
 1685 0b98 C801      		movw r24,r16
 1686               	/* epilogue start */
 1687 0b9a DF91      		pop r29
 1688 0b9c CF91      		pop r28
 1689 0b9e 1F91      		pop r17
 1690 0ba0 0F91      		pop r16
 1691 0ba2 0895      		ret
 1692               		.size	NutTcpCreateSocket, .-NutTcpCreateSocket
 1693               	.global	NutTcpDestroySocket
 1694               		.type	NutTcpDestroySocket, @function
 1695               	NutTcpDestroySocket:
 1696 0ba4 CF93      		push r28
 1697 0ba6 DF93      		push r29
 1698               	/* prologue: function */
 1699               	/* frame size = 0 */
 1700 0ba8 EC01      		movw r28,r24
 1701 0baa E091 0000 		lds r30,tcpSocketList
 1702 0bae F091 0000 		lds r31,(tcpSocketList)+1
 1703 0bb2 A0E0      		ldi r26,lo8(tcpSocketList)
 1704 0bb4 B0E0      		ldi r27,hi8(tcpSocketList)
 1705 0bb6 00C0      		rjmp .L187
 1706               	.L191:
 1707 0bb8 EC17      		cp r30,r28
 1708 0bba FD07      		cpc r31,r29
 1709 0bbc 01F4      		brne .L188
 1710 0bbe 8881      		ld r24,Y
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 31


 1711 0bc0 9981      		ldd r25,Y+1
 1712 0bc2 1196      		adiw r26,1
 1713 0bc4 9C93      		st X,r25
 1714 0bc6 8E93      		st -X,r24
 1715 0bc8 CE01      		movw r24,r28
 1716 0bca 0E94 0000 		call NutTcpDiscardBuffers
 1717 0bce 8D85      		ldd r24,Y+13
 1718 0bd0 9E85      		ldd r25,Y+14
 1719 0bd2 892B      		or r24,r25
 1720 0bd4 01F0      		breq .L190
 1721 0bd6 00C0      		rjmp .L194
 1722               	.L188:
 1723 0bd8 DF01      		movw r26,r30
 1724 0bda 0190      		ld __tmp_reg__,Z+
 1725 0bdc F081      		ld r31,Z
 1726 0bde E02D      		mov r30,__tmp_reg__
 1727               	.L187:
 1728 0be0 3097      		sbiw r30,0
 1729 0be2 01F4      		brne .L191
 1730 0be4 00C0      		rjmp .L193
 1731               	.L194:
 1732 0be6 8F85      		ldd r24,Y+15
 1733 0be8 9889      		ldd r25,Y+16
 1734 0bea 0E94 0000 		call free
 1735 0bee 1E86      		std Y+14,__zero_reg__
 1736 0bf0 1D86      		std Y+13,__zero_reg__
 1737               	.L190:
 1738 0bf2 83E7      		ldi r24,lo8(115)
 1739 0bf4 FE01      		movw r30,r28
 1740 0bf6 1192      		st Z+,__zero_reg__
 1741 0bf8 8A95      	        dec r24
 1742 0bfa 01F4      		brne .-6
 1743 0bfc CE01      		movw r24,r28
 1744 0bfe 0E94 0000 		call free
 1745               	.L193:
 1746               	/* epilogue start */
 1747 0c02 DF91      		pop r29
 1748 0c04 CF91      		pop r28
 1749 0c06 0895      		ret
 1750               		.size	NutTcpDestroySocket, .-NutTcpDestroySocket
 1751               	.global	tcpSocketList
 1752               	.global	tcpSocketList
 1753               		.section .bss
 1754               		.type	tcpSocketList, @object
 1755               		.size	tcpSocketList, 2
 1756               	tcpSocketList:
 1757 0000 0000      		.skip 2,0
 1758               		.data
 1759               		.type	last_local_port, @object
 1760               		.size	last_local_port, 2
 1761               	last_local_port:
 1762 0000 0010      		.word	4096
 1763               		.lcomm registered,1
 1764               	.global __do_copy_data
 1765               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s 			page 32


DEFINED SYMBOLS
                            *ABS*:00000000 tcpsock.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:11     .text:00000000 NutTcpFindSocket
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1756   .bss:00000000 tcpSocketList
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:87     .text:00000080 NutTcpGetSockOpt
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:223    .text:00000158 NutTcpError
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:244    .text:00000170 NutTcpDeviceIOCtl
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:307    .text:000001d6 NutTcpDiscardBuffers
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:372    .text:00000242 NutTcpReceive
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:689    .text:00000496 NutTcpDeviceRead
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:698    .text:0000049c NutTcpSend
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:836    .text:0000059a SendBuffer
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:890    .text:000005f2 NutTcpDeviceWrite
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1159   .text:000007fc NutTcpDeviceWrite_P
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1219   .text:00000868 NutTcpCloseSocket
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1239   .text:00000886 NutTcpSetSockOpt
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1406   .text:0000099e NutTcpAccept
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1426   .text:000009b0 NutTcpConnect
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1761   .data:00000000 last_local_port
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1578   .text:00000aba NutTcpCreateSocket
                             .bss:00000002 registered
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccrJVisj.s:1695   .text:00000ba4 NutTcpDestroySocket

UNDEFINED SYMBOLS
NutNetBufFree
NutThreadYield
NutEventWait
memcpy
NutTcpStateWindowEvent
NutTcpOutput
free
__udivmodhi4
malloc
heapFreeList
NutHeapRootAlloc
memcpy_P
NutHeapRootFree
NutTcpStateCloseEvent
NutTcpStatePassiveOpenEvent
NutTcpStateActiveOpenEvent
NutIpRouteQuery
NutTcpInput
NutRegisterIpHandler
NutTcpInitStateMachine
calloc
NutGetTickCount
__do_copy_data
__do_clear_bss
