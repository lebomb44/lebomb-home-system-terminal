GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 1


   1               		.file	"phatutil.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	MakeVisibleName
  10               		.type	MakeVisibleName, @function
  11               	MakeVisibleName:
  12 0000 CF93      		push r28
  13 0002 DF93      		push r29
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0004 EC01      		movw r28,r24
  17 0006 FB01      		movw r30,r22
  18 0008 8881      		ld r24,Y
  19 000a 9B01      		movw r18,r22
  20 000c 2F5F      		subi r18,lo8(-(1))
  21 000e 3F4F      		sbci r19,hi8(-(1))
  22 0010 8530      		cpi r24,lo8(5)
  23 0012 01F4      		brne .L13
  24 0014 85EE      		ldi r24,lo8(-27)
  25               	.L13:
  26 0016 8083      		st Z,r24
  27 0018 D901      		movw r26,r18
  28 001a 81E0      		ldi r24,lo8(1)
  29 001c 90E0      		ldi r25,hi8(1)
  30 001e 00C0      		rjmp .L3
  31               	.L6:
  32 0020 ED93      		st X+,r30
  33 0022 0196      		adiw r24,1
  34 0024 8830      		cpi r24,8
  35 0026 9105      		cpc r25,__zero_reg__
  36 0028 01F4      		brne .L3
  37               	.L7:
  38 002a FE01      		movw r30,r28
  39 002c 28E0      		ldi r18,lo8(8)
  40 002e 30E0      		ldi r19,hi8(8)
  41 0030 9EE2      		ldi r25,lo8(46)
  42 0032 00C0      		rjmp .L5
  43               	.L3:
  44 0034 FE01      		movw r30,r28
  45 0036 E80F      		add r30,r24
  46 0038 F91F      		adc r31,r25
  47 003a E081      		ld r30,Z
  48 003c E032      		cpi r30,lo8(32)
  49 003e 01F4      		brne .L6
  50 0040 00C0      		rjmp .L7
  51               	.L10:
  52 0042 2830      		cpi r18,8
  53 0044 3105      		cpc r19,__zero_reg__
  54 0046 01F4      		brne .L8
  55 0048 9D93      		st X+,r25
  56               	.L8:
  57 004a 8085      		ldd r24,Z+8
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 2


  58 004c 8D93      		st X+,r24
  59 004e 2F5F      		subi r18,lo8(-(1))
  60 0050 3F4F      		sbci r19,hi8(-(1))
  61 0052 3196      		adiw r30,1
  62 0054 2B30      		cpi r18,11
  63 0056 3105      		cpc r19,__zero_reg__
  64 0058 01F0      		breq .L9
  65               	.L5:
  66 005a 8085      		ldd r24,Z+8
  67 005c 8032      		cpi r24,lo8(32)
  68 005e 01F4      		brne .L10
  69               	.L9:
  70 0060 1C92      		st X,__zero_reg__
  71               	/* epilogue start */
  72 0062 DF91      		pop r29
  73 0064 CF91      		pop r28
  74 0066 0895      		ret
  75               		.size	MakeVisibleName, .-MakeVisibleName
  76               	.global	IsFixedRootDir
  77               		.type	IsFixedRootDir, @function
  78               	IsFixedRootDir:
  79               	/* prologue: function */
  80               	/* frame size = 0 */
  81 0068 DC01      		movw r26,r24
  82 006a 1296      		adiw r26,2
  83 006c ED91      		ld r30,X+
  84 006e FC91      		ld r31,X
  85 0070 1397      		sbiw r26,2+1
  86 0072 0188      		ldd __tmp_reg__,Z+17
  87 0074 F289      		ldd r31,Z+18
  88 0076 E02D      		mov r30,__tmp_reg__
  89 0078 8081      		ld r24,Z
  90 007a 9181      		ldd r25,Z+1
  91 007c 8097      		sbiw r24,32
  92 007e 01F0      		breq .L15
  93 0080 1496      		adiw r26,4
  94 0082 ED91      		ld r30,X+
  95 0084 FC91      		ld r31,X
  96 0086 1597      		sbiw r26,4+1
  97 0088 80AD      		ldd r24,Z+56
  98 008a 91AD      		ldd r25,Z+57
  99 008c A2AD      		ldd r26,Z+58
 100 008e B3AD      		ldd r27,Z+59
 101 0090 0097      		sbiw r24,0
 102 0092 A105      		cpc r26,__zero_reg__
 103 0094 B105      		cpc r27,__zero_reg__
 104 0096 01F4      		brne .L15
 105 0098 84A5      		ldd r24,Z+44
 106 009a 95A5      		ldd r25,Z+45
 107 009c 892B      		or r24,r25
 108 009e 01F4      		brne .L15
 109 00a0 20E0      		ldi r18,lo8(0)
 110 00a2 30E0      		ldi r19,hi8(0)
 111 00a4 82A9      		ldd r24,Z+50
 112 00a6 93A9      		ldd r25,Z+51
 113 00a8 892B      		or r24,r25
 114 00aa 01F4      		brne .L17
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 3


 115 00ac 21E0      		ldi r18,lo8(1)
 116 00ae 30E0      		ldi r19,hi8(1)
 117 00b0 00C0      		rjmp .L17
 118               	.L15:
 119 00b2 20E0      		ldi r18,lo8(0)
 120 00b4 30E0      		ldi r19,hi8(0)
 121               	.L17:
 122 00b6 C901      		movw r24,r18
 123               	/* epilogue start */
 124 00b8 0895      		ret
 125               		.size	IsFixedRootDir, .-IsFixedRootDir
 126               	.global	PhatFilePosRewind
 127               		.type	PhatFilePosRewind, @function
 128               	PhatFilePosRewind:
 129               	/* prologue: function */
 130               	/* frame size = 0 */
 131 00ba FC01      		movw r30,r24
 132 00bc 1082      		st Z,__zero_reg__
 133 00be 1182      		std Z+1,__zero_reg__
 134 00c0 1282      		std Z+2,__zero_reg__
 135 00c2 1382      		std Z+3,__zero_reg__
 136 00c4 84A5      		ldd r24,Z+44
 137 00c6 95A5      		ldd r25,Z+45
 138 00c8 A0E0      		ldi r26,lo8(0)
 139 00ca B0E0      		ldi r27,hi8(0)
 140 00cc DC01      		movw r26,r24
 141 00ce 9927      		clr r25
 142 00d0 8827      		clr r24
 143 00d2 22A9      		ldd r18,Z+50
 144 00d4 33A9      		ldd r19,Z+51
 145 00d6 40E0      		ldi r20,lo8(0)
 146 00d8 50E0      		ldi r21,hi8(0)
 147 00da 820F      		add r24,r18
 148 00dc 931F      		adc r25,r19
 149 00de A41F      		adc r26,r20
 150 00e0 B51F      		adc r27,r21
 151 00e2 8483      		std Z+4,r24
 152 00e4 9583      		std Z+5,r25
 153 00e6 A683      		std Z+6,r26
 154 00e8 B783      		std Z+7,r27
 155 00ea 1086      		std Z+8,__zero_reg__
 156 00ec 1186      		std Z+9,__zero_reg__
 157 00ee 1286      		std Z+10,__zero_reg__
 158 00f0 1386      		std Z+11,__zero_reg__
 159 00f2 1486      		std Z+12,__zero_reg__
 160 00f4 1586      		std Z+13,__zero_reg__
 161 00f6 1686      		std Z+14,__zero_reg__
 162 00f8 1786      		std Z+15,__zero_reg__
 163               	/* epilogue start */
 164 00fa 0895      		ret
 165               		.size	PhatFilePosRewind, .-PhatFilePosRewind
 166               	.global	PhatFilePosSet
 167               		.type	PhatFilePosSet, @function
 168               	PhatFilePosSet:
 169 00fc 2F92      		push r2
 170 00fe 3F92      		push r3
 171 0100 4F92      		push r4
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 4


 172 0102 5F92      		push r5
 173 0104 6F92      		push r6
 174 0106 7F92      		push r7
 175 0108 8F92      		push r8
 176 010a 9F92      		push r9
 177 010c AF92      		push r10
 178 010e BF92      		push r11
 179 0110 CF92      		push r12
 180 0112 DF92      		push r13
 181 0114 EF92      		push r14
 182 0116 FF92      		push r15
 183 0118 0F93      		push r16
 184 011a 1F93      		push r17
 185 011c DF93      		push r29
 186 011e CF93      		push r28
 187 0120 CDB7      		in r28,__SP_L__
 188 0122 DEB7      		in r29,__SP_H__
 189 0124 2897      		sbiw r28,8
 190 0126 0FB6      		in __tmp_reg__,__SREG__
 191 0128 F894      		cli
 192 012a DEBF      		out __SP_H__,r29
 193 012c 0FBE      		out __SREG__,__tmp_reg__
 194 012e CDBF      		out __SP_L__,r28
 195               	/* prologue: function */
 196               	/* frame size = 8 */
 197 0130 9887      		std Y+8,r25
 198 0132 8F83      		std Y+7,r24
 199 0134 2A01      		movw r4,r20
 200 0136 3B01      		movw r6,r22
 201 0138 FC01      		movw r30,r24
 202 013a C480      		ldd r12,Z+4
 203 013c D580      		ldd r13,Z+5
 204 013e 8281      		ldd r24,Z+2
 205 0140 9381      		ldd r25,Z+3
 206 0142 9E83      		std Y+6,r25
 207 0144 8D83      		std Y+5,r24
 208 0146 FC01      		movw r30,r24
 209 0148 2188      		ldd r2,Z+17
 210 014a 3288      		ldd r3,Z+18
 211 014c 4115      		cp r20,__zero_reg__
 212 014e 5105      		cpc r21,__zero_reg__
 213 0150 6105      		cpc r22,__zero_reg__
 214 0152 7105      		cpc r23,__zero_reg__
 215 0154 01F4      		brne .L22
 216 0156 C601      		movw r24,r12
 217 0158 0E94 0000 		call PhatFilePosRewind
 218 015c 00C0      		rjmp .L39
 219               	.L22:
 220 015e F601      		movw r30,r12
 221 0160 83A1      		ldd r24,Z+35
 222 0162 84FD      		sbrc r24,4
 223 0164 00C0      		rjmp .L24
 224 0166 84A9      		ldd r24,Z+52
 225 0168 95A9      		ldd r25,Z+53
 226 016a A6A9      		ldd r26,Z+54
 227 016c B7A9      		ldd r27,Z+55
 228 016e 8417      		cp r24,r20
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 5


 229 0170 9507      		cpc r25,r21
 230 0172 A607      		cpc r26,r22
 231 0174 B707      		cpc r27,r23
 232 0176 00F4      		brsh .+2
 233 0178 00C0      		rjmp .L25
 234               	.L24:
 235 017a F601      		movw r30,r12
 236 017c 8081      		ld r24,Z
 237 017e 9181      		ldd r25,Z+1
 238 0180 A281      		ldd r26,Z+2
 239 0182 B381      		ldd r27,Z+3
 240 0184 4816      		cp r4,r24
 241 0186 5906      		cpc r5,r25
 242 0188 6A06      		cpc r6,r26
 243 018a 7B06      		cpc r7,r27
 244 018c 00F4      		brsh .L26
 245 018e C601      		movw r24,r12
 246 0190 0E94 0000 		call PhatFilePosRewind
 247 0194 5301      		movw r10,r6
 248 0196 4201      		movw r8,r4
 249 0198 00C0      		rjmp .L38
 250               	.L26:
 251 019a 5301      		movw r10,r6
 252 019c 4201      		movw r8,r4
 253 019e 881A      		sub r8,r24
 254 01a0 990A      		sbc r9,r25
 255 01a2 AA0A      		sbc r10,r26
 256 01a4 BB0A      		sbc r11,r27
 257               	.L38:
 258 01a6 F101      		movw r30,r2
 259 01a8 8689      		ldd r24,Z+22
 260 01aa 9789      		ldd r25,Z+23
 261 01ac A0E0      		ldi r26,lo8(0)
 262 01ae B0E0      		ldi r27,hi8(0)
 263 01b0 F601      		movw r30,r12
 264 01b2 2485      		ldd r18,Z+12
 265 01b4 3585      		ldd r19,Z+13
 266 01b6 4685      		ldd r20,Z+14
 267 01b8 5785      		ldd r21,Z+15
 268 01ba 2817      		cp r18,r24
 269 01bc 3907      		cpc r19,r25
 270 01be 4A07      		cpc r20,r26
 271 01c0 5B07      		cpc r21,r27
 272 01c2 00F4      		brsh .+2
 273 01c4 00C0      		rjmp .L28
 274 01c6 8F81      		ldd r24,Y+7
 275 01c8 9885      		ldd r25,Y+8
 276 01ca 0E94 0000 		call IsFixedRootDir
 277 01ce F601      		movw r30,r12
 278 01d0 2085      		ldd r18,Z+8
 279 01d2 3185      		ldd r19,Z+9
 280 01d4 4285      		ldd r20,Z+10
 281 01d6 5385      		ldd r21,Z+11
 282 01d8 892B      		or r24,r25
 283 01da 01F0      		breq .L29
 284 01dc 2F5F      		subi r18,lo8(-(1))
 285 01de 3F4F      		sbci r19,hi8(-(1))
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 6


 286 01e0 4F4F      		sbci r20,hlo8(-(1))
 287 01e2 5F4F      		sbci r21,hhi8(-(1))
 288 01e4 F101      		movw r30,r2
 289 01e6 86A1      		ldd r24,Z+38
 290 01e8 97A1      		ldd r25,Z+39
 291 01ea A0E0      		ldi r26,lo8(0)
 292 01ec B0E0      		ldi r27,hi8(0)
 293 01ee 2817      		cp r18,r24
 294 01f0 3907      		cpc r19,r25
 295 01f2 4A07      		cpc r20,r26
 296 01f4 5B07      		cpc r21,r27
 297 01f6 00F4      		brsh .+2
 298 01f8 00C0      		rjmp .L32
 299 01fa 00C0      		rjmp .L30
 300               	.L29:
 301 01fc 2F5F      		subi r18,lo8(-(1))
 302 01fe 3F4F      		sbci r19,hi8(-(1))
 303 0200 4F4F      		sbci r20,hlo8(-(1))
 304 0202 5F4F      		sbci r21,hhi8(-(1))
 305 0204 F101      		movw r30,r2
 306 0206 808D      		ldd r24,Z+24
 307 0208 918D      		ldd r25,Z+25
 308 020a A0E0      		ldi r26,lo8(0)
 309 020c B0E0      		ldi r27,hi8(0)
 310 020e 2817      		cp r18,r24
 311 0210 3907      		cpc r19,r25
 312 0212 4A07      		cpc r20,r26
 313 0214 5B07      		cpc r21,r27
 314 0216 00F4      		brsh .+2
 315 0218 00C0      		rjmp .L32
 316 021a 8081      		ld r24,Z
 317 021c 9181      		ldd r25,Z+1
 318 021e 8032      		cpi r24,32
 319 0220 9105      		cpc r25,__zero_reg__
 320 0222 01F4      		brne .L33
 321 0224 F601      		movw r30,r12
 322 0226 4481      		ldd r20,Z+4
 323 0228 5581      		ldd r21,Z+5
 324 022a 6681      		ldd r22,Z+6
 325 022c 7781      		ldd r23,Z+7
 326 022e 8D81      		ldd r24,Y+5
 327 0230 9E81      		ldd r25,Y+6
 328 0232 9E01      		movw r18,r28
 329 0234 2F5F      		subi r18,lo8(-(1))
 330 0236 3F4F      		sbci r19,hi8(-(1))
 331 0238 0E94 0000 		call Phat32GetClusterLink
 332 023c 892B      		or r24,r25
 333 023e 01F0      		breq .+2
 334 0240 00C0      		rjmp .L30
 335 0242 8981      		ldd r24,Y+1
 336 0244 9A81      		ldd r25,Y+2
 337 0246 AB81      		ldd r26,Y+3
 338 0248 BC81      		ldd r27,Y+4
 339 024a 885F      		subi r24,lo8(268435448)
 340 024c 9F4F      		sbci r25,hi8(268435448)
 341 024e AF4F      		sbci r26,hlo8(268435448)
 342 0250 BF40      		sbci r27,hhi8(268435448)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 7


 343 0252 00F0      		brlo .L34
 344 0254 00C0      		rjmp .L30
 345               	.L33:
 346 0256 F601      		movw r30,r12
 347 0258 4481      		ldd r20,Z+4
 348 025a 5581      		ldd r21,Z+5
 349 025c 6681      		ldd r22,Z+6
 350 025e 7781      		ldd r23,Z+7
 351 0260 4097      		sbiw r24,16
 352 0262 01F4      		brne .L35
 353 0264 8D81      		ldd r24,Y+5
 354 0266 9E81      		ldd r25,Y+6
 355 0268 9E01      		movw r18,r28
 356 026a 2F5F      		subi r18,lo8(-(1))
 357 026c 3F4F      		sbci r19,hi8(-(1))
 358 026e 0E94 0000 		call Phat16GetClusterLink
 359 0272 892B      		or r24,r25
 360 0274 01F0      		breq .+2
 361 0276 00C0      		rjmp .L30
 362 0278 8981      		ldd r24,Y+1
 363 027a 9A81      		ldd r25,Y+2
 364 027c AB81      		ldd r26,Y+3
 365 027e BC81      		ldd r27,Y+4
 366 0280 885F      		subi r24,lo8(65528)
 367 0282 9F4F      		sbci r25,hi8(65528)
 368 0284 A040      		sbci r26,hlo8(65528)
 369 0286 B040      		sbci r27,hhi8(65528)
 370 0288 00F0      		brlo .L34
 371 028a 00C0      		rjmp .L30
 372               	.L35:
 373 028c 8D81      		ldd r24,Y+5
 374 028e 9E81      		ldd r25,Y+6
 375 0290 9E01      		movw r18,r28
 376 0292 2F5F      		subi r18,lo8(-(1))
 377 0294 3F4F      		sbci r19,hi8(-(1))
 378 0296 0E94 0000 		call Phat12GetClusterLink
 379 029a 892B      		or r24,r25
 380 029c 01F0      		breq .+2
 381 029e 00C0      		rjmp .L30
 382 02a0 8981      		ldd r24,Y+1
 383 02a2 9A81      		ldd r25,Y+2
 384 02a4 AB81      		ldd r26,Y+3
 385 02a6 BC81      		ldd r27,Y+4
 386 02a8 885F      		subi r24,lo8(4088)
 387 02aa 9F40      		sbci r25,hi8(4088)
 388 02ac A040      		sbci r26,hlo8(4088)
 389 02ae B040      		sbci r27,hhi8(4088)
 390 02b0 00F0      		brlo .+2
 391 02b2 00C0      		rjmp .L30
 392               	.L34:
 393 02b4 F601      		movw r30,r12
 394 02b6 1086      		std Z+8,__zero_reg__
 395 02b8 1186      		std Z+9,__zero_reg__
 396 02ba 1286      		std Z+10,__zero_reg__
 397 02bc 1386      		std Z+11,__zero_reg__
 398 02be 8481      		ldd r24,Z+4
 399 02c0 9581      		ldd r25,Z+5
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 8


 400 02c2 A681      		ldd r26,Z+6
 401 02c4 B781      		ldd r27,Z+7
 402 02c6 808B      		std Z+16,r24
 403 02c8 918B      		std Z+17,r25
 404 02ca A28B      		std Z+18,r26
 405 02cc B38B      		std Z+19,r27
 406 02ce 8981      		ldd r24,Y+1
 407 02d0 9A81      		ldd r25,Y+2
 408 02d2 AB81      		ldd r26,Y+3
 409 02d4 BC81      		ldd r27,Y+4
 410 02d6 8483      		std Z+4,r24
 411 02d8 9583      		std Z+5,r25
 412 02da A683      		std Z+6,r26
 413 02dc B783      		std Z+7,r27
 414 02de 00C0      		rjmp .L31
 415               	.L32:
 416 02e0 F601      		movw r30,r12
 417 02e2 2087      		std Z+8,r18
 418 02e4 3187      		std Z+9,r19
 419 02e6 4287      		std Z+10,r20
 420 02e8 5387      		std Z+11,r21
 421               	.L31:
 422 02ea F601      		movw r30,r12
 423 02ec 1486      		std Z+12,__zero_reg__
 424 02ee 1586      		std Z+13,__zero_reg__
 425 02f0 1686      		std Z+14,__zero_reg__
 426 02f2 1786      		std Z+15,__zero_reg__
 427               	.L28:
 428 02f4 8114      		cp r8,__zero_reg__
 429 02f6 9104      		cpc r9,__zero_reg__
 430 02f8 A104      		cpc r10,__zero_reg__
 431 02fa B104      		cpc r11,__zero_reg__
 432 02fc 01F0      		breq .L30
 433 02fe F601      		movw r30,r12
 434 0300 E484      		ldd r14,Z+12
 435 0302 F584      		ldd r15,Z+13
 436 0304 0685      		ldd r16,Z+14
 437 0306 1785      		ldd r17,Z+15
 438 0308 F101      		movw r30,r2
 439 030a 8689      		ldd r24,Z+22
 440 030c 9789      		ldd r25,Z+23
 441 030e A0E0      		ldi r26,lo8(0)
 442 0310 B0E0      		ldi r27,hi8(0)
 443 0312 8E19      		sub r24,r14
 444 0314 9F09      		sbc r25,r15
 445 0316 A00B      		sbc r26,r16
 446 0318 B10B      		sbc r27,r17
 447 031a A501      		movw r20,r10
 448 031c 9401      		movw r18,r8
 449 031e 8815      		cp r24,r8
 450 0320 9905      		cpc r25,r9
 451 0322 AA05      		cpc r26,r10
 452 0324 BB05      		cpc r27,r11
 453 0326 00F4      		brsh .L36
 454 0328 9C01      		movw r18,r24
 455 032a AD01      		movw r20,r26
 456               	.L36:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 9


 457 032c E20E      		add r14,r18
 458 032e F31E      		adc r15,r19
 459 0330 041F      		adc r16,r20
 460 0332 151F      		adc r17,r21
 461 0334 F601      		movw r30,r12
 462 0336 E486      		std Z+12,r14
 463 0338 F586      		std Z+13,r15
 464 033a 0687      		std Z+14,r16
 465 033c 1787      		std Z+15,r17
 466 033e 8081      		ld r24,Z
 467 0340 9181      		ldd r25,Z+1
 468 0342 A281      		ldd r26,Z+2
 469 0344 B381      		ldd r27,Z+3
 470 0346 820F      		add r24,r18
 471 0348 931F      		adc r25,r19
 472 034a A41F      		adc r26,r20
 473 034c B51F      		adc r27,r21
 474 034e 8083      		st Z,r24
 475 0350 9183      		std Z+1,r25
 476 0352 A283      		std Z+2,r26
 477 0354 B383      		std Z+3,r27
 478 0356 821A      		sub r8,r18
 479 0358 930A      		sbc r9,r19
 480 035a A40A      		sbc r10,r20
 481 035c B50A      		sbc r11,r21
 482 035e 00C0      		rjmp .L38
 483               	.L30:
 484 0360 F601      		movw r30,r12
 485 0362 8081      		ld r24,Z
 486 0364 9181      		ldd r25,Z+1
 487 0366 A281      		ldd r26,Z+2
 488 0368 B381      		ldd r27,Z+3
 489 036a 8415      		cp r24,r4
 490 036c 9505      		cpc r25,r5
 491 036e A605      		cpc r26,r6
 492 0370 B705      		cpc r27,r7
 493 0372 01F4      		brne .L25
 494               	.L39:
 495 0374 20E0      		ldi r18,lo8(0)
 496 0376 30E0      		ldi r19,hi8(0)
 497 0378 00C0      		rjmp .L23
 498               	.L25:
 499 037a 2FEF      		ldi r18,lo8(-1)
 500 037c 3FEF      		ldi r19,hi8(-1)
 501               	.L23:
 502 037e C901      		movw r24,r18
 503               	/* epilogue start */
 504 0380 2896      		adiw r28,8
 505 0382 0FB6      		in __tmp_reg__,__SREG__
 506 0384 F894      		cli
 507 0386 DEBF      		out __SP_H__,r29
 508 0388 0FBE      		out __SREG__,__tmp_reg__
 509 038a CDBF      		out __SP_L__,r28
 510 038c CF91      		pop r28
 511 038e DF91      		pop r29
 512 0390 1F91      		pop r17
 513 0392 0F91      		pop r16
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 10


 514 0394 FF90      		pop r15
 515 0396 EF90      		pop r14
 516 0398 DF90      		pop r13
 517 039a CF90      		pop r12
 518 039c BF90      		pop r11
 519 039e AF90      		pop r10
 520 03a0 9F90      		pop r9
 521 03a2 8F90      		pop r8
 522 03a4 7F90      		pop r7
 523 03a6 6F90      		pop r6
 524 03a8 5F90      		pop r5
 525 03aa 4F90      		pop r4
 526 03ac 3F90      		pop r3
 527 03ae 2F90      		pop r2
 528 03b0 0895      		ret
 529               		.size	PhatFilePosSet, .-PhatFilePosSet
 530               	.global	GetParentPath
 531               		.type	GetParentPath, @function
 532               	GetParentPath:
 533 03b2 EF92      		push r14
 534 03b4 FF92      		push r15
 535 03b6 0F93      		push r16
 536 03b8 1F93      		push r17
 537 03ba CF93      		push r28
 538 03bc DF93      		push r29
 539               	/* prologue: function */
 540               	/* frame size = 0 */
 541 03be F82E      		mov r15,r24
 542 03c0 E92E      		mov r14,r25
 543 03c2 EB01      		movw r28,r22
 544 03c4 6FE2      		ldi r22,lo8(47)
 545 03c6 70E0      		ldi r23,hi8(47)
 546 03c8 0E94 0000 		call strrchr
 547 03cc 9983      		std Y+1,r25
 548 03ce 8883      		st Y,r24
 549 03d0 0097      		sbiw r24,0
 550 03d2 01F4      		brne .L41
 551 03d4 86E1      		ldi r24,lo8(22)
 552 03d6 90E0      		ldi r25,hi8(22)
 553 03d8 9093 0000 		sts (errno)+1,r25
 554 03dc 8093 0000 		sts errno,r24
 555 03e0 00E0      		ldi r16,lo8(0)
 556 03e2 10E0      		ldi r17,hi8(0)
 557 03e4 00C0      		rjmp .L42
 558               	.L41:
 559 03e6 0196      		adiw r24,1
 560 03e8 9983      		std Y+1,r25
 561 03ea 8883      		st Y,r24
 562 03ec EF2D      		mov r30,r15
 563 03ee FE2D      		mov r31,r14
 564 03f0 EF01      		movw r28,r30
 565 03f2 0990      		ld __tmp_reg__,Y+
 566 03f4 0020      		tst __tmp_reg__
 567 03f6 01F4      		brne .-6
 568 03f8 2197      		sbiw r28,1
 569 03fa CE1B      		sub r28,r30
 570 03fc DF0B      		sbc r29,r31
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 11


 571 03fe FC01      		movw r30,r24
 572 0400 0190      		ld __tmp_reg__,Z+
 573 0402 0020      		tst __tmp_reg__
 574 0404 01F4      		brne .-6
 575 0406 3197      		sbiw r30,1
 576 0408 E81B      		sub r30,r24
 577 040a F90B      		sbc r31,r25
 578 040c CE1B      		sub r28,r30
 579 040e DF0B      		sbc r29,r31
 580 0410 C230      		cpi r28,2
 581 0412 D105      		cpc r29,__zero_reg__
 582 0414 04F4      		brge .L43
 583 0416 C2E0      		ldi r28,lo8(2)
 584 0418 D0E0      		ldi r29,hi8(2)
 585               	.L43:
 586 041a CE01      		movw r24,r28
 587 041c 0E94 0000 		call malloc
 588 0420 8C01      		movw r16,r24
 589 0422 0097      		sbiw r24,0
 590 0424 01F0      		breq .L42
 591 0426 9E01      		movw r18,r28
 592 0428 2150      		subi r18,lo8(-(-1))
 593 042a 3040      		sbci r19,hi8(-(-1))
 594 042c 6F2D      		mov r22,r15
 595 042e 7E2D      		mov r23,r14
 596 0430 A901      		movw r20,r18
 597 0432 0E94 0000 		call memcpy
 598 0436 C00F      		add r28,r16
 599 0438 D11F      		adc r29,r17
 600 043a 2197      		sbiw r28,1
 601 043c 1882      		st Y,__zero_reg__
 602               	.L42:
 603 043e C801      		movw r24,r16
 604               	/* epilogue start */
 605 0440 DF91      		pop r29
 606 0442 CF91      		pop r28
 607 0444 1F91      		pop r17
 608 0446 0F91      		pop r16
 609 0448 FF90      		pop r15
 610 044a EF90      		pop r14
 611 044c 0895      		ret
 612               		.size	GetParentPath, .-GetParentPath
 613               		.data
 614               	.LC0:
 615 0000 222B 2C2E 		.string	"\"+,./:;<=>[\\]^"
 615      2F3A 3B3C 
 615      3D3E 5B5C 
 615      5D5E 00
 616               		.text
 617               	.global	MakePhatName
 618               		.type	MakePhatName, @function
 619               	MakePhatName:
 620 044e 8F92      		push r8
 621 0450 9F92      		push r9
 622 0452 AF92      		push r10
 623 0454 BF92      		push r11
 624 0456 CF92      		push r12
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 12


 625 0458 DF92      		push r13
 626 045a EF92      		push r14
 627 045c FF92      		push r15
 628 045e 0F93      		push r16
 629 0460 1F93      		push r17
 630 0462 CF93      		push r28
 631 0464 DF93      		push r29
 632               	/* prologue: function */
 633               	/* frame size = 0 */
 634 0466 EC01      		movw r28,r24
 635 0468 6B01      		movw r12,r22
 636 046a CB01      		movw r24,r22
 637 046c 60E2      		ldi r22,lo8(32)
 638 046e 70E0      		ldi r23,hi8(32)
 639 0470 4BE0      		ldi r20,lo8(11)
 640 0472 50E0      		ldi r21,hi8(11)
 641 0474 0E94 0000 		call memset
 642 0478 20E0      		ldi r18,lo8(0)
 643 047a 30E0      		ldi r19,hi8(0)
 644 047c 00C0      		rjmp .L47
 645               	.L48:
 646 047e 2F5F      		subi r18,lo8(-(1))
 647 0480 3F4F      		sbci r19,hi8(-(1))
 648               	.L47:
 649 0482 FE01      		movw r30,r28
 650 0484 E20F      		add r30,r18
 651 0486 F31F      		adc r31,r19
 652 0488 E081      		ld r30,Z
 653 048a EE32      		cpi r30,lo8(46)
 654 048c 01F0      		breq .L48
 655 048e EE23      		tst r30
 656 0490 01F4      		brne .L49
 657 0492 C901      		movw r24,r18
 658 0494 0197      		sbiw r24,1
 659 0496 0297      		sbiw r24,2
 660 0498 00F4      		brsh .L49
 661 049a 00C0      		rjmp .L74
 662               	.L51:
 663 049c F601      		movw r30,r12
 664 049e 8193      		st Z+,r24
 665 04a0 6F01      		movw r12,r30
 666 04a2 00C0      		rjmp .L70
 667               	.L74:
 668 04a4 8EE2      		ldi r24,lo8(46)
 669               	.L70:
 670 04a6 2150      		subi r18,lo8(-(-1))
 671 04a8 3040      		sbci r19,hi8(-(-1))
 672 04aa FFEF      		ldi r31,hi8(-1)
 673 04ac 2F3F      		cpi r18,lo8(-1)
 674 04ae 3F07      		cpc r19,r31
 675 04b0 01F4      		brne .L51
 676 04b2 C0E0      		ldi r28,lo8(0)
 677 04b4 D0E0      		ldi r29,hi8(0)
 678 04b6 00C0      		rjmp .L52
 679               	.L49:
 680 04b8 8991      		ld r24,Y+
 681 04ba 853E      		cpi r24,lo8(-27)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 13


 682 04bc 01F4      		brne .L53
 683 04be 85E0      		ldi r24,lo8(5)
 684               	.L71:
 685 04c0 F601      		movw r30,r12
 686 04c2 8083      		st Z,r24
 687 04c4 01E0      		ldi r16,lo8(1)
 688 04c6 10E0      		ldi r17,hi8(1)
 689 04c8 00C0      		rjmp .L54
 690               	.L53:
 691 04ca 90E0      		ldi r25,lo8(0)
 692 04cc 0E94 0000 		call toupper
 693 04d0 00C0      		rjmp .L71
 694               	.L57:
 695 04d2 90E0      		ldi r25,lo8(0)
 696 04d4 0E94 0000 		call toupper
 697 04d8 F601      		movw r30,r12
 698 04da E00F      		add r30,r16
 699 04dc F11F      		adc r31,r17
 700 04de 8083      		st Z,r24
 701 04e0 0F5F      		subi r16,lo8(-(1))
 702 04e2 1F4F      		sbci r17,hi8(-(1))
 703 04e4 2196      		adiw r28,1
 704 04e6 0830      		cpi r16,8
 705 04e8 1105      		cpc r17,__zero_reg__
 706 04ea 01F0      		breq .L56
 707               	.L54:
 708 04ec 8881      		ld r24,Y
 709 04ee 8823      		tst r24
 710 04f0 01F0      		breq .L56
 711 04f2 8E32      		cpi r24,lo8(46)
 712 04f4 01F4      		brne .L57
 713               	.L56:
 714 04f6 8881      		ld r24,Y
 715 04f8 8823      		tst r24
 716 04fa 01F4      		brne .L58
 717               	.L64:
 718 04fc 8601      		movw r16,r12
 719 04fe C0E0      		ldi r28,lo8(0)
 720 0500 D0E0      		ldi r29,hi8(0)
 721 0502 CC24      		clr r12
 722 0504 DD24      		clr r13
 723 0506 4BE0      		ldi r20,lo8(11)
 724 0508 842E      		mov r8,r20
 725 050a 912C      		mov r9,__zero_reg__
 726 050c 38E0      		ldi r19,lo8(8)
 727 050e A32E      		mov r10,r19
 728 0510 B12C      		mov r11,__zero_reg__
 729 0512 00C0      		rjmp .L59
 730               	.L58:
 731 0514 8E32      		cpi r24,lo8(46)
 732 0516 01F0      		breq .+2
 733 0518 00C0      		rjmp .L60
 734 051a 8E01      		movw r16,r28
 735 051c 0F5F      		subi r16,lo8(-(1))
 736 051e 1F4F      		sbci r17,hi8(-(1))
 737 0520 7601      		movw r14,r12
 738 0522 2496      		adiw r28,4
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 14


 739 0524 00C0      		rjmp .L61
 740               	.L63:
 741 0526 90E0      		ldi r25,lo8(0)
 742 0528 0E94 0000 		call toupper
 743 052c F701      		movw r30,r14
 744 052e 8087      		std Z+8,r24
 745 0530 0F5F      		subi r16,lo8(-(1))
 746 0532 1F4F      		sbci r17,hi8(-(1))
 747 0534 0894      		sec
 748 0536 E11C      		adc r14,__zero_reg__
 749 0538 F11C      		adc r15,__zero_reg__
 750 053a 0C17      		cp r16,r28
 751 053c 1D07      		cpc r17,r29
 752 053e 01F0      		breq .L62
 753               	.L61:
 754 0540 F801      		movw r30,r16
 755 0542 8081      		ld r24,Z
 756 0544 8823      		tst r24
 757 0546 01F4      		brne .L63
 758               	.L62:
 759 0548 F801      		movw r30,r16
 760 054a 8081      		ld r24,Z
 761 054c 8823      		tst r24
 762 054e 01F0      		breq .L64
 763 0550 00C0      		rjmp .L60
 764               	.L59:
 765 0552 F801      		movw r30,r16
 766 0554 F080      		ld r15,Z
 767 0556 FFE1      		ldi r31,lo8(31)
 768 0558 FF15      		cp r31,r15
 769 055a 00F4      		brsh .L60
 770 055c 80E0      		ldi r24,lo8(.LC0)
 771 055e 90E0      		ldi r25,hi8(.LC0)
 772 0560 6F2D      		mov r22,r15
 773 0562 70E0      		ldi r23,lo8(0)
 774 0564 0E94 0000 		call strchr
 775 0568 0097      		sbiw r24,0
 776 056a 01F4      		brne .L60
 777 056c 8FE3      		ldi r24,lo8(63)
 778 056e F816      		cp r15,r24
 779 0570 01F0      		breq .L72
 780               	.L65:
 781 0572 9AE2      		ldi r25,lo8(42)
 782 0574 F916      		cp r15,r25
 783 0576 01F4      		brne .L66
 784 0578 E8E0      		ldi r30,lo8(8)
 785 057a CE16      		cp r12,r30
 786 057c D104      		cpc r13,__zero_reg__
 787 057e 04F4      		brge .L67
 788 0580 9501      		movw r18,r10
 789 0582 00C0      		rjmp .L73
 790               	.L67:
 791 0584 9401      		movw r18,r8
 792               	.L73:
 793 0586 2C19      		sub r18,r12
 794 0588 3D09      		sbc r19,r13
 795 058a C801      		movw r24,r16
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 15


 796 058c 6FE3      		ldi r22,lo8(63)
 797 058e 70E0      		ldi r23,hi8(63)
 798 0590 A901      		movw r20,r18
 799 0592 0E94 0000 		call memset
 800               	.L72:
 801 0596 C1E0      		ldi r28,lo8(1)
 802 0598 D0E0      		ldi r29,hi8(1)
 803               	.L66:
 804 059a 0894      		sec
 805 059c C11C      		adc r12,__zero_reg__
 806 059e D11C      		adc r13,__zero_reg__
 807 05a0 0F5F      		subi r16,lo8(-(1))
 808 05a2 1F4F      		sbci r17,hi8(-(1))
 809 05a4 FBE0      		ldi r31,lo8(11)
 810 05a6 CF16      		cp r12,r31
 811 05a8 D104      		cpc r13,__zero_reg__
 812 05aa 01F4      		brne .L59
 813 05ac 00C0      		rjmp .L52
 814               	.L60:
 815 05ae CFEF      		ldi r28,lo8(-1)
 816 05b0 DFEF      		ldi r29,hi8(-1)
 817               	.L52:
 818 05b2 CE01      		movw r24,r28
 819               	/* epilogue start */
 820 05b4 DF91      		pop r29
 821 05b6 CF91      		pop r28
 822 05b8 1F91      		pop r17
 823 05ba 0F91      		pop r16
 824 05bc FF90      		pop r15
 825 05be EF90      		pop r14
 826 05c0 DF90      		pop r13
 827 05c2 CF90      		pop r12
 828 05c4 BF90      		pop r11
 829 05c6 AF90      		pop r10
 830 05c8 9F90      		pop r9
 831 05ca 8F90      		pop r8
 832 05cc 0895      		ret
 833               		.size	MakePhatName, .-MakePhatName
 834               	.global	GetDosTimeStamp
 835               		.type	GetDosTimeStamp, @function
 836               	GetDosTimeStamp:
 837 05ce CF92      		push r12
 838 05d0 DF92      		push r13
 839 05d2 EF92      		push r14
 840 05d4 FF92      		push r15
 841 05d6 0F93      		push r16
 842 05d8 1F93      		push r17
 843 05da DF93      		push r29
 844 05dc CF93      		push r28
 845 05de 00D0      		rcall .
 846 05e0 00D0      		rcall .
 847 05e2 CDB7      		in r28,__SP_L__
 848 05e4 DEB7      		in r29,__SP_H__
 849               	/* prologue: function */
 850               	/* frame size = 4 */
 851 05e6 6C01      		movw r12,r24
 852 05e8 7B01      		movw r14,r22
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 16


 853 05ea 8E01      		movw r16,r28
 854 05ec 0F5F      		subi r16,lo8(-(1))
 855 05ee 1F4F      		sbci r17,hi8(-(1))
 856 05f0 C801      		movw r24,r16
 857 05f2 0E94 0000 		call time
 858 05f6 C801      		movw r24,r16
 859 05f8 0E94 0000 		call localtime
 860 05fc FC01      		movw r30,r24
 861 05fe E114      		cp r14,__zero_reg__
 862 0600 F104      		cpc r15,__zero_reg__
 863 0602 01F0      		breq .L76
 864 0604 8085      		ldd r24,Z+8
 865 0606 9185      		ldd r25,Z+9
 866 0608 0196      		adiw r24,1
 867 060a 75E0      		ldi r23,5
 868 060c 880F      	1:	lsl r24
 869 060e 991F      		rol r25
 870 0610 7A95      		dec r23
 871 0612 01F4      		brne 1b
 872 0614 2285      		ldd r18,Z+10
 873 0616 3385      		ldd r19,Z+11
 874 0618 2055      		subi r18,lo8(-(-80))
 875 061a 3040      		sbci r19,hi8(-(-80))
 876 061c 322F      		mov r19,r18
 877 061e 2227      		clr r18
 878 0620 330F      		lsl r19
 879 0622 822B      		or r24,r18
 880 0624 932B      		or r25,r19
 881 0626 2681      		ldd r18,Z+6
 882 0628 3781      		ldd r19,Z+7
 883 062a 822B      		or r24,r18
 884 062c 932B      		or r25,r19
 885 062e D701      		movw r26,r14
 886 0630 8D93      		st X+,r24
 887 0632 9C93      		st X,r25
 888               	.L76:
 889 0634 C114      		cp r12,__zero_reg__
 890 0636 D104      		cpc r13,__zero_reg__
 891 0638 01F0      		breq .L78
 892 063a 2281      		ldd r18,Z+2
 893 063c 3381      		ldd r19,Z+3
 894 063e 55E0      		ldi r21,5
 895 0640 220F      	1:	lsl r18
 896 0642 331F      		rol r19
 897 0644 5A95      		dec r21
 898 0646 01F4      		brne 1b
 899 0648 8081      		ld r24,Z
 900 064a 9181      		ldd r25,Z+1
 901 064c 62E0      		ldi r22,lo8(2)
 902 064e 70E0      		ldi r23,hi8(2)
 903 0650 0E94 0000 		call __divmodhi4
 904 0654 262B      		or r18,r22
 905 0656 372B      		or r19,r23
 906 0658 4481      		ldd r20,Z+4
 907 065a 942F      		mov r25,r20
 908 065c 990F      		lsl r25
 909 065e 990F      		lsl r25
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 17


 910 0660 990F      		lsl r25
 911 0662 80E0      		ldi r24,lo8(0)
 912 0664 282B      		or r18,r24
 913 0666 392B      		or r19,r25
 914 0668 F601      		movw r30,r12
 915 066a 3183      		std Z+1,r19
 916 066c 2083      		st Z,r18
 917               	.L78:
 918               	/* epilogue start */
 919 066e 0F90      		pop __tmp_reg__
 920 0670 0F90      		pop __tmp_reg__
 921 0672 0F90      		pop __tmp_reg__
 922 0674 0F90      		pop __tmp_reg__
 923 0676 CF91      		pop r28
 924 0678 DF91      		pop r29
 925 067a 1F91      		pop r17
 926 067c 0F91      		pop r16
 927 067e FF90      		pop r15
 928 0680 EF90      		pop r14
 929 0682 DF90      		pop r13
 930 0684 CF90      		pop r12
 931 0686 0895      		ret
 932               		.size	GetDosTimeStamp, .-GetDosTimeStamp
 933               	.global __do_copy_data
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 phatutil.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:11     .text:00000000 MakeVisibleName
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:78     .text:00000068 IsFixedRootDir
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:128    .text:000000ba PhatFilePosRewind
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:168    .text:000000fc PhatFilePosSet
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:532    .text:000003b2 GetParentPath
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:619    .text:0000044e MakePhatName
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccNfkxR8.s:836    .text:000005ce GetDosTimeStamp

UNDEFINED SYMBOLS
Phat32GetClusterLink
Phat16GetClusterLink
Phat12GetClusterLink
strrchr
errno
malloc
memcpy
memset
toupper
strchr
time
localtime
__divmodhi4
__do_copy_data
