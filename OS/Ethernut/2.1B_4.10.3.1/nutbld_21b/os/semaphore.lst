GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s 			page 1


   1               		.file	"semaphore.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	NutSemInit
  10               		.type	NutSemInit, @function
  11               	NutSemInit:
  12               	/* prologue: function */
  13               	/* frame size = 0 */
  14 0000 FC01      		movw r30,r24
  15 0002 1182      		std Z+1,__zero_reg__
  16 0004 1082      		st Z,__zero_reg__
  17 0006 7383      		std Z+3,r23
  18 0008 6283      		std Z+2,r22
  19               	/* epilogue start */
  20 000a 0895      		ret
  21               		.size	NutSemInit, .-NutSemInit
  22               	.global	NutSemDestroy
  23               		.type	NutSemDestroy, @function
  24               	NutSemDestroy:
  25               	/* prologue: function */
  26               	/* frame size = 0 */
  27 000c FC01      		movw r30,r24
  28 000e 0190      		ld __tmp_reg__,Z+
  29 0010 F081      		ld r31,Z
  30 0012 E02D      		mov r30,__tmp_reg__
  31 0014 8FEF      		ldi r24,hi8(-1)
  32 0016 EF3F      		cpi r30,lo8(-1)
  33 0018 F807      		cpc r31,r24
  34 001a 01F0      		breq .L4
  35 001c EF2B      		or r30,r31
  36 001e 01F0      		breq .L4
  37 0020 2FEF      		ldi r18,lo8(-1)
  38 0022 3FEF      		ldi r19,hi8(-1)
  39 0024 00C0      		rjmp .L5
  40               	.L4:
  41 0026 20E0      		ldi r18,lo8(0)
  42 0028 30E0      		ldi r19,hi8(0)
  43               	.L5:
  44 002a C901      		movw r24,r18
  45               	/* epilogue start */
  46 002c 0895      		ret
  47               		.size	NutSemDestroy, .-NutSemDestroy
  48               	.global	NutSemPost
  49               		.type	NutSemPost, @function
  50               	NutSemPost:
  51               	/* prologue: function */
  52               	/* frame size = 0 */
  53 002e FC01      		movw r30,r24
  54 0030 8281      		ldd r24,Z+2
  55 0032 9381      		ldd r25,Z+3
  56 0034 0196      		adiw r24,1
  57 0036 9383      		std Z+3,r25
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s 			page 2


  58 0038 8283      		std Z+2,r24
  59 003a 1816      		cp __zero_reg__,r24
  60 003c 1906      		cpc __zero_reg__,r25
  61 003e 04F0      		brlt .L9
  62 0040 CF01      		movw r24,r30
  63 0042 0E94 0000 		call NutEventPost
  64               	.L9:
  65 0046 0895      		ret
  66               		.size	NutSemPost, .-NutSemPost
  67               	.global	NutSemWait
  68               		.type	NutSemWait, @function
  69               	NutSemWait:
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72 0048 FC01      		movw r30,r24
  73 004a 8281      		ldd r24,Z+2
  74 004c 9381      		ldd r25,Z+3
  75 004e 0197      		sbiw r24,1
  76 0050 9383      		std Z+3,r25
  77 0052 8283      		std Z+2,r24
  78 0054 97FF      		sbrs r25,7
  79 0056 00C0      		rjmp .L12
  80 0058 CF01      		movw r24,r30
  81 005a 40E0      		ldi r20,lo8(0)
  82 005c 50E0      		ldi r21,hi8(0)
  83 005e 60E0      		ldi r22,hlo8(0)
  84 0060 70E0      		ldi r23,hhi8(0)
  85 0062 0E94 0000 		call NutEventWaitNext
  86               	.L12:
  87 0066 0895      		ret
  88               		.size	NutSemWait, .-NutSemWait
  89               	.global	NutSemTryWait
  90               		.type	NutSemTryWait, @function
  91               	NutSemTryWait:
  92               	/* prologue: function */
  93               	/* frame size = 0 */
  94 0068 FC01      		movw r30,r24
  95 006a 8281      		ldd r24,Z+2
  96 006c 9381      		ldd r25,Z+3
  97 006e 1816      		cp __zero_reg__,r24
  98 0070 1906      		cpc __zero_reg__,r25
  99 0072 04F0      		brlt .L14
 100 0074 2FEF      		ldi r18,lo8(-1)
 101 0076 3FEF      		ldi r19,hi8(-1)
 102 0078 00C0      		rjmp .L15
 103               	.L14:
 104 007a CF01      		movw r24,r30
 105 007c 0E94 0000 		call NutSemWait
 106 0080 20E0      		ldi r18,lo8(0)
 107 0082 30E0      		ldi r19,hi8(0)
 108               	.L15:
 109 0084 C901      		movw r24,r18
 110               	/* epilogue start */
 111 0086 0895      		ret
 112               		.size	NutSemTryWait, .-NutSemTryWait
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s 			page 3


DEFINED SYMBOLS
                            *ABS*:00000000 semaphore.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:11     .text:00000000 NutSemInit
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:24     .text:0000000c NutSemDestroy
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:50     .text:0000002e NutSemPost
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:69     .text:00000048 NutSemWait
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccfVYj36.s:91     .text:00000068 NutSemTryWait

UNDEFINED SYMBOLS
NutEventPost
NutEventWaitNext
