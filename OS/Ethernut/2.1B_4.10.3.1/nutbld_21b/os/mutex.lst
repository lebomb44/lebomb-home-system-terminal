GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s 			page 1


   1               		.file	"mutex.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	NutMutexInit
  10               		.type	NutMutexInit, @function
  11               	NutMutexInit:
  12               	/* prologue: function */
  13               	/* frame size = 0 */
  14 0000 FC01      		movw r30,r24
  15 0002 1382      		std Z+3,__zero_reg__
  16 0004 1282      		std Z+2,__zero_reg__
  17 0006 1582      		std Z+5,__zero_reg__
  18 0008 1482      		std Z+4,__zero_reg__
  19 000a 1182      		std Z+1,__zero_reg__
  20 000c 1082      		st Z,__zero_reg__
  21               	/* epilogue start */
  22 000e 0895      		ret
  23               		.size	NutMutexInit, .-NutMutexInit
  24               	.global	NutMutexDestroy
  25               		.type	NutMutexDestroy, @function
  26               	NutMutexDestroy:
  27               	/* prologue: function */
  28               	/* frame size = 0 */
  29 0010 FC01      		movw r30,r24
  30 0012 8481      		ldd r24,Z+4
  31 0014 9581      		ldd r25,Z+5
  32 0016 892B      		or r24,r25
  33 0018 01F0      		breq .L4
  34 001a 2281      		ldd r18,Z+2
  35 001c 3381      		ldd r19,Z+3
  36 001e 8091 0000 		lds r24,runningThread
  37 0022 9091 0000 		lds r25,(runningThread)+1
  38 0026 2817      		cp r18,r24
  39 0028 3907      		cpc r19,r25
  40 002a 01F0      		breq .L4
  41 002c 2FEF      		ldi r18,lo8(-1)
  42 002e 3FEF      		ldi r19,hi8(-1)
  43 0030 00C0      		rjmp .L5
  44               	.L4:
  45 0032 20E0      		ldi r18,lo8(0)
  46 0034 30E0      		ldi r19,hi8(0)
  47               	.L5:
  48 0036 C901      		movw r24,r18
  49               	/* epilogue start */
  50 0038 0895      		ret
  51               		.size	NutMutexDestroy, .-NutMutexDestroy
  52               	.global	NutMutexUnlock
  53               		.type	NutMutexUnlock, @function
  54               	NutMutexUnlock:
  55               	/* prologue: function */
  56               	/* frame size = 0 */
  57 003a FC01      		movw r30,r24
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s 			page 2


  58 003c 2281      		ldd r18,Z+2
  59 003e 3381      		ldd r19,Z+3
  60 0040 8091 0000 		lds r24,runningThread
  61 0044 9091 0000 		lds r25,(runningThread)+1
  62 0048 2817      		cp r18,r24
  63 004a 3907      		cpc r19,r25
  64 004c 01F0      		breq .L8
  65 004e 2FEF      		ldi r18,lo8(-1)
  66 0050 3FEF      		ldi r19,hi8(-1)
  67 0052 00C0      		rjmp .L9
  68               	.L8:
  69 0054 8481      		ldd r24,Z+4
  70 0056 9581      		ldd r25,Z+5
  71 0058 0197      		sbiw r24,1
  72 005a 9583      		std Z+5,r25
  73 005c 8483      		std Z+4,r24
  74 005e 892B      		or r24,r25
  75 0060 01F4      		brne .L12
  76               	.L10:
  77 0062 CF01      		movw r24,r30
  78 0064 0E94 0000 		call NutEventPost
  79               	.L12:
  80 0068 20E0      		ldi r18,lo8(0)
  81 006a 30E0      		ldi r19,hi8(0)
  82               	.L9:
  83 006c C901      		movw r24,r18
  84               	/* epilogue start */
  85 006e 0895      		ret
  86               		.size	NutMutexUnlock, .-NutMutexUnlock
  87               	.global	NutMutexLock
  88               		.type	NutMutexLock, @function
  89               	NutMutexLock:
  90 0070 0F93      		push r16
  91 0072 1F93      		push r17
  92 0074 CF93      		push r28
  93 0076 DF93      		push r29
  94               	/* prologue: function */
  95               	/* frame size = 0 */
  96 0078 EC01      		movw r28,r24
  97 007a 2A81      		ldd r18,Y+2
  98 007c 3B81      		ldd r19,Y+3
  99 007e 8091 0000 		lds r24,runningThread
 100 0082 9091 0000 		lds r25,(runningThread)+1
 101 0086 2817      		cp r18,r24
 102 0088 3907      		cpc r19,r25
 103 008a 01F0      		breq .L14
 104 008c 8E01      		movw r16,r28
 105 008e 00C0      		rjmp .L15
 106               	.L16:
 107 0090 C801      		movw r24,r16
 108 0092 40E0      		ldi r20,lo8(0)
 109 0094 50E0      		ldi r21,hi8(0)
 110 0096 60E0      		ldi r22,hlo8(0)
 111 0098 70E0      		ldi r23,hhi8(0)
 112 009a 0E94 0000 		call NutEventWaitNext
 113               	.L15:
 114 009e 8C81      		ldd r24,Y+4
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s 			page 3


 115 00a0 9D81      		ldd r25,Y+5
 116 00a2 892B      		or r24,r25
 117 00a4 01F4      		brne .L16
 118               	.L14:
 119 00a6 8091 0000 		lds r24,runningThread
 120 00aa 9091 0000 		lds r25,(runningThread)+1
 121 00ae 9B83      		std Y+3,r25
 122 00b0 8A83      		std Y+2,r24
 123 00b2 8C81      		ldd r24,Y+4
 124 00b4 9D81      		ldd r25,Y+5
 125 00b6 0196      		adiw r24,1
 126 00b8 9D83      		std Y+5,r25
 127 00ba 8C83      		std Y+4,r24
 128               	/* epilogue start */
 129 00bc DF91      		pop r29
 130 00be CF91      		pop r28
 131 00c0 1F91      		pop r17
 132 00c2 0F91      		pop r16
 133 00c4 0895      		ret
 134               		.size	NutMutexLock, .-NutMutexLock
 135               	.global	NutMutexTrylock
 136               		.type	NutMutexTrylock, @function
 137               	NutMutexTrylock:
 138               	/* prologue: function */
 139               	/* frame size = 0 */
 140 00c6 FC01      		movw r30,r24
 141 00c8 8481      		ldd r24,Z+4
 142 00ca 9581      		ldd r25,Z+5
 143 00cc 892B      		or r24,r25
 144 00ce 01F0      		breq .L19
 145 00d0 2281      		ldd r18,Z+2
 146 00d2 3381      		ldd r19,Z+3
 147 00d4 8091 0000 		lds r24,runningThread
 148 00d8 9091 0000 		lds r25,(runningThread)+1
 149 00dc 2817      		cp r18,r24
 150 00de 3907      		cpc r19,r25
 151 00e0 01F0      		breq .L19
 152 00e2 2FEF      		ldi r18,lo8(-1)
 153 00e4 3FEF      		ldi r19,hi8(-1)
 154 00e6 00C0      		rjmp .L20
 155               	.L19:
 156 00e8 CF01      		movw r24,r30
 157 00ea 0E94 0000 		call NutMutexLock
 158 00ee 20E0      		ldi r18,lo8(0)
 159 00f0 30E0      		ldi r19,hi8(0)
 160               	.L20:
 161 00f2 C901      		movw r24,r18
 162               	/* epilogue start */
 163 00f4 0895      		ret
 164               		.size	NutMutexTrylock, .-NutMutexTrylock
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 mutex.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:11     .text:00000000 NutMutexInit
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:26     .text:00000010 NutMutexDestroy
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:54     .text:0000003a NutMutexUnlock
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:89     .text:00000070 NutMutexLock
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccHB6DOh.s:137    .text:000000c6 NutMutexTrylock

UNDEFINED SYMBOLS
runningThread
NutEventPost
NutEventWaitNext
