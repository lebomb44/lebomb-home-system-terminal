GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 1


   1               		.file	"sntp.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.data
   9               	.LC0:
  10 0000 736E 7470 		.string	"sntpc"
  10      6300 
  11               		.text
  12               	.global	NutSNTPStartThread
  13               		.type	NutSNTPStartThread, @function
  14               	NutSNTPStartThread:
  15 0000 AF92      		push r10
  16 0002 BF92      		push r11
  17 0004 CF92      		push r12
  18 0006 DF92      		push r13
  19 0008 EF92      		push r14
  20 000a FF92      		push r15
  21 000c 0F93      		push r16
  22 000e 1F93      		push r17
  23 0010 CF93      		push r28
  24 0012 DF93      		push r29
  25               	/* prologue: function */
  26               	/* frame size = 0 */
  27 0014 7B01      		movw r14,r22
  28 0016 8C01      		movw r16,r24
  29 0018 5901      		movw r10,r18
  30 001a 6A01      		movw r12,r20
  31 001c 88E0      		ldi r24,lo8(8)
  32 001e 90E0      		ldi r25,hi8(8)
  33 0020 0E94 0000 		call malloc
  34 0024 EC01      		movw r28,r24
  35 0026 0097      		sbiw r24,0
  36 0028 01F0      		breq .L6
  37               	.L2:
  38 002a E882      		st Y,r14
  39 002c F982      		std Y+1,r15
  40 002e 0A83      		std Y+2,r16
  41 0030 1B83      		std Y+3,r17
  42 0032 AC82      		std Y+4,r10
  43 0034 BD82      		std Y+5,r11
  44 0036 CE82      		std Y+6,r12
  45 0038 DF82      		std Y+7,r13
  46 003a 80E0      		ldi r24,lo8(.LC0)
  47 003c 90E0      		ldi r25,hi8(.LC0)
  48 003e 60E0      		ldi r22,lo8(gs(SNTP_resync))
  49 0040 70E0      		ldi r23,hi8(gs(SNTP_resync))
  50 0042 AE01      		movw r20,r28
  51 0044 20E0      		ldi r18,lo8(256)
  52 0046 31E0      		ldi r19,hi8(256)
  53 0048 0E94 0000 		call NutThreadCreate
  54 004c 892B      		or r24,r25
  55 004e 01F0      		breq .L4
  56 0050 20E0      		ldi r18,lo8(0)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 2


  57 0052 30E0      		ldi r19,hi8(0)
  58 0054 00C0      		rjmp .L3
  59               	.L4:
  60 0056 CE01      		movw r24,r28
  61 0058 0E94 0000 		call free
  62               	.L6:
  63 005c 2FEF      		ldi r18,lo8(-1)
  64 005e 3FEF      		ldi r19,hi8(-1)
  65               	.L3:
  66 0060 C901      		movw r24,r18
  67               	/* epilogue start */
  68 0062 DF91      		pop r29
  69 0064 CF91      		pop r28
  70 0066 1F91      		pop r17
  71 0068 0F91      		pop r16
  72 006a FF90      		pop r15
  73 006c EF90      		pop r14
  74 006e DF90      		pop r13
  75 0070 CF90      		pop r12
  76 0072 BF90      		pop r11
  77 0074 AF90      		pop r10
  78 0076 0895      		ret
  79               		.size	NutSNTPStartThread, .-NutSNTPStartThread
  80               	.global	NutSNTPGetTime
  81               		.type	NutSNTPGetTime, @function
  82               	NutSNTPGetTime:
  83 0078 2F92      		push r2
  84 007a 3F92      		push r3
  85 007c 4F92      		push r4
  86 007e 5F92      		push r5
  87 0080 6F92      		push r6
  88 0082 7F92      		push r7
  89 0084 8F92      		push r8
  90 0086 9F92      		push r9
  91 0088 AF92      		push r10
  92 008a BF92      		push r11
  93 008c CF92      		push r12
  94 008e DF92      		push r13
  95 0090 EF92      		push r14
  96 0092 FF92      		push r15
  97 0094 0F93      		push r16
  98 0096 1F93      		push r17
  99 0098 DF93      		push r29
 100 009a CF93      		push r28
 101 009c CDB7      		in r28,__SP_L__
 102 009e DEB7      		in r29,__SP_H__
 103 00a0 2897      		sbiw r28,8
 104 00a2 0FB6      		in __tmp_reg__,__SREG__
 105 00a4 F894      		cli
 106 00a6 DEBF      		out __SP_H__,r29
 107 00a8 0FBE      		out __SREG__,__tmp_reg__
 108 00aa CDBF      		out __SP_L__,r28
 109               	/* prologue: function */
 110               	/* frame size = 8 */
 111 00ac 3C01      		movw r6,r24
 112 00ae 2B01      		movw r4,r22
 113 00b0 6115      		cp r22,__zero_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 3


 114 00b2 7105      		cpc r23,__zero_reg__
 115 00b4 01F4      		brne .+2
 116 00b6 00C0      		rjmp .L8
 117 00b8 0097      		sbiw r24,0
 118 00ba 01F4      		brne .+2
 119 00bc 00C0      		rjmp .L8
 120 00be 80E0      		ldi r24,lo8(256)
 121 00c0 91E0      		ldi r25,hi8(256)
 122 00c2 9C83      		std Y+4,r25
 123 00c4 8B83      		std Y+3,r24
 124 00c6 81E0      		ldi r24,lo8(1)
 125 00c8 90E0      		ldi r25,hi8(1)
 126 00ca 60E3      		ldi r22,lo8(48)
 127 00cc 70E0      		ldi r23,hi8(48)
 128 00ce 0E94 0000 		call calloc
 129 00d2 5C01      		movw r10,r24
 130 00d4 0097      		sbiw r24,0
 131 00d6 01F4      		brne .+2
 132 00d8 00C0      		rjmp .L8
 133 00da 80E0      		ldi r24,lo8(0)
 134 00dc 90E0      		ldi r25,hi8(0)
 135 00de 0E94 0000 		call NutUdpCreateSocket
 136 00e2 4C01      		movw r8,r24
 137 00e4 0097      		sbiw r24,0
 138 00e6 01F4      		brne .+2
 139 00e8 00C0      		rjmp .L9
 140 00ea 62E0      		ldi r22,lo8(4098)
 141 00ec 70E1      		ldi r23,hi8(4098)
 142 00ee AE01      		movw r20,r28
 143 00f0 4D5F      		subi r20,lo8(-(3))
 144 00f2 5F4F      		sbci r21,hi8(-(3))
 145 00f4 22E0      		ldi r18,lo8(2)
 146 00f6 30E0      		ldi r19,hi8(2)
 147 00f8 0E94 0000 		call NutUdpSetSockOpt
 148 00fc 8BE1      		ldi r24,lo8(27)
 149 00fe F501      		movw r30,r10
 150 0100 8083      		st Z,r24
 151 0102 F301      		movw r30,r6
 152 0104 4081      		ld r20,Z
 153 0106 5181      		ldd r21,Z+1
 154 0108 6281      		ldd r22,Z+2
 155 010a 7381      		ldd r23,Z+3
 156 010c C401      		movw r24,r8
 157 010e 2BE7      		ldi r18,lo8(123)
 158 0110 30E0      		ldi r19,hi8(123)
 159 0112 8501      		movw r16,r10
 160 0114 F0E3      		ldi r31,lo8(48)
 161 0116 EF2E      		mov r14,r31
 162 0118 F12C      		mov r15,__zero_reg__
 163 011a 0E94 0000 		call NutUdpSendTo
 164 011e 892B      		or r24,r25
 165 0120 01F0      		breq .+2
 166 0122 00C0      		rjmp .L10
 167 0124 1E01      		movw r2,r28
 168 0126 0894      		sec
 169 0128 211C      		adc r2,__zero_reg__
 170 012a 311C      		adc r3,__zero_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 4


 171               	.L18:
 172 012c 1D82      		std Y+5,__zero_reg__
 173 012e 1E82      		std Y+6,__zero_reg__
 174 0130 1F82      		std Y+7,__zero_reg__
 175 0132 1886      		std Y+8,__zero_reg__
 176 0134 C401      		movw r24,r8
 177 0136 BE01      		movw r22,r28
 178 0138 6B5F      		subi r22,lo8(-(5))
 179 013a 7F4F      		sbci r23,hi8(-(5))
 180 013c A101      		movw r20,r2
 181 013e 9501      		movw r18,r10
 182 0140 00E3      		ldi r16,lo8(48)
 183 0142 10E0      		ldi r17,hi8(48)
 184 0144 E8E8      		ldi r30,lo8(5000)
 185 0146 CE2E      		mov r12,r30
 186 0148 E3E1      		ldi r30,hi8(5000)
 187 014a DE2E      		mov r13,r30
 188 014c E12C      		mov r14,__zero_reg__
 189 014e F12C      		mov r15,__zero_reg__
 190 0150 0E94 0000 		call NutUdpReceiveFrom
 191 0154 1816      		cp __zero_reg__,r24
 192 0156 1906      		cpc __zero_reg__,r25
 193 0158 04F0      		brlt .+2
 194 015a 00C0      		rjmp .L10
 195 015c 8981      		ldd r24,Y+1
 196 015e 9A81      		ldd r25,Y+2
 197 0160 8B37      		cpi r24,123
 198 0162 9105      		cpc r25,__zero_reg__
 199 0164 01F4      		brne .L11
 200 0166 F501      		movw r30,r10
 201 0168 8081      		ld r24,Z
 202 016a 807C      		andi r24,lo8(-64)
 203 016c 803C      		cpi r24,lo8(-64)
 204 016e 01F4      		brne .L12
 205               	.L11:
 206 0170 F301      		movw r30,r6
 207 0172 8081      		ld r24,Z
 208 0174 9181      		ldd r25,Z+1
 209 0176 A281      		ldd r26,Z+2
 210 0178 B381      		ldd r27,Z+3
 211 017a 8F5F      		subi r24,lo8(-1)
 212 017c 9F4F      		sbci r25,hi8(-1)
 213 017e AF4F      		sbci r26,hlo8(-1)
 214 0180 BF4F      		sbci r27,hhi8(-1)
 215 0182 01F0      		breq .L18
 216 0184 00C0      		rjmp .L10
 217               	.L12:
 218 0186 F501      		movw r30,r10
 219 0188 80A5      		ldd r24,Z+40
 220 018a 91A5      		ldd r25,Z+41
 221 018c A2A5      		ldd r26,Z+42
 222 018e B3A5      		ldd r27,Z+43
 223               	/* #APP */
 224               	 ;  315 "../../nut/include/sys/types.h" 1
 225 0190 082E      		mov __tmp_reg__, r24
 226 0192 8B2F      		mov r24, r27
 227 0194 B02D      		mov r27, __tmp_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 5


 228 0196 092E      		mov __tmp_reg__, r25
 229 0198 9A2F      		mov r25, r26
 230 019a A02D      		mov r26, __tmp_reg__
 231               		
 232               	 ;  0 "" 2
 233               	/* #NOAPP */
 234 019c 8058      		subi r24,lo8(-(2085978496))
 235 019e 9E47      		sbci r25,hi8(-(2085978496))
 236 01a0 AA4A      		sbci r26,hlo8(-(2085978496))
 237 01a2 B348      		sbci r27,hhi8(-(2085978496))
 238 01a4 F201      		movw r30,r4
 239 01a6 8083      		st Z,r24
 240 01a8 9183      		std Z+1,r25
 241 01aa A283      		std Z+2,r26
 242 01ac B383      		std Z+3,r27
 243 01ae 8D81      		ldd r24,Y+5
 244 01b0 9E81      		ldd r25,Y+6
 245 01b2 AF81      		ldd r26,Y+7
 246 01b4 B885      		ldd r27,Y+8
 247 01b6 F301      		movw r30,r6
 248 01b8 8083      		st Z,r24
 249 01ba 9183      		std Z+1,r25
 250 01bc A283      		std Z+2,r26
 251 01be B383      		std Z+3,r27
 252 01c0 00E0      		ldi r16,lo8(0)
 253 01c2 10E0      		ldi r17,hi8(0)
 254 01c4 00C0      		rjmp .L14
 255               	.L9:
 256 01c6 0FEF      		ldi r16,lo8(-1)
 257 01c8 1FEF      		ldi r17,hi8(-1)
 258               	.L16:
 259 01ca C501      		movw r24,r10
 260 01cc 0E94 0000 		call free
 261 01d0 00C0      		rjmp .L15
 262               	.L8:
 263 01d2 0FEF      		ldi r16,lo8(-1)
 264 01d4 1FEF      		ldi r17,hi8(-1)
 265               	.L15:
 266 01d6 C801      		movw r24,r16
 267               	/* epilogue start */
 268 01d8 2896      		adiw r28,8
 269 01da 0FB6      		in __tmp_reg__,__SREG__
 270 01dc F894      		cli
 271 01de DEBF      		out __SP_H__,r29
 272 01e0 0FBE      		out __SREG__,__tmp_reg__
 273 01e2 CDBF      		out __SP_L__,r28
 274 01e4 CF91      		pop r28
 275 01e6 DF91      		pop r29
 276 01e8 1F91      		pop r17
 277 01ea 0F91      		pop r16
 278 01ec FF90      		pop r15
 279 01ee EF90      		pop r14
 280 01f0 DF90      		pop r13
 281 01f2 CF90      		pop r12
 282 01f4 BF90      		pop r11
 283 01f6 AF90      		pop r10
 284 01f8 9F90      		pop r9
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 6


 285 01fa 8F90      		pop r8
 286 01fc 7F90      		pop r7
 287 01fe 6F90      		pop r6
 288 0200 5F90      		pop r5
 289 0202 4F90      		pop r4
 290 0204 3F90      		pop r3
 291 0206 2F90      		pop r2
 292 0208 0895      		ret
 293               	.L10:
 294 020a 0FEF      		ldi r16,lo8(-1)
 295 020c 1FEF      		ldi r17,hi8(-1)
 296               	.L14:
 297 020e C401      		movw r24,r8
 298 0210 0E94 0000 		call NutUdpDestroySocket
 299 0214 00C0      		rjmp .L16
 300               		.size	NutSNTPGetTime, .-NutSNTPGetTime
 301               	.global	SNTP_resync
 302               		.type	SNTP_resync, @function
 303               	SNTP_resync:
 304 0216 DF93      		push r29
 305 0218 CF93      		push r28
 306 021a CDB7      		in r28,__SP_L__
 307 021c DEB7      		in r29,__SP_H__
 308 021e 2897      		sbiw r28,8
 309 0220 0FB6      		in __tmp_reg__,__SREG__
 310 0222 F894      		cli
 311 0224 DEBF      		out __SP_H__,r29
 312 0226 0FBE      		out __SREG__,__tmp_reg__
 313 0228 CDBF      		out __SP_L__,r28
 314               	/* prologue: function */
 315               	/* frame size = 8 */
 316 022a FC01      		movw r30,r24
 317 022c E080      		ld r14,Z
 318 022e F180      		ldd r15,Z+1
 319 0230 0281      		ldd r16,Z+2
 320 0232 1381      		ldd r17,Z+3
 321 0234 8480      		ldd r8,Z+4
 322 0236 9580      		ldd r9,Z+5
 323 0238 A680      		ldd r10,Z+6
 324 023a B780      		ldd r11,Z+7
 325 023c E982      		std Y+1,r14
 326 023e FA82      		std Y+2,r15
 327 0240 0B83      		std Y+3,r16
 328 0242 1C83      		std Y+4,r17
 329 0244 0E94 0000 		call free
 330 0248 8FE3      		ldi r24,lo8(63)
 331 024a 0E94 0000 		call NutThreadSetPriority
 332 024e CC24      		clr r12
 333 0250 DD24      		clr r13
 334 0252 A5E0      		ldi r26,lo8(5)
 335 0254 6A2E      		mov r6,r26
 336 0256 712C      		mov r7,__zero_reg__
 337 0258 6C0E      		add r6,r28
 338 025a 7D1E      		adc r7,r29
 339 025c 2E01      		movw r4,r28
 340 025e 0894      		sec
 341 0260 411C      		adc r4,__zero_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 7


 342 0262 511C      		adc r5,__zero_reg__
 343               	.L26:
 344 0264 C201      		movw r24,r4
 345 0266 B301      		movw r22,r6
 346 0268 0E94 0000 		call NutSNTPGetTime
 347 026c 892B      		or r24,r25
 348 026e 01F0      		breq .L21
 349 0270 8981      		ldd r24,Y+1
 350 0272 9A81      		ldd r25,Y+2
 351 0274 AB81      		ldd r26,Y+3
 352 0276 BC81      		ldd r27,Y+4
 353 0278 8E15      		cp r24,r14
 354 027a 9F05      		cpc r25,r15
 355 027c A007      		cpc r26,r16
 356 027e B107      		cpc r27,r17
 357 0280 01F0      		breq .L22
 358 0282 8FEF      		ldi r24,lo8(-1)
 359 0284 E816      		cp r14,r24
 360 0286 8FEF      		ldi r24,hi8(-1)
 361 0288 F806      		cpc r15,r24
 362 028a 8FEF      		ldi r24,hlo8(-1)
 363 028c 0807      		cpc r16,r24
 364 028e 8FEF      		ldi r24,hhi8(-1)
 365 0290 1807      		cpc r17,r24
 366 0292 01F4      		brne .L22
 367 0294 E982      		std Y+1,r14
 368 0296 FA82      		std Y+2,r15
 369 0298 0B83      		std Y+3,r16
 370 029a 1C83      		std Y+4,r17
 371 029c 00C0      		rjmp .L26
 372               	.L22:
 373 029e 83E0      		ldi r24,lo8(3)
 374 02a0 C816      		cp r12,r24
 375 02a2 D104      		cpc r13,__zero_reg__
 376 02a4 04F0      		brlt .L24
 377 02a6 60E3      		ldi r22,lo8(30000)
 378 02a8 75E7      		ldi r23,hi8(30000)
 379 02aa 80E0      		ldi r24,hlo8(30000)
 380 02ac 90E0      		ldi r25,hhi8(30000)
 381 02ae 00C0      		rjmp .L27
 382               	.L24:
 383 02b0 0894      		sec
 384 02b2 C11C      		adc r12,__zero_reg__
 385 02b4 D11C      		adc r13,__zero_reg__
 386 02b6 68E8      		ldi r22,lo8(5000)
 387 02b8 73E1      		ldi r23,hi8(5000)
 388 02ba 80E0      		ldi r24,hlo8(5000)
 389 02bc 90E0      		ldi r25,hhi8(5000)
 390 02be 0E94 0000 		call NutSleep
 391 02c2 00C0      		rjmp .L26
 392               	.L21:
 393 02c4 C301      		movw r24,r6
 394 02c6 0E94 0000 		call stime
 395 02ca C501      		movw r24,r10
 396 02cc B401      		movw r22,r8
 397               	.L27:
 398 02ce 0E94 0000 		call NutSleep
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 8


 399 02d2 CC24      		clr r12
 400 02d4 DD24      		clr r13
 401 02d6 00C0      		rjmp .L26
 402               		.size	SNTP_resync, .-SNTP_resync
 403               	.global __do_copy_data
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 sntp.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:14     .text:00000000 NutSNTPStartThread
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:303    .text:00000216 SNTP_resync
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccKz6DOh.s:82     .text:00000078 NutSNTPGetTime

UNDEFINED SYMBOLS
malloc
NutThreadCreate
free
calloc
NutUdpCreateSocket
NutUdpSetSockOpt
NutUdpSendTo
NutUdpReceiveFrom
NutUdpDestroySocket
NutThreadSetPriority
NutSleep
stime
__do_copy_data
