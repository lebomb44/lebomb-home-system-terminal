GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 1


   1               		.file	"led.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               		.type	LedTimerCb, @function
  10               	LedTimerCb:
  11               	/* prologue: function */
  12               	/* frame size = 0 */
  13 0000 CB01      		movw r24,r22
  14 0002 0E94 0000 		call NutEventPostAsync
  15               	/* epilogue start */
  16 0006 0895      		ret
  17               		.size	LedTimerCb, .-LedTimerCb
  18               	.global	NutSetLed
  19               		.type	NutSetLed, @function
  20               	NutSetLed:
  21 0008 EF92      		push r14
  22 000a FF92      		push r15
  23 000c 0F93      		push r16
  24 000e 1F93      		push r17
  25               	/* prologue: function */
  26               	/* frame size = 0 */
  27 0010 A62F      		mov r26,r22
  28 0012 BA01      		movw r22,r20
  29 0014 A901      		movw r20,r18
  30 0016 FC01      		movw r30,r24
  31 0018 A48B      		std Z+20,r26
  32 001a A230      		cpi r26,lo8(2)
  33 001c 01F0      		breq .L6
  34 001e A430      		cpi r26,lo8(4)
  35 0020 01F0      		breq .L7
  36 0022 A130      		cpi r26,lo8(1)
  37 0024 01F4      		brne .L11
  38 0026 00C0      		rjmp .L12
  39               	.L7:
  40 0028 2289      		ldd r18,Z+18
  41 002a 3389      		ldd r19,Z+19
  42 002c 81E0      		ldi r24,lo8(1)
  43 002e 90E0      		ldi r25,hi8(1)
  44 0030 2827      		eor r18,r24
  45 0032 3927      		eor r19,r25
  46 0034 338B      		std Z+19,r19
  47 0036 228B      		std Z+18,r18
  48 0038 4283      		std Z+2,r20
  49 003a 5383      		std Z+3,r21
  50 003c 6483      		std Z+4,r22
  51 003e 7583      		std Z+5,r23
  52 0040 E682      		std Z+6,r14
  53 0042 F782      		std Z+7,r15
  54 0044 0087      		std Z+8,r16
  55 0046 1187      		std Z+9,r17
  56 0048 232B      		or r18,r19
  57 004a 01F4      		brne .L8
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 2


  58 004c E286      		std Z+10,r14
  59 004e F386      		std Z+11,r15
  60 0050 0487      		std Z+12,r16
  61 0052 1587      		std Z+13,r17
  62 0054 00C0      		rjmp .L9
  63               	.L8:
  64 0056 4287      		std Z+10,r20
  65 0058 5387      		std Z+11,r21
  66 005a 6487      		std Z+12,r22
  67 005c 7587      		std Z+13,r23
  68 005e 00C0      		rjmp .L9
  69               	.L6:
  70 0060 8289      		ldd r24,Z+18
  71 0062 9389      		ldd r25,Z+19
  72 0064 21E0      		ldi r18,lo8(1)
  73 0066 30E0      		ldi r19,hi8(1)
  74 0068 8227      		eor r24,r18
  75 006a 9327      		eor r25,r19
  76 006c 938B      		std Z+19,r25
  77 006e 828B      		std Z+18,r24
  78 0070 00C0      		rjmp .L9
  79               	.L12:
  80 0072 138A      		std Z+19,__zero_reg__
  81 0074 128A      		std Z+18,__zero_reg__
  82 0076 4287      		std Z+10,r20
  83 0078 5387      		std Z+11,r21
  84 007a 6487      		std Z+12,r22
  85 007c 7587      		std Z+13,r23
  86 007e 4283      		std Z+2,r20
  87 0080 5383      		std Z+3,r21
  88 0082 6483      		std Z+4,r22
  89 0084 7583      		std Z+5,r23
  90 0086 00C0      		rjmp .L9
  91               	.L11:
  92 0088 81E0      		ldi r24,lo8(1)
  93 008a 90E0      		ldi r25,hi8(1)
  94 008c 938B      		std Z+19,r25
  95 008e 828B      		std Z+18,r24
  96 0090 E286      		std Z+10,r14
  97 0092 F386      		std Z+11,r15
  98 0094 0487      		std Z+12,r16
  99 0096 1587      		std Z+13,r17
 100 0098 E682      		std Z+6,r14
 101 009a F782      		std Z+7,r15
 102 009c 0087      		std Z+8,r16
 103 009e 1187      		std Z+9,r17
 104               	.L9:
 105 00a0 6089      		ldd r22,Z+16
 106 00a2 7189      		ldd r23,Z+17
 107 00a4 4289      		ldd r20,Z+18
 108 00a6 5389      		ldd r21,Z+19
 109 00a8 8685      		ldd r24,Z+14
 110 00aa 9785      		ldd r25,Z+15
 111 00ac 0E94 0000 		call GpioPinSet
 112               	/* epilogue start */
 113 00b0 1F91      		pop r17
 114 00b2 0F91      		pop r16
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 3


 115 00b4 FF90      		pop r15
 116 00b6 EF90      		pop r14
 117 00b8 0895      		ret
 118               		.size	NutSetLed, .-NutSetLed
 119               	.global	sys_led
 120               		.type	sys_led, @function
 121               	sys_led:
 122               	/* prologue: function */
 123               	/* frame size = 0 */
 124 00ba 1C01      		movw r2,r24
 125 00bc 0E94 0000 		call NutGetMillis
 126 00c0 7B01      		movw r14,r22
 127 00c2 8C01      		movw r16,r24
 128 00c4 80E1      		ldi r24,lo8(16)
 129 00c6 0E94 0000 		call NutThreadSetPriority
 130               	.L28:
 131 00ca C101      		movw r24,r2
 132 00cc 40E0      		ldi r20,lo8(0)
 133 00ce 50E0      		ldi r21,hi8(0)
 134 00d0 60E0      		ldi r22,hlo8(0)
 135 00d2 70E0      		ldi r23,hhi8(0)
 136 00d4 0E94 0000 		call NutEventWait
 137 00d8 892B      		or r24,r25
 138 00da 01F4      		brne .L28
 139 00dc 0E94 0000 		call NutGetMillis
 140 00e0 2B01      		movw r4,r22
 141 00e2 3C01      		movw r6,r24
 142 00e4 5B01      		movw r10,r22
 143 00e6 6C01      		movw r12,r24
 144 00e8 AE18      		sub r10,r14
 145 00ea BF08      		sbc r11,r15
 146 00ec C00A      		sbc r12,r16
 147 00ee D10A      		sbc r13,r17
 148 00f0 C091 0000 		lds r28,first_led
 149 00f4 D091 0000 		lds r29,(first_led)+1
 150 00f8 00C0      		rjmp .L15
 151               	.L33:
 152 00fa 9C88      		ldd r9,Y+20
 153 00fc 81E0      		ldi r24,lo8(1)
 154 00fe 9816      		cp r9,r24
 155 0100 01F0      		breq .L18
 156 0102 9816      		cp r9,r24
 157 0104 00F0      		brlo .L17
 158 0106 84E0      		ldi r24,lo8(4)
 159 0108 9816      		cp r9,r24
 160 010a 01F0      		breq .+2
 161 010c 00C0      		rjmp .L16
 162 010e 00C0      		rjmp .L32
 163               	.L18:
 164 0110 8A81      		ldd r24,Y+2
 165 0112 9B81      		ldd r25,Y+3
 166 0114 AC81      		ldd r26,Y+4
 167 0116 BD81      		ldd r27,Y+5
 168 0118 0097      		sbiw r24,0
 169 011a A105      		cpc r26,__zero_reg__
 170 011c B105      		cpc r27,__zero_reg__
 171 011e 01F4      		brne .+2
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 4


 172 0120 00C0      		rjmp .L16
 173 0122 8A85      		ldd r24,Y+10
 174 0124 9B85      		ldd r25,Y+11
 175 0126 AC85      		ldd r26,Y+12
 176 0128 BD85      		ldd r27,Y+13
 177 012a 8A15      		cp r24,r10
 178 012c 9B05      		cpc r25,r11
 179 012e AC05      		cpc r26,r12
 180 0130 BD05      		cpc r27,r13
 181 0132 00F4      		brsh .L31
 182               	.L20:
 183 0134 CE01      		movw r24,r28
 184 0136 60E0      		ldi r22,lo8(0)
 185 0138 00C0      		rjmp .L30
 186               	.L17:
 187 013a 8E81      		ldd r24,Y+6
 188 013c 9F81      		ldd r25,Y+7
 189 013e A885      		ldd r26,Y+8
 190 0140 B985      		ldd r27,Y+9
 191 0142 0097      		sbiw r24,0
 192 0144 A105      		cpc r26,__zero_reg__
 193 0146 B105      		cpc r27,__zero_reg__
 194 0148 01F4      		brne .+2
 195 014a 00C0      		rjmp .L16
 196 014c 8A85      		ldd r24,Y+10
 197 014e 9B85      		ldd r25,Y+11
 198 0150 AC85      		ldd r26,Y+12
 199 0152 BD85      		ldd r27,Y+13
 200 0154 8A15      		cp r24,r10
 201 0156 9B05      		cpc r25,r11
 202 0158 AC05      		cpc r26,r12
 203 015a BD05      		cpc r27,r13
 204 015c 00F4      		brsh .L31
 205               	.L21:
 206 015e CE01      		movw r24,r28
 207 0160 61E0      		ldi r22,lo8(1)
 208               	.L30:
 209 0162 20E0      		ldi r18,lo8(0)
 210 0164 30E0      		ldi r19,hi8(0)
 211 0166 40E0      		ldi r20,hlo8(0)
 212 0168 50E0      		ldi r21,hhi8(0)
 213 016a EE24      		clr r14
 214 016c FF24      		clr r15
 215 016e 8701      		movw r16,r14
 216 0170 0E94 0000 		call NutSetLed
 217 0174 00C0      		rjmp .L16
 218               	.L32:
 219 0176 8A85      		ldd r24,Y+10
 220 0178 9B85      		ldd r25,Y+11
 221 017a AC85      		ldd r26,Y+12
 222 017c BD85      		ldd r27,Y+13
 223 017e 8A15      		cp r24,r10
 224 0180 9B05      		cpc r25,r11
 225 0182 AC05      		cpc r26,r12
 226 0184 BD05      		cpc r27,r13
 227 0186 00F0      		brlo .L22
 228               	.L31:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 5


 229 0188 8A19      		sub r24,r10
 230 018a 9B09      		sbc r25,r11
 231 018c AC09      		sbc r26,r12
 232 018e BD09      		sbc r27,r13
 233 0190 00C0      		rjmp .L29
 234               	.L22:
 235 0192 CE01      		movw r24,r28
 236 0194 62E0      		ldi r22,lo8(2)
 237 0196 20E0      		ldi r18,lo8(0)
 238 0198 30E0      		ldi r19,hi8(0)
 239 019a 40E0      		ldi r20,hlo8(0)
 240 019c 50E0      		ldi r21,hhi8(0)
 241 019e EE24      		clr r14
 242 01a0 FF24      		clr r15
 243 01a2 8701      		movw r16,r14
 244 01a4 0E94 0000 		call NutSetLed
 245 01a8 9C8A      		std Y+20,r9
 246 01aa 8A89      		ldd r24,Y+18
 247 01ac 9B89      		ldd r25,Y+19
 248 01ae 892B      		or r24,r25
 249 01b0 01F0      		breq .L23
 250 01b2 8E81      		ldd r24,Y+6
 251 01b4 9F81      		ldd r25,Y+7
 252 01b6 A885      		ldd r26,Y+8
 253 01b8 B985      		ldd r27,Y+9
 254 01ba 00C0      		rjmp .L29
 255               	.L23:
 256 01bc 8A81      		ldd r24,Y+2
 257 01be 9B81      		ldd r25,Y+3
 258 01c0 AC81      		ldd r26,Y+4
 259 01c2 BD81      		ldd r27,Y+5
 260               	.L29:
 261 01c4 8A87      		std Y+10,r24
 262 01c6 9B87      		std Y+11,r25
 263 01c8 AC87      		std Y+12,r26
 264 01ca BD87      		std Y+13,r27
 265               	.L16:
 266 01cc 8881      		ld r24,Y
 267 01ce 9981      		ldd r25,Y+1
 268 01d0 9C01      		movw r18,r24
 269 01d2 E901      		movw r28,r18
 270               	.L15:
 271 01d4 8301      		movw r16,r6
 272 01d6 7201      		movw r14,r4
 273 01d8 2097      		sbiw r28,0
 274 01da 01F4      		brne .+2
 275 01dc 00C0      		rjmp .L28
 276 01de 00C0      		rjmp .L33
 277               		.size	sys_led, .-sys_led
 278               	.global	InitLED
 279               		.type	InitLED, @function
 280               	InitLED:
 281 01e0 0F93      		push r16
 282 01e2 1F93      		push r17
 283               	/* prologue: function */
 284               	/* frame size = 0 */
 285 01e4 8C01      		movw r16,r24
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 6


 286 01e6 FC01      		movw r30,r24
 287 01e8 6089      		ldd r22,Z+16
 288 01ea 7189      		ldd r23,Z+17
 289 01ec 8685      		ldd r24,Z+14
 290 01ee 9785      		ldd r25,Z+15
 291 01f0 22E0      		ldi r18,lo8(2)
 292 01f2 30E0      		ldi r19,hi8(2)
 293 01f4 40E0      		ldi r20,hlo8(2)
 294 01f6 50E0      		ldi r21,hhi8(2)
 295 01f8 0E94 0000 		call GpioPinConfigSet
 296 01fc F801      		movw r30,r16
 297 01fe 6089      		ldd r22,Z+16
 298 0200 7189      		ldd r23,Z+17
 299 0202 8685      		ldd r24,Z+14
 300 0204 9785      		ldd r25,Z+15
 301 0206 0E94 0000 		call GpioPinSetHigh
 302 020a 80E0      		ldi r24,lo8(0)
 303 020c 90E0      		ldi r25,hi8(0)
 304               	/* epilogue start */
 305 020e 1F91      		pop r17
 306 0210 0F91      		pop r16
 307 0212 0895      		ret
 308               		.size	InitLED, .-InitLED
 309               		.data
 310               	.LC0:
 311 0000 7379 735F 		.string	"sys_led"
 311      6C65 6400 
 312               		.text
 313               	.global	NutRegisterLed
 314               		.type	NutRegisterLed, @function
 315               	NutRegisterLed:
 316 0214 CF92      		push r12
 317 0216 DF92      		push r13
 318 0218 EF92      		push r14
 319 021a FF92      		push r15
 320 021c 0F93      		push r16
 321 021e 1F93      		push r17
 322 0220 CF93      		push r28
 323 0222 DF93      		push r29
 324               	/* prologue: function */
 325               	/* frame size = 0 */
 326 0224 8C01      		movw r16,r24
 327 0226 7B01      		movw r14,r22
 328 0228 6A01      		movw r12,r20
 329 022a 85E1      		ldi r24,lo8(21)
 330 022c 90E0      		ldi r25,hi8(21)
 331 022e 0E94 0000 		call malloc
 332 0232 EC01      		movw r28,r24
 333 0234 F801      		movw r30,r16
 334 0236 9183      		std Z+1,r25
 335 0238 8083      		st Z,r24
 336 023a 0097      		sbiw r24,0
 337 023c 01F4      		brne .L37
 338 023e 2FEF      		ldi r18,lo8(-1)
 339 0240 3FEF      		ldi r19,hi8(-1)
 340 0242 00C0      		rjmp .L38
 341               	.L37:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 7


 342 0244 85E1      		ldi r24,lo8(21)
 343 0246 FE01      		movw r30,r28
 344 0248 1192      		st Z+,__zero_reg__
 345 024a 8A95      	        dec r24
 346 024c 01F4      		brne .-6
 347 024e FF86      		std Y+15,r15
 348 0250 EE86      		std Y+14,r14
 349 0252 D98A      		std Y+17,r13
 350 0254 C88A      		std Y+16,r12
 351 0256 81E0      		ldi r24,lo8(1)
 352 0258 90E0      		ldi r25,hi8(1)
 353 025a 9B8B      		std Y+19,r25
 354 025c 8A8B      		std Y+18,r24
 355               	/* #APP */
 356               	 ;  307 "../../nut/dev/led.c" 1
 357 025e 0FB6      		in  __tmp_reg__, __SREG__
 358 0260 F894      		cli
 359 0262 0F92      		push __tmp_reg__
 360               		
 361               	 ;  0 "" 2
 362               	/* #NOAPP */
 363 0264 8091 0000 		lds r24,first_led
 364 0268 9091 0000 		lds r25,(first_led)+1
 365 026c 0097      		sbiw r24,0
 366 026e 01F0      		breq .L43
 367               	.L39:
 368 0270 9983      		std Y+1,r25
 369 0272 8883      		st Y,r24
 370               	.L43:
 371 0274 D093 0000 		sts (first_led)+1,r29
 372 0278 C093 0000 		sts first_led,r28
 373               	/* #APP */
 374               	 ;  317 "../../nut/dev/led.c" 1
 375 027c 0F90      		pop __tmp_reg__
 376 027e 0FBE      		out __SREG__, __tmp_reg__
 377               		
 378               	 ;  0 "" 2
 379               	/* #NOAPP */
 380 0280 8091 0000 		lds r24,led_tmr
 381 0284 9091 0000 		lds r25,(led_tmr)+1
 382 0288 892B      		or r24,r25
 383 028a 01F4      		brne .L41
 384 028c 80E0      		ldi r24,lo8(.LC0)
 385 028e 90E0      		ldi r25,hi8(.LC0)
 386 0290 60E0      		ldi r22,lo8(gs(sys_led))
 387 0292 70E0      		ldi r23,hi8(gs(sys_led))
 388 0294 40E0      		ldi r20,lo8(led_evt)
 389 0296 50E0      		ldi r21,hi8(led_evt)
 390 0298 20EC      		ldi r18,lo8(192)
 391 029a 30E0      		ldi r19,hi8(192)
 392 029c 0E94 0000 		call NutThreadCreate
 393 02a0 6AE0      		ldi r22,lo8(10)
 394 02a2 70E0      		ldi r23,hi8(10)
 395 02a4 80E0      		ldi r24,hlo8(10)
 396 02a6 90E0      		ldi r25,hhi8(10)
 397 02a8 40E0      		ldi r20,lo8(gs(LedTimerCb))
 398 02aa 50E0      		ldi r21,hi8(gs(LedTimerCb))
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 8


 399 02ac 20E0      		ldi r18,lo8(led_evt)
 400 02ae 30E0      		ldi r19,hi8(led_evt)
 401 02b0 00E0      		ldi r16,lo8(0)
 402 02b2 0E94 0000 		call NutTimerStart
 403 02b6 9093 0000 		sts (led_tmr)+1,r25
 404 02ba 8093 0000 		sts led_tmr,r24
 405               	.L41:
 406 02be CE01      		movw r24,r28
 407 02c0 0E94 0000 		call InitLED
 408 02c4 9C01      		movw r18,r24
 409               	.L38:
 410 02c6 C901      		movw r24,r18
 411               	/* epilogue start */
 412 02c8 DF91      		pop r29
 413 02ca CF91      		pop r28
 414 02cc 1F91      		pop r17
 415 02ce 0F91      		pop r16
 416 02d0 FF90      		pop r15
 417 02d2 EF90      		pop r14
 418 02d4 DF90      		pop r13
 419 02d6 CF90      		pop r12
 420 02d8 0895      		ret
 421               		.size	NutRegisterLed, .-NutRegisterLed
 422               	.global	first_led
 423               	.global	first_led
 424               		.section .bss
 425               		.type	first_led, @object
 426               		.size	first_led, 2
 427               	first_led:
 428 0000 0000      		.skip 2,0
 429               	.global	led_tmr
 430               	.global	led_tmr
 431               		.type	led_tmr, @object
 432               		.size	led_tmr, 2
 433               	led_tmr:
 434 0002 0000      		.skip 2,0
 435               	.global	led_evt
 436               	.global	led_evt
 437               		.type	led_evt, @object
 438               		.size	led_evt, 2
 439               	led_evt:
 440 0004 0000      		.skip 2,0
 441               	.global __do_copy_data
 442               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 led.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:10     .text:00000000 LedTimerCb
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:20     .text:00000008 NutSetLed
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:121    .text:000000ba sys_led
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:427    .bss:00000000 first_led
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:280    .text:000001e0 InitLED
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:315    .text:00000214 NutRegisterLed
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:433    .bss:00000002 led_tmr
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccMXFczp.s:439    .bss:00000004 led_evt

UNDEFINED SYMBOLS
NutEventPostAsync
GpioPinSet
NutGetMillis
NutThreadSetPriority
NutEventWait
GpioPinConfigSet
GpioPinSetHigh
malloc
NutThreadCreate
NutTimerStart
__do_copy_data
__do_clear_bss
