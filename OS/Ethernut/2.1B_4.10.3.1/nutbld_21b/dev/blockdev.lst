GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 1


   1               		.file	"blockdev.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	NutBlockDeviceInit
  10               		.type	NutBlockDeviceInit, @function
  11               	NutBlockDeviceInit:
  12               	/* prologue: function */
  13               	/* frame size = 0 */
  14 0000 80E0      		ldi r24,lo8(0)
  15 0002 90E0      		ldi r25,hi8(0)
  16               	/* epilogue start */
  17 0004 0895      		ret
  18               		.size	NutBlockDeviceInit, .-NutBlockDeviceInit
  19               	.global	NutBlockDeviceIOCtl
  20               		.type	NutBlockDeviceIOCtl, @function
  21               	NutBlockDeviceIOCtl:
  22 0006 CF93      		push r28
  23 0008 DF93      		push r29
  24               	/* prologue: function */
  25               	/* frame size = 0 */
  26 000a DC01      		movw r26,r24
  27 000c 82E1      		ldi r24,hi8(4610)
  28 000e 6230      		cpi r22,lo8(4610)
  29 0010 7807      		cpc r23,r24
  30 0012 01F0      		breq .L5
  31 0014 E2E1      		ldi r30,hi8(4611)
  32 0016 6330      		cpi r22,lo8(4611)
  33 0018 7E07      		cpc r23,r30
  34 001a 01F4      		brne .L9
  35 001c FA01      		movw r30,r20
  36 001e A081      		ld r26,Z
  37 0020 B181      		ldd r27,Z+1
  38 0022 1496      		adiw r26,4
  39 0024 2D91      		ld r18,X+
  40 0026 3C91      		ld r19,X
  41 0028 1597      		sbiw r26,4+1
  42 002a 8281      		ldd r24,Z+2
  43 002c 9381      		ldd r25,Z+3
  44 002e A481      		ldd r26,Z+4
  45 0030 B581      		ldd r27,Z+5
  46 0032 E901      		movw r28,r18
  47 0034 8C87      		std Y+12,r24
  48 0036 9D87      		std Y+13,r25
  49 0038 AE87      		std Y+14,r26
  50 003a BF87      		std Y+15,r27
  51 003c 00C0      		rjmp .L10
  52               	.L5:
  53 003e FA01      		movw r30,r20
  54 0040 A081      		ld r26,Z
  55 0042 B181      		ldd r27,Z+1
  56 0044 1496      		adiw r26,4
  57 0046 2D91      		ld r18,X+
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 2


  58 0048 3C91      		ld r19,X
  59 004a 1597      		sbiw r26,4+1
  60 004c E901      		movw r28,r18
  61 004e 8A81      		ldd r24,Y+2
  62 0050 9B81      		ldd r25,Y+3
  63 0052 AC81      		ldd r26,Y+4
  64 0054 BD81      		ldd r27,Y+5
  65 0056 8283      		std Z+2,r24
  66 0058 9383      		std Z+3,r25
  67 005a A483      		std Z+4,r26
  68 005c B583      		std Z+5,r27
  69 005e 8E81      		ldd r24,Y+6
  70 0060 9F81      		ldd r25,Y+7
  71 0062 AA27      		clr r26
  72 0064 97FD      		sbrc r25,7
  73 0066 A095      		com r26
  74 0068 BA2F      		mov r27,r26
  75 006a 8683      		std Z+6,r24
  76 006c 9783      		std Z+7,r25
  77 006e A087      		std Z+8,r26
  78 0070 B187      		std Z+9,r27
  79 0072 8889      		ldd r24,Y+16
  80 0074 9989      		ldd r25,Y+17
  81 0076 9387      		std Z+11,r25
  82 0078 8287      		std Z+10,r24
  83               	.L10:
  84 007a 20E0      		ldi r18,lo8(0)
  85 007c 30E0      		ldi r19,hi8(0)
  86 007e 00C0      		rjmp .L7
  87               	.L9:
  88 0080 5196      		adiw r26,17
  89 0082 ED91      		ld r30,X+
  90 0084 FC91      		ld r31,X
  91 0086 5297      		sbiw r26,17+1
  92 0088 008C      		ldd __tmp_reg__,Z+24
  93 008a F18D      		ldd r31,Z+25
  94 008c E02D      		mov r30,__tmp_reg__
  95 008e CD01      		movw r24,r26
  96 0090 0995      		icall
  97 0092 9C01      		movw r18,r24
  98               	.L7:
  99 0094 C901      		movw r24,r18
 100               	/* epilogue start */
 101 0096 DF91      		pop r29
 102 0098 CF91      		pop r28
 103 009a 0895      		ret
 104               		.size	NutBlockDeviceIOCtl, .-NutBlockDeviceIOCtl
 105               	.global	NutBlockDeviceRead
 106               		.type	NutBlockDeviceRead, @function
 107               	NutBlockDeviceRead:
 108 009c 6F92      		push r6
 109 009e 7F92      		push r7
 110 00a0 8F92      		push r8
 111 00a2 9F92      		push r9
 112 00a4 AF92      		push r10
 113 00a6 BF92      		push r11
 114 00a8 CF92      		push r12
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 3


 115 00aa DF92      		push r13
 116 00ac EF92      		push r14
 117 00ae FF92      		push r15
 118 00b0 0F93      		push r16
 119 00b2 1F93      		push r17
 120 00b4 CF93      		push r28
 121 00b6 DF93      		push r29
 122               	/* prologue: function */
 123               	/* frame size = 0 */
 124 00b8 5C01      		movw r10,r24
 125 00ba 4A01      		movw r8,r20
 126 00bc 4115      		cp r20,__zero_reg__
 127 00be 5105      		cpc r21,__zero_reg__
 128 00c0 01F4      		brne .L12
 129 00c2 EE24      		clr r14
 130 00c4 FF24      		clr r15
 131 00c6 00C0      		rjmp .L13
 132               	.L12:
 133 00c8 6B01      		movw r12,r22
 134 00ca D501      		movw r26,r10
 135 00cc 1296      		adiw r26,2
 136 00ce ED91      		ld r30,X+
 137 00d0 FC91      		ld r31,X
 138 00d2 1397      		sbiw r26,2+1
 139 00d4 6188      		ldd r6,Z+17
 140 00d6 7288      		ldd r7,Z+18
 141 00d8 1496      		adiw r26,4
 142 00da CD91      		ld r28,X+
 143 00dc DC91      		ld r29,X
 144 00de 1597      		sbiw r26,4+1
 145 00e0 EE24      		clr r14
 146 00e2 FF24      		clr r15
 147 00e4 00C0      		rjmp .L14
 148               	.L16:
 149 00e6 4C85      		ldd r20,Y+12
 150 00e8 5D85      		ldd r21,Y+13
 151 00ea 6E85      		ldd r22,Y+14
 152 00ec 7F85      		ldd r23,Y+15
 153 00ee 8A81      		ldd r24,Y+2
 154 00f0 9B81      		ldd r25,Y+3
 155 00f2 AC81      		ldd r26,Y+4
 156 00f4 BD81      		ldd r27,Y+5
 157 00f6 4817      		cp r20,r24
 158 00f8 5907      		cpc r21,r25
 159 00fa 6A07      		cpc r22,r26
 160 00fc 7B07      		cpc r23,r27
 161 00fe 00F4      		brsh .L15
 162 0100 8885      		ldd r24,Y+8
 163 0102 9985      		ldd r25,Y+9
 164 0104 AA85      		ldd r26,Y+10
 165 0106 BB85      		ldd r27,Y+11
 166 0108 480F      		add r20,r24
 167 010a 591F      		adc r21,r25
 168 010c 6A1F      		adc r22,r26
 169 010e 7B1F      		adc r23,r27
 170 0110 0E81      		ldd r16,Y+6
 171 0112 1F81      		ldd r17,Y+7
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 4


 172 0114 D301      		movw r26,r6
 173 0116 5296      		adiw r26,18
 174 0118 ED91      		ld r30,X+
 175 011a FC91      		ld r31,X
 176 011c 5397      		sbiw r26,18+1
 177 011e D501      		movw r26,r10
 178 0120 1296      		adiw r26,2
 179 0122 8D91      		ld r24,X+
 180 0124 9C91      		ld r25,X
 181 0126 1397      		sbiw r26,2+1
 182 0128 9601      		movw r18,r12
 183 012a 0995      		icall
 184 012c 9C01      		movw r18,r24
 185 012e 8E81      		ldd r24,Y+6
 186 0130 9F81      		ldd r25,Y+7
 187 0132 2817      		cp r18,r24
 188 0134 3907      		cpc r19,r25
 189 0136 01F4      		brne .L15
 190 0138 8C85      		ldd r24,Y+12
 191 013a 9D85      		ldd r25,Y+13
 192 013c AE85      		ldd r26,Y+14
 193 013e BF85      		ldd r27,Y+15
 194 0140 0196      		adiw r24,1
 195 0142 A11D      		adc r26,__zero_reg__
 196 0144 B11D      		adc r27,__zero_reg__
 197 0146 8C87      		std Y+12,r24
 198 0148 9D87      		std Y+13,r25
 199 014a AE87      		std Y+14,r26
 200 014c BF87      		std Y+15,r27
 201 014e C20E      		add r12,r18
 202 0150 D31E      		adc r13,r19
 203 0152 0894      		sec
 204 0154 E11C      		adc r14,__zero_reg__
 205 0156 F11C      		adc r15,__zero_reg__
 206               	.L14:
 207 0158 E814      		cp r14,r8
 208 015a F904      		cpc r15,r9
 209 015c 04F0      		brlt .L16
 210               	.L15:
 211 015e E114      		cp r14,__zero_reg__
 212 0160 F104      		cpc r15,__zero_reg__
 213 0162 01F4      		brne .L13
 214 0164 EE24      		clr r14
 215 0166 EA94      		dec r14
 216 0168 FE2C      		mov r15,r14
 217               	.L13:
 218 016a C701      		movw r24,r14
 219               	/* epilogue start */
 220 016c DF91      		pop r29
 221 016e CF91      		pop r28
 222 0170 1F91      		pop r17
 223 0172 0F91      		pop r16
 224 0174 FF90      		pop r15
 225 0176 EF90      		pop r14
 226 0178 DF90      		pop r13
 227 017a CF90      		pop r12
 228 017c BF90      		pop r11
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 5


 229 017e AF90      		pop r10
 230 0180 9F90      		pop r9
 231 0182 8F90      		pop r8
 232 0184 7F90      		pop r7
 233 0186 6F90      		pop r6
 234 0188 0895      		ret
 235               		.size	NutBlockDeviceRead, .-NutBlockDeviceRead
 236               	.global	NutBlockDeviceWrite
 237               		.type	NutBlockDeviceWrite, @function
 238               	NutBlockDeviceWrite:
 239 018a 6F92      		push r6
 240 018c 7F92      		push r7
 241 018e 8F92      		push r8
 242 0190 9F92      		push r9
 243 0192 AF92      		push r10
 244 0194 BF92      		push r11
 245 0196 CF92      		push r12
 246 0198 DF92      		push r13
 247 019a EF92      		push r14
 248 019c FF92      		push r15
 249 019e 0F93      		push r16
 250 01a0 1F93      		push r17
 251 01a2 CF93      		push r28
 252 01a4 DF93      		push r29
 253               	/* prologue: function */
 254               	/* frame size = 0 */
 255 01a6 5C01      		movw r10,r24
 256 01a8 4A01      		movw r8,r20
 257 01aa 4115      		cp r20,__zero_reg__
 258 01ac 5105      		cpc r21,__zero_reg__
 259 01ae 01F4      		brne .L19
 260 01b0 EE24      		clr r14
 261 01b2 FF24      		clr r15
 262 01b4 00C0      		rjmp .L20
 263               	.L19:
 264 01b6 6B01      		movw r12,r22
 265 01b8 D501      		movw r26,r10
 266 01ba 1496      		adiw r26,4
 267 01bc CD91      		ld r28,X+
 268 01be DC91      		ld r29,X
 269 01c0 1597      		sbiw r26,4+1
 270 01c2 1296      		adiw r26,2
 271 01c4 ED91      		ld r30,X+
 272 01c6 FC91      		ld r31,X
 273 01c8 1397      		sbiw r26,2+1
 274 01ca 6188      		ldd r6,Z+17
 275 01cc 7288      		ldd r7,Z+18
 276 01ce EE24      		clr r14
 277 01d0 FF24      		clr r15
 278 01d2 00C0      		rjmp .L21
 279               	.L23:
 280 01d4 4C85      		ldd r20,Y+12
 281 01d6 5D85      		ldd r21,Y+13
 282 01d8 6E85      		ldd r22,Y+14
 283 01da 7F85      		ldd r23,Y+15
 284 01dc 8A81      		ldd r24,Y+2
 285 01de 9B81      		ldd r25,Y+3
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 6


 286 01e0 AC81      		ldd r26,Y+4
 287 01e2 BD81      		ldd r27,Y+5
 288 01e4 4817      		cp r20,r24
 289 01e6 5907      		cpc r21,r25
 290 01e8 6A07      		cpc r22,r26
 291 01ea 7B07      		cpc r23,r27
 292 01ec 00F4      		brsh .L22
 293 01ee 8885      		ldd r24,Y+8
 294 01f0 9985      		ldd r25,Y+9
 295 01f2 AA85      		ldd r26,Y+10
 296 01f4 BB85      		ldd r27,Y+11
 297 01f6 480F      		add r20,r24
 298 01f8 591F      		adc r21,r25
 299 01fa 6A1F      		adc r22,r26
 300 01fc 7B1F      		adc r23,r27
 301 01fe 0E81      		ldd r16,Y+6
 302 0200 1F81      		ldd r17,Y+7
 303 0202 D301      		movw r26,r6
 304 0204 5496      		adiw r26,20
 305 0206 ED91      		ld r30,X+
 306 0208 FC91      		ld r31,X
 307 020a 5597      		sbiw r26,20+1
 308 020c D501      		movw r26,r10
 309 020e 1296      		adiw r26,2
 310 0210 8D91      		ld r24,X+
 311 0212 9C91      		ld r25,X
 312 0214 1397      		sbiw r26,2+1
 313 0216 9601      		movw r18,r12
 314 0218 0995      		icall
 315 021a 9C01      		movw r18,r24
 316 021c 8E81      		ldd r24,Y+6
 317 021e 9F81      		ldd r25,Y+7
 318 0220 2817      		cp r18,r24
 319 0222 3907      		cpc r19,r25
 320 0224 01F4      		brne .L22
 321 0226 8C85      		ldd r24,Y+12
 322 0228 9D85      		ldd r25,Y+13
 323 022a AE85      		ldd r26,Y+14
 324 022c BF85      		ldd r27,Y+15
 325 022e 0196      		adiw r24,1
 326 0230 A11D      		adc r26,__zero_reg__
 327 0232 B11D      		adc r27,__zero_reg__
 328 0234 8C87      		std Y+12,r24
 329 0236 9D87      		std Y+13,r25
 330 0238 AE87      		std Y+14,r26
 331 023a BF87      		std Y+15,r27
 332 023c C20E      		add r12,r18
 333 023e D31E      		adc r13,r19
 334 0240 0894      		sec
 335 0242 E11C      		adc r14,__zero_reg__
 336 0244 F11C      		adc r15,__zero_reg__
 337               	.L21:
 338 0246 E814      		cp r14,r8
 339 0248 F904      		cpc r15,r9
 340 024a 04F0      		brlt .L23
 341               	.L22:
 342 024c E114      		cp r14,__zero_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 7


 343 024e F104      		cpc r15,__zero_reg__
 344 0250 01F4      		brne .L20
 345 0252 EE24      		clr r14
 346 0254 EA94      		dec r14
 347 0256 FE2C      		mov r15,r14
 348               	.L20:
 349 0258 C701      		movw r24,r14
 350               	/* epilogue start */
 351 025a DF91      		pop r29
 352 025c CF91      		pop r28
 353 025e 1F91      		pop r17
 354 0260 0F91      		pop r16
 355 0262 FF90      		pop r15
 356 0264 EF90      		pop r14
 357 0266 DF90      		pop r13
 358 0268 CF90      		pop r12
 359 026a BF90      		pop r11
 360 026c AF90      		pop r10
 361 026e 9F90      		pop r9
 362 0270 8F90      		pop r8
 363 0272 7F90      		pop r7
 364 0274 6F90      		pop r6
 365 0276 0895      		ret
 366               		.size	NutBlockDeviceWrite, .-NutBlockDeviceWrite
 367               	.global	NutBlockDeviceWrite_P
 368               		.type	NutBlockDeviceWrite_P, @function
 369               	NutBlockDeviceWrite_P:
 370 0278 6F92      		push r6
 371 027a 7F92      		push r7
 372 027c 8F92      		push r8
 373 027e 9F92      		push r9
 374 0280 AF92      		push r10
 375 0282 BF92      		push r11
 376 0284 CF92      		push r12
 377 0286 DF92      		push r13
 378 0288 EF92      		push r14
 379 028a FF92      		push r15
 380 028c 0F93      		push r16
 381 028e 1F93      		push r17
 382 0290 CF93      		push r28
 383 0292 DF93      		push r29
 384               	/* prologue: function */
 385               	/* frame size = 0 */
 386 0294 5C01      		movw r10,r24
 387 0296 4A01      		movw r8,r20
 388 0298 4115      		cp r20,__zero_reg__
 389 029a 5105      		cpc r21,__zero_reg__
 390 029c 01F4      		brne .L26
 391 029e C0E0      		ldi r28,lo8(0)
 392 02a0 D0E0      		ldi r29,hi8(0)
 393 02a2 00C0      		rjmp .L27
 394               	.L26:
 395 02a4 DC01      		movw r26,r24
 396 02a6 1496      		adiw r26,4
 397 02a8 ED90      		ld r14,X+
 398 02aa FC90      		ld r15,X
 399 02ac 1597      		sbiw r26,4+1
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 8


 400 02ae 1296      		adiw r26,2
 401 02b0 ED91      		ld r30,X+
 402 02b2 FC91      		ld r31,X
 403 02b4 1397      		sbiw r26,2+1
 404 02b6 6188      		ldd r6,Z+17
 405 02b8 7288      		ldd r7,Z+18
 406 02ba 6B01      		movw r12,r22
 407 02bc C0E0      		ldi r28,lo8(0)
 408 02be D0E0      		ldi r29,hi8(0)
 409 02c0 00C0      		rjmp .L28
 410               	.L30:
 411 02c2 F701      		movw r30,r14
 412 02c4 4485      		ldd r20,Z+12
 413 02c6 5585      		ldd r21,Z+13
 414 02c8 6685      		ldd r22,Z+14
 415 02ca 7785      		ldd r23,Z+15
 416 02cc 8281      		ldd r24,Z+2
 417 02ce 9381      		ldd r25,Z+3
 418 02d0 A481      		ldd r26,Z+4
 419 02d2 B581      		ldd r27,Z+5
 420 02d4 4817      		cp r20,r24
 421 02d6 5907      		cpc r21,r25
 422 02d8 6A07      		cpc r22,r26
 423 02da 7B07      		cpc r23,r27
 424 02dc 00F4      		brsh .L29
 425 02de 8085      		ldd r24,Z+8
 426 02e0 9185      		ldd r25,Z+9
 427 02e2 A285      		ldd r26,Z+10
 428 02e4 B385      		ldd r27,Z+11
 429 02e6 480F      		add r20,r24
 430 02e8 591F      		adc r21,r25
 431 02ea 6A1F      		adc r22,r26
 432 02ec 7B1F      		adc r23,r27
 433 02ee 0681      		ldd r16,Z+6
 434 02f0 1781      		ldd r17,Z+7
 435 02f2 D301      		movw r26,r6
 436 02f4 5696      		adiw r26,22
 437 02f6 ED91      		ld r30,X+
 438 02f8 FC91      		ld r31,X
 439 02fa 5797      		sbiw r26,22+1
 440 02fc D501      		movw r26,r10
 441 02fe 1296      		adiw r26,2
 442 0300 8D91      		ld r24,X+
 443 0302 9C91      		ld r25,X
 444 0304 1397      		sbiw r26,2+1
 445 0306 9601      		movw r18,r12
 446 0308 0995      		icall
 447 030a 9C01      		movw r18,r24
 448 030c F701      		movw r30,r14
 449 030e 8681      		ldd r24,Z+6
 450 0310 9781      		ldd r25,Z+7
 451 0312 2817      		cp r18,r24
 452 0314 3907      		cpc r19,r25
 453 0316 01F4      		brne .L29
 454 0318 8485      		ldd r24,Z+12
 455 031a 9585      		ldd r25,Z+13
 456 031c A685      		ldd r26,Z+14
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 9


 457 031e B785      		ldd r27,Z+15
 458 0320 0196      		adiw r24,1
 459 0322 A11D      		adc r26,__zero_reg__
 460 0324 B11D      		adc r27,__zero_reg__
 461 0326 8487      		std Z+12,r24
 462 0328 9587      		std Z+13,r25
 463 032a A687      		std Z+14,r26
 464 032c B787      		std Z+15,r27
 465 032e C20E      		add r12,r18
 466 0330 D31E      		adc r13,r19
 467 0332 2196      		adiw r28,1
 468               	.L28:
 469 0334 C815      		cp r28,r8
 470 0336 D905      		cpc r29,r9
 471 0338 04F0      		brlt .L30
 472               	.L29:
 473 033a 2097      		sbiw r28,0
 474 033c 01F4      		brne .L27
 475 033e CFEF      		ldi r28,lo8(-1)
 476 0340 DFEF      		ldi r29,hi8(-1)
 477               	.L27:
 478 0342 CE01      		movw r24,r28
 479               	/* epilogue start */
 480 0344 DF91      		pop r29
 481 0346 CF91      		pop r28
 482 0348 1F91      		pop r17
 483 034a 0F91      		pop r16
 484 034c FF90      		pop r15
 485 034e EF90      		pop r14
 486 0350 DF90      		pop r13
 487 0352 CF90      		pop r12
 488 0354 BF90      		pop r11
 489 0356 AF90      		pop r10
 490 0358 9F90      		pop r9
 491 035a 8F90      		pop r8
 492 035c 7F90      		pop r7
 493 035e 6F90      		pop r6
 494 0360 0895      		ret
 495               		.size	NutBlockDeviceWrite_P, .-NutBlockDeviceWrite_P
 496               	.global	NutBlockDeviceSize
 497               		.type	NutBlockDeviceSize, @function
 498               	NutBlockDeviceSize:
 499               	/* prologue: function */
 500               	/* frame size = 0 */
 501 0362 DC01      		movw r26,r24
 502 0364 1496      		adiw r26,4
 503 0366 ED91      		ld r30,X+
 504 0368 FC91      		ld r31,X
 505 036a 1597      		sbiw r26,4+1
 506 036c 6681      		ldd r22,Z+6
 507 036e 7781      		ldd r23,Z+7
 508 0370 8827      		clr r24
 509 0372 77FD      		sbrc r23,7
 510 0374 8095      		com r24
 511 0376 982F      		mov r25,r24
 512 0378 2281      		ldd r18,Z+2
 513 037a 3381      		ldd r19,Z+3
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 10


 514 037c 4481      		ldd r20,Z+4
 515 037e 5581      		ldd r21,Z+5
 516 0380 0E94 0000 		call __mulsi3
 517               	/* epilogue start */
 518 0384 0895      		ret
 519               		.size	NutBlockDeviceSize, .-NutBlockDeviceSize
 520               	.global	NutBlockDeviceClose
 521               		.type	NutBlockDeviceClose, @function
 522               	NutBlockDeviceClose:
 523 0386 EF92      		push r14
 524 0388 FF92      		push r15
 525 038a 0F93      		push r16
 526 038c 1F93      		push r17
 527 038e CF93      		push r28
 528 0390 DF93      		push r29
 529               	/* prologue: function */
 530               	/* frame size = 0 */
 531 0392 7C01      		movw r14,r24
 532 0394 DC01      		movw r26,r24
 533 0396 1496      		adiw r26,4
 534 0398 0D91      		ld r16,X+
 535 039a 1C91      		ld r17,X
 536 039c 1597      		sbiw r26,4+1
 537 039e 0115      		cp r16,__zero_reg__
 538 03a0 1105      		cpc r17,__zero_reg__
 539 03a2 01F4      		brne .L35
 540 03a4 CFEF      		ldi r28,lo8(-1)
 541 03a6 DFEF      		ldi r29,hi8(-1)
 542 03a8 00C0      		rjmp .L36
 543               	.L35:
 544 03aa D801      		movw r26,r16
 545 03ac ED91      		ld r30,X+
 546 03ae FC91      		ld r31,X
 547 03b0 2589      		ldd r18,Z+21
 548 03b2 3689      		ldd r19,Z+22
 549 03b4 CF01      		movw r24,r30
 550 03b6 61E3      		ldi r22,lo8(4401)
 551 03b8 71E1      		ldi r23,hi8(4401)
 552 03ba 40E0      		ldi r20,lo8(0)
 553 03bc 50E0      		ldi r21,hi8(0)
 554 03be F901      		movw r30,r18
 555 03c0 0995      		icall
 556 03c2 EC01      		movw r28,r24
 557 03c4 C801      		movw r24,r16
 558 03c6 0E94 0000 		call free
 559               	.L36:
 560 03ca C701      		movw r24,r14
 561 03cc 0E94 0000 		call free
 562 03d0 CE01      		movw r24,r28
 563               	/* epilogue start */
 564 03d2 DF91      		pop r29
 565 03d4 CF91      		pop r28
 566 03d6 1F91      		pop r17
 567 03d8 0F91      		pop r16
 568 03da FF90      		pop r15
 569 03dc EF90      		pop r14
 570 03de 0895      		ret
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 11


 571               		.size	NutBlockDeviceClose, .-NutBlockDeviceClose
 572               	.global	NutBlockDeviceOpen
 573               		.type	NutBlockDeviceOpen, @function
 574               	NutBlockDeviceOpen:
 575 03e0 8F92      		push r8
 576 03e2 9F92      		push r9
 577 03e4 AF92      		push r10
 578 03e6 BF92      		push r11
 579 03e8 CF92      		push r12
 580 03ea DF92      		push r13
 581 03ec EF92      		push r14
 582 03ee FF92      		push r15
 583 03f0 0F93      		push r16
 584 03f2 1F93      		push r17
 585 03f4 DF93      		push r29
 586 03f6 CF93      		push r28
 587 03f8 00D0      		rcall .
 588 03fa 0F92      		push __tmp_reg__
 589 03fc CDB7      		in r28,__SP_L__
 590 03fe DEB7      		in r29,__SP_H__
 591               	/* prologue: function */
 592               	/* frame size = 3 */
 593 0400 4C01      		movw r8,r24
 594 0402 FB01      		movw r30,r22
 595 0404 8081      		ld r24,Z
 596 0406 8823      		tst r24
 597 0408 01F0      		breq .L39
 598               	.L51:
 599 040a 3196      		adiw r30,1
 600 040c 8081      		ld r24,Z
 601 040e 8823      		tst r24
 602 0410 01F0      		breq .L39
 603 0412 8F32      		cpi r24,lo8(47)
 604 0414 01F4      		brne .L51
 605 0416 00C0      		rjmp .L55
 606               	.L39:
 607 0418 8081      		ld r24,Z
 608 041a 8823      		tst r24
 609 041c 01F0      		breq .L42
 610 041e CF01      		movw r24,r30
 611 0420 0E94 0000 		call NutDeviceLookup
 612 0424 6C01      		movw r12,r24
 613 0426 0097      		sbiw r24,0
 614 0428 01F4      		brne .L44
 615 042a 00C0      		rjmp .L43
 616               	.L42:
 617 042c C090 0000 		lds r12,nutDeviceList
 618 0430 D090 0000 		lds r13,(nutDeviceList)+1
 619 0434 00C0      		rjmp .L45
 620               	.L46:
 621 0436 D601      		movw r26,r12
 622 0438 1B96      		adiw r26,11
 623 043a 8C91      		ld r24,X
 624 043c 1B97      		sbiw r26,11
 625 043e 8031      		cpi r24,lo8(16)
 626 0440 01F0      		breq .L44
 627 0442 CD90      		ld r12,X+
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 12


 628 0444 DC90      		ld r13,X
 629               	.L45:
 630 0446 C114      		cp r12,__zero_reg__
 631 0448 D104      		cpc r13,__zero_reg__
 632 044a 01F4      		brne .L46
 633               	.L43:
 634 044c 83E1      		ldi r24,lo8(19)
 635 044e 90E0      		ldi r25,hi8(19)
 636 0450 9093 0000 		sts (errno)+1,r25
 637 0454 8093 0000 		sts errno,r24
 638 0458 00C0      		rjmp .L54
 639               	.L44:
 640 045a 82E1      		ldi r24,lo8(18)
 641 045c 90E0      		ldi r25,hi8(18)
 642 045e 0E94 0000 		call malloc
 643 0462 7C01      		movw r14,r24
 644 0464 0097      		sbiw r24,0
 645 0466 01F4      		brne .+2
 646 0468 00C0      		rjmp .L54
 647               	.L48:
 648 046a F401      		movw r30,r8
 649 046c 6189      		ldd r22,Z+17
 650 046e 7289      		ldd r23,Z+18
 651 0470 DC01      		movw r26,r24
 652 0472 1196      		adiw r26,1
 653 0474 DC92      		st X,r13
 654 0476 CE92      		st -X,r12
 655 0478 FB01      		movw r30,r22
 656 047a 2285      		ldd r18,Z+10
 657 047c 3385      		ldd r19,Z+11
 658 047e 4485      		ldd r20,Z+12
 659 0480 5585      		ldd r21,Z+13
 660 0482 1896      		adiw r26,8
 661 0484 2D93      		st X+,r18
 662 0486 3D93      		st X+,r19
 663 0488 4D93      		st X+,r20
 664 048a 5C93      		st X,r21
 665 048c 1B97      		sbiw r26,8+3
 666 048e 8281      		ldd r24,Z+2
 667 0490 9381      		ldd r25,Z+3
 668 0492 A481      		ldd r26,Z+4
 669 0494 B581      		ldd r27,Z+5
 670 0496 2285      		ldd r18,Z+10
 671 0498 3385      		ldd r19,Z+11
 672 049a 4485      		ldd r20,Z+12
 673 049c 5585      		ldd r21,Z+13
 674 049e 821B      		sub r24,r18
 675 04a0 930B      		sbc r25,r19
 676 04a2 A40B      		sbc r26,r20
 677 04a4 B50B      		sbc r27,r21
 678 04a6 2685      		ldd r18,Z+14
 679 04a8 3785      		ldd r19,Z+15
 680 04aa 4089      		ldd r20,Z+16
 681 04ac 5189      		ldd r21,Z+17
 682 04ae 821B      		sub r24,r18
 683 04b0 930B      		sbc r25,r19
 684 04b2 A40B      		sbc r26,r20
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 13


 685 04b4 B50B      		sbc r27,r21
 686 04b6 F701      		movw r30,r14
 687 04b8 8283      		std Z+2,r24
 688 04ba 9383      		std Z+3,r25
 689 04bc A483      		std Z+4,r26
 690 04be B583      		std Z+5,r27
 691 04c0 D701      		movw r26,r14
 692 04c2 1C96      		adiw r26,12
 693 04c4 1D92      		st X+,__zero_reg__
 694 04c6 1D92      		st X+,__zero_reg__
 695 04c8 1D92      		st X+,__zero_reg__
 696 04ca 1C92      		st X,__zero_reg__
 697 04cc 1F97      		sbiw r26,12+3
 698 04ce FB01      		movw r30,r22
 699 04d0 8681      		ldd r24,Z+6
 700 04d2 9781      		ldd r25,Z+7
 701 04d4 1796      		adiw r26,6+1
 702 04d6 9C93      		st X,r25
 703 04d8 8E93      		st -X,r24
 704 04da 1697      		sbiw r26,6
 705 04dc 0E94 0000 		call malloc
 706 04e0 D701      		movw r26,r14
 707 04e2 5196      		adiw r26,16+1
 708 04e4 9C93      		st X,r25
 709 04e6 8E93      		st -X,r24
 710 04e8 5097      		sbiw r26,16
 711 04ea 0097      		sbiw r24,0
 712 04ec 01F0      		breq .L49
 713 04ee 86E0      		ldi r24,lo8(6)
 714 04f0 90E0      		ldi r25,hi8(6)
 715 04f2 0E94 0000 		call malloc
 716 04f6 8C01      		movw r16,r24
 717 04f8 5C01      		movw r10,r24
 718 04fa 0097      		sbiw r24,0
 719 04fc 01F0      		breq .L49
 720 04fe FC01      		movw r30,r24
 721 0500 1182      		std Z+1,__zero_reg__
 722 0502 1082      		st Z,__zero_reg__
 723 0504 9382      		std Z+3,r9
 724 0506 8282      		std Z+2,r8
 725 0508 F582      		std Z+5,r15
 726 050a E482      		std Z+4,r14
 727 050c 9A83      		std Y+2,r25
 728 050e 8983      		std Y+1,r24
 729 0510 1B82      		std Y+3,__zero_reg__
 730 0512 D601      		movw r26,r12
 731 0514 5596      		adiw r26,21
 732 0516 ED91      		ld r30,X+
 733 0518 FC91      		ld r31,X
 734 051a 5697      		sbiw r26,21+1
 735 051c C601      		movw r24,r12
 736 051e 60E3      		ldi r22,lo8(4400)
 737 0520 71E1      		ldi r23,hi8(4400)
 738 0522 AE01      		movw r20,r28
 739 0524 4F5F      		subi r20,lo8(-(1))
 740 0526 5F4F      		sbci r21,hi8(-(1))
 741 0528 0995      		icall
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 14


 742 052a 892B      		or r24,r25
 743 052c 01F0      		breq .L47
 744 052e C801      		movw r24,r16
 745 0530 0E94 0000 		call free
 746               	.L49:
 747 0534 C701      		movw r24,r14
 748 0536 0E94 0000 		call free
 749               	.L54:
 750 053a AA24      		clr r10
 751 053c AA94      		dec r10
 752 053e BA2C      		mov r11,r10
 753               	.L47:
 754 0540 C501      		movw r24,r10
 755               	/* epilogue start */
 756 0542 0F90      		pop __tmp_reg__
 757 0544 0F90      		pop __tmp_reg__
 758 0546 0F90      		pop __tmp_reg__
 759 0548 CF91      		pop r28
 760 054a DF91      		pop r29
 761 054c 1F91      		pop r17
 762 054e 0F91      		pop r16
 763 0550 FF90      		pop r15
 764 0552 EF90      		pop r14
 765 0554 DF90      		pop r13
 766 0556 CF90      		pop r12
 767 0558 BF90      		pop r11
 768 055a AF90      		pop r10
 769 055c 9F90      		pop r9
 770 055e 8F90      		pop r8
 771 0560 0895      		ret
 772               	.L55:
 773 0562 3196      		adiw r30,1
 774 0564 00C0      		rjmp .L39
 775               		.size	NutBlockDeviceOpen, .-NutBlockDeviceOpen
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 blockdev.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:11     .text:00000000 NutBlockDeviceInit
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:21     .text:00000006 NutBlockDeviceIOCtl
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:107    .text:0000009c NutBlockDeviceRead
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:238    .text:0000018a NutBlockDeviceWrite
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:369    .text:00000278 NutBlockDeviceWrite_P
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:498    .text:00000362 NutBlockDeviceSize
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:522    .text:00000386 NutBlockDeviceClose
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccZU36z1.s:574    .text:000003e0 NutBlockDeviceOpen

UNDEFINED SYMBOLS
__mulsi3
free
NutDeviceLookup
nutDeviceList
errno
malloc
