GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 1


   1               		.file	"nvmem_at45d.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	SpiAt45dConfigSize
  10               		.type	SpiAt45dConfigSize, @function
  11               	SpiAt45dConfigSize:
  12 0000 CF93      		push r28
  13 0002 DF93      		push r29
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0004 8091 0000 		lds r24,devSysConf
  17 0008 9091 0000 		lds r25,(devSysConf)+1
  18 000c 892B      		or r24,r25
  19 000e 01F4      		brne .L2
  20 0010 C091 0000 		lds r28,devSpiAt45d0+15
  21 0014 D091 0000 		lds r29,(devSpiAt45d0+15)+1
  22 0018 8881      		ld r24,Y
  23 001a 9981      		ldd r25,Y+1
  24 001c 892B      		or r24,r25
  25 001e 01F4      		brne .L3
  26 0020 80E0      		ldi r24,lo8(spiBus0Avr)
  27 0022 90E0      		ldi r25,hi8(spiBus0Avr)
  28 0024 9983      		std Y+1,r25
  29 0026 8883      		st Y,r24
  30               	.L3:
  31 0028 E881      		ld r30,Y
  32 002a F981      		ldd r31,Y+1
  33 002c 0084      		ldd __tmp_reg__,Z+8
  34 002e F185      		ldd r31,Z+9
  35 0030 E02D      		mov r30,__tmp_reg__
  36 0032 CE01      		movw r24,r28
  37 0034 0995      		icall
  38 0036 892B      		or r24,r25
  39 0038 01F4      		brne .L4
  40 003a 8881      		ld r24,Y
  41 003c 9981      		ldd r25,Y+1
  42 003e 0E94 0000 		call NutEventPost
  43 0042 C0E0      		ldi r28,lo8(devSpiAt45d0)
  44 0044 D0E0      		ldi r29,hi8(devSpiAt45d0)
  45 0046 CE01      		movw r24,r28
  46 0048 0E94 0000 		call SpiAt45dInit
  47 004c 892B      		or r24,r25
  48 004e 01F4      		brne .L4
  49 0050 D093 0000 		sts (devSysConf)+1,r29
  50 0054 C093 0000 		sts devSysConf,r28
  51               	.L2:
  52 0058 8091 0000 		lds r24,devSysConf
  53 005c 9091 0000 		lds r25,(devSysConf)+1
  54 0060 0E94 0000 		call SpiAt45dPageSize
  55 0064 9C01      		movw r18,r24
  56 0066 00C0      		rjmp .L5
  57               	.L4:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 2


  58 0068 20E0      		ldi r18,lo8(0)
  59 006a 30E0      		ldi r19,hi8(0)
  60               	.L5:
  61 006c C901      		movw r24,r18
  62               	/* epilogue start */
  63 006e DF91      		pop r29
  64 0070 CF91      		pop r28
  65 0072 0895      		ret
  66               		.size	SpiAt45dConfigSize, .-SpiAt45dConfigSize
  67               	.global	SpiAt45dConfigWrite
  68               		.type	SpiAt45dConfigWrite, @function
  69               	SpiAt45dConfigWrite:
  70 0074 2F92      		push r2
  71 0076 3F92      		push r3
  72 0078 4F92      		push r4
  73 007a 5F92      		push r5
  74 007c 6F92      		push r6
  75 007e 7F92      		push r7
  76 0080 8F92      		push r8
  77 0082 9F92      		push r9
  78 0084 AF92      		push r10
  79 0086 BF92      		push r11
  80 0088 CF92      		push r12
  81 008a DF92      		push r13
  82 008c EF92      		push r14
  83 008e FF92      		push r15
  84 0090 0F93      		push r16
  85 0092 1F93      		push r17
  86 0094 DF93      		push r29
  87 0096 CF93      		push r28
  88 0098 00D0      		rcall .
  89 009a 00D0      		rcall .
  90 009c CDB7      		in r28,__SP_L__
  91 009e DEB7      		in r29,__SP_H__
  92               	/* prologue: function */
  93               	/* frame size = 4 */
  94 00a0 9A83      		std Y+2,r25
  95 00a2 8983      		std Y+1,r24
  96 00a4 B62E      		mov r11,r22
  97 00a6 A72E      		mov r10,r23
  98 00a8 5C83      		std Y+4,r21
  99 00aa 4B83      		std Y+3,r20
 100 00ac 0E94 0000 		call SpiAt45dConfigSize
 101 00b0 6C01      		movw r12,r24
 102 00b2 8091 0000 		lds r24,devSysConf
 103 00b6 9091 0000 		lds r25,(devSysConf)+1
 104 00ba 0E94 0000 		call SpiAt45dPageSize
 105 00be 4C01      		movw r8,r24
 106 00c0 8091 0000 		lds r24,devSysConf
 107 00c4 9091 0000 		lds r25,(devSysConf)+1
 108 00c8 0E94 0000 		call SpiAt45dPages
 109 00cc 7B01      		movw r14,r22
 110 00ce 8C01      		movw r16,r24
 111 00d0 2B81      		ldd r18,Y+3
 112 00d2 3C81      		ldd r19,Y+4
 113 00d4 2115      		cp r18,__zero_reg__
 114 00d6 3105      		cpc r19,__zero_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 3


 115 00d8 01F4      		brne .+2
 116 00da 00C0      		rjmp .L8
 117 00dc 8981      		ldd r24,Y+1
 118 00de 9A81      		ldd r25,Y+2
 119 00e0 820F      		add r24,r18
 120 00e2 931F      		adc r25,r19
 121 00e4 C816      		cp r12,r24
 122 00e6 D906      		cpc r13,r25
 123 00e8 00F4      		brsh .+2
 124 00ea 00C0      		rjmp .L8
 125 00ec C401      		movw r24,r8
 126 00ee 0E94 0000 		call malloc
 127 00f2 3C01      		movw r6,r24
 128 00f4 0097      		sbiw r24,0
 129 00f6 01F4      		brne .+2
 130 00f8 00C0      		rjmp .L8
 131 00fa 8981      		ldd r24,Y+1
 132 00fc 9A81      		ldd r25,Y+2
 133 00fe B401      		movw r22,r8
 134 0100 0E94 0000 		call __udivmodhi4
 135 0104 2C01      		movw r4,r24
 136 0106 8B81      		ldd r24,Y+3
 137 0108 9C81      		ldd r25,Y+4
 138 010a 840D      		add r24,r4
 139 010c 951D      		adc r25,r5
 140 010e 8816      		cp r8,r24
 141 0110 9906      		cpc r9,r25
 142 0112 00F0      		brlo .L9
 143 0114 F401      		movw r30,r8
 144 0116 00C0      		rjmp .L10
 145               	.L9:
 146 0118 F401      		movw r30,r8
 147 011a E419      		sub r30,r4
 148 011c F509      		sbc r31,r5
 149               	.L10:
 150 011e 8B2D      		mov r24,r11
 151 0120 9A2D      		mov r25,r10
 152 0122 9C01      		movw r18,r24
 153 0124 1901      		movw r2,r18
 154 0126 AB80      		ldd r10,Y+3
 155 0128 BC80      		ldd r11,Y+4
 156 012a 0894      		sec
 157 012c E108      		sbc r14,__zero_reg__
 158 012e F108      		sbc r15,__zero_reg__
 159 0130 0109      		sbc r16,__zero_reg__
 160 0132 1109      		sbc r17,__zero_reg__
 161 0134 8981      		ldd r24,Y+1
 162 0136 9A81      		ldd r25,Y+2
 163 0138 B401      		movw r22,r8
 164 013a 0E94 0000 		call __udivmodhi4
 165 013e 6E0D      		add r22,r14
 166 0140 7F1D      		adc r23,r15
 167 0142 FC83      		std Y+4,r31
 168 0144 EB83      		std Y+3,r30
 169 0146 AE16      		cp r10,r30
 170 0148 BF06      		cpc r11,r31
 171 014a 04F4      		brge .L11
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 4


 172 014c BC82      		std Y+4,r11
 173 014e AB82      		std Y+3,r10
 174               	.L11:
 175 0150 6B01      		movw r12,r22
 176 0152 EE24      		clr r14
 177 0154 D7FC      		sbrc r13,7
 178 0156 E094      		com r14
 179 0158 FE2C      		mov r15,r14
 180 015a 0FEF      		ldi r16,lo8(-1)
 181 015c 1FEF      		ldi r17,hi8(-1)
 182 015e 00C0      		rjmp .L12
 183               	.L17:
 184 0160 8091 0000 		lds r24,devSysConf
 185 0164 9091 0000 		lds r25,(devSysConf)+1
 186 0168 B701      		movw r22,r14
 187 016a A601      		movw r20,r12
 188 016c 9301      		movw r18,r6
 189 016e 8401      		movw r16,r8
 190 0170 0E94 0000 		call SpiAt45dPageRead
 191 0174 8815      		cp r24,r8
 192 0176 9905      		cpc r25,r9
 193 0178 01F4      		brne .L13
 194 017a 8301      		movw r16,r6
 195 017c 040D      		add r16,r4
 196 017e 151D      		adc r17,r5
 197 0180 C801      		movw r24,r16
 198 0182 B101      		movw r22,r2
 199 0184 4B81      		ldd r20,Y+3
 200 0186 5C81      		ldd r21,Y+4
 201 0188 0E94 0000 		call memcmp
 202 018c 0097      		sbiw r24,0
 203 018e 01F0      		breq .L14
 204 0190 C801      		movw r24,r16
 205 0192 B101      		movw r22,r2
 206 0194 4B81      		ldd r20,Y+3
 207 0196 5C81      		ldd r21,Y+4
 208 0198 0E94 0000 		call memcpy
 209 019c 8091 0000 		lds r24,devSysConf
 210 01a0 9091 0000 		lds r25,(devSysConf)+1
 211 01a4 B701      		movw r22,r14
 212 01a6 A601      		movw r20,r12
 213 01a8 9301      		movw r18,r6
 214 01aa 8401      		movw r16,r8
 215 01ac 0E94 0000 		call SpiAt45dPageWrite
 216 01b0 8815      		cp r24,r8
 217 01b2 9905      		cpc r25,r9
 218 01b4 01F4      		brne .L13
 219               	.L14:
 220 01b6 8B81      		ldd r24,Y+3
 221 01b8 9C81      		ldd r25,Y+4
 222 01ba 280E      		add r2,r24
 223 01bc 391E      		adc r3,r25
 224 01be A81A      		sub r10,r24
 225 01c0 B90A      		sbc r11,r25
 226 01c2 BC82      		std Y+4,r11
 227 01c4 AB82      		std Y+3,r10
 228 01c6 8A14      		cp r8,r10
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 5


 229 01c8 9B04      		cpc r9,r11
 230 01ca 04F4      		brge .L16
 231 01cc 9C82      		std Y+4,r9
 232 01ce 8B82      		std Y+3,r8
 233               	.L16:
 234 01d0 0894      		sec
 235 01d2 C11C      		adc r12,__zero_reg__
 236 01d4 D11C      		adc r13,__zero_reg__
 237 01d6 E11C      		adc r14,__zero_reg__
 238 01d8 F11C      		adc r15,__zero_reg__
 239 01da 4424      		clr r4
 240 01dc 5524      		clr r5
 241 01de 00E0      		ldi r16,lo8(0)
 242 01e0 10E0      		ldi r17,hi8(0)
 243               	.L12:
 244 01e2 1A14      		cp __zero_reg__,r10
 245 01e4 1B04      		cpc __zero_reg__,r11
 246 01e6 04F4      		brge .+2
 247 01e8 00C0      		rjmp .L17
 248 01ea 00C0      		rjmp .L18
 249               	.L13:
 250 01ec 0FEF      		ldi r16,lo8(-1)
 251 01ee 1FEF      		ldi r17,hi8(-1)
 252               	.L18:
 253 01f0 C301      		movw r24,r6
 254 01f2 0E94 0000 		call free
 255 01f6 00C0      		rjmp .L19
 256               	.L8:
 257 01f8 0FEF      		ldi r16,lo8(-1)
 258 01fa 1FEF      		ldi r17,hi8(-1)
 259               	.L19:
 260 01fc C801      		movw r24,r16
 261               	/* epilogue start */
 262 01fe 0F90      		pop __tmp_reg__
 263 0200 0F90      		pop __tmp_reg__
 264 0202 0F90      		pop __tmp_reg__
 265 0204 0F90      		pop __tmp_reg__
 266 0206 CF91      		pop r28
 267 0208 DF91      		pop r29
 268 020a 1F91      		pop r17
 269 020c 0F91      		pop r16
 270 020e FF90      		pop r15
 271 0210 EF90      		pop r14
 272 0212 DF90      		pop r13
 273 0214 CF90      		pop r12
 274 0216 BF90      		pop r11
 275 0218 AF90      		pop r10
 276 021a 9F90      		pop r9
 277 021c 8F90      		pop r8
 278 021e 7F90      		pop r7
 279 0220 6F90      		pop r6
 280 0222 5F90      		pop r5
 281 0224 4F90      		pop r4
 282 0226 3F90      		pop r3
 283 0228 2F90      		pop r2
 284 022a 0895      		ret
 285               		.size	SpiAt45dConfigWrite, .-SpiAt45dConfigWrite
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 6


 286               	.global	SpiAt45dConfigRead
 287               		.type	SpiAt45dConfigRead, @function
 288               	SpiAt45dConfigRead:
 289 022c 8F92      		push r8
 290 022e 9F92      		push r9
 291 0230 AF92      		push r10
 292 0232 BF92      		push r11
 293 0234 CF92      		push r12
 294 0236 DF92      		push r13
 295 0238 EF92      		push r14
 296 023a FF92      		push r15
 297 023c 0F93      		push r16
 298 023e 1F93      		push r17
 299 0240 CF93      		push r28
 300 0242 DF93      		push r29
 301               	/* prologue: function */
 302               	/* frame size = 0 */
 303 0244 5C01      		movw r10,r24
 304 0246 962E      		mov r9,r22
 305 0248 872E      		mov r8,r23
 306 024a 6A01      		movw r12,r20
 307 024c 0E94 0000 		call SpiAt45dConfigSize
 308 0250 7C01      		movw r14,r24
 309 0252 C601      		movw r24,r12
 310 0254 8A0D      		add r24,r10
 311 0256 9B1D      		adc r25,r11
 312 0258 E816      		cp r14,r24
 313 025a F906      		cpc r15,r25
 314 025c 00F0      		brlo .L22
 315 025e C701      		movw r24,r14
 316 0260 0E94 0000 		call malloc
 317 0264 EC01      		movw r28,r24
 318 0266 0097      		sbiw r24,0
 319 0268 01F0      		breq .L22
 320 026a 8091 0000 		lds r24,devSysConf
 321 026e 9091 0000 		lds r25,(devSysConf)+1
 322 0272 0E94 0000 		call SpiAt45dPages
 323 0276 AB01      		movw r20,r22
 324 0278 BC01      		movw r22,r24
 325 027a 4150      		subi r20,lo8(-(-1))
 326 027c 5040      		sbci r21,hi8(-(-1))
 327 027e 6040      		sbci r22,hlo8(-(-1))
 328 0280 7040      		sbci r23,hhi8(-(-1))
 329 0282 8091 0000 		lds r24,devSysConf
 330 0286 9091 0000 		lds r25,(devSysConf)+1
 331 028a 9E01      		movw r18,r28
 332 028c 8701      		movw r16,r14
 333 028e 0E94 0000 		call SpiAt45dPageRead
 334 0292 8E15      		cp r24,r14
 335 0294 9F05      		cpc r25,r15
 336 0296 01F0      		breq .L23
 337 0298 0FEF      		ldi r16,lo8(-1)
 338 029a 1FEF      		ldi r17,hi8(-1)
 339 029c 00C0      		rjmp .L24
 340               	.L23:
 341 029e 9E01      		movw r18,r28
 342 02a0 2A0D      		add r18,r10
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 7


 343 02a2 3B1D      		adc r19,r11
 344 02a4 892D      		mov r24,r9
 345 02a6 982D      		mov r25,r8
 346 02a8 B901      		movw r22,r18
 347 02aa A601      		movw r20,r12
 348 02ac 0E94 0000 		call memcpy
 349 02b0 00E0      		ldi r16,lo8(0)
 350 02b2 10E0      		ldi r17,hi8(0)
 351               	.L24:
 352 02b4 CE01      		movw r24,r28
 353 02b6 0E94 0000 		call free
 354 02ba 00C0      		rjmp .L26
 355               	.L22:
 356 02bc 0FEF      		ldi r16,lo8(-1)
 357 02be 1FEF      		ldi r17,hi8(-1)
 358               	.L26:
 359 02c0 C801      		movw r24,r16
 360               	/* epilogue start */
 361 02c2 DF91      		pop r29
 362 02c4 CF91      		pop r28
 363 02c6 1F91      		pop r17
 364 02c8 0F91      		pop r16
 365 02ca FF90      		pop r15
 366 02cc EF90      		pop r14
 367 02ce DF90      		pop r13
 368 02d0 CF90      		pop r12
 369 02d2 BF90      		pop r11
 370 02d4 AF90      		pop r10
 371 02d6 9F90      		pop r9
 372 02d8 8F90      		pop r8
 373 02da 0895      		ret
 374               		.size	SpiAt45dConfigRead, .-SpiAt45dConfigRead
 375               		.lcomm devSysConf,2
 376               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 nvmem_at45d.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:11     .text:00000000 SpiAt45dConfigSize
                             .bss:00000000 devSysConf
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:69     .text:00000074 SpiAt45dConfigWrite
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccxDRMkU.s:288    .text:0000022c SpiAt45dConfigRead

UNDEFINED SYMBOLS
devSpiAt45d0
spiBus0Avr
NutEventPost
SpiAt45dInit
SpiAt45dPageSize
SpiAt45dPages
malloc
__udivmodhi4
SpiAt45dPageRead
memcmp
memcpy
SpiAt45dPageWrite
free
__do_clear_bss
