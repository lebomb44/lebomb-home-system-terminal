GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 1


   1               		.file	"mmcard.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               		.type	MmCardRxR1, @function
  10               	MmCardRxR1:
  11 0000 0F93      		push r16
  12 0002 1F93      		push r17
  13 0004 CF93      		push r28
  14 0006 DF93      		push r29
  15               	/* prologue: function */
  16               	/* frame size = 0 */
  17 0008 8C01      		movw r16,r24
  18 000a C0E0      		ldi r28,lo8(0)
  19 000c D0E0      		ldi r29,hi8(0)
  20               	.L3:
  21 000e D801      		movw r26,r16
  22 0010 1296      		adiw r26,2
  23 0012 ED91      		ld r30,X+
  24 0014 FC91      		ld r31,X
  25 0016 1397      		sbiw r26,2+1
  26 0018 8FEF      		ldi r24,lo8(-1)
  27 001a 0995      		icall
  28 001c 8F3F      		cpi r24,lo8(-1)
  29 001e 01F4      		brne .L2
  30 0020 2196      		adiw r28,1
  31 0022 B4E0      		ldi r27,hi8(1024)
  32 0024 C030      		cpi r28,lo8(1024)
  33 0026 DB07      		cpc r29,r27
  34 0028 01F4      		brne .L3
  35               	.L2:
  36               	/* epilogue start */
  37 002a DF91      		pop r29
  38 002c CF91      		pop r28
  39 002e 1F91      		pop r17
  40 0030 0F91      		pop r16
  41 0032 0895      		ret
  42               		.size	MmCardRxR1, .-MmCardRxR1
  43               	.global	MmCardBlockWrite_P
  44               		.type	MmCardBlockWrite_P, @function
  45               	MmCardBlockWrite_P:
  46               	/* prologue: function */
  47               	/* frame size = 0 */
  48 0034 8FEF      		ldi r24,lo8(-1)
  49 0036 9FEF      		ldi r25,hi8(-1)
  50               	/* epilogue start */
  51 0038 0895      		ret
  52               		.size	MmCardBlockWrite_P, .-MmCardBlockWrite_P
  53               	.global	MmCardDevInit
  54               		.type	MmCardDevInit, @function
  55               	MmCardDevInit:
  56               	/* prologue: function */
  57               	/* frame size = 0 */
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 2


  58 003a 80E0      		ldi r24,lo8(0)
  59 003c 90E0      		ldi r25,hi8(0)
  60               	/* epilogue start */
  61 003e 0895      		ret
  62               		.size	MmCardDevInit, .-MmCardDevInit
  63               		.type	MmCardTxCmd, @function
  64               	MmCardTxCmd:
  65 0040 BF92      		push r11
  66 0042 CF92      		push r12
  67 0044 DF92      		push r13
  68 0046 EF92      		push r14
  69 0048 FF92      		push r15
  70 004a 0F93      		push r16
  71 004c 1F93      		push r17
  72 004e CF93      		push r28
  73 0050 DF93      		push r29
  74               	/* prologue: function */
  75               	/* frame size = 0 */
  76 0052 EC01      		movw r28,r24
  77 0054 B62E      		mov r11,r22
  78 0056 6901      		movw r12,r18
  79 0058 7A01      		movw r14,r20
  80 005a EC81      		ldd r30,Y+4
  81 005c FD81      		ldd r31,Y+5
  82 005e 81E0      		ldi r24,lo8(1)
  83 0060 90E0      		ldi r25,hi8(1)
  84 0062 0995      		icall
  85 0064 00E0      		ldi r16,lo8(1024)
  86 0066 14E0      		ldi r17,hi8(1024)
  87 0068 00C0      		rjmp .L17
  88               	.L13:
  89 006a 0150      		subi r16,lo8(-(-1))
  90 006c 1040      		sbci r17,hi8(-(-1))
  91 006e 01F0      		breq .L12
  92 0070 0F3F      		cpi r16,255
  93 0072 1105      		cpc r17,__zero_reg__
  94 0074 01F0      		breq .+2
  95 0076 00F4      		brsh .L17
  96 0078 61E0      		ldi r22,lo8(1)
  97 007a 70E0      		ldi r23,hi8(1)
  98 007c 80E0      		ldi r24,hlo8(1)
  99 007e 90E0      		ldi r25,hhi8(1)
 100 0080 0E94 0000 		call NutSleep
 101               	.L17:
 102 0084 EA81      		ldd r30,Y+2
 103 0086 FB81      		ldd r31,Y+3
 104 0088 8FEF      		ldi r24,lo8(-1)
 105 008a 0995      		icall
 106 008c 8F3F      		cpi r24,lo8(-1)
 107 008e 01F4      		brne .L13
 108               	.L12:
 109 0090 EA81      		ldd r30,Y+2
 110 0092 FB81      		ldd r31,Y+3
 111 0094 8B2D      		mov r24,r11
 112 0096 8064      		ori r24,lo8(64)
 113 0098 0995      		icall
 114 009a 8F2D      		mov r24,r15
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 3


 115 009c 9927      		clr r25
 116 009e AA27      		clr r26
 117 00a0 BB27      		clr r27
 118 00a2 EA81      		ldd r30,Y+2
 119 00a4 FB81      		ldd r31,Y+3
 120 00a6 0995      		icall
 121 00a8 C701      		movw r24,r14
 122 00aa AA27      		clr r26
 123 00ac BB27      		clr r27
 124 00ae EA81      		ldd r30,Y+2
 125 00b0 FB81      		ldd r31,Y+3
 126 00b2 0995      		icall
 127 00b4 BB27      		clr r27
 128 00b6 AF2D      		mov r26,r15
 129 00b8 9E2D      		mov r25,r14
 130 00ba 8D2D      		mov r24,r13
 131 00bc EA81      		ldd r30,Y+2
 132 00be FB81      		ldd r31,Y+3
 133 00c0 0995      		icall
 134 00c2 EA81      		ldd r30,Y+2
 135 00c4 FB81      		ldd r31,Y+3
 136 00c6 8C2D      		mov r24,r12
 137 00c8 0995      		icall
 138 00ca EA81      		ldd r30,Y+2
 139 00cc FB81      		ldd r31,Y+3
 140 00ce 85E9      		ldi r24,lo8(-107)
 141 00d0 0995      		icall
 142               	/* epilogue start */
 143 00d2 DF91      		pop r29
 144 00d4 CF91      		pop r28
 145 00d6 1F91      		pop r17
 146 00d8 0F91      		pop r16
 147 00da FF90      		pop r15
 148 00dc EF90      		pop r14
 149 00de DF90      		pop r13
 150 00e0 CF90      		pop r12
 151 00e2 BF90      		pop r11
 152 00e4 0895      		ret
 153               		.size	MmCardTxCmd, .-MmCardTxCmd
 154               		.type	MmCardGetReg, @function
 155               	MmCardGetReg:
 156 00e6 BF92      		push r11
 157 00e8 CF92      		push r12
 158 00ea DF92      		push r13
 159 00ec EF92      		push r14
 160 00ee FF92      		push r15
 161 00f0 0F93      		push r16
 162 00f2 1F93      		push r17
 163 00f4 CF93      		push r28
 164 00f6 DF93      		push r29
 165               	/* prologue: function */
 166               	/* frame size = 0 */
 167 00f8 8C01      		movw r16,r24
 168 00fa B62E      		mov r11,r22
 169 00fc 7A01      		movw r14,r20
 170 00fe 6901      		movw r12,r18
 171 0100 80E0      		ldi r24,lo8(mutex)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 4


 172 0102 90E0      		ldi r25,hi8(mutex)
 173 0104 40E0      		ldi r20,lo8(0)
 174 0106 50E0      		ldi r21,hi8(0)
 175 0108 60E0      		ldi r22,hlo8(0)
 176 010a 70E0      		ldi r23,hhi8(0)
 177 010c 0E94 0000 		call NutEventWait
 178 0110 C0E0      		ldi r28,lo8(512)
 179 0112 D2E0      		ldi r29,hi8(512)
 180 0114 00C0      		rjmp .L19
 181               	.L24:
 182 0116 C801      		movw r24,r16
 183 0118 6B2D      		mov r22,r11
 184 011a 20E0      		ldi r18,lo8(0)
 185 011c 30E0      		ldi r19,hi8(0)
 186 011e 40E0      		ldi r20,hlo8(0)
 187 0120 50E0      		ldi r21,hhi8(0)
 188 0122 0E94 0000 		call MmCardTxCmd
 189 0126 C801      		movw r24,r16
 190 0128 0E94 0000 		call MmCardRxR1
 191 012c 8823      		tst r24
 192 012e 01F4      		brne .L20
 193 0130 C801      		movw r24,r16
 194 0132 0E94 0000 		call MmCardRxR1
 195 0136 8E3F      		cpi r24,lo8(-2)
 196 0138 01F4      		brne .L20
 197 013a C0E0      		ldi r28,lo8(0)
 198 013c D0E0      		ldi r29,hi8(0)
 199 013e 00C0      		rjmp .L21
 200               	.L22:
 201 0140 8FEF      		ldi r24,lo8(-1)
 202 0142 0995      		icall
 203 0144 D701      		movw r26,r14
 204 0146 8D93      		st X+,r24
 205 0148 7D01      		movw r14,r26
 206 014a 2196      		adiw r28,1
 207               	.L21:
 208 014c D801      		movw r26,r16
 209 014e 1296      		adiw r26,2
 210 0150 ED91      		ld r30,X+
 211 0152 FC91      		ld r31,X
 212 0154 1397      		sbiw r26,2+1
 213 0156 CC15      		cp r28,r12
 214 0158 DD05      		cpc r29,r13
 215 015a 04F0      		brlt .L22
 216 015c 8FEF      		ldi r24,lo8(-1)
 217 015e 0995      		icall
 218 0160 D801      		movw r26,r16
 219 0162 1296      		adiw r26,2
 220 0164 ED91      		ld r30,X+
 221 0166 FC91      		ld r31,X
 222 0168 1397      		sbiw r26,2+1
 223 016a 8FEF      		ldi r24,lo8(-1)
 224 016c 0995      		icall
 225 016e D801      		movw r26,r16
 226 0170 1496      		adiw r26,4
 227 0172 ED91      		ld r30,X+
 228 0174 FC91      		ld r31,X
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 5


 229 0176 1597      		sbiw r26,4+1
 230 0178 80E0      		ldi r24,lo8(0)
 231 017a 90E0      		ldi r25,hi8(0)
 232 017c 0995      		icall
 233 017e C0E0      		ldi r28,lo8(0)
 234 0180 D0E0      		ldi r29,hi8(0)
 235 0182 00C0      		rjmp .L23
 236               	.L20:
 237 0184 D801      		movw r26,r16
 238 0186 1496      		adiw r26,4
 239 0188 ED91      		ld r30,X+
 240 018a FC91      		ld r31,X
 241 018c 1597      		sbiw r26,4+1
 242 018e 80E0      		ldi r24,lo8(0)
 243 0190 90E0      		ldi r25,hi8(0)
 244 0192 0995      		icall
 245               	.L19:
 246 0194 2197      		sbiw r28,1
 247 0196 BFEF      		ldi r27,hi8(-1)
 248 0198 CF3F      		cpi r28,lo8(-1)
 249 019a DB07      		cpc r29,r27
 250 019c 01F0      		breq .+2
 251 019e 00C0      		rjmp .L24
 252 01a0 CFEF      		ldi r28,lo8(-1)
 253 01a2 DFEF      		ldi r29,hi8(-1)
 254               	.L23:
 255 01a4 80E0      		ldi r24,lo8(mutex)
 256 01a6 90E0      		ldi r25,hi8(mutex)
 257 01a8 0E94 0000 		call NutEventPost
 258 01ac CE01      		movw r24,r28
 259               	/* epilogue start */
 260 01ae DF91      		pop r29
 261 01b0 CF91      		pop r28
 262 01b2 1F91      		pop r17
 263 01b4 0F91      		pop r16
 264 01b6 FF90      		pop r15
 265 01b8 EF90      		pop r14
 266 01ba DF90      		pop r13
 267 01bc CF90      		pop r12
 268 01be BF90      		pop r11
 269 01c0 0895      		ret
 270               		.size	MmCardGetReg, .-MmCardGetReg
 271               	.global	MmCardIOCtl
 272               		.type	MmCardIOCtl, @function
 273               	MmCardIOCtl:
 274 01c2 9F92      		push r9
 275 01c4 AF92      		push r10
 276 01c6 BF92      		push r11
 277 01c8 CF92      		push r12
 278 01ca DF92      		push r13
 279 01cc EF92      		push r14
 280 01ce FF92      		push r15
 281 01d0 0F93      		push r16
 282 01d2 1F93      		push r17
 283 01d4 CF93      		push r28
 284 01d6 DF93      		push r29
 285               	/* prologue: function */
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 6


 286               	/* frame size = 0 */
 287 01d8 EA01      		movw r28,r20
 288 01da DC01      		movw r26,r24
 289 01dc 1F96      		adiw r26,15
 290 01de AD90      		ld r10,X+
 291 01e0 BC90      		ld r11,X
 292 01e2 5097      		sbiw r26,15+1
 293 01e4 B2E1      		ldi r27,hi8(4611)
 294 01e6 6330      		cpi r22,lo8(4611)
 295 01e8 7B07      		cpc r23,r27
 296 01ea 01F4      		brne .+2
 297 01ec 00C0      		rjmp .L31
 298 01ee E2E1      		ldi r30,hi8(4612)
 299 01f0 6430      		cpi r22,lo8(4612)
 300 01f2 7E07      		cpc r23,r30
 301 01f4 04F4      		brge .L36
 302 01f6 F2E1      		ldi r31,hi8(4609)
 303 01f8 6130      		cpi r22,lo8(4609)
 304 01fa 7F07      		cpc r23,r31
 305 01fc 01F0      		breq .L29
 306 01fe 82E1      		ldi r24,hi8(4610)
 307 0200 6230      		cpi r22,lo8(4610)
 308 0202 7807      		cpc r23,r24
 309 0204 04F4      		brge .L30
 310 0206 6050      		subi r22,lo8(4608)
 311 0208 7241      		sbci r23,hi8(4608)
 312 020a 01F4      		brne .L27
 313 020c 00C0      		rjmp .L48
 314               	.L36:
 315 020e B0E2      		ldi r27,hi8(8194)
 316 0210 6230      		cpi r22,lo8(8194)
 317 0212 7B07      		cpc r23,r27
 318 0214 01F4      		brne .+2
 319 0216 00C0      		rjmp .L33
 320 0218 E0E2      		ldi r30,hi8(8195)
 321 021a 6330      		cpi r22,lo8(8195)
 322 021c 7E07      		cpc r23,r30
 323 021e 04F4      		brge .L37
 324 0220 6150      		subi r22,lo8(8193)
 325 0222 7042      		sbci r23,hi8(8193)
 326 0224 01F4      		brne .L27
 327 0226 00C0      		rjmp .L49
 328               	.L37:
 329 0228 80E2      		ldi r24,hi8(8195)
 330 022a 6330      		cpi r22,lo8(8195)
 331 022c 7807      		cpc r23,r24
 332 022e 01F4      		brne .+2
 333 0230 00C0      		rjmp .L34
 334 0232 6450      		subi r22,lo8(8196)
 335 0234 7042      		sbci r23,hi8(8196)
 336 0236 01F4      		brne .+2
 337 0238 00C0      		rjmp .L35
 338               	.L27:
 339 023a CFEF      		ldi r28,lo8(-1)
 340 023c DFEF      		ldi r29,hi8(-1)
 341 023e 00C0      		rjmp .L38
 342               	.L48:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 7


 343 0240 D501      		movw r26,r10
 344 0242 1696      		adiw r26,6
 345 0244 ED91      		ld r30,X+
 346 0246 FC91      		ld r31,X
 347 0248 1797      		sbiw r26,6+1
 348 024a 0995      		icall
 349 024c 00C0      		rjmp .L47
 350               	.L29:
 351 024e D501      		movw r26,r10
 352 0250 1696      		adiw r26,6
 353 0252 ED91      		ld r30,X+
 354 0254 FC91      		ld r31,X
 355 0256 1797      		sbiw r26,6+1
 356 0258 0995      		icall
 357 025a 0197      		sbiw r24,1
 358 025c 01F0      		breq .L39
 359 025e 81E0      		ldi r24,lo8(1)
 360 0260 90E0      		ldi r25,hi8(1)
 361               	.L47:
 362 0262 9983      		std Y+1,r25
 363 0264 8883      		st Y,r24
 364 0266 00C0      		rjmp .L45
 365               	.L39:
 366 0268 1982      		std Y+1,__zero_reg__
 367 026a 1882      		st Y,__zero_reg__
 368               	.L45:
 369 026c C0E0      		ldi r28,lo8(0)
 370 026e D0E0      		ldi r29,hi8(0)
 371 0270 00C0      		rjmp .L38
 372               	.L30:
 373 0272 E881      		ld r30,Y
 374 0274 F981      		ldd r31,Y+1
 375 0276 0480      		ldd __tmp_reg__,Z+4
 376 0278 F581      		ldd r31,Z+5
 377 027a E02D      		mov r30,__tmp_reg__
 378 027c 8685      		ldd r24,Z+14
 379 027e 9785      		ldd r25,Z+15
 380 0280 A089      		ldd r26,Z+16
 381 0282 B189      		ldd r27,Z+17
 382 0284 8A83      		std Y+2,r24
 383 0286 9B83      		std Y+3,r25
 384 0288 AC83      		std Y+4,r26
 385 028a BD83      		std Y+5,r27
 386 028c 80E0      		ldi r24,lo8(512)
 387 028e 92E0      		ldi r25,hi8(512)
 388 0290 A0E0      		ldi r26,hlo8(512)
 389 0292 B0E0      		ldi r27,hhi8(512)
 390 0294 8E83      		std Y+6,r24
 391 0296 9F83      		std Y+7,r25
 392 0298 A887      		std Y+8,r26
 393 029a B987      		std Y+9,r27
 394 029c 7696      		adiw r30,22
 395 029e FB87      		std Y+11,r31
 396 02a0 EA87      		std Y+10,r30
 397 02a2 00C0      		rjmp .L45
 398               	.L31:
 399 02a4 E881      		ld r30,Y
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 8


 400 02a6 F981      		ldd r31,Y+1
 401 02a8 0480      		ldd __tmp_reg__,Z+4
 402 02aa F581      		ldd r31,Z+5
 403 02ac E02D      		mov r30,__tmp_reg__
 404 02ae 8A81      		ldd r24,Y+2
 405 02b0 9B81      		ldd r25,Y+3
 406 02b2 AC81      		ldd r26,Y+4
 407 02b4 BD81      		ldd r27,Y+5
 408 02b6 828B      		std Z+18,r24
 409 02b8 938B      		std Z+19,r25
 410 02ba A48B      		std Z+20,r26
 411 02bc B58B      		std Z+21,r27
 412 02be 00C0      		rjmp .L45
 413               	.L49:
 414 02c0 80E0      		ldi r24,lo8(mutex)
 415 02c2 90E0      		ldi r25,hi8(mutex)
 416 02c4 40E0      		ldi r20,lo8(0)
 417 02c6 50E0      		ldi r21,hi8(0)
 418 02c8 60E0      		ldi r22,hlo8(0)
 419 02ca 70E0      		ldi r23,hhi8(0)
 420 02cc 0E94 0000 		call NutEventWait
 421 02d0 C501      		movw r24,r10
 422 02d2 6DE0      		ldi r22,lo8(13)
 423 02d4 20E0      		ldi r18,lo8(0)
 424 02d6 30E0      		ldi r19,hi8(0)
 425 02d8 40E0      		ldi r20,hlo8(0)
 426 02da 50E0      		ldi r21,hhi8(0)
 427 02dc 0E94 0000 		call MmCardTxCmd
 428 02e0 C501      		movw r24,r10
 429 02e2 0E94 0000 		call MmCardRxR1
 430 02e6 182F      		mov r17,r24
 431 02e8 00E0      		ldi r16,lo8(0)
 432 02ea D501      		movw r26,r10
 433 02ec 1296      		adiw r26,2
 434 02ee ED91      		ld r30,X+
 435 02f0 FC91      		ld r31,X
 436 02f2 1397      		sbiw r26,2+1
 437 02f4 8FEF      		ldi r24,lo8(-1)
 438 02f6 0995      		icall
 439 02f8 080F      		add r16,r24
 440 02fa 111D      		adc r17,__zero_reg__
 441 02fc 1983      		std Y+1,r17
 442 02fe 0883      		st Y,r16
 443 0300 80E0      		ldi r24,lo8(mutex)
 444 0302 90E0      		ldi r25,hi8(mutex)
 445 0304 0E94 0000 		call NutEventPost
 446 0308 00C0      		rjmp .L45
 447               	.L33:
 448 030a 80E0      		ldi r24,lo8(mutex)
 449 030c 90E0      		ldi r25,hi8(mutex)
 450 030e 40E0      		ldi r20,lo8(0)
 451 0310 50E0      		ldi r21,hi8(0)
 452 0312 60E0      		ldi r22,hlo8(0)
 453 0314 70E0      		ldi r23,hhi8(0)
 454 0316 0E94 0000 		call NutEventWait
 455 031a C501      		movw r24,r10
 456 031c 6AE3      		ldi r22,lo8(58)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 9


 457 031e 20E0      		ldi r18,lo8(0)
 458 0320 30E0      		ldi r19,hi8(0)
 459 0322 40E0      		ldi r20,hlo8(0)
 460 0324 50E0      		ldi r21,hhi8(0)
 461 0326 0E94 0000 		call MmCardTxCmd
 462 032a C501      		movw r24,r10
 463 032c 0E94 0000 		call MmCardRxR1
 464 0330 982E      		mov r9,r24
 465 0332 CC24      		clr r12
 466 0334 DD24      		clr r13
 467               	.L40:
 468 0336 E880      		ld r14,Y
 469 0338 F980      		ldd r15,Y+1
 470 033a 0A81      		ldd r16,Y+2
 471 033c 1B81      		ldd r17,Y+3
 472 033e 102F      		mov r17,r16
 473 0340 0F2D      		mov r16,r15
 474 0342 FE2C      		mov r15,r14
 475 0344 EE24      		clr r14
 476 0346 E882      		st Y,r14
 477 0348 F982      		std Y+1,r15
 478 034a 0A83      		std Y+2,r16
 479 034c 1B83      		std Y+3,r17
 480 034e D501      		movw r26,r10
 481 0350 1296      		adiw r26,2
 482 0352 ED91      		ld r30,X+
 483 0354 FC91      		ld r31,X
 484 0356 1397      		sbiw r26,2+1
 485 0358 8FEF      		ldi r24,lo8(-1)
 486 035a 0995      		icall
 487 035c 90E0      		ldi r25,lo8(0)
 488 035e A0E0      		ldi r26,lo8(0)
 489 0360 B0E0      		ldi r27,hi8(0)
 490 0362 8E29      		or r24,r14
 491 0364 9F29      		or r25,r15
 492 0366 A02B      		or r26,r16
 493 0368 B12B      		or r27,r17
 494 036a 8883      		st Y,r24
 495 036c 9983      		std Y+1,r25
 496 036e AA83      		std Y+2,r26
 497 0370 BB83      		std Y+3,r27
 498 0372 0894      		sec
 499 0374 C11C      		adc r12,__zero_reg__
 500 0376 D11C      		adc r13,__zero_reg__
 501 0378 B4E0      		ldi r27,lo8(4)
 502 037a CB16      		cp r12,r27
 503 037c D104      		cpc r13,__zero_reg__
 504 037e 01F4      		brne .L40
 505 0380 9920      		tst r9
 506 0382 01F0      		breq .L41
 507 0384 CFEF      		ldi r28,lo8(-1)
 508 0386 DFEF      		ldi r29,hi8(-1)
 509 0388 00C0      		rjmp .L42
 510               	.L41:
 511 038a C0E0      		ldi r28,lo8(0)
 512 038c D0E0      		ldi r29,hi8(0)
 513               	.L42:
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 10


 514 038e 80E0      		ldi r24,lo8(mutex)
 515 0390 90E0      		ldi r25,hi8(mutex)
 516 0392 0E94 0000 		call NutEventPost
 517 0396 00C0      		rjmp .L38
 518               	.L34:
 519 0398 C501      		movw r24,r10
 520 039a 6AE0      		ldi r22,lo8(10)
 521 039c 00C0      		rjmp .L46
 522               	.L35:
 523 039e C501      		movw r24,r10
 524 03a0 69E0      		ldi r22,lo8(9)
 525               	.L46:
 526 03a2 AE01      		movw r20,r28
 527 03a4 20E1      		ldi r18,lo8(16)
 528 03a6 30E0      		ldi r19,hi8(16)
 529 03a8 0E94 0000 		call MmCardGetReg
 530 03ac EC01      		movw r28,r24
 531               	.L38:
 532 03ae CE01      		movw r24,r28
 533               	/* epilogue start */
 534 03b0 DF91      		pop r29
 535 03b2 CF91      		pop r28
 536 03b4 1F91      		pop r17
 537 03b6 0F91      		pop r16
 538 03b8 FF90      		pop r15
 539 03ba EF90      		pop r14
 540 03bc DF90      		pop r13
 541 03be CF90      		pop r12
 542 03c0 BF90      		pop r11
 543 03c2 AF90      		pop r10
 544 03c4 9F90      		pop r9
 545 03c6 0895      		ret
 546               		.size	MmCardIOCtl, .-MmCardIOCtl
 547               		.type	MmCardReset, @function
 548               	MmCardReset:
 549 03c8 EF92      		push r14
 550 03ca FF92      		push r15
 551 03cc 1F93      		push r17
 552 03ce CF93      		push r28
 553 03d0 DF93      		push r29
 554               	/* prologue: function */
 555               	/* frame size = 0 */
 556 03d2 7C01      		movw r14,r24
 557 03d4 DC01      		movw r26,r24
 558 03d6 ED91      		ld r30,X+
 559 03d8 FC91      		ld r31,X
 560 03da 0995      		icall
 561 03dc 892B      		or r24,r25
 562 03de 01F4      		brne .L51
 563 03e0 D701      		movw r26,r14
 564 03e2 1496      		adiw r26,4
 565 03e4 ED91      		ld r30,X+
 566 03e6 FC91      		ld r31,X
 567 03e8 1597      		sbiw r26,4+1
 568 03ea 80E0      		ldi r24,lo8(0)
 569 03ec 90E0      		ldi r25,hi8(0)
 570 03ee 0995      		icall
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 11


 571 03f0 C0E0      		ldi r28,lo8(0)
 572 03f2 D0E0      		ldi r29,hi8(0)
 573               	.L52:
 574 03f4 D701      		movw r26,r14
 575 03f6 1296      		adiw r26,2
 576 03f8 ED91      		ld r30,X+
 577 03fa FC91      		ld r31,X
 578 03fc 1397      		sbiw r26,2+1
 579 03fe 8FEF      		ldi r24,lo8(-1)
 580 0400 0995      		icall
 581 0402 2196      		adiw r28,1
 582 0404 CA30      		cpi r28,10
 583 0406 D105      		cpc r29,__zero_reg__
 584 0408 01F4      		brne .L52
 585 040a C0E0      		ldi r28,lo8(0)
 586 040c D0E0      		ldi r29,hi8(0)
 587               	.L55:
 588 040e C701      		movw r24,r14
 589 0410 60E0      		ldi r22,lo8(0)
 590 0412 20E0      		ldi r18,lo8(0)
 591 0414 30E0      		ldi r19,hi8(0)
 592 0416 40E0      		ldi r20,hlo8(0)
 593 0418 50E0      		ldi r21,hhi8(0)
 594 041a 0E94 0000 		call MmCardTxCmd
 595 041e C701      		movw r24,r14
 596 0420 0E94 0000 		call MmCardRxR1
 597 0424 182F      		mov r17,r24
 598 0426 D701      		movw r26,r14
 599 0428 1496      		adiw r26,4
 600 042a ED91      		ld r30,X+
 601 042c FC91      		ld r31,X
 602 042e 1597      		sbiw r26,4+1
 603 0430 80E0      		ldi r24,lo8(0)
 604 0432 90E0      		ldi r25,hi8(0)
 605 0434 0995      		icall
 606 0436 1230      		cpi r17,lo8(2)
 607 0438 00F4      		brsh .L53
 608 043a 20E0      		ldi r18,lo8(0)
 609 043c 30E0      		ldi r19,hi8(0)
 610 043e 00C0      		rjmp .L54
 611               	.L53:
 612 0440 2196      		adiw r28,1
 613 0442 CF3F      		cpi r28,255
 614 0444 D105      		cpc r29,__zero_reg__
 615 0446 01F4      		brne .L55
 616               	.L51:
 617 0448 2FEF      		ldi r18,lo8(-1)
 618 044a 3FEF      		ldi r19,hi8(-1)
 619               	.L54:
 620 044c C901      		movw r24,r18
 621               	/* epilogue start */
 622 044e DF91      		pop r29
 623 0450 CF91      		pop r28
 624 0452 1F91      		pop r17
 625 0454 FF90      		pop r15
 626 0456 EF90      		pop r14
 627 0458 0895      		ret
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 12


 628               		.size	MmCardReset, .-MmCardReset
 629               		.type	MmCardReadOrVerify, @function
 630               	MmCardReadOrVerify:
 631 045a 8F92      		push r8
 632 045c 9F92      		push r9
 633 045e AF92      		push r10
 634 0460 BF92      		push r11
 635 0462 CF92      		push r12
 636 0464 DF92      		push r13
 637 0466 EF92      		push r14
 638 0468 FF92      		push r15
 639 046a 0F93      		push r16
 640 046c 1F93      		push r17
 641 046e CF93      		push r28
 642 0470 DF93      		push r29
 643               	/* prologue: function */
 644               	/* frame size = 0 */
 645 0472 5C01      		movw r10,r24
 646 0474 6A01      		movw r12,r20
 647 0476 7B01      		movw r14,r22
 648 0478 4901      		movw r8,r18
 649 047a 80E0      		ldi r24,lo8(mutex)
 650 047c 90E0      		ldi r25,hi8(mutex)
 651 047e 40E0      		ldi r20,lo8(0)
 652 0480 50E0      		ldi r21,hi8(0)
 653 0482 60E0      		ldi r22,hlo8(0)
 654 0484 70E0      		ldi r23,hhi8(0)
 655 0486 0E94 0000 		call NutEventWait
 656 048a 49E0      		ldi r20,9
 657 048c CC0C      	1:	lsl r12
 658 048e DD1C      		rol r13
 659 0490 EE1C      		rol r14
 660 0492 FF1C      		rol r15
 661 0494 4A95      		dec r20
 662 0496 01F4      		brne 1b
 663 0498 C0E4      		ldi r28,lo8(64)
 664 049a D0E0      		ldi r29,hi8(64)
 665 049c 00C0      		rjmp .L60
 666               	.L68:
 667 049e C501      		movw r24,r10
 668 04a0 61E1      		ldi r22,lo8(17)
 669 04a2 A701      		movw r20,r14
 670 04a4 9601      		movw r18,r12
 671 04a6 0E94 0000 		call MmCardTxCmd
 672 04aa C501      		movw r24,r10
 673 04ac 0E94 0000 		call MmCardRxR1
 674 04b0 8823      		tst r24
 675 04b2 01F0      		breq .+2
 676 04b4 00C0      		rjmp .L61
 677 04b6 C501      		movw r24,r10
 678 04b8 0E94 0000 		call MmCardRxR1
 679 04bc 8E3F      		cpi r24,lo8(-2)
 680 04be 01F0      		breq .+2
 681 04c0 00C0      		rjmp .L61
 682 04c2 012B      		or r16,r17
 683 04c4 01F0      		breq .L62
 684 04c6 EE24      		clr r14
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 13


 685 04c8 FF24      		clr r15
 686 04ca C0E0      		ldi r28,lo8(0)
 687 04cc D0E0      		ldi r29,hi8(0)
 688               	.L65:
 689 04ce D401      		movw r26,r8
 690 04d0 1C91      		ld r17,X
 691 04d2 D501      		movw r26,r10
 692 04d4 1296      		adiw r26,2
 693 04d6 ED91      		ld r30,X+
 694 04d8 FC91      		ld r31,X
 695 04da 1397      		sbiw r26,2+1
 696 04dc 8FEF      		ldi r24,lo8(-1)
 697 04de 0995      		icall
 698 04e0 1817      		cp r17,r24
 699 04e2 01F0      		breq .L63
 700 04e4 EE24      		clr r14
 701 04e6 EA94      		dec r14
 702 04e8 FE2C      		mov r15,r14
 703               	.L63:
 704 04ea 2196      		adiw r28,1
 705 04ec B2E0      		ldi r27,hi8(512)
 706 04ee C030      		cpi r28,lo8(512)
 707 04f0 DB07      		cpc r29,r27
 708 04f2 01F0      		breq .L64
 709 04f4 0894      		sec
 710 04f6 811C      		adc r8,__zero_reg__
 711 04f8 911C      		adc r9,__zero_reg__
 712 04fa 00C0      		rjmp .L65
 713               	.L62:
 714 04fc 00E0      		ldi r16,lo8(0)
 715 04fe 10E0      		ldi r17,hi8(0)
 716               	.L66:
 717 0500 D501      		movw r26,r10
 718 0502 1296      		adiw r26,2
 719 0504 ED91      		ld r30,X+
 720 0506 FC91      		ld r31,X
 721 0508 1397      		sbiw r26,2+1
 722 050a 8FEF      		ldi r24,lo8(-1)
 723 050c 0995      		icall
 724 050e F401      		movw r30,r8
 725 0510 8193      		st Z+,r24
 726 0512 4F01      		movw r8,r30
 727 0514 0F5F      		subi r16,lo8(-(1))
 728 0516 1F4F      		sbci r17,hi8(-(1))
 729 0518 F2E0      		ldi r31,hi8(512)
 730 051a 0030      		cpi r16,lo8(512)
 731 051c 1F07      		cpc r17,r31
 732 051e 01F4      		brne .L66
 733 0520 EE24      		clr r14
 734 0522 FF24      		clr r15
 735               	.L64:
 736 0524 D501      		movw r26,r10
 737 0526 1296      		adiw r26,2
 738 0528 ED91      		ld r30,X+
 739 052a FC91      		ld r31,X
 740 052c 1397      		sbiw r26,2+1
 741 052e 8FEF      		ldi r24,lo8(-1)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 14


 742 0530 0995      		icall
 743 0532 D501      		movw r26,r10
 744 0534 1296      		adiw r26,2
 745 0536 ED91      		ld r30,X+
 746 0538 FC91      		ld r31,X
 747 053a 1397      		sbiw r26,2+1
 748 053c 8FEF      		ldi r24,lo8(-1)
 749 053e 0995      		icall
 750 0540 D501      		movw r26,r10
 751 0542 1496      		adiw r26,4
 752 0544 ED91      		ld r30,X+
 753 0546 FC91      		ld r31,X
 754 0548 1597      		sbiw r26,4+1
 755 054a 80E0      		ldi r24,lo8(0)
 756 054c 90E0      		ldi r25,hi8(0)
 757 054e 0995      		icall
 758 0550 00C0      		rjmp .L67
 759               	.L61:
 760 0552 D501      		movw r26,r10
 761 0554 1496      		adiw r26,4
 762 0556 ED91      		ld r30,X+
 763 0558 FC91      		ld r31,X
 764 055a 1597      		sbiw r26,4+1
 765 055c 80E0      		ldi r24,lo8(0)
 766 055e 90E0      		ldi r25,hi8(0)
 767 0560 0995      		icall
 768               	.L60:
 769 0562 2197      		sbiw r28,1
 770 0564 BFEF      		ldi r27,hi8(-1)
 771 0566 CF3F      		cpi r28,lo8(-1)
 772 0568 DB07      		cpc r29,r27
 773 056a 01F0      		breq .+2
 774 056c 00C0      		rjmp .L68
 775 056e EE24      		clr r14
 776 0570 EA94      		dec r14
 777 0572 FE2C      		mov r15,r14
 778               	.L67:
 779 0574 80E0      		ldi r24,lo8(mutex)
 780 0576 90E0      		ldi r25,hi8(mutex)
 781 0578 0E94 0000 		call NutEventPost
 782 057c C701      		movw r24,r14
 783               	/* epilogue start */
 784 057e DF91      		pop r29
 785 0580 CF91      		pop r28
 786 0582 1F91      		pop r17
 787 0584 0F91      		pop r16
 788 0586 FF90      		pop r15
 789 0588 EF90      		pop r14
 790 058a DF90      		pop r13
 791 058c CF90      		pop r12
 792 058e BF90      		pop r11
 793 0590 AF90      		pop r10
 794 0592 9F90      		pop r9
 795 0594 8F90      		pop r8
 796 0596 0895      		ret
 797               		.size	MmCardReadOrVerify, .-MmCardReadOrVerify
 798               	.global	MmCardBlockRead
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 15


 799               		.type	MmCardBlockRead, @function
 800               	MmCardBlockRead:
 801 0598 AF92      		push r10
 802 059a BF92      		push r11
 803 059c CF92      		push r12
 804 059e DF92      		push r13
 805 05a0 EF92      		push r14
 806 05a2 FF92      		push r15
 807 05a4 0F93      		push r16
 808 05a6 1F93      		push r17
 809 05a8 CF93      		push r28
 810 05aa DF93      		push r29
 811               	/* prologue: function */
 812               	/* frame size = 0 */
 813 05ac FC01      		movw r30,r24
 814 05ae 6B01      		movw r12,r22
 815 05b0 C481      		ldd r28,Z+4
 816 05b2 D581      		ldd r29,Z+5
 817 05b4 EA88      		ldd r14,Y+18
 818 05b6 FB88      		ldd r15,Y+19
 819 05b8 0C89      		ldd r16,Y+20
 820 05ba 1D89      		ldd r17,Y+21
 821 05bc 0280      		ldd __tmp_reg__,Z+2
 822 05be F381      		ldd r31,Z+3
 823 05c0 E02D      		mov r30,__tmp_reg__
 824 05c2 A784      		ldd r10,Z+15
 825 05c4 B088      		ldd r11,Z+16
 826 05c6 D501      		movw r26,r10
 827 05c8 1696      		adiw r26,6
 828 05ca ED91      		ld r30,X+
 829 05cc FC91      		ld r31,X
 830 05ce 1797      		sbiw r26,6+1
 831 05d0 0995      		icall
 832 05d2 0197      		sbiw r24,1
 833 05d4 01F4      		brne .L72
 834 05d6 C114      		cp r12,__zero_reg__
 835 05d8 D104      		cpc r13,__zero_reg__
 836 05da 01F4      		brne .L73
 837 05dc 56E1      		ldi r21,lo8(22)
 838 05de C52E      		mov r12,r21
 839 05e0 D12C      		mov r13,__zero_reg__
 840 05e2 CC0E      		add r12,r28
 841 05e4 DD1E      		adc r13,r29
 842               	.L73:
 843 05e6 8A85      		ldd r24,Y+10
 844 05e8 9B85      		ldd r25,Y+11
 845 05ea AC85      		ldd r26,Y+12
 846 05ec BD85      		ldd r27,Y+13
 847 05ee E80E      		add r14,r24
 848 05f0 F91E      		adc r15,r25
 849 05f2 0A1F      		adc r16,r26
 850 05f4 1B1F      		adc r17,r27
 851 05f6 C501      		movw r24,r10
 852 05f8 B801      		movw r22,r16
 853 05fa A701      		movw r20,r14
 854 05fc 9601      		movw r18,r12
 855 05fe 00E0      		ldi r16,lo8(0)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 16


 856 0600 10E0      		ldi r17,hi8(0)
 857 0602 0E94 0000 		call MmCardReadOrVerify
 858 0606 892B      		or r24,r25
 859 0608 01F4      		brne .L72
 860 060a 21E0      		ldi r18,lo8(1)
 861 060c 30E0      		ldi r19,hi8(1)
 862 060e 00C0      		rjmp .L74
 863               	.L72:
 864 0610 2FEF      		ldi r18,lo8(-1)
 865 0612 3FEF      		ldi r19,hi8(-1)
 866               	.L74:
 867 0614 C901      		movw r24,r18
 868               	/* epilogue start */
 869 0616 DF91      		pop r29
 870 0618 CF91      		pop r28
 871 061a 1F91      		pop r17
 872 061c 0F91      		pop r16
 873 061e FF90      		pop r15
 874 0620 EF90      		pop r14
 875 0622 DF90      		pop r13
 876 0624 CF90      		pop r12
 877 0626 BF90      		pop r11
 878 0628 AF90      		pop r10
 879 062a 0895      		ret
 880               		.size	MmCardBlockRead, .-MmCardBlockRead
 881               	.global	MmCardBlockWrite
 882               		.type	MmCardBlockWrite, @function
 883               	MmCardBlockWrite:
 884 062c 6F92      		push r6
 885 062e 7F92      		push r7
 886 0630 8F92      		push r8
 887 0632 9F92      		push r9
 888 0634 AF92      		push r10
 889 0636 BF92      		push r11
 890 0638 CF92      		push r12
 891 063a DF92      		push r13
 892 063c EF92      		push r14
 893 063e FF92      		push r15
 894 0640 0F93      		push r16
 895 0642 1F93      		push r17
 896 0644 CF93      		push r28
 897 0646 DF93      		push r29
 898               	/* prologue: function */
 899               	/* frame size = 0 */
 900 0648 FC01      		movw r30,r24
 901 064a 8B01      		movw r16,r22
 902 064c C481      		ldd r28,Z+4
 903 064e D581      		ldd r29,Z+5
 904 0650 6A88      		ldd r6,Y+18
 905 0652 7B88      		ldd r7,Y+19
 906 0654 8C88      		ldd r8,Y+20
 907 0656 9D88      		ldd r9,Y+21
 908 0658 0280      		ldd __tmp_reg__,Z+2
 909 065a F381      		ldd r31,Z+3
 910 065c E02D      		mov r30,__tmp_reg__
 911 065e E784      		ldd r14,Z+15
 912 0660 F088      		ldd r15,Z+16
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 17


 913 0662 D701      		movw r26,r14
 914 0664 1696      		adiw r26,6
 915 0666 ED91      		ld r30,X+
 916 0668 FC91      		ld r31,X
 917 066a 1797      		sbiw r26,6+1
 918 066c 0995      		icall
 919 066e 0197      		sbiw r24,1
 920 0670 01F0      		breq .+2
 921 0672 00C0      		rjmp .L77
 922 0674 0115      		cp r16,__zero_reg__
 923 0676 1105      		cpc r17,__zero_reg__
 924 0678 01F4      		brne .L78
 925 067a 8E01      		movw r16,r28
 926 067c 0A5E      		subi r16,lo8(-(22))
 927 067e 1F4F      		sbci r17,hi8(-(22))
 928               	.L78:
 929 0680 AA84      		ldd r10,Y+10
 930 0682 BB84      		ldd r11,Y+11
 931 0684 CC84      		ldd r12,Y+12
 932 0686 DD84      		ldd r13,Y+13
 933 0688 A60C      		add r10,r6
 934 068a B71C      		adc r11,r7
 935 068c C81C      		adc r12,r8
 936 068e D91C      		adc r13,r9
 937 0690 3801      		movw r6,r16
 938 0692 80E0      		ldi r24,lo8(mutex)
 939 0694 90E0      		ldi r25,hi8(mutex)
 940 0696 40E0      		ldi r20,lo8(0)
 941 0698 50E0      		ldi r21,hi8(0)
 942 069a 60E0      		ldi r22,hlo8(0)
 943 069c 70E0      		ldi r23,hhi8(0)
 944 069e 0E94 0000 		call NutEventWait
 945 06a2 79E0      		ldi r23,9
 946 06a4 AA0C      	1:	lsl r10
 947 06a6 BB1C      		rol r11
 948 06a8 CC1C      		rol r12
 949 06aa DD1C      		rol r13
 950 06ac 7A95      		dec r23
 951 06ae 01F4      		brne 1b
 952 06b0 60E2      		ldi r22,lo8(32)
 953 06b2 862E      		mov r8,r22
 954 06b4 912C      		mov r9,__zero_reg__
 955 06b6 00C0      		rjmp .L79
 956               	.L86:
 957 06b8 C701      		movw r24,r14
 958 06ba 68E1      		ldi r22,lo8(24)
 959 06bc A601      		movw r20,r12
 960 06be 9501      		movw r18,r10
 961 06c0 0E94 0000 		call MmCardTxCmd
 962 06c4 C701      		movw r24,r14
 963 06c6 0E94 0000 		call MmCardRxR1
 964 06ca 8823      		tst r24
 965 06cc 01F0      		breq .+2
 966 06ce 00C0      		rjmp .L80
 967 06d0 D701      		movw r26,r14
 968 06d2 1296      		adiw r26,2
 969 06d4 ED91      		ld r30,X+
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 18


 970 06d6 FC91      		ld r31,X
 971 06d8 1397      		sbiw r26,2+1
 972 06da 8FEF      		ldi r24,lo8(-1)
 973 06dc 0995      		icall
 974 06de D701      		movw r26,r14
 975 06e0 1296      		adiw r26,2
 976 06e2 ED91      		ld r30,X+
 977 06e4 FC91      		ld r31,X
 978 06e6 1397      		sbiw r26,2+1
 979 06e8 8EEF      		ldi r24,lo8(-2)
 980 06ea 0995      		icall
 981 06ec 8301      		movw r16,r6
 982 06ee C0E0      		ldi r28,lo8(0)
 983 06f0 D0E0      		ldi r29,hi8(0)
 984               	.L81:
 985 06f2 D701      		movw r26,r14
 986 06f4 1296      		adiw r26,2
 987 06f6 ED91      		ld r30,X+
 988 06f8 FC91      		ld r31,X
 989 06fa 1397      		sbiw r26,2+1
 990 06fc D801      		movw r26,r16
 991 06fe 8D91      		ld r24,X+
 992 0700 8D01      		movw r16,r26
 993 0702 0995      		icall
 994 0704 2196      		adiw r28,1
 995 0706 B2E0      		ldi r27,hi8(512)
 996 0708 C030      		cpi r28,lo8(512)
 997 070a DB07      		cpc r29,r27
 998 070c 01F4      		brne .L81
 999 070e 80E0      		ldi r24,lo8(512)
 1000 0710 92E0      		ldi r25,hi8(512)
 1001 0712 680E      		add r6,r24
 1002 0714 791E      		adc r7,r25
 1003 0716 C701      		movw r24,r14
 1004 0718 0E94 0000 		call MmCardRxR1
 1005 071c 853E      		cpi r24,lo8(-27)
 1006 071e 01F4      		brne .L80
 1007 0720 C0E0      		ldi r28,lo8(0)
 1008 0722 D0E0      		ldi r29,hi8(0)
 1009               	.L85:
 1010 0724 D701      		movw r26,r14
 1011 0726 1296      		adiw r26,2
 1012 0728 ED91      		ld r30,X+
 1013 072a FC91      		ld r31,X
 1014 072c 1397      		sbiw r26,2+1
 1015 072e 8FEF      		ldi r24,lo8(-1)
 1016 0730 0995      		icall
 1017 0732 8F3F      		cpi r24,lo8(-1)
 1018 0734 01F4      		brne .L82
 1019 0736 CD2B      		or r28,r29
 1020 0738 01F0      		breq .L80
 1021 073a 00C0      		rjmp .L83
 1022               	.L82:
 1023 073c B3E0      		ldi r27,hi8(993)
 1024 073e C13E      		cpi r28,lo8(993)
 1025 0740 DB07      		cpc r29,r27
 1026 0742 04F0      		brlt .L84
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 19


 1027 0744 61E0      		ldi r22,lo8(1)
 1028 0746 70E0      		ldi r23,hi8(1)
 1029 0748 80E0      		ldi r24,hlo8(1)
 1030 074a 90E0      		ldi r25,hhi8(1)
 1031 074c 0E94 0000 		call NutSleep
 1032               	.L84:
 1033 0750 2196      		adiw r28,1
 1034 0752 84E0      		ldi r24,hi8(1024)
 1035 0754 C030      		cpi r28,lo8(1024)
 1036 0756 D807      		cpc r29,r24
 1037 0758 01F4      		brne .L85
 1038 075a 00C0      		rjmp .L83
 1039               	.L80:
 1040 075c D701      		movw r26,r14
 1041 075e 1496      		adiw r26,4
 1042 0760 ED91      		ld r30,X+
 1043 0762 FC91      		ld r31,X
 1044 0764 1597      		sbiw r26,4+1
 1045 0766 80E0      		ldi r24,lo8(0)
 1046 0768 90E0      		ldi r25,hi8(0)
 1047 076a 0995      		icall
 1048               	.L79:
 1049 076c 0894      		sec
 1050 076e 8108      		sbc r8,__zero_reg__
 1051 0770 9108      		sbc r9,__zero_reg__
 1052 0772 BFEF      		ldi r27,lo8(-1)
 1053 0774 8B16      		cp r8,r27
 1054 0776 BFEF      		ldi r27,hi8(-1)
 1055 0778 9B06      		cpc r9,r27
 1056 077a 01F0      		breq .+2
 1057 077c 00C0      		rjmp .L86
 1058 077e CFEF      		ldi r28,lo8(-1)
 1059 0780 DFEF      		ldi r29,hi8(-1)
 1060 0782 00C0      		rjmp .L87
 1061               	.L83:
 1062 0784 C0E0      		ldi r28,lo8(0)
 1063 0786 D0E0      		ldi r29,hi8(0)
 1064               	.L87:
 1065 0788 D701      		movw r26,r14
 1066 078a 1496      		adiw r26,4
 1067 078c ED91      		ld r30,X+
 1068 078e FC91      		ld r31,X
 1069 0790 1597      		sbiw r26,4+1
 1070 0792 80E0      		ldi r24,lo8(0)
 1071 0794 90E0      		ldi r25,hi8(0)
 1072 0796 0995      		icall
 1073 0798 80E0      		ldi r24,lo8(mutex)
 1074 079a 90E0      		ldi r25,hi8(mutex)
 1075 079c 0E94 0000 		call NutEventPost
 1076 07a0 CD2B      		or r28,r29
 1077 07a2 01F4      		brne .L77
 1078 07a4 21E0      		ldi r18,lo8(1)
 1079 07a6 30E0      		ldi r19,hi8(1)
 1080 07a8 00C0      		rjmp .L88
 1081               	.L77:
 1082 07aa 2FEF      		ldi r18,lo8(-1)
 1083 07ac 3FEF      		ldi r19,hi8(-1)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 20


 1084               	.L88:
 1085 07ae C901      		movw r24,r18
 1086               	/* epilogue start */
 1087 07b0 DF91      		pop r29
 1088 07b2 CF91      		pop r28
 1089 07b4 1F91      		pop r17
 1090 07b6 0F91      		pop r16
 1091 07b8 FF90      		pop r15
 1092 07ba EF90      		pop r14
 1093 07bc DF90      		pop r13
 1094 07be CF90      		pop r12
 1095 07c0 BF90      		pop r11
 1096 07c2 AF90      		pop r10
 1097 07c4 9F90      		pop r9
 1098 07c6 8F90      		pop r8
 1099 07c8 7F90      		pop r7
 1100 07ca 6F90      		pop r6
 1101 07cc 0895      		ret
 1102               		.size	MmCardBlockWrite, .-MmCardBlockWrite
 1103               	.global	MmCardUnmount
 1104               		.type	MmCardUnmount, @function
 1105               	MmCardUnmount:
 1106 07ce EF92      		push r14
 1107 07d0 FF92      		push r15
 1108 07d2 0F93      		push r16
 1109 07d4 1F93      		push r17
 1110 07d6 CF93      		push r28
 1111 07d8 DF93      		push r29
 1112               	/* prologue: function */
 1113               	/* frame size = 0 */
 1114 07da 7C01      		movw r14,r24
 1115 07dc 0097      		sbiw r24,0
 1116 07de 01F4      		brne .L93
 1117 07e0 CFEF      		ldi r28,lo8(-1)
 1118 07e2 DFEF      		ldi r29,hi8(-1)
 1119 07e4 00C0      		rjmp .L94
 1120               	.L93:
 1121 07e6 DC01      		movw r26,r24
 1122 07e8 1496      		adiw r26,4
 1123 07ea 0D91      		ld r16,X+
 1124 07ec 1C91      		ld r17,X
 1125 07ee 1597      		sbiw r26,4+1
 1126 07f0 0115      		cp r16,__zero_reg__
 1127 07f2 1105      		cpc r17,__zero_reg__
 1128 07f4 01F4      		brne .L95
 1129 07f6 CFEF      		ldi r28,lo8(-1)
 1130 07f8 DFEF      		ldi r29,hi8(-1)
 1131 07fa 00C0      		rjmp .L96
 1132               	.L95:
 1133 07fc DC01      		movw r26,r24
 1134 07fe 1296      		adiw r26,2
 1135 0800 ED91      		ld r30,X+
 1136 0802 FC91      		ld r31,X
 1137 0804 1397      		sbiw r26,2+1
 1138 0806 0784      		ldd __tmp_reg__,Z+15
 1139 0808 F089      		ldd r31,Z+16
 1140 080a E02D      		mov r30,__tmp_reg__
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 21


 1141 080c 0680      		ldd __tmp_reg__,Z+6
 1142 080e F781      		ldd r31,Z+7
 1143 0810 E02D      		mov r30,__tmp_reg__
 1144 0812 0995      		icall
 1145 0814 0197      		sbiw r24,1
 1146 0816 01F0      		breq .L97
 1147 0818 CFEF      		ldi r28,lo8(-1)
 1148 081a DFEF      		ldi r29,hi8(-1)
 1149 081c 00C0      		rjmp .L98
 1150               	.L97:
 1151 081e D801      		movw r26,r16
 1152 0820 ED91      		ld r30,X+
 1153 0822 FC91      		ld r31,X
 1154 0824 2589      		ldd r18,Z+21
 1155 0826 3689      		ldd r19,Z+22
 1156 0828 CF01      		movw r24,r30
 1157 082a 61E3      		ldi r22,lo8(4401)
 1158 082c 71E1      		ldi r23,hi8(4401)
 1159 082e 40E0      		ldi r20,lo8(0)
 1160 0830 50E0      		ldi r21,hi8(0)
 1161 0832 F901      		movw r30,r18
 1162 0834 0995      		icall
 1163 0836 EC01      		movw r28,r24
 1164               	.L98:
 1165 0838 C801      		movw r24,r16
 1166 083a 0E94 0000 		call free
 1167               	.L96:
 1168 083e C701      		movw r24,r14
 1169 0840 0E94 0000 		call free
 1170               	.L94:
 1171 0844 CE01      		movw r24,r28
 1172               	/* epilogue start */
 1173 0846 DF91      		pop r29
 1174 0848 CF91      		pop r28
 1175 084a 1F91      		pop r17
 1176 084c 0F91      		pop r16
 1177 084e FF90      		pop r15
 1178 0850 EF90      		pop r14
 1179 0852 0895      		ret
 1180               		.size	MmCardUnmount, .-MmCardUnmount
 1181               	.global	MmCardMount
 1182               		.type	MmCardMount, @function
 1183               	MmCardMount:
 1184 0854 4F92      		push r4
 1185 0856 5F92      		push r5
 1186 0858 6F92      		push r6
 1187 085a 7F92      		push r7
 1188 085c 8F92      		push r8
 1189 085e 9F92      		push r9
 1190 0860 AF92      		push r10
 1191 0862 BF92      		push r11
 1192 0864 CF92      		push r12
 1193 0866 DF92      		push r13
 1194 0868 EF92      		push r14
 1195 086a FF92      		push r15
 1196 086c 0F93      		push r16
 1197 086e 1F93      		push r17
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 22


 1198 0870 DF93      		push r29
 1199 0872 CF93      		push r28
 1200 0874 00D0      		rcall .
 1201 0876 0F92      		push __tmp_reg__
 1202 0878 CDB7      		in r28,__SP_L__
 1203 087a DEB7      		in r29,__SP_H__
 1204               	/* prologue: function */
 1205               	/* frame size = 3 */
 1206 087c 2C01      		movw r4,r24
 1207 087e 6B01      		movw r12,r22
 1208 0880 DC01      		movw r26,r24
 1209 0882 1F96      		adiw r26,15
 1210 0884 AD90      		ld r10,X+
 1211 0886 BC90      		ld r11,X
 1212 0888 5097      		sbiw r26,15+1
 1213 088a D501      		movw r26,r10
 1214 088c 1696      		adiw r26,6
 1215 088e ED91      		ld r30,X+
 1216 0890 FC91      		ld r31,X
 1217 0892 1797      		sbiw r26,6+1
 1218 0894 0995      		icall
 1219 0896 892B      		or r24,r25
 1220 0898 01F4      		brne .+2
 1221 089a 00C0      		rjmp .L140
 1222               	.L101:
 1223 089c C501      		movw r24,r10
 1224 089e 0E94 0000 		call MmCardReset
 1225 08a2 892B      		or r24,r25
 1226 08a4 01F4      		brne .L103
 1227               	.L106:
 1228 08a6 EE24      		clr r14
 1229 08a8 FF24      		clr r15
 1230 08aa 00C0      		rjmp .L104
 1231               	.L103:
 1232 08ac C501      		movw r24,r10
 1233 08ae 0E94 0000 		call MmCardReset
 1234 08b2 892B      		or r24,r25
 1235 08b4 01F0      		breq .+2
 1236 08b6 00C0      		rjmp .L140
 1237 08b8 00C0      		rjmp .L106
 1238               	.L104:
 1239 08ba C501      		movw r24,r10
 1240 08bc 61E0      		ldi r22,lo8(1)
 1241 08be 20E0      		ldi r18,lo8(0)
 1242 08c0 30E0      		ldi r19,hi8(0)
 1243 08c2 40E0      		ldi r20,hlo8(0)
 1244 08c4 50E0      		ldi r21,hhi8(0)
 1245 08c6 0E94 0000 		call MmCardTxCmd
 1246 08ca C501      		movw r24,r10
 1247 08cc 0E94 0000 		call MmCardRxR1
 1248 08d0 182F      		mov r17,r24
 1249 08d2 D501      		movw r26,r10
 1250 08d4 1496      		adiw r26,4
 1251 08d6 ED91      		ld r30,X+
 1252 08d8 FC91      		ld r31,X
 1253 08da 1597      		sbiw r26,4+1
 1254 08dc 80E0      		ldi r24,lo8(0)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 23


 1255 08de 90E0      		ldi r25,hi8(0)
 1256 08e0 0995      		icall
 1257 08e2 1123      		tst r17
 1258 08e4 01F4      		brne .L107
 1259 08e6 80E0      		ldi r24,lo8(mutex)
 1260 08e8 90E0      		ldi r25,hi8(mutex)
 1261 08ea 0E94 0000 		call NutEventPost
 1262 08ee F601      		movw r30,r12
 1263 08f0 8081      		ld r24,Z
 1264 08f2 8823      		tst r24
 1265 08f4 01F0      		breq .L138
 1266 08f6 00C0      		rjmp .L145
 1267               	.L107:
 1268 08f8 F1E8      		ldi r31,lo8(129)
 1269 08fa EF16      		cp r14,r31
 1270 08fc F104      		cpc r15,__zero_reg__
 1271 08fe 04F0      		brlt .L110
 1272 0900 61E0      		ldi r22,lo8(1)
 1273 0902 70E0      		ldi r23,hi8(1)
 1274 0904 80E0      		ldi r24,hlo8(1)
 1275 0906 90E0      		ldi r25,hhi8(1)
 1276 0908 0E94 0000 		call NutSleep
 1277               	.L110:
 1278 090c 0894      		sec
 1279 090e E11C      		adc r14,__zero_reg__
 1280 0910 F11C      		adc r15,__zero_reg__
 1281 0912 20E0      		ldi r18,lo8(512)
 1282 0914 E216      		cp r14,r18
 1283 0916 22E0      		ldi r18,hi8(512)
 1284 0918 F206      		cpc r15,r18
 1285 091a 01F4      		brne .L104
 1286 091c 00C0      		rjmp .L140
 1287               	.L145:
 1288 091e C601      		movw r24,r12
 1289 0920 0E94 0000 		call atoi
 1290 0924 3C01      		movw r6,r24
 1291               	.L112:
 1292 0926 0894      		sec
 1293 0928 C11C      		adc r12,__zero_reg__
 1294 092a D11C      		adc r13,__zero_reg__
 1295 092c D601      		movw r26,r12
 1296 092e 8C91      		ld r24,X
 1297 0930 8823      		tst r24
 1298 0932 01F0      		breq .L111
 1299 0934 8F32      		cpi r24,lo8(47)
 1300 0936 01F4      		brne .L112
 1301 0938 00C0      		rjmp .L146
 1302               	.L138:
 1303 093a 6624      		clr r6
 1304 093c 7724      		clr r7
 1305               	.L111:
 1306 093e 8090 0000 		lds r8,nutDeviceList
 1307 0942 9090 0000 		lds r9,(nutDeviceList)+1
 1308 0946 00C0      		rjmp .L114
 1309               	.L118:
 1310 0948 F601      		movw r30,r12
 1311 094a 8081      		ld r24,Z
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 24


 1312 094c 8823      		tst r24
 1313 094e 01F4      		brne .L115
 1314 0950 D401      		movw r26,r8
 1315 0952 1B96      		adiw r26,11
 1316 0954 8C91      		ld r24,X
 1317 0956 8031      		cpi r24,lo8(16)
 1318 0958 01F4      		brne .L117
 1319 095a 00C0      		rjmp .L116
 1320               	.L115:
 1321 095c C401      		movw r24,r8
 1322 095e 0296      		adiw r24,2
 1323 0960 B601      		movw r22,r12
 1324 0962 0E94 0000 		call strcmp
 1325 0966 0097      		sbiw r24,0
 1326 0968 01F0      		breq .L116
 1327               	.L117:
 1328 096a F401      		movw r30,r8
 1329 096c 8080      		ld r8,Z
 1330 096e 9180      		ldd r9,Z+1
 1331               	.L114:
 1332 0970 8114      		cp r8,__zero_reg__
 1333 0972 9104      		cpc r9,__zero_reg__
 1334 0974 01F4      		brne .L118
 1335 0976 00C0      		rjmp .L140
 1336               	.L116:
 1337 0978 81E0      		ldi r24,lo8(1)
 1338 097a 90E0      		ldi r25,hi8(1)
 1339 097c 66E1      		ldi r22,lo8(534)
 1340 097e 72E0      		ldi r23,hi8(534)
 1341 0980 0E94 0000 		call calloc
 1342 0984 7C01      		movw r14,r24
 1343 0986 0097      		sbiw r24,0
 1344 0988 01F4      		brne .+2
 1345 098a 00C0      		rjmp .L144
 1346               	.L120:
 1347 098c DC01      		movw r26,r24
 1348 098e 8D92      		st X+,r8
 1349 0990 9C92      		st X,r9
 1350 0992 9C01      		movw r18,r24
 1351 0994 2A5E      		subi r18,lo8(-(22))
 1352 0996 3F4F      		sbci r19,hi8(-(22))
 1353 0998 C501      		movw r24,r10
 1354 099a 40E0      		ldi r20,lo8(0)
 1355 099c 50E0      		ldi r21,hi8(0)
 1356 099e 60E0      		ldi r22,hlo8(0)
 1357 09a0 70E0      		ldi r23,hhi8(0)
 1358 09a2 00E0      		ldi r16,lo8(0)
 1359 09a4 10E0      		ldi r17,hi8(0)
 1360 09a6 0E94 0000 		call MmCardReadOrVerify
 1361 09aa 892B      		or r24,r25
 1362 09ac 01F0      		breq .+2
 1363 09ae 00C0      		rjmp .L143
 1364               	.L121:
 1365 09b0 E4E1      		ldi r30,lo8(532)
 1366 09b2 F2E0      		ldi r31,hi8(532)
 1367 09b4 EE0E      		add r14,r30
 1368 09b6 FF1E      		adc r15,r31
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 25


 1369 09b8 D701      		movw r26,r14
 1370 09ba 8C91      		ld r24,X
 1371 09bc ECEE      		ldi r30,lo8(-532)
 1372 09be FDEF      		ldi r31,hi8(-532)
 1373 09c0 EE0E      		add r14,r30
 1374 09c2 FF1E      		adc r15,r31
 1375 09c4 8535      		cpi r24,lo8(85)
 1376 09c6 01F0      		breq .+2
 1377 09c8 00C0      		rjmp .L143
 1378 09ca 25E1      		ldi r18,lo8(533)
 1379 09cc 32E0      		ldi r19,hi8(533)
 1380 09ce E20E      		add r14,r18
 1381 09d0 F31E      		adc r15,r19
 1382 09d2 D701      		movw r26,r14
 1383 09d4 8C91      		ld r24,X
 1384 09d6 EBEE      		ldi r30,lo8(-533)
 1385 09d8 FDEF      		ldi r31,hi8(-533)
 1386 09da EE0E      		add r14,r30
 1387 09dc FF1E      		adc r15,r31
 1388 09de 8A3A      		cpi r24,lo8(-86)
 1389 09e0 01F0      		breq .+2
 1390 09e2 00C0      		rjmp .L143
 1391               	.L123:
 1392 09e4 2CE4      		ldi r18,lo8(76)
 1393 09e6 30E0      		ldi r19,hi8(76)
 1394 09e8 E20E      		add r14,r18
 1395 09ea F31E      		adc r15,r19
 1396 09ec D701      		movw r26,r14
 1397 09ee 8C91      		ld r24,X
 1398 09f0 E4EB      		ldi r30,lo8(-76)
 1399 09f2 FFEF      		ldi r31,hi8(-76)
 1400 09f4 EE0E      		add r14,r30
 1401 09f6 FF1E      		adc r15,r31
 1402 09f8 8634      		cpi r24,lo8(70)
 1403 09fa 01F4      		brne .L124
 1404 09fc 2DE4      		ldi r18,lo8(77)
 1405 09fe 30E0      		ldi r19,hi8(77)
 1406 0a00 E20E      		add r14,r18
 1407 0a02 F31E      		adc r15,r19
 1408 0a04 D701      		movw r26,r14
 1409 0a06 8C91      		ld r24,X
 1410 0a08 E3EB      		ldi r30,lo8(-77)
 1411 0a0a FFEF      		ldi r31,hi8(-77)
 1412 0a0c EE0E      		add r14,r30
 1413 0a0e FF1E      		adc r15,r31
 1414 0a10 8134      		cpi r24,lo8(65)
 1415 0a12 01F4      		brne .L124
 1416 0a14 2EE4      		ldi r18,lo8(78)
 1417 0a16 30E0      		ldi r19,hi8(78)
 1418 0a18 E20E      		add r14,r18
 1419 0a1a F31E      		adc r15,r19
 1420 0a1c D701      		movw r26,r14
 1421 0a1e 8C91      		ld r24,X
 1422 0a20 E2EB      		ldi r30,lo8(-78)
 1423 0a22 FFEF      		ldi r31,hi8(-78)
 1424 0a24 EE0E      		add r14,r30
 1425 0a26 FF1E      		adc r15,r31
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 26


 1426 0a28 8435      		cpi r24,lo8(84)
 1427 0a2a 01F4      		brne .L124
 1428 0a2c 81E0      		ldi r24,lo8(1)
 1429 0a2e D701      		movw r26,r14
 1430 0a30 1696      		adiw r26,6
 1431 0a32 8C93      		st X,r24
 1432 0a34 F701      		movw r30,r14
 1433 0a36 1286      		std Z+10,__zero_reg__
 1434 0a38 1386      		std Z+11,__zero_reg__
 1435 0a3a 1486      		std Z+12,__zero_reg__
 1436 0a3c 1586      		std Z+13,__zero_reg__
 1437 0a3e 80E0      		ldi r24,lo8(65536)
 1438 0a40 90E0      		ldi r25,hi8(65536)
 1439 0a42 A1E0      		ldi r26,hlo8(65536)
 1440 0a44 B0E0      		ldi r27,hhi8(65536)
 1441 0a46 8687      		std Z+14,r24
 1442 0a48 9787      		std Z+15,r25
 1443 0a4a A08B      		std Z+16,r26
 1444 0a4c B18B      		std Z+17,r27
 1445 0a4e 00C0      		rjmp .L125
 1446               	.L124:
 1447 0a50 F701      		movw r30,r14
 1448 0a52 EC52      		subi r30,lo8(-(468))
 1449 0a54 FE4F      		sbci r31,hi8(-(468))
 1450 0a56 21E0      		ldi r18,lo8(1)
 1451 0a58 30E0      		ldi r19,hi8(1)
 1452               	.L131:
 1453 0a5a 6114      		cp r6,__zero_reg__
 1454 0a5c 7104      		cpc r7,__zero_reg__
 1455 0a5e 01F0      		breq .L126
 1456 0a60 2615      		cp r18,r6
 1457 0a62 3705      		cpc r19,r7
 1458 0a64 01F4      		brne .L127
 1459 0a66 D701      		movw r26,r14
 1460 0a68 1296      		adiw r26,2
 1461 0a6a 80E1      		ldi r24,lo8(16)
 1462               	.L128:
 1463 0a6c 0190      		ld r0,Z+
 1464 0a6e 0D92      		st X+,r0
 1465 0a70 8150      		subi r24,lo8(-(-1))
 1466 0a72 01F4      		brne .L128
 1467 0a74 00C0      		rjmp .L129
 1468               	.L126:
 1469 0a76 8081      		ld r24,Z
 1470 0a78 87FF      		sbrs r24,7
 1471 0a7a 00C0      		rjmp .L127
 1472 0a7c D701      		movw r26,r14
 1473 0a7e 1296      		adiw r26,2
 1474 0a80 80E1      		ldi r24,lo8(16)
 1475               	.L130:
 1476 0a82 0190      		ld r0,Z+
 1477 0a84 0D92      		st X+,r0
 1478 0a86 8150      		subi r24,lo8(-(-1))
 1479 0a88 01F4      		brne .L130
 1480 0a8a 00C0      		rjmp .L129
 1481               	.L127:
 1482 0a8c 2F5F      		subi r18,lo8(-(1))
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 27


 1483 0a8e 3F4F      		sbci r19,hi8(-(1))
 1484 0a90 2530      		cpi r18,5
 1485 0a92 3105      		cpc r19,__zero_reg__
 1486 0a94 01F0      		breq .L129
 1487 0a96 7096      		adiw r30,16
 1488 0a98 00C0      		rjmp .L131
 1489               	.L129:
 1490 0a9a D701      		movw r26,r14
 1491 0a9c 1696      		adiw r26,6
 1492 0a9e 8C91      		ld r24,X
 1493 0aa0 8823      		tst r24
 1494 0aa2 01F4      		brne .L125
 1495               	.L143:
 1496 0aa4 C701      		movw r24,r14
 1497 0aa6 0E94 0000 		call free
 1498 0aaa 00C0      		rjmp .L141
 1499               	.L125:
 1500 0aac 80E0      		ldi r24,lo8(heapFreeList)
 1501 0aae 90E0      		ldi r25,hi8(heapFreeList)
 1502 0ab0 66E0      		ldi r22,lo8(6)
 1503 0ab2 70E0      		ldi r23,hi8(6)
 1504 0ab4 0E94 0000 		call NutHeapRootAlloc
 1505 0ab8 FC01      		movw r30,r24
 1506 0aba 8C01      		movw r16,r24
 1507 0abc 0097      		sbiw r24,0
 1508 0abe 01F4      		brne .L132
 1509 0ac0 C701      		movw r24,r14
 1510 0ac2 0E94 0000 		call free
 1511               	.L144:
 1512 0ac6 8CE0      		ldi r24,lo8(12)
 1513 0ac8 90E0      		ldi r25,hi8(12)
 1514 0aca 00C0      		rjmp .L142
 1515               	.L132:
 1516 0acc 1182      		std Z+1,__zero_reg__
 1517 0ace 1082      		st Z,__zero_reg__
 1518 0ad0 5382      		std Z+3,r5
 1519 0ad2 4282      		std Z+2,r4
 1520 0ad4 F582      		std Z+5,r15
 1521 0ad6 E482      		std Z+4,r14
 1522 0ad8 9A83      		std Y+2,r25
 1523 0ada 8983      		std Y+1,r24
 1524 0adc F701      		movw r30,r14
 1525 0ade 8681      		ldd r24,Z+6
 1526 0ae0 8B83      		std Y+3,r24
 1527 0ae2 D401      		movw r26,r8
 1528 0ae4 5596      		adiw r26,21
 1529 0ae6 ED91      		ld r30,X+
 1530 0ae8 FC91      		ld r31,X
 1531 0aea 5697      		sbiw r26,21+1
 1532 0aec C401      		movw r24,r8
 1533 0aee 60E3      		ldi r22,lo8(4400)
 1534 0af0 71E1      		ldi r23,hi8(4400)
 1535 0af2 AE01      		movw r20,r28
 1536 0af4 4F5F      		subi r20,lo8(-(1))
 1537 0af6 5F4F      		sbci r21,hi8(-(1))
 1538 0af8 0995      		icall
 1539 0afa 892B      		or r24,r25
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 28


 1540 0afc 01F0      		breq .L102
 1541 0afe C801      		movw r24,r16
 1542 0b00 0E94 0000 		call MmCardUnmount
 1543               	.L141:
 1544 0b04 0FEF      		ldi r16,lo8(-1)
 1545 0b06 1FEF      		ldi r17,hi8(-1)
 1546               	.L102:
 1547 0b08 C801      		movw r24,r16
 1548               	/* epilogue start */
 1549 0b0a 0F90      		pop __tmp_reg__
 1550 0b0c 0F90      		pop __tmp_reg__
 1551 0b0e 0F90      		pop __tmp_reg__
 1552 0b10 CF91      		pop r28
 1553 0b12 DF91      		pop r29
 1554 0b14 1F91      		pop r17
 1555 0b16 0F91      		pop r16
 1556 0b18 FF90      		pop r15
 1557 0b1a EF90      		pop r14
 1558 0b1c DF90      		pop r13
 1559 0b1e CF90      		pop r12
 1560 0b20 BF90      		pop r11
 1561 0b22 AF90      		pop r10
 1562 0b24 9F90      		pop r9
 1563 0b26 8F90      		pop r8
 1564 0b28 7F90      		pop r7
 1565 0b2a 6F90      		pop r6
 1566 0b2c 5F90      		pop r5
 1567 0b2e 4F90      		pop r4
 1568 0b30 0895      		ret
 1569               	.L146:
 1570 0b32 0894      		sec
 1571 0b34 C11C      		adc r12,__zero_reg__
 1572 0b36 D11C      		adc r13,__zero_reg__
 1573 0b38 00C0      		rjmp .L111
 1574               	.L140:
 1575 0b3a 83E1      		ldi r24,lo8(19)
 1576 0b3c 90E0      		ldi r25,hi8(19)
 1577               	.L142:
 1578 0b3e 9093 0000 		sts (errno)+1,r25
 1579 0b42 8093 0000 		sts errno,r24
 1580 0b46 00C0      		rjmp .L141
 1581               		.size	MmCardMount, .-MmCardMount
 1582               		.lcomm mutex,2
 1583               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s 			page 29


DEFINED SYMBOLS
                            *ABS*:00000000 mmcard.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:10     .text:00000000 MmCardRxR1
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:45     .text:00000034 MmCardBlockWrite_P
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:55     .text:0000003a MmCardDevInit
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:64     .text:00000040 MmCardTxCmd
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:155    .text:000000e6 MmCardGetReg
                             .bss:00000000 mutex
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:273    .text:000001c2 MmCardIOCtl
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:548    .text:000003c8 MmCardReset
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:630    .text:0000045a MmCardReadOrVerify
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:800    .text:00000598 MmCardBlockRead
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:883    .text:0000062c MmCardBlockWrite
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:1105   .text:000007ce MmCardUnmount
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cckU6To4.s:1183   .text:00000854 MmCardMount

UNDEFINED SYMBOLS
NutSleep
NutEventWait
NutEventPost
free
atoi
nutDeviceList
strcmp
calloc
heapFreeList
NutHeapRootAlloc
errno
__do_clear_bss
