GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s 			page 1


   1               		.file	"freopen.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	freopen
  10               		.type	freopen, @function
  11               	freopen:
  12 0000 9F92      		push r9
  13 0002 AF92      		push r10
  14 0004 BF92      		push r11
  15 0006 CF92      		push r12
  16 0008 DF92      		push r13
  17 000a EF92      		push r14
  18 000c FF92      		push r15
  19 000e 0F93      		push r16
  20 0010 1F93      		push r17
  21 0012 CF93      		push r28
  22 0014 DF93      		push r29
  23               	/* prologue: function */
  24               	/* frame size = 0 */
  25 0016 5C01      		movw r10,r24
  26 0018 CB01      		movw r24,r22
  27 001a EA01      		movw r28,r20
  28 001c 0E94 0000 		call _fmode
  29 0020 6C01      		movw r12,r24
  30 0022 2FEF      		ldi r18,hi8(-1)
  31 0024 8F3F      		cpi r24,lo8(-1)
  32 0026 9207      		cpc r25,r18
  33 0028 01F4      		brne .L11
  34 002a 00C0      		rjmp .L2
  35               	.L6:
  36 002c 0894      		sec
  37 002e E11C      		adc r14,__zero_reg__
  38 0030 F11C      		adc r15,__zero_reg__
  39 0032 3296      		adiw r30,2
  40 0034 88E0      		ldi r24,lo8(8)
  41 0036 E816      		cp r14,r24
  42 0038 F104      		cpc r15,__zero_reg__
  43 003a 01F4      		brne .L4
  44 003c 89E0      		ldi r24,lo8(9)
  45 003e 90E0      		ldi r25,hi8(9)
  46 0040 9093 0000 		sts (errno)+1,r25
  47 0044 8093 0000 		sts errno,r24
  48 0048 00C0      		rjmp .L2
  49               	.L11:
  50 004a E0E0      		ldi r30,lo8(__iob)
  51 004c F0E0      		ldi r31,hi8(__iob)
  52 004e EE24      		clr r14
  53 0050 FF24      		clr r15
  54               	.L4:
  55 0052 8081      		ld r24,Z
  56 0054 9181      		ldd r25,Z+1
  57 0056 8C17      		cp r24,r28
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s 			page 2


  58 0058 9D07      		cpc r25,r29
  59 005a 01F4      		brne .L6
  60 005c 87E0      		ldi r24,lo8(7)
  61 005e 90E0      		ldi r25,hi8(7)
  62 0060 0E94 0000 		call malloc
  63 0064 EC01      		movw r28,r24
  64 0066 8701      		movw r16,r14
  65 0068 000F      		lsl r16
  66 006a 111F      		rol r17
  67 006c 0050      		subi r16,lo8(-(__iob))
  68 006e 1040      		sbci r17,hi8(-(__iob))
  69 0070 D801      		movw r26,r16
  70 0072 CD93      		st X+,r28
  71 0074 DC93      		st X,r29
  72 0076 2097      		sbiw r28,0
  73 0078 01F0      		breq .L2
  74 007a C501      		movw r24,r10
  75 007c B601      		movw r22,r12
  76 007e 0E94 0000 		call _open
  77 0082 9983      		std Y+1,r25
  78 0084 8883      		st Y,r24
  79 0086 D801      		movw r26,r16
  80 0088 ED91      		ld r30,X+
  81 008a FC91      		ld r31,X
  82 008c 8F5F      		subi r24,lo8(-1)
  83 008e 9F4F      		sbci r25,hi8(-1)
  84 0090 01F4      		brne .L7
  85 0092 CF01      		movw r24,r30
  86 0094 0E94 0000 		call free
  87 0098 E2E0      		ldi r30,lo8(2)
  88 009a EE15      		cp r30,r14
  89 009c 00F0      		brlo .L8
  90 009e 0894      		sec
  91 00a0 E11C      		adc r14,__zero_reg__
  92 00a2 F11C      		adc r15,__zero_reg__
  93 00a4 D801      		movw r26,r16
  94 00a6 ED92      		st X+,r14
  95 00a8 FC92      		st X,r15
  96 00aa 00C0      		rjmp .L2
  97               	.L8:
  98 00ac F801      		movw r30,r16
  99 00ae 1182      		std Z+1,__zero_reg__
 100 00b0 1082      		st Z,__zero_reg__
 101 00b2 00C0      		rjmp .L2
 102               	.L7:
 103 00b4 D382      		std Z+3,r13
 104 00b6 C282      		std Z+2,r12
 105 00b8 1482      		std Z+4,__zero_reg__
 106 00ba D801      		movw r26,r16
 107 00bc ED91      		ld r30,X+
 108 00be FC91      		ld r31,X
 109 00c0 1682      		std Z+6,__zero_reg__
 110 00c2 1582      		std Z+5,__zero_reg__
 111 00c4 00C0      		rjmp .L5
 112               	.L2:
 113 00c6 E0E0      		ldi r30,lo8(0)
 114 00c8 F0E0      		ldi r31,hi8(0)
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s 			page 3


 115               	.L5:
 116 00ca CF01      		movw r24,r30
 117               	/* epilogue start */
 118 00cc DF91      		pop r29
 119 00ce CF91      		pop r28
 120 00d0 1F91      		pop r17
 121 00d2 0F91      		pop r16
 122 00d4 FF90      		pop r15
 123 00d6 EF90      		pop r14
 124 00d8 DF90      		pop r13
 125 00da CF90      		pop r12
 126 00dc BF90      		pop r11
 127 00de AF90      		pop r10
 128 00e0 9F90      		pop r9
 129 00e2 0895      		ret
 130               		.size	freopen, .-freopen
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 freopen.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cc78RLoe.s:11     .text:00000000 freopen

UNDEFINED SYMBOLS
_fmode
errno
__iob
malloc
_open
free
