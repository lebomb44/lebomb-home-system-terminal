GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s 			page 1


   1               		.file	"time.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	stime
  10               		.type	stime, @function
  11               	stime:
  12 0000 EF92      		push r14
  13 0002 FF92      		push r15
  14 0004 0F93      		push r16
  15 0006 1F93      		push r17
  16               	/* prologue: function */
  17               	/* frame size = 0 */
  18 0008 8C01      		movw r16,r24
  19 000a 0E94 0000 		call gmtime
  20 000e 0E94 0000 		call NutRtcSetTime
  21 0012 F801      		movw r30,r16
  22 0014 E080      		ld r14,Z
  23 0016 F180      		ldd r15,Z+1
  24 0018 0281      		ldd r16,Z+2
  25 001a 1381      		ldd r17,Z+3
  26 001c 0E94 0000 		call NutGetSeconds
  27 0020 E61A      		sub r14,r22
  28 0022 F70A      		sbc r15,r23
  29 0024 080B      		sbc r16,r24
  30 0026 190B      		sbc r17,r25
  31 0028 E092 0000 		sts epo_offs,r14
  32 002c F092 0000 		sts (epo_offs)+1,r15
  33 0030 0093 0000 		sts (epo_offs)+2,r16
  34 0034 1093 0000 		sts (epo_offs)+3,r17
  35 0038 80E0      		ldi r24,lo8(0)
  36 003a 90E0      		ldi r25,hi8(0)
  37               	/* epilogue start */
  38 003c 1F91      		pop r17
  39 003e 0F91      		pop r16
  40 0040 FF90      		pop r15
  41 0042 EF90      		pop r14
  42 0044 0895      		ret
  43               		.size	stime, .-stime
  44               	.global	time
  45               		.type	time, @function
  46               	time:
  47 0046 8F92      		push r8
  48 0048 9F92      		push r9
  49 004a AF92      		push r10
  50 004c BF92      		push r11
  51 004e CF92      		push r12
  52 0050 DF92      		push r13
  53 0052 EF92      		push r14
  54 0054 FF92      		push r15
  55 0056 0F93      		push r16
  56 0058 1F93      		push r17
  57 005a CF93      		push r28
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s 			page 2


  58 005c DF93      		push r29
  59               	/* prologue: function */
  60               	/* frame size = 0 */
  61 005e 4C01      		movw r8,r24
  62 0060 E090 0000 		lds r14,epo_offs
  63 0064 F090 0000 		lds r15,(epo_offs)+1
  64 0068 0091 0000 		lds r16,(epo_offs)+2
  65 006c 1091 0000 		lds r17,(epo_offs)+3
  66 0070 0E94 0000 		call NutGetSeconds
  67 0074 5B01      		movw r10,r22
  68 0076 6C01      		movw r12,r24
  69 0078 AE0C      		add r10,r14
  70 007a BF1C      		adc r11,r15
  71 007c C01E      		adc r12,r16
  72 007e D11E      		adc r13,r17
  73 0080 82E1      		ldi r24,lo8(18)
  74 0082 90E0      		ldi r25,hi8(18)
  75 0084 0E94 0000 		call malloc
  76 0088 EC01      		movw r28,r24
  77 008a 0097      		sbiw r24,0
  78 008c 01F0      		breq .L4
  79 008e 8FEF      		ldi r24,lo8(-1)
  80 0090 9FEF      		ldi r25,hi8(-1)
  81 0092 998B      		std Y+17,r25
  82 0094 888B      		std Y+16,r24
  83 0096 CE01      		movw r24,r28
  84 0098 0E94 0000 		call NutRtcGetTime
  85 009c 892B      		or r24,r25
  86 009e 01F4      		brne .L5
  87 00a0 CE01      		movw r24,r28
  88 00a2 0E94 0000 		call _mkgmtime
  89 00a6 5B01      		movw r10,r22
  90 00a8 6C01      		movw r12,r24
  91               	.L5:
  92 00aa CE01      		movw r24,r28
  93 00ac 0E94 0000 		call free
  94               	.L4:
  95 00b0 8114      		cp r8,__zero_reg__
  96 00b2 9104      		cpc r9,__zero_reg__
  97 00b4 01F0      		breq .L6
  98 00b6 F401      		movw r30,r8
  99 00b8 A082      		st Z,r10
 100 00ba B182      		std Z+1,r11
 101 00bc C282      		std Z+2,r12
 102 00be D382      		std Z+3,r13
 103               	.L6:
 104 00c0 B501      		movw r22,r10
 105 00c2 C601      		movw r24,r12
 106               	/* epilogue start */
 107 00c4 DF91      		pop r29
 108 00c6 CF91      		pop r28
 109 00c8 1F91      		pop r17
 110 00ca 0F91      		pop r16
 111 00cc FF90      		pop r15
 112 00ce EF90      		pop r14
 113 00d0 DF90      		pop r13
 114 00d2 CF90      		pop r12
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s 			page 3


 115 00d4 BF90      		pop r11
 116 00d6 AF90      		pop r10
 117 00d8 9F90      		pop r9
 118 00da 8F90      		pop r8
 119 00dc 0895      		ret
 120               		.size	time, .-time
 121               		.lcomm epo_offs,4
 122               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 time.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:11     .text:00000000 stime
                             .bss:00000000 epo_offs
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/cczycTad.s:46     .text:00000046 time

UNDEFINED SYMBOLS
gmtime
NutRtcSetTime
NutGetSeconds
malloc
NutRtcGetTime
_mkgmtime
free
__do_clear_bss
