GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s 			page 1


   1               		.file	"fopen.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.global	fopen
  10               		.type	fopen, @function
  11               	fopen:
  12 0000 CF92      		push r12
  13 0002 DF92      		push r13
  14 0004 EF92      		push r14
  15 0006 FF92      		push r15
  16 0008 0F93      		push r16
  17 000a 1F93      		push r17
  18 000c CF93      		push r28
  19 000e DF93      		push r29
  20               	/* prologue: function */
  21               	/* frame size = 0 */
  22 0010 6C01      		movw r12,r24
  23 0012 CB01      		movw r24,r22
  24 0014 0E94 0000 		call _fmode
  25 0018 7C01      		movw r14,r24
  26 001a 2FEF      		ldi r18,hi8(-1)
  27 001c 8F3F      		cpi r24,lo8(-1)
  28 001e 9207      		cpc r25,r18
  29 0020 01F4      		brne .+2
  30 0022 00C0      		rjmp .L2
  31 0024 E0E0      		ldi r30,lo8(__iob+6)
  32 0026 F0E0      		ldi r31,hi8(__iob+6)
  33 0028 03E0      		ldi r16,lo8(3)
  34 002a 10E0      		ldi r17,hi8(3)
  35 002c 00C0      		rjmp .L3
  36               	.L5:
  37 002e 0F5F      		subi r16,lo8(-(1))
  38 0030 1F4F      		sbci r17,hi8(-(1))
  39 0032 3296      		adiw r30,2
  40 0034 0830      		cpi r16,8
  41 0036 1105      		cpc r17,__zero_reg__
  42 0038 01F4      		brne .L3
  43 003a 87E1      		ldi r24,lo8(23)
  44 003c 90E0      		ldi r25,hi8(23)
  45 003e 9093 0000 		sts (errno)+1,r25
  46 0042 8093 0000 		sts errno,r24
  47 0046 00C0      		rjmp .L2
  48               	.L3:
  49 0048 8081      		ld r24,Z
  50 004a 9181      		ldd r25,Z+1
  51 004c 892B      		or r24,r25
  52 004e 01F4      		brne .L5
  53 0050 87E0      		ldi r24,lo8(7)
  54 0052 90E0      		ldi r25,hi8(7)
  55 0054 0E94 0000 		call malloc
  56 0058 EC01      		movw r28,r24
  57 005a 000F      		lsl r16
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s 			page 2


  58 005c 111F      		rol r17
  59 005e 0050      		subi r16,lo8(-(__iob))
  60 0060 1040      		sbci r17,hi8(-(__iob))
  61 0062 D801      		movw r26,r16
  62 0064 CD93      		st X+,r28
  63 0066 DC93      		st X,r29
  64 0068 2097      		sbiw r28,0
  65 006a 01F0      		breq .L2
  66 006c C601      		movw r24,r12
  67 006e B701      		movw r22,r14
  68 0070 0E94 0000 		call _open
  69 0074 9983      		std Y+1,r25
  70 0076 8883      		st Y,r24
  71 0078 D801      		movw r26,r16
  72 007a ED91      		ld r30,X+
  73 007c FC91      		ld r31,X
  74 007e 8F5F      		subi r24,lo8(-1)
  75 0080 9F4F      		sbci r25,hi8(-1)
  76 0082 01F4      		brne .L6
  77 0084 CF01      		movw r24,r30
  78 0086 0E94 0000 		call free
  79 008a F801      		movw r30,r16
  80 008c 1182      		std Z+1,__zero_reg__
  81 008e 1082      		st Z,__zero_reg__
  82 0090 00C0      		rjmp .L2
  83               	.L6:
  84 0092 F382      		std Z+3,r15
  85 0094 E282      		std Z+2,r14
  86 0096 1482      		std Z+4,__zero_reg__
  87 0098 D801      		movw r26,r16
  88 009a ED91      		ld r30,X+
  89 009c FC91      		ld r31,X
  90 009e 1682      		std Z+6,__zero_reg__
  91 00a0 1582      		std Z+5,__zero_reg__
  92 00a2 00C0      		rjmp .L4
  93               	.L2:
  94 00a4 E0E0      		ldi r30,lo8(0)
  95 00a6 F0E0      		ldi r31,hi8(0)
  96               	.L4:
  97 00a8 CF01      		movw r24,r30
  98               	/* epilogue start */
  99 00aa DF91      		pop r29
 100 00ac CF91      		pop r28
 101 00ae 1F91      		pop r17
 102 00b0 0F91      		pop r16
 103 00b2 FF90      		pop r15
 104 00b4 EF90      		pop r14
 105 00b6 DF90      		pop r13
 106 00b8 CF90      		pop r12
 107 00ba 0895      		ret
 108               		.size	fopen, .-fopen
 109               	.global	__iob
 110               		.data
 111               		.type	__iob, @object
 112               		.size	__iob, 16
 113               	__iob:
 114 0000 0100      		.word	1
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s 			page 3


 115 0002 0200      		.word	2
 116 0004 0300      		.word	3
 117 0006 0000 0000 		.skip 10,0
 117      0000 0000 
 117      0000 
 118               	.global __do_copy_data
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 fopen.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:11     .text:00000000 fopen
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccyR6To4.s:113    .data:00000000 __iob

UNDEFINED SYMBOLS
_fmode
errno
malloc
_open
free
__do_copy_data
