GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 1


   1               		.file	"environ.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               		.type	read_string, @function
  10               	read_string:
  11 0000 8F92      		push r8
  12 0002 9F92      		push r9
  13 0004 AF92      		push r10
  14 0006 BF92      		push r11
  15 0008 CF92      		push r12
  16 000a DF92      		push r13
  17 000c EF92      		push r14
  18 000e FF92      		push r15
  19 0010 0F93      		push r16
  20 0012 1F93      		push r17
  21 0014 DF93      		push r29
  22 0016 CF93      		push r28
  23 0018 0F92      		push __tmp_reg__
  24 001a CDB7      		in r28,__SP_L__
  25 001c DEB7      		in r29,__SP_H__
  26               	/* prologue: function */
  27               	/* frame size = 1 */
  28 001e 6C01      		movw r12,r24
  29 0020 7B01      		movw r14,r22
  30 0022 5A01      		movw r10,r20
  31 0024 00E0      		ldi r16,lo8(0)
  32 0026 10E0      		ldi r17,hi8(0)
  33 0028 4E01      		movw r8,r28
  34 002a 0894      		sec
  35 002c 811C      		adc r8,__zero_reg__
  36 002e 911C      		adc r9,__zero_reg__
  37               	.L5:
  38 0030 F601      		movw r30,r12
  39 0032 8081      		ld r24,Z
  40 0034 9181      		ldd r25,Z+1
  41 0036 B401      		movw r22,r8
  42 0038 41E0      		ldi r20,lo8(1)
  43 003a 50E0      		ldi r21,hi8(1)
  44 003c 0E94 0000 		call NutNvMemLoad
  45 0040 892B      		or r24,r25
  46 0042 01F0      		breq .L2
  47 0044 00E0      		ldi r16,lo8(0)
  48 0046 10E0      		ldi r17,hi8(0)
  49 0048 00C0      		rjmp .L3
  50               	.L2:
  51 004a F601      		movw r30,r12
  52 004c 8081      		ld r24,Z
  53 004e 9181      		ldd r25,Z+1
  54 0050 0196      		adiw r24,1
  55 0052 9183      		std Z+1,r25
  56 0054 8083      		st Z,r24
  57 0056 8981      		ldd r24,Y+1
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 2


  58 0058 8823      		tst r24
  59 005a 01F0      		breq .L3
  60 005c E114      		cp r14,__zero_reg__
  61 005e F104      		cpc r15,__zero_reg__
  62 0060 01F0      		breq .L4
  63 0062 F701      		movw r30,r14
  64 0064 8193      		st Z+,r24
  65 0066 7F01      		movw r14,r30
  66               	.L4:
  67 0068 0F5F      		subi r16,lo8(-(1))
  68 006a 1F4F      		sbci r17,hi8(-(1))
  69 006c A016      		cp r10,r16
  70 006e B106      		cpc r11,r17
  71 0070 00F4      		brsh .L5
  72               	.L3:
  73 0072 E114      		cp r14,__zero_reg__
  74 0074 F104      		cpc r15,__zero_reg__
  75 0076 01F0      		breq .L6
  76 0078 F701      		movw r30,r14
  77 007a 1082      		st Z,__zero_reg__
  78               	.L6:
  79 007c C801      		movw r24,r16
  80               	/* epilogue start */
  81 007e 0F90      		pop __tmp_reg__
  82 0080 CF91      		pop r28
  83 0082 DF91      		pop r29
  84 0084 1F91      		pop r17
  85 0086 0F91      		pop r16
  86 0088 FF90      		pop r15
  87 008a EF90      		pop r14
  88 008c DF90      		pop r13
  89 008e CF90      		pop r12
  90 0090 BF90      		pop r11
  91 0092 AF90      		pop r10
  92 0094 9F90      		pop r9
  93 0096 8F90      		pop r8
  94 0098 0895      		ret
  95               		.size	read_string, .-read_string
  96               	.global	findenv
  97               		.type	findenv, @function
  98               	findenv:
  99 009a 3F92      		push r3
 100 009c 4F92      		push r4
 101 009e 5F92      		push r5
 102 00a0 6F92      		push r6
 103 00a2 7F92      		push r7
 104 00a4 8F92      		push r8
 105 00a6 9F92      		push r9
 106 00a8 AF92      		push r10
 107 00aa BF92      		push r11
 108 00ac CF92      		push r12
 109 00ae DF92      		push r13
 110 00b0 EF92      		push r14
 111 00b2 FF92      		push r15
 112 00b4 0F93      		push r16
 113 00b6 1F93      		push r17
 114 00b8 DF93      		push r29
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 3


 115 00ba CF93      		push r28
 116 00bc 00D0      		rcall .
 117 00be 00D0      		rcall .
 118 00c0 00D0      		rcall .
 119 00c2 CDB7      		in r28,__SP_L__
 120 00c4 DEB7      		in r29,__SP_H__
 121               	/* prologue: function */
 122               	/* frame size = 6 */
 123 00c6 2C01      		movw r4,r24
 124 00c8 8091 0000 		lds r24,nut_environ
 125 00cc 9091 0000 		lds r25,(nut_environ)+1
 126 00d0 892B      		or r24,r25
 127 00d2 01F0      		breq .+2
 128 00d4 00C0      		rjmp .L10
 129 00d6 80E0      		ldi r24,lo8(256)
 130 00d8 91E0      		ldi r25,hi8(256)
 131 00da 9A83      		std Y+2,r25
 132 00dc 8983      		std Y+1,r24
 133 00de BE01      		movw r22,r28
 134 00e0 6D5F      		subi r22,lo8(-(3))
 135 00e2 7F4F      		sbci r23,hi8(-(3))
 136 00e4 44E0      		ldi r20,lo8(4)
 137 00e6 50E0      		ldi r21,hi8(4)
 138 00e8 0E94 0000 		call NutNvMemLoad
 139 00ec 892B      		or r24,r25
 140 00ee 01F0      		breq .+2
 141 00f0 00C0      		rjmp .L10
 142 00f2 8B81      		ldd r24,Y+3
 143 00f4 9C81      		ldd r25,Y+4
 144 00f6 AD81      		ldd r26,Y+5
 145 00f8 BE81      		ldd r27,Y+6
 146 00fa 8554      		subi r24,lo8(5656133)
 147 00fc 9E44      		sbci r25,hi8(5656133)
 148 00fe A645      		sbci r26,hlo8(5656133)
 149 0100 B040      		sbci r27,hhi8(5656133)
 150 0102 01F0      		breq .+2
 151 0104 00C0      		rjmp .L10
 152 0106 8981      		ldd r24,Y+1
 153 0108 9A81      		ldd r25,Y+2
 154 010a 0496      		adiw r24,4
 155 010c 9A83      		std Y+2,r25
 156 010e 8983      		std Y+1,r24
 157 0110 8824      		clr r8
 158 0112 9924      		clr r9
 159 0114 7E01      		movw r14,r28
 160 0116 0894      		sec
 161 0118 E11C      		adc r14,__zero_reg__
 162 011a F11C      		adc r15,__zero_reg__
 163 011c 00C0      		rjmp .L27
 164               	.L14:
 165 011e C701      		movw r24,r14
 166 0120 60E0      		ldi r22,lo8(0)
 167 0122 70E0      		ldi r23,hi8(0)
 168 0124 40E4      		ldi r20,lo8(64)
 169 0126 50E0      		ldi r21,hi8(64)
 170 0128 0E94 0000 		call read_string
 171 012c 9C01      		movw r18,r24
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 4


 172 012e C801      		movw r24,r16
 173 0130 0217      		cp r16,r18
 174 0132 1307      		cpc r17,r19
 175 0134 00F4      		brsh .L12
 176 0136 C901      		movw r24,r18
 177               	.L12:
 178 0138 8816      		cp r8,r24
 179 013a 9906      		cpc r9,r25
 180 013c 00F4      		brsh .L27
 181 013e 4C01      		movw r8,r24
 182               	.L27:
 183 0140 C701      		movw r24,r14
 184 0142 60E0      		ldi r22,lo8(0)
 185 0144 70E0      		ldi r23,hi8(0)
 186 0146 40E4      		ldi r20,lo8(64)
 187 0148 50E0      		ldi r21,hi8(64)
 188 014a 0E94 0000 		call read_string
 189 014e 8C01      		movw r16,r24
 190 0150 0097      		sbiw r24,0
 191 0152 01F4      		brne .L14
 192 0154 84E0      		ldi r24,lo8(260)
 193 0156 91E0      		ldi r25,hi8(260)
 194 0158 9A83      		std Y+2,r25
 195 015a 8983      		std Y+1,r24
 196 015c 8114      		cp r8,__zero_reg__
 197 015e 9104      		cpc r9,__zero_reg__
 198 0160 01F4      		brne .+2
 199 0162 00C0      		rjmp .L10
 200 0164 C401      		movw r24,r8
 201 0166 0196      		adiw r24,1
 202 0168 0E94 0000 		call malloc
 203 016c 7C01      		movw r14,r24
 204 016e 0097      		sbiw r24,0
 205 0170 01F4      		brne .+2
 206 0172 00C0      		rjmp .L10
 207 0174 AA24      		clr r10
 208 0176 BB24      		clr r11
 209 0178 3E01      		movw r6,r28
 210 017a 0894      		sec
 211 017c 611C      		adc r6,__zero_reg__
 212 017e 711C      		adc r7,__zero_reg__
 213 0180 88E0      		ldi r24,lo8(8)
 214 0182 382E      		mov r3,r24
 215 0184 00C0      		rjmp .L15
 216               	.L20:
 217 0186 88E0      		ldi r24,lo8(8)
 218 0188 90E0      		ldi r25,hi8(8)
 219 018a 0E94 0000 		call malloc
 220 018e 8C01      		movw r16,r24
 221 0190 0097      		sbiw r24,0
 222 0192 01F0      		breq .L16
 223 0194 FC01      		movw r30,r24
 224 0196 232D      		mov r18,r3
 225 0198 1192      		st Z+,__zero_reg__
 226 019a 2A95      	        dec r18
 227 019c 01F4      		brne .-6
 228 019e C601      		movw r24,r12
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 5


 229 01a0 0196      		adiw r24,1
 230 01a2 0E94 0000 		call malloc
 231 01a6 F801      		movw r30,r16
 232 01a8 9583      		std Z+5,r25
 233 01aa 8483      		std Z+4,r24
 234 01ac 0097      		sbiw r24,0
 235 01ae 01F4      		brne .L17
 236 01b0 C801      		movw r24,r16
 237 01b2 0E94 0000 		call free
 238 01b6 00C0      		rjmp .L16
 239               	.L17:
 240 01b8 B701      		movw r22,r14
 241 01ba 0E94 0000 		call strcpy
 242 01be C301      		movw r24,r6
 243 01c0 B701      		movw r22,r14
 244 01c2 A401      		movw r20,r8
 245 01c4 0E94 0000 		call read_string
 246 01c8 0196      		adiw r24,1
 247 01ca 0E94 0000 		call malloc
 248 01ce F801      		movw r30,r16
 249 01d0 9783      		std Z+7,r25
 250 01d2 8683      		std Z+6,r24
 251 01d4 0097      		sbiw r24,0
 252 01d6 01F0      		breq .L16
 253 01d8 B701      		movw r22,r14
 254 01da 0E94 0000 		call strcpy
 255 01de A114      		cp r10,__zero_reg__
 256 01e0 B104      		cpc r11,__zero_reg__
 257 01e2 01F0      		breq .L18
 258 01e4 F501      		movw r30,r10
 259 01e6 1183      		std Z+1,r17
 260 01e8 0083      		st Z,r16
 261 01ea F801      		movw r30,r16
 262 01ec B382      		std Z+3,r11
 263 01ee A282      		std Z+2,r10
 264 01f0 00C0      		rjmp .L19
 265               	.L18:
 266 01f2 1093 0000 		sts (nut_environ)+1,r17
 267 01f6 0093 0000 		sts nut_environ,r16
 268               	.L19:
 269 01fa 5801      		movw r10,r16
 270               	.L15:
 271 01fc C301      		movw r24,r6
 272 01fe B701      		movw r22,r14
 273 0200 A401      		movw r20,r8
 274 0202 0E94 0000 		call read_string
 275 0206 6C01      		movw r12,r24
 276 0208 0097      		sbiw r24,0
 277 020a 01F0      		breq .+2
 278 020c 00C0      		rjmp .L20
 279               	.L16:
 280 020e C701      		movw r24,r14
 281 0210 0E94 0000 		call free
 282               	.L10:
 283 0214 0091 0000 		lds r16,nut_environ
 284 0218 1091 0000 		lds r17,(nut_environ)+1
 285 021c 00C0      		rjmp .L21
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 6


 286               	.L23:
 287 021e F801      		movw r30,r16
 288 0220 8481      		ldd r24,Z+4
 289 0222 9581      		ldd r25,Z+5
 290 0224 B201      		movw r22,r4
 291 0226 0E94 0000 		call strcmp
 292 022a 0097      		sbiw r24,0
 293 022c 01F0      		breq .L22
 294 022e F801      		movw r30,r16
 295 0230 0081      		ld r16,Z
 296 0232 1181      		ldd r17,Z+1
 297               	.L21:
 298 0234 0115      		cp r16,__zero_reg__
 299 0236 1105      		cpc r17,__zero_reg__
 300 0238 01F4      		brne .L23
 301               	.L22:
 302 023a C801      		movw r24,r16
 303               	/* epilogue start */
 304 023c 2696      		adiw r28,6
 305 023e 0FB6      		in __tmp_reg__,__SREG__
 306 0240 F894      		cli
 307 0242 DEBF      		out __SP_H__,r29
 308 0244 0FBE      		out __SREG__,__tmp_reg__
 309 0246 CDBF      		out __SP_L__,r28
 310 0248 CF91      		pop r28
 311 024a DF91      		pop r29
 312 024c 1F91      		pop r17
 313 024e 0F91      		pop r16
 314 0250 FF90      		pop r15
 315 0252 EF90      		pop r14
 316 0254 DF90      		pop r13
 317 0256 CF90      		pop r12
 318 0258 BF90      		pop r11
 319 025a AF90      		pop r10
 320 025c 9F90      		pop r9
 321 025e 8F90      		pop r8
 322 0260 7F90      		pop r7
 323 0262 6F90      		pop r6
 324 0264 5F90      		pop r5
 325 0266 4F90      		pop r4
 326 0268 3F90      		pop r3
 327 026a 0895      		ret
 328               		.size	findenv, .-findenv
 329               		.comm nut_environ,2,1
 330               	.global __do_clear_bss
GAS LISTING C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 environ.c
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:10     .text:00000000 read_string
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp/ccOL6DOh.s:98     .text:0000009a findenv
                            *COM*:00000002 nut_environ

UNDEFINED SYMBOLS
NutNvMemLoad
malloc
free
strcpy
strcmp
__do_clear_bss
