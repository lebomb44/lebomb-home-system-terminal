<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: Ethernet</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_ethernet.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Ethernet</div>  </div>
<div class="ingroups"><a class="el" href="group__xg_base_pro.html">Base Protocols</a></div></div>
<div class="contents">

<p>RFC 894 IP over Ethernet.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Ethernet:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_ethernet.png" border="0" alt="" usemap="#group____xg__ethernet"/>
<map name="group____xg__ethernet" id="group____xg__ethernet">
<area shape="rect" id="node1" href="group__xg_base_pro.html" title="TCP/IP and UDP applications." alt="" coords="5,5,112,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___e_t_h___p_r_o_t_o_c_o_l_s.html">_ETH_PROTOCOLS</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___e_t_h___p_r_o_t_o_c_o_l_s.html">_ETH_PROTOCOLS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_ethernet.html#ga38e72521bd82faef9e9c1d4eb45a98d8">ETH_PROTOCOLS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Linked list of registered Ethernet protocols.  <a href="#ga38e72521bd82faef9e9c1d4eb45a98d8"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_ethernet.html#gaddf38bba503e95ba7da14e23c4246cad">NutRegisterEthHandler</a> (<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> type, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> mask, int(*hdlr)(<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an additional Ethernet protocol handler.  <a href="#gaddf38bba503e95ba7da14e23c4246cad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_ethernet.html#ga99fa1136157a0400962096b3e426ee2f">NutEtherInput</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming Ethernet frames.  <a href="#ga99fa1136157a0400962096b3e426ee2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_ethernet.html#ga5342e8b68b9af648aa943a9a9166099b">NutEtherOutput</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> type, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *ha, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Ethernet frame.  <a href="#ga5342e8b68b9af648aa943a9a9166099b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_ethernet.html#ga6710e3ff8f687881079642c7a715c5a5">ether_demux</a> )(<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to an optional demultiplexer.  <a href="#ga6710e3ff8f687881079642c7a715c5a5"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>RFC 894 IP over Ethernet. </p>
<p>These routines link the IP layer to the Ethernet driver. Applications do not directly use this.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>Multicast support. </dd></dl>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga38e72521bd82faef9e9c1d4eb45a98d8"></a><!-- doxytag: member="ethdemux.c::ETH_PROTOCOLS" ref="ga38e72521bd82faef9e9c1d4eb45a98d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___e_t_h___p_r_o_t_o_c_o_l_s.html">_ETH_PROTOCOLS</a> <a class="el" href="group__xg_ethernet.html#ga38e72521bd82faef9e9c1d4eb45a98d8">ETH_PROTOCOLS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Linked list of registered Ethernet protocols. </p>

<p>Definition at line <a class="el" href="ethdemux_8c_source.html#l00064">64</a> of file <a class="el" href="ethdemux_8c_source.html">ethdemux.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaddf38bba503e95ba7da14e23c4246cad"></a><!-- doxytag: member="ethdemux.c::NutRegisterEthHandler" ref="gaddf38bba503e95ba7da14e23c4246cad" args="(uint16_t type, uint16_t mask, int(*hdlr)(NUTDEVICE *, NETBUF *))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutRegisterEthHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *)&#160;</td>
          <td class="paramname"><em>hdlr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register an additional Ethernet protocol handler. </p>
<p>The specified mask will be applied on the type field of incoming frames before compared with the type that had been specified for the handler. If more than one handler is registered for an incoming Ethernet frame, the handler being registered last is called first.</p>
<p>Each handler should return 0 if it processed the frame, in which case it is also assumed, that the handler releases the memory allocated for the NETBUF. Otherwise the handler should return -1, in which case the frame is passed to the next handler that fits.</p>
<p>The protocol types ETHERTYPE_IP and ETHERTYPE_ARP are pre-registered by default and processed by internal handlers after all registered handlers for that frame rejected processing. This allows to install filters on the Ethernet level.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Ethernet protocol type processed by this handler. </td></tr>
    <tr><td class="paramname">mask</td><td>Ethernet protocol type mask. </td></tr>
    <tr><td class="paramname">hdlr</td><td>Pointer to the protocol handler function. If NULL, the handler will be temporarily disabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="ethdemux_8c_source.html#l00125">125</a> of file <a class="el" href="ethdemux_8c_source.html">ethdemux.c</a>.</p>

<p>References <a class="el" href="icc_8h_source.html#l00143">calloc</a>, <a class="el" href="ethin_8c_source.html#l00135">ether_demux</a>, <a class="el" href="ethdemux_8c_source.html#l00070">_ETH_PROTOCOLS::ethp_input</a>, <a class="el" href="ethdemux_8c_source.html#l00069">_ETH_PROTOCOLS::ethp_mask</a>, <a class="el" href="ethdemux_8c_source.html#l00067">_ETH_PROTOCOLS::ethp_next</a>, and <a class="el" href="ethdemux_8c_source.html#l00068">_ETH_PROTOCOLS::ethp_type</a>.</p>

</div>
</div>
<a class="anchor" id="ga99fa1136157a0400962096b3e426ee2f"></a><!-- doxytag: member="ethin.c::NutEtherInput" ref="ga99fa1136157a0400962096b3e426ee2f" args="(NUTDEVICE *dev, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutEtherInput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming Ethernet frames. </p>
<p>Splits the Ethernet frame into the data link and the network part. Then the frame is routed to the proper handler, based on the type field in the Ethernet header.</p>
<p>If the frame neither contains an IP nor an ARP type telegram and if no registered handler exists or accepts the frame, then it is silently discarded.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This routine is called by the device driver on incoming ethernet packets. Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device that received the frame. </td></tr>
    <tr><td class="paramname">nb</td><td>Pointer to a network buffer structure containing the ethernet frame. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ethin_8c_source.html#l00156">156</a> of file <a class="el" href="ethin_8c_source.html">ethin.c</a>.</p>

<p>References <a class="el" href="ethin_8c_source.html#l00135">ether_demux</a>, <a class="el" href="if__ether_8h_source.html#l00088">ether_header::ether_type</a>, <a class="el" href="if__ether_8h_source.html#l00104">ETHERTYPE_ARP</a>, <a class="el" href="if__ether_8h_source.html#l00103">ETHERTYPE_IP</a>, <a class="el" href="netbuf_8h_source.html#l00163">_NETBUF::nb_dl</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, <a class="el" href="types_8h_source.html#l00349">ntohs</a>, <a class="el" href="arpin_8c_source.html#l00143">NutArpInput()</a>, <a class="el" href="ipin_8c_source.html#l00165">NutIpInput()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_ethernet_ga99fa1136157a0400962096b3e426ee2f_cgraph.png" border="0" usemap="#group__xg_ethernet_ga99fa1136157a0400962096b3e426ee2f_cgraph" alt=""/></div>
<map name="group__xg_ethernet_ga99fa1136157a0400962096b3e426ee2f_cgraph" id="group__xg_ethernet_ga99fa1136157a0400962096b3e426ee2f_cgraph">
<area shape="rect" id="node3" href="group__xg_a_r_p.html#ga7561577580e637513a02fc8cf82ccc2d" title="Handle incoming ARP packets." alt="" coords="153,702,239,727"/><area shape="rect" id="node5" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="1269,1157,1371,1182"/><area shape="rect" id="node64" href="group__xg_i_p.html#gad39556943c0a832c68035050b02afc34" title="Process incoming IP datagrams." alt="" coords="157,1055,235,1081"/><area shape="rect" id="node8" href="group__xg_a_r_p.html#ga714762bc6a1a681504fa425746497e7d" title="Update an ARP entry." alt="" coords="289,230,423,255"/><area shape="rect" id="node53" href="group__xg_a_r_p.html#gabac6d94d31a9cac4a198e893e148ff11" title="Allocate an ARP network buffer structure." alt="" coords="876,1005,999,1030"/><area shape="rect" id="node61" href="group__xg_a_r_p.html#ga6a7db32bf7002c79ca97cc405360ffd0" title="Send an ARP packet." alt="" coords="309,702,403,727"/><area shape="rect" id="node10" href="group__xg_crt_stdio.html#ga2f7351ee13f3f4c465c65e849a12a3fd" title="Print formatted data to a stream." alt="" coords="510,205,562,230"/><area shape="rect" id="node28" href="group__xg_i_p.html#ga9daa3cef32d6bcb76a95d0e869fd8b7a" title="Convert numeric IP address into decimal dotted ASCII representation." alt="" coords="499,254,573,279"/><area shape="rect" id="node30" href="group__xg_crt_stdio.html#gabe6299d5823dd023e610aaa619735a3f" title="Write a character to a stream." alt="" coords="704,155,752,181"/><area shape="rect" id="node33" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="1096,753,1165,778"/><area shape="rect" id="node35" href="group__xg_event.html#ga575628f89864beb575a161f10f3de62c" title="Broadcast an event to a specified queue." alt="" coords="473,103,599,129"/><area shape="rect" id="node12" href="group__xg_crt_stdio.html#ga50c4b673b1d86ab16f2a46aff7122c5c" title="Write argument list to a stream using a given format." alt="" coords="699,205,757,230"/><area shape="rect" id="node14" href="group__xg_crt_stdio.html#ga651a41ea9a05d4294a58c1ec83e13f18" title="Write formatted data using a given output function." alt="" coords="913,253,962,278"/><area shape="rect" id="node26" href="io_8h.html#a901fa187b164dd6faaac1b62c88614b5" title="_write" alt="" coords="910,203,965,229"/><area shape="rect" id="node16" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="1101,505,1160,530"/><area shape="rect" id="node18" href="group__xg_crt_string.html#ga9d0726a46ae033e7755fd1313da76ab1" title="Locate byte in a memory region." alt="" coords="1097,203,1165,229"/><area shape="rect" id="node20" href="group__xg_crt_string.html#ga7b9fc4834c90ac78977b5fbb3076c5ac" title="Compute the length of a NUL terminated string." alt="" coords="1104,253,1157,278"/><area shape="rect" id="node22" href="group__xg_crt_string.html#ga5f9abaa6c5ffa26025ca901c14cb1056" title="Copy a string." alt="" coords="1103,154,1158,179"/><area shape="rect" id="node24" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="1109,554,1152,579"/><area shape="rect" id="node37" href="group__xg_event.html#ga21d9c3cc7ae2c9bddfb130b54b081076" title="Asynchronously broadcast an event to a specified queue." alt="" coords="649,55,807,81"/><area shape="rect" id="node45" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="675,105,781,130"/><area shape="rect" id="node39" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="1067,54,1195,79"/><area shape="rect" id="node41" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="1271,54,1369,79"/><area shape="rect" id="node43" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="1243,5,1397,30"/><area shape="rect" id="node47" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="856,154,1019,179"/><area shape="rect" id="node50" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="873,105,1001,130"/><area shape="rect" id="node55" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="1079,1057,1183,1082"/><area shape="rect" id="node59" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="1097,1106,1165,1131"/><area shape="rect" id="node67" href="group__xg_i_p.html#gabf73942328e57e1c1c72abe1f9e6e359" title="Network interface setup." alt="" coords="307,853,405,878"/><area shape="rect" id="node108" href="group__xg_i_c_m_p.html#ga39892eead0894298fcbacab426715720" title="Handle incoming ICMP packets." alt="" coords="309,590,403,615"/><area shape="rect" id="node111" href="group__xg_i_g_m_p.html#gacfbfc48d28eeb5eb7999b6055ea54172" title="Process incoming IGMP packets." alt="" coords="308,1258,404,1283"/><area shape="rect" id="node116" href="group__xg_i_c_m_p.html#ga387c1b71bb0ec69aa6467bdcedefbe26" title="Send an ICMP message as a response to a given destination." alt="" coords="293,1055,419,1081"/><area shape="rect" id="node69" href="group__xg_i_p.html#gadbce564458332a83ab871b91a54269dd" title="Convert decimal dotted ASCII representation into numeric IP address." alt="" coords="499,853,573,878"/><area shape="rect" id="node71" href="group__xg_i_p.html#gaeb3b4f86e57db7d3e047b0c53aa94e60" title="Add a new entry to the IP routing table." alt="" coords="675,525,781,550"/><area shape="rect" id="node75" href="group__xg_conf_net.html#gacd0c3f2b073732af821661964eae34b4" title="Save network configuration in non&#45;volatile memory." alt="" coords="475,803,597,829"/><area shape="rect" id="node77" href="group__xg_nut_nv_mem.html#ga2eb04b74f80407950b723c4978594b41" title="Save data in non&#45;volatile memory." alt="" coords="673,629,783,654"/><area shape="rect" id="node79" href="x12rtc_8h.html#abee38edf014cf9a82b94c2e0a52d895e" title="Store buffer contents in non&#45;volatile EEPROM." alt="" coords="880,455,995,481"/><area shape="rect" id="node84" href="nvmem__at45d_8h.html#af4070fbe96bc548a132c126be392c6ac" title="Store configuration parameters in flash memory." alt="" coords="870,505,1005,530"/><area shape="rect" id="node89" href="at45db_8h.html#a403ccfda94df744eee47d85e6d35ef7d" title="Store configuration parameters in flash memory." alt="" coords="875,653,1000,678"/><area shape="rect" id="node94" href="at49bv_8h.html#a2511e9c522d75d7ae41837cd7d274d7b" title="Store configuration parameters in flash memory." alt="" coords="876,554,999,579"/><area shape="rect" id="node99" href="group__xg_arch_avr_dev_eeprom.html#ga1ec3533d0514cbbe9b6d7fa63dcc00b9" title="Save data in AVR EEPROM." alt="" coords="871,751,1003,777"/><area shape="rect" id="node101" href="group__xg_at91_efc.html#ga4a417f5fa6cb2544033200d4c16c40e0" title="Store configuration parameters in embedded flash memory." alt="" coords="873,702,1001,727"/><area shape="rect" id="node106" href="dev_2eeprom_8h.html#aa650034d1a595707b25ca9f07270a23e" title="EEWriteData" alt="" coords="891,603,983,629"/><area shape="rect" id="node113" href="group__xg_i_g_m_p.html#ga2c19876202ab2cde84568af323766231" title="NutIgmpJoinGroup" alt="" coords="473,1309,599,1334"/><area shape="rect" id="node120" href="group__xg_i_c_m_p.html#gaa1a3c8e2fce88cb2ed41e6bf106e49be" title="Send an ICMP message to a given destination." alt="" coords="487,1106,585,1131"/><area shape="rect" id="node123" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431" title="Send an ICMP datagram." alt="" coords="676,1182,780,1207"/><area shape="rect" id="node125" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="1253,1233,1387,1258"/><area shape="rect" id="node127" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="1081,1207,1180,1233"/><area shape="rect" id="node130" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="894,1157,981,1182"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5342e8b68b9af648aa943a9a9166099b"></a><!-- doxytag: member="ethout.c::NutEtherOutput" ref="ga5342e8b68b9af648aa943a9a9166099b" args="(NUTDEVICE *dev, uint16_t type, uint8_t *ha, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutEtherOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>ha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send Ethernet frame. </p>
<p>Send an Ethernet frame of a given type using the specified device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device to use. </td></tr>
    <tr><td class="paramname">type</td><td>Type of this frame, either ETHERTYPE_IP or ETHERTYPE_ARP. </td></tr>
    <tr><td class="paramname">ha</td><td>MAC address of the destination, set null for broadcasts. </td></tr>
    <tr><td class="paramname">nb</td><td>Network buffer structure containing the packet to be sent. The structure must have been allocated by a previous call <a class="el" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re-allocate a network buffer part.">NutNetBufAlloc()</a> and will be freed if this function returns with an error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 in case of any errors. </dd></dl>

<p>Definition at line <a class="el" href="ethout_8c_source.html#l00144">144</a> of file <a class="el" href="ethout_8c_source.html">ethout.c</a>.</p>

<p>References <a class="el" href="device_8h_source.html#l00209">_NUTDEVICE::dev_icb</a>, <a class="el" href="if__ether_8h_source.html#l00084">ether_header::ether_dhost</a>, <a class="el" href="if__ether_8h_source.html#l00086">ether_header::ether_shost</a>, <a class="el" href="if__ether_8h_source.html#l00088">ether_header::ether_type</a>, <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="if__var_8h_source.html#l00197">ifnet::if_mac</a>, <a class="el" href="if__var_8h_source.html#l00206">ifnet::if_send</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="memset_8c_source.html#l00088">memset()</a>, <a class="el" href="netbuf_8h_source.html#l00163">_NETBUF::nb_dl</a>, <a class="el" href="netbuf_8h_source.html#l00131">NBAF_DATALINK</a>, <a class="el" href="netbuf_8c_source.html#l00173">NutNetBufAlloc()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_ethernet_ga5342e8b68b9af648aa943a9a9166099b_cgraph.png" border="0" usemap="#group__xg_ethernet_ga5342e8b68b9af648aa943a9a9166099b_cgraph" alt=""/></div>
<map name="group__xg_ethernet_ga5342e8b68b9af648aa943a9a9166099b_cgraph" id="group__xg_ethernet_ga5342e8b68b9af648aa943a9a9166099b_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="177,5,247,30"/><area shape="rect" id="node5" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="178,54,246,79"/><area shape="rect" id="node7" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="160,103,264,129"/><area shape="rect" id="node9" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="313,129,415,154"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga6710e3ff8f687881079642c7a715c5a5"></a><!-- doxytag: member="ethin.c::ether_demux" ref="ga6710e3ff8f687881079642c7a715c5a5" args=")(NUTDEVICE *, NETBUF *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* <a class="el" href="group__xg_ethernet.html#ga6710e3ff8f687881079642c7a715c5a5">ether_demux</a>)(<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to an optional demultiplexer. </p>
<p>This pointer will be set on the first call to <a class="el" href="group__xg_ethernet.html#gaddf38bba503e95ba7da14e23c4246cad" title="Register an additional Ethernet protocol handler.">NutRegisterEthHandler()</a>. </p>

<p>Definition at line <a class="el" href="ethin_8c_source.html#l00135">135</a> of file <a class="el" href="ethin_8c_source.html">ethin.c</a>.</p>

<p>Referenced by <a class="el" href="ethin_8c_source.html#l00156">NutEtherInput()</a>, and <a class="el" href="ethdemux_8c_source.html#l00125">NutRegisterEthHandler()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
