<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: UDP Sockets</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_udp_socket.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">UDP Sockets</div>  </div>
<div class="ingroups"><a class="el" href="group__xg_socket.html">Socket API</a></div></div>
<div class="contents">

<p>Application interface for UDP sockets.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for UDP Sockets:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_udp_socket.png" border="0" alt="" usemap="#group____xg__udp__socket"/>
<map name="group____xg__udp__socket" id="group____xg__udp__socket">
<area shape="rect" id="node2" href="group__xg_socket.html" title="Nut/Net Socket Interface." alt="" coords="5,5,85,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structudp__socket.html">udp_socket</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">UDP socket information structure.  <a href="structudp__socket.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structudp__socket.html">udp_socket</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">UDP socket type.  <a href="#ga7b327a7737c6808592127a17afda250a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d">NutUdpCreateSocket</a> (<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> port)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a UDP socket.  <a href="#gae3f0a4c71eecf9a01920852dd0f0592d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga10191929e17f17de9f49c5b1f8822154">NutUdpSendTo</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> addr, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> port, void *data, int len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a UDP datagram.  <a href="#ga10191929e17f17de9f49c5b1f8822154"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga6b8b9b8ddce0e1024f75c7575d8c9e3b">NutUdpReceiveFrom</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *addr, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> *port, void *data, int size, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> timeout)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a UDP datagram.  <a href="#ga6b8b9b8ddce0e1024f75c7575d8c9e3b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga73efaff2acbe9b93f6a27a643471ef63">NutUdpDestroySocket</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close UDP socket.  <a href="#ga73efaff2acbe9b93f6a27a643471ef63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga1cc6c30fe6d110875fc592b09d986926">NutUdpError</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *addr, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> *port)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return specific code of the last error and the IP address / port of the host to which the communication failed.  <a href="#ga1cc6c30fe6d110875fc592b09d986926"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga2680591101bc19cee587830f217aeff6">NutUdpFindSocket</a> (<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> port)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a matching socket.  <a href="#ga2680591101bc19cee587830f217aeff6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga2051b9300c656a4e01b964d054f0a9ec">NutUdpSetSockOpt</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock, int optname, CONST void *optval, int optlen)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set value of a UDP socket option.  <a href="#ga2051b9300c656a4e01b964d054f0a9ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga47f30a0bb47b1100f0dedd0e5bea6ba2">NutUdpGetSockOpt</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock, int optname, void *optval, int optlen)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a UDP socket option value.  <a href="#ga47f30a0bb47b1100f0dedd0e5bea6ba2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#ga1bc87627874f208f7b5524ccd8dc0843">NutUdpSetSocketError</a> (<a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *sock, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> remote_addr, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> remote_port, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> error)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a UDP socket error.  <a href="#ga1bc87627874f208f7b5524ccd8dc0843"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_udp_socket.html#gac2ca0d87aba4402d19cecbc63b1f159c">udpSocketList</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Application interface for UDP sockets. </p>
<p>UDP server and client applications typically use this order of API calls</p>
<ul>
<li><a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a></li>
<li><a class="el" href="group__xg_udp_socket.html#ga10191929e17f17de9f49c5b1f8822154" title="Send a UDP datagram.">NutUdpSendTo()</a>, <a class="el" href="group__xg_udp_socket.html#ga6b8b9b8ddce0e1024f75c7575d8c9e3b" title="Receive a UDP datagram.">NutUdpReceiveFrom()</a></li>
<li><a class="el" href="group__xg_udp_socket.html#ga73efaff2acbe9b93f6a27a643471ef63" title="Close UDP socket.">NutUdpDestroySocket()</a></li>
</ul>
<p>Assigning a stream to a UDP socket is not supported. Applications must use <a class="el" href="group__xg_udp_socket.html#ga10191929e17f17de9f49c5b1f8822154" title="Send a UDP datagram.">NutUdpSendTo()</a> and <a class="el" href="group__xg_udp_socket.html#ga6b8b9b8ddce0e1024f75c7575d8c9e3b" title="Receive a UDP datagram.">NutUdpReceiveFrom()</a>.</p>
<p>For historical reasons, Nut/Net buffers only the last incoming UDP datagram for a specific port by default. Any previously received datagram will be discarded, if it hasn't been passed to the application in the meantime. Most applications will run fine with this. But it will fail for example, if more than one response is expected on a previously broadcasted request. This problem can be solved by calling <a class="el" href="group__xg_udp_socket.html#ga2051b9300c656a4e01b964d054f0a9ec" title="Set value of a UDP socket option.">NutUdpSetSockOpt()</a> to specify a receive buffer size.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;<a class="code" href="socket_8h.html" title="UDP and TCP socket interface definitions.">sys/socket.h</a>&gt;</span>

 ...

 <a class="code" href="structudp__socket.html" title="UDP socket information structure.">UDPSOCKET</a> *sock;
 <a class="code" href="group__xg_nut_o_s.html#gaa1a19deefc008737e6397f44d983cfd4" title="Unsigned 16-bit value.">u_short</a> udp_bufsiz = 1024;

 ...

 sock = <a class="code" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket</a>(20191);
 <a class="code" href="group__xg_udp_socket.html#ga2051b9300c656a4e01b964d054f0a9ec" title="Set value of a UDP socket option.">NutUdpSetSockOpt</a>(sock, <a class="code" href="socket_8h.html#a0db12e960ac303030400d9fd95391b52" title="Receive buffer size.">SO_RCVBUF</a>, &amp;udp_bufsiz, <span class="keyword">sizeof</span>(udp_bufsiz));
</pre></div><p>Nut/Net supports connectionless UDP sockets only. A Berkley like bind call is not available.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>There is no similar call like <a class="el" href="group__xg_tcp_socket.html#ga3953f713369f008979d738b32d8fc255" title="Return specific code of the last error.">NutTcpError()</a> available for UDP. </dd></dl>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga7b327a7737c6808592127a17afda250a"></a><!-- doxytag: member="sock_var.h::UDPSOCKET" ref="ga7b327a7737c6808592127a17afda250a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structudp__socket.html">udp_socket</a> <a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>UDP socket type. </p>

<p>Definition at line <a class="el" href="sock__var_8h_source.html#l00161">161</a> of file <a class="el" href="sock__var_8h_source.html">sock_var.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gae3f0a4c71eecf9a01920852dd0f0592d"></a><!-- doxytag: member="udpsock.c::NutUdpCreateSocket" ref="gae3f0a4c71eecf9a01920852dd0f0592d" args="(uint16_t port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a>* NutUdpCreateSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a UDP socket. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Server applications provide the local port number with this parameter. Client applications should pass zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Socket descriptor of the newly created UDP socket or 0 if there is not enough memory left. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00195">195</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="icc_8h_source.html#l00143">calloc</a>, <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="in_8h_source.html#l00133">IPPROTO_UDP</a>, <a class="el" href="ipdemux_8c_source.html#l00120">NutRegisterIpHandler()</a>, <a class="el" href="udpin_8c_source.html#l00158">NutUdpInput()</a>, <a class="el" href="sock__var_8h_source.html#l00171">udp_socket::so_local_port</a>, <a class="el" href="sock__var_8h_source.html#l00170">udp_socket::so_next</a>, and <a class="el" href="udpsock_8c_source.html#l00180">udpSocketList</a>.</p>

<p>Referenced by <a class="el" href="discover_8c_source.html#l00212">DiscoveryResponder()</a>, <a class="el" href="icmp-udp_8c_source.html#l00163">main()</a>, <a class="el" href="upnp_8c_source.html#l00318">NotifyTask()</a>, <a class="el" href="dhcpc_8c_source.html#l01451">NutDhcpClient()</a>, <a class="el" href="resolv_8c_source.html#l00403">NutDnsGetResource()</a>, <a class="el" href="resolv_8c_source.html#l00524">NutDnsGetResourceAll()</a>, <a class="el" href="sntp_8c_source.html#l00165">NutSNTPGetTime()</a>, <a class="el" href="wins_8c_source.html#l00093">NutWinsNameQuery()</a>, <a class="el" href="syslog_8c_source.html#l00419">openlog()</a>, <a class="el" href="snmp__session_8c_source.html#l00061">SnmpSessionOpen()</a>, and <a class="el" href="upnp_8c_source.html#l00342">SSDPTask()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_udp_socket_gae3f0a4c71eecf9a01920852dd0f0592d_cgraph.png" border="0" usemap="#group__xg_udp_socket_gae3f0a4c71eecf9a01920852dd0f0592d_cgraph" alt=""/></div>
<map name="group__xg_udp_socket_gae3f0a4c71eecf9a01920852dd0f0592d_cgraph" id="group__xg_udp_socket_gae3f0a4c71eecf9a01920852dd0f0592d_cgraph">
<area shape="rect" id="node3" href="group__xg_i_p.html#ga7606caeb3d5b7bdacaa52b35de179685" title="Register an additional Ethernet protocol handler." alt="" coords="193,166,335,191"/><area shape="rect" id="node5" href="group__xg_u_d_p.html#ga3057f4a4a81e80d7d7c024a5e0db73c5" title="Handle incoming UDP packets." alt="" coords="219,215,309,241"/><area shape="rect" id="node7" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="1358,70,1461,95"/><area shape="rect" id="node10" href="group__xg_udp_socket.html#ga2680591101bc19cee587830f217aeff6" title="Find a matching socket." alt="" coords="385,239,511,265"/><area shape="rect" id="node12" href="group__xg_i_c_m_p.html#ga387c1b71bb0ec69aa6467bdcedefbe26" title="Send an ICMP message as a response to a given destination." alt="" coords="385,190,511,215"/><area shape="rect" id="node44" href="group__xg_event.html#gad519c6b1469621d2b3909fe58d1ac40b" title="Post an event to a specified queue." alt="" coords="400,545,496,570"/><area shape="rect" id="node14" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="1164,45,1268,70"/><area shape="rect" id="node17" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="1375,270,1444,295"/><area shape="rect" id="node19" href="group__xg_i_c_m_p.html#gaa1a3c8e2fce88cb2ed41e6bf106e49be" title="Send an ICMP message to a given destination." alt="" coords="564,190,663,215"/><area shape="rect" id="node22" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431" title="Send an ICMP datagram." alt="" coords="744,239,848,265"/><area shape="rect" id="node24" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="1342,394,1477,419"/><area shape="rect" id="node26" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="1167,343,1265,369"/><area shape="rect" id="node29" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="965,207,1051,233"/><area shape="rect" id="node32" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="1182,294,1250,319"/><area shape="rect" id="node34" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="1149,146,1283,171"/><area shape="rect" id="node40" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="1158,195,1274,221"/><area shape="rect" id="node42" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="1153,245,1279,270"/><area shape="rect" id="node46" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="944,595,1072,621"/><area shape="rect" id="node54" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="560,545,667,570"/><area shape="rect" id="node48" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="1167,597,1265,622"/><area shape="rect" id="node52" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="1139,646,1293,671"/><area shape="rect" id="node50" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1357,571,1461,597"/><area shape="rect" id="node56" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="715,545,877,570"/><area shape="rect" id="node59" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="732,495,860,521"/><area shape="rect" id="node62" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="925,495,1091,521"/><area shape="rect" id="node67" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="950,545,1066,570"/><area shape="rect" id="node64" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="1159,495,1273,521"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga10191929e17f17de9f49c5b1f8822154"></a><!-- doxytag: member="udpsock.c::NutUdpSendTo" ref="ga10191929e17f17de9f49c5b1f8822154" args="(UDPSOCKET *sock, uint32_t addr, uint16_t port, void *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpSendTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a UDP datagram. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">addr</td><td>IP address of the remote host in network byte order. </td></tr>
    <tr><td class="paramname">port</td><td>Remote port number in host byte order. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to a buffer containing the data to send. </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes to be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. The specific error code can be retrieved by calling <a class="el" href="group__xg_udp_socket.html#ga1cc6c30fe6d110875fc592b09d986926" title="Return specific code of the last error and the IP address / port of the host to which the communicati...">NutUdpError()</a>. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00241">241</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="errno_8h_source.html#l00065">ENOMEM</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00134">NBAF_APPLICATION</a>, <a class="el" href="netbuf_8c_source.html#l00173">NutNetBufAlloc()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="udpout_8c_source.html#l00152">NutUdpOutput()</a>, <a class="el" href="sock__var_8h_source.html#l00177">udp_socket::so_last_error</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="discover_8c_source.html#l00212">DiscoveryResponder()</a>, <a class="el" href="icmp-udp_8c_source.html#l00163">main()</a>, <a class="el" href="resolv_8c_source.html#l00403">NutDnsGetResource()</a>, <a class="el" href="resolv_8c_source.html#l00524">NutDnsGetResourceAll()</a>, <a class="el" href="sntp_8c_source.html#l00165">NutSNTPGetTime()</a>, <a class="el" href="wins_8c_source.html#l00093">NutWinsNameQuery()</a>, <a class="el" href="snmp__agent_8c_source.html#l00468">SnmpAgent()</a>, <a class="el" href="snmp__session_8c_source.html#l00256">SnmpSessionSendPdu()</a>, <a class="el" href="upnp_8c_source.html#l00342">SSDPTask()</a>, and <a class="el" href="syslog_8c_source.html#l00270">syslog_flush()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_udp_socket_ga10191929e17f17de9f49c5b1f8822154_cgraph.png" border="0" usemap="#group__xg_udp_socket_ga10191929e17f17de9f49c5b1f8822154_cgraph" alt=""/></div>
<map name="group__xg_udp_socket_ga10191929e17f17de9f49c5b1f8822154_cgraph" id="group__xg_udp_socket_ga10191929e17f17de9f49c5b1f8822154_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="751,11,820,36"/><area shape="rect" id="node5" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="551,92,655,117"/><area shape="rect" id="node7" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="734,123,837,148"/><area shape="rect" id="node11" href="group__xg_u_d_p.html#ga518b1cc25e7c2e16bb631d0d143007a0" title="Send a UDP packet." alt="" coords="161,340,261,365"/><area shape="rect" id="node14" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="545,341,661,367"/><area shape="rect" id="node16" href="group__xg_i_p.html#ga9ddc8d97c6179d3b2c562a78b2131632" title="Calculates the partial IP pseudo checksum." alt="" coords="310,441,487,467"/><area shape="rect" id="node18" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="718,441,853,467"/><area shape="rect" id="node21" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="553,391,652,416"/><area shape="rect" id="node24" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="355,265,442,291"/><area shape="rect" id="node27" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="569,240,637,265"/><area shape="rect" id="node29" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="536,141,669,167"/><area shape="rect" id="node36" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="539,191,666,216"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6b8b9b8ddce0e1024f75c7575d8c9e3b"></a><!-- doxytag: member="udpsock.c::NutUdpReceiveFrom" ref="ga6b8b9b8ddce0e1024f75c7575d8c9e3b" args="(UDPSOCKET *sock, uint32_t *addr, uint16_t *port, void *data, int size, uint32_t timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpReceiveFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receive a UDP datagram. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">addr</td><td>IP address of the remote host in network byte order. </td></tr>
    <tr><td class="paramname">port</td><td>Remote port number in host byte order. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the buffer that receives the data. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the buffer that receives the data. </td></tr>
    <tr><td class="paramname">timeout</td><td>Maximum number of milliseconds to wait.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes received, if successful. The return value &lt; 0 indicates an error. The specific error code can be retrieved by calling <a class="el" href="group__xg_udp_socket.html#ga1cc6c30fe6d110875fc592b09d986926" title="Return specific code of the last error and the IP address / port of the host to which the communicati...">NutUdpError()</a>.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Timeout is limited to the granularity of the system timer. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00282">282</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="netinet_2ip_8h_source.html#l00165">ip::ip_src</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00161">_NETBUF::nb_next</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="event_8c_source.html#l00271">NutEventWait()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="sock__var_8h_source.html#l00177">udp_socket::so_last_error</a>, <a class="el" href="sock__var_8h_source.html#l00174">udp_socket::so_rx_cnt</a>, <a class="el" href="sock__var_8h_source.html#l00172">udp_socket::so_rx_nb</a>, <a class="el" href="sock__var_8h_source.html#l00173">udp_socket::so_rx_rdy</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, <a class="el" href="netinet_2udp_8h_source.html#l00119">udphdr::uh_sport</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="discover_8c_source.html#l00212">DiscoveryResponder()</a>, <a class="el" href="resolv_8c_source.html#l00403">NutDnsGetResource()</a>, <a class="el" href="resolv_8c_source.html#l00524">NutDnsGetResourceAll()</a>, <a class="el" href="sntp_8c_source.html#l00165">NutSNTPGetTime()</a>, <a class="el" href="wins_8c_source.html#l00093">NutWinsNameQuery()</a>, <a class="el" href="snmp__agent_8c_source.html#l00468">SnmpAgent()</a>, <a class="el" href="upnp_8c_source.html#l00342">SSDPTask()</a>, and <a class="el" href="icmp-udp_8c_source.html#l00133">UDPReceiver()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_udp_socket_ga6b8b9b8ddce0e1024f75c7575d8c9e3b_cgraph.png" border="0" usemap="#group__xg_udp_socket_ga6b8b9b8ddce0e1024f75c7575d8c9e3b_cgraph" alt=""/></div>
<map name="group__xg_udp_socket_ga6b8b9b8ddce0e1024f75c7575d8c9e3b_cgraph" id="group__xg_udp_socket_ga6b8b9b8ddce0e1024f75c7575d8c9e3b_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="209,82,279,107"/><area shape="rect" id="node5" href="group__xg_event.html#ga79af18e0842286182af7c5b647526ce5" title="Wait for an event in a specified queue." alt="" coords="197,131,291,157"/><area shape="rect" id="node51" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="193,205,295,230"/><area shape="rect" id="node7" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="349,157,456,182"/><area shape="rect" id="node9" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="509,106,672,131"/><area shape="rect" id="node11" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="934,94,1087,119"/><area shape="rect" id="node13" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="527,207,655,233"/><area shape="rect" id="node31" href="group__xg_timer.html#ga91b42f5fd833e1b72c27b3bfb0ed0af7" title="Start a system timer." alt="" coords="353,343,452,369"/><area shape="rect" id="node47" href="group__xg_event.html#gaaa944c4484d068bdacd8220b7e081302" title="Timer callback in case of event timeout." alt="" coords="345,5,461,30"/><area shape="rect" id="node15" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="739,182,867,207"/><area shape="rect" id="node22" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="720,281,885,306"/><area shape="rect" id="node27" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="745,231,861,257"/><area shape="rect" id="node17" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="961,205,1060,230"/><area shape="rect" id="node19" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1141,279,1245,305"/><area shape="rect" id="node24" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="953,330,1068,355"/><area shape="rect" id="node33" href="group__xg_timer.html#gaf104e0c3660b2a77bd0d7b00c4fd741c" title="Start a system timer." alt="" coords="527,343,654,369"/><area shape="rect" id="node39" href="group__xg_nut_arch_arm_os_timer_at91.html#gabb52a4e7f513a7c586898065e0a0c81a" title="Calculate system ticks for a given number of milliseconds." alt="" coords="519,418,663,443"/><area shape="rect" id="node35" href="group__xg_timer.html#ga1e47b683a996583386ebef7e7c92501e" title="Create a new system timer." alt="" coords="747,330,858,355"/><area shape="rect" id="node41" href="group__xg_nut_arch_arm_os_timer_at91.html#ga2724f52da15ed45123a32c1ed7e148f0" title="Return the number of system ticks per second." alt="" coords="746,431,859,457"/><area shape="rect" id="node43" href="group__xg_timer.html#ga784a7f52b5167c777149fd1d874c99f0" title="Return the CPU clock frequency." alt="" coords="953,431,1068,457"/><area shape="rect" id="node45" href="group__xg_nut_arch_arm_os_timer_gba.html#ga7d11c53224db0028ad4838f8b9df9872" title="Return the CPU clock in Hertz." alt="" coords="1136,431,1251,457"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga73efaff2acbe9b93f6a27a643471ef63"></a><!-- doxytag: member="udpsock.c::NutUdpDestroySocket" ref="ga73efaff2acbe9b93f6a27a643471ef63" args="(UDPSOCKET *sock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpDestroySocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close UDP socket. </p>
<p>The memory occupied by the socket is immediately released after calling this function. The application must not use the socket after this call.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00339">339</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="malloc_8c_source.html#l00084">free()</a>, <a class="el" href="netbuf_8h_source.html#l00161">_NETBUF::nb_next</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="sock__var_8h_source.html#l00170">udp_socket::so_next</a>, <a class="el" href="sock__var_8h_source.html#l00172">udp_socket::so_rx_nb</a>, and <a class="el" href="udpsock_8c_source.html#l00180">udpSocketList</a>.</p>

<p>Referenced by <a class="el" href="syslog_8c_source.html#l00450">closelog()</a>, <a class="el" href="snmpd_8c_source.html#l00120">main()</a>, <a class="el" href="dhcpc_8c_source.html#l01451">NutDhcpClient()</a>, <a class="el" href="resolv_8c_source.html#l00403">NutDnsGetResource()</a>, <a class="el" href="resolv_8c_source.html#l00524">NutDnsGetResourceAll()</a>, <a class="el" href="sntp_8c_source.html#l00165">NutSNTPGetTime()</a>, and <a class="el" href="snmp__session_8c_source.html#l00090">SnmpSessionClose()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_udp_socket_ga73efaff2acbe9b93f6a27a643471ef63_cgraph.png" border="0" usemap="#group__xg_udp_socket_ga73efaff2acbe9b93f6a27a643471ef63_cgraph" alt=""/></div>
<map name="group__xg_udp_socket_ga73efaff2acbe9b93f6a27a643471ef63_cgraph" id="group__xg_udp_socket_ga73efaff2acbe9b93f6a27a643471ef63_cgraph">
<area shape="rect" id="node3" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="228,5,271,30"/><area shape="rect" id="node5" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="198,78,301,103"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1cc6c30fe6d110875fc592b09d986926"></a><!-- doxytag: member="udpsock.c::NutUdpError" ref="ga1cc6c30fe6d110875fc592b09d986926" args="(UDPSOCKET *sock, uint32_t *addr, uint16_t *port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return specific code of the last error and the IP address / port of the host to which the communication failed. </p>
<p>Possible error codes are:</p>
<ul>
<li>ENOTSOCK: Socket operation on non-socket</li>
<li>EMSGSIZE: Message too long</li>
<li>ENOPROTOOPT: Protocol not available</li>
<li>EOPNOTSUPP: Operation not supported on socket</li>
<li>ENETUNREACH: Network is unreachable</li>
<li>ECONNREFUSED: Connection refused</li>
<li>EHOSTDOWN: Host is down</li>
<li>EHOSTUNREACH: No route to host</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">addr</td><td>IP address of the remote host in network byte order. </td></tr>
    <tr><td class="paramname">port</td><td>Remote port number in host byte order.</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000045">Todo:</a></b></dt><dd>Not all error codes are properly set right now. Some socket functions return an error without setting an error code. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="icmp-udp_2icmp-udp_8c-example.html#a16">icmp-udp/icmp-udp.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00391">391</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="errno_8h_source.html#l00098">ENOTSOCK</a>, <a class="el" href="types_8h_source.html#l00349">ntohs</a>, <a class="el" href="sock__var_8h_source.html#l00177">udp_socket::so_last_error</a>, <a class="el" href="sock__var_8h_source.html#l00178">udp_socket::so_remote_addr</a>, and <a class="el" href="sock__var_8h_source.html#l00179">udp_socket::so_remote_port</a>.</p>

<p>Referenced by <a class="el" href="icmp-udp_8c_source.html#l00163">main()</a>, and <a class="el" href="icmp-udp_8c_source.html#l00133">UDPReceiver()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2680591101bc19cee587830f217aeff6"></a><!-- doxytag: member="udpsock.c::NutUdpFindSocket" ref="ga2680591101bc19cee587830f217aeff6" args="(uint16_t port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a>* NutUdpFindSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find a matching socket. </p>
<p>Loop through all sockets and find a matching one.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Applications typically do not need to call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Local port number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Socket descriptor. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00425">425</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="sock__var_8h_source.html#l00171">udp_socket::so_local_port</a>, and <a class="el" href="sock__var_8h_source.html#l00170">udp_socket::so_next</a>.</p>

<p>Referenced by <a class="el" href="udpin_8c_source.html#l00158">NutUdpInput()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2051b9300c656a4e01b964d054f0a9ec"></a><!-- doxytag: member="udpsock.c::NutUdpSetSockOpt" ref="ga2051b9300c656a4e01b964d054f0a9ec" args="(UDPSOCKET *sock, int optname, CONST void *optval, int optlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpSetSockOpt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&#160;</td>
          <td class="paramname"><em>optval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set value of a UDP socket option. </p>
<p>The following values can be set:</p>
<ul>
<li><a class="el" href="socket_8h.html#a0db12e960ac303030400d9fd95391b52" title="Receive buffer size.">SO_RCVBUF</a> Socket input buffer size (<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>).</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">optname</td><td>Option to set. </td></tr>
    <tr><td class="paramname">optval</td><td>Pointer to the value. </td></tr>
    <tr><td class="paramname">optlen</td><td>Length of the value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00453">453</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="socket_8h_source.html#l00163">SO_RCVBUF</a>, and <a class="el" href="sock__var_8h_source.html#l00175">udp_socket::so_rx_bsz</a>.</p>

<p>Referenced by <a class="el" href="discover_8c_source.html#l00212">DiscoveryResponder()</a>, <a class="el" href="icmp-udp_8c_source.html#l00163">main()</a>, <a class="el" href="dhcpc_8c_source.html#l01451">NutDhcpClient()</a>, and <a class="el" href="sntp_8c_source.html#l00165">NutSNTPGetTime()</a>.</p>

</div>
</div>
<a class="anchor" id="ga47f30a0bb47b1100f0dedd0e5bea6ba2"></a><!-- doxytag: member="udpsock.c::NutUdpGetSockOpt" ref="ga47f30a0bb47b1100f0dedd0e5bea6ba2" args="(UDPSOCKET *sock, int optname, void *optval, int optlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpGetSockOpt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>optval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a UDP socket option value. </p>
<p>The following values can be set:</p>
<ul>
<li><a class="el" href="socket_8h.html#a0db12e960ac303030400d9fd95391b52" title="Receive buffer size.">SO_RCVBUF</a> Socket input buffer size (<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>).</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">optname</td><td>Option to get. </td></tr>
    <tr><td class="paramname">optval</td><td>Points to a buffer receiving the value. </td></tr>
    <tr><td class="paramname">optlen</td><td>Length of the value buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00490">490</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="socket_8h_source.html#l00163">SO_RCVBUF</a>, and <a class="el" href="sock__var_8h_source.html#l00175">udp_socket::so_rx_bsz</a>.</p>

</div>
</div>
<a class="anchor" id="ga1bc87627874f208f7b5524ccd8dc0843"></a><!-- doxytag: member="udpsock.c::NutUdpSetSocketError" ref="ga1bc87627874f208f7b5524ccd8dc0843" args="(UDPSOCKET *sock, uint32_t remote_addr, uint16_t remote_port, uint16_t error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutUdpSetSocketError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>remote_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>remote_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set a UDP socket error. </p>
<p>This function should only be used together (and from) the icmp input routine</p>
<p>The following values can be set:</p>
<ul>
<li><a class="el" href="errno_8h.html#a53e186028fc992c3341ccb0d4d239b24">EHOSTUNREACH</a> Host is unreachable</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_udp_socket.html#gae3f0a4c71eecf9a01920852dd0f0592d" title="Create a UDP socket.">NutUdpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">remote_addr</td><td>remote ip address in network byte order </td></tr>
    <tr><td class="paramname">remote_port</td><td>remote port in network byte order </td></tr>
    <tr><td class="paramname">error</td><td>Error number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00530">530</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>References <a class="el" href="event_8c_source.html#l00454">NutEventPost()</a>, <a class="el" href="sock__var_8h_source.html#l00177">udp_socket::so_last_error</a>, <a class="el" href="sock__var_8h_source.html#l00178">udp_socket::so_remote_addr</a>, <a class="el" href="sock__var_8h_source.html#l00179">udp_socket::so_remote_port</a>, and <a class="el" href="sock__var_8h_source.html#l00173">udp_socket::so_rx_rdy</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_udp_socket_ga1bc87627874f208f7b5524ccd8dc0843_cgraph.png" border="0" usemap="#group__xg_udp_socket_ga1bc87627874f208f7b5524ccd8dc0843_cgraph" alt=""/></div>
<map name="group__xg_udp_socket_ga1bc87627874f208f7b5524ccd8dc0843_cgraph" id="group__xg_udp_socket_ga1bc87627874f208f7b5524ccd8dc0843_cgraph">
<area shape="rect" id="node3" href="group__xg_event.html#gad519c6b1469621d2b3909fe58d1ac40b" title="Post an event to a specified queue." alt="" coords="200,30,296,55"/><area shape="rect" id="node5" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="728,5,856,30"/><area shape="rect" id="node13" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="344,81,451,106"/><area shape="rect" id="node7" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="951,5,1049,30"/><area shape="rect" id="node11" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="923,54,1077,79"/><area shape="rect" id="node9" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1125,55,1229,81"/><area shape="rect" id="node15" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="499,155,661,181"/><area shape="rect" id="node18" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="516,106,644,131"/><area shape="rect" id="node21" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="709,106,875,131"/><area shape="rect" id="node26" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="734,155,850,181"/><area shape="rect" id="node23" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="943,155,1057,181"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gac2ca0d87aba4402d19cecbc63b1f159c"></a><!-- doxytag: member="udpsock.c::udpSocketList" ref="gac2ca0d87aba4402d19cecbc63b1f159c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_udp_socket.html#ga7b327a7737c6808592127a17afda250a">UDPSOCKET</a>* <a class="el" href="group__xg_udp_socket.html#gac2ca0d87aba4402d19cecbc63b1f159c">udpSocketList</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Global linked list of all UDP sockets. </p>

<p>Definition at line <a class="el" href="udpsock_8c_source.html#l00180">180</a> of file <a class="el" href="udpsock_8c_source.html">udpsock.c</a>.</p>

<p>Referenced by <a class="el" href="udpsock_8c_source.html#l00195">NutUdpCreateSocket()</a>, and <a class="el" href="udpsock_8c_source.html#l00339">NutUdpDestroySocket()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
