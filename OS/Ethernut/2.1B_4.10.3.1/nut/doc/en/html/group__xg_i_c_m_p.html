<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: ICMP</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_i_c_m_p.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ICMP</div>  </div>
<div class="ingroups"><a class="el" href="group__xg_base_pro.html">Base Protocols</a></div></div>
<div class="contents">

<p>RFC 792 Internet Control Message Protocol.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ICMP:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_i_c_m_p.png" border="0" alt="" usemap="#group____xg__i__c__m__p"/>
<map name="group____xg__i__c__m__p" id="group____xg__i__c__m__p">
<area shape="rect" id="node1" href="group__xg_base_pro.html" title="TCP/IP and UDP applications." alt="" coords="5,5,112,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_i_c_m_p.html#ga39892eead0894298fcbacab426715720">NutIcmpInput</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming ICMP packets.  <a href="#ga39892eead0894298fcbacab426715720"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431">NutIcmpOutput</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> type, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> dest, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an ICMP datagram.  <a href="#ga66717aa9878b74c9e5801996b7de7431"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_i_c_m_p.html#gaa1a3c8e2fce88cb2ed41e6bf106e49be">NutIcmpReply</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> type, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> code, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> spec, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> dest, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an ICMP message to a given destination.  <a href="#gaa1a3c8e2fce88cb2ed41e6bf106e49be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_i_c_m_p.html#ga387c1b71bb0ec69aa6467bdcedefbe26">NutIcmpResponse</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> type, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> code, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> spec, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an ICMP message as a response to a given destination.  <a href="#ga387c1b71bb0ec69aa6467bdcedefbe26"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>RFC 792 Internet Control Message Protocol. </p>
<p>Provides routing, diagnostic and error functionality for IP. Although ICMP messages are encapsulated within IP datagrams, ICMP processing is considered to be part of the IP layer.</p>
<p>There is currently no API support for this layer. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga39892eead0894298fcbacab426715720"></a><!-- doxytag: member="icmpin.c::NutIcmpInput" ref="ga39892eead0894298fcbacab426715720" args="(NUTDEVICE *dev, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutIcmpInput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming ICMP packets. </p>
<p>Incoming ICMP packets are processed in the background. NutNet currently handles echo request and destination unreachable packets. Any other packet type is silently discarded.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This routine is called by the IP layer on incoming ICMP datagrams. Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device that received the packet. </td></tr>
    <tr><td class="paramname">nb</td><td>Pointer to a network buffer structure containing the ICMP datagram. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="icmpin_8c_source.html#l00261">261</a> of file <a class="el" href="icmpin_8c_source.html">icmpin.c</a>.</p>

<p>References <a class="el" href="ip__icmp_8h_source.html#l00168">icmp::icmp_code</a>, <a class="el" href="ip__icmp_8h_source.html#l00138">ICMP_ECHO</a>, <a class="el" href="ip__icmp_8h_source.html#l00117">ICMP_ECHOREPLY</a>, <a class="el" href="ip__icmp_8h_source.html#l00167">icmp::icmp_type</a>, <a class="el" href="ip__icmp_8h_source.html#l00118">ICMP_UNREACH</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="ipin_8c_source.html#l00165">NutIpInput()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_i_c_m_p_ga39892eead0894298fcbacab426715720_cgraph.png" border="0" usemap="#group__xg_i_c_m_p_ga39892eead0894298fcbacab426715720_cgraph" alt=""/></div>
<map name="group__xg_i_c_m_p_ga39892eead0894298fcbacab426715720_cgraph" id="group__xg_i_c_m_p_ga39892eead0894298fcbacab426715720_cgraph">
<area shape="rect" id="node3" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="150,29,253,54"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga66717aa9878b74c9e5801996b7de7431"></a><!-- doxytag: member="icmpout.c::NutIcmpOutput" ref="ga66717aa9878b74c9e5801996b7de7431" args="(uint8_t type, uint32_t dest, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutIcmpOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send an ICMP datagram. </p>
<p>Known ICMP types are:</p>
<ul>
<li><a class="el" href="ip__icmp_8h.html#a82c3c22ccc3ab020f598fa6832a78d12" title="Echo reply type.">ICMP_ECHOREPLY</a> Echo reply</li>
<li><a class="el" href="ip__icmp_8h.html#ad3a53e748928a6746ecf58e63a37a76a" title="Destination unreachable type.">ICMP_UNREACH</a> Destination unreachable</li>
<li><a class="el" href="ip__icmp_8h.html#a8504ceb34b1a35c57b9d5ae26ad4b2c6" title="Packet lost type.">ICMP_SOURCEQUENCH</a> Packet lost</li>
<li><a class="el" href="ip__icmp_8h.html#a4e35dd983f67e5e07de127890143152a" title="Shorter route type.">ICMP_REDIRECT</a> Shorter route</li>
<li><a class="el" href="ip__icmp_8h.html#ad58231410d58e34b455328b888a9e73c" title="Echo reply type.">ICMP_ECHO</a> Echo reply</li>
<li><a class="el" href="ip__icmp_8h.html#a378e8c9e15b519665b52161df53eea56" title="Router advertisement type.">ICMP_ROUTERADVERT</a> Router advertisement</li>
<li><a class="el" href="ip__icmp_8h.html#a3c94ac7432cd169ab5c9ef37d50ad981" title="Router solicitation type.">ICMP_ROUTERSOLICIT</a> Router solicitation</li>
<li><a class="el" href="ip__icmp_8h.html#a8e3af9a982f823093f685c01ea77903c" title="Time exceeded type.">ICMP_TIMXCEED</a> Time exceeded</li>
<li><a class="el" href="ip__icmp_8h.html#aa4319c170ff4577ab7bd22a070643db7" title="Bad IP header type.">ICMP_PARAMPROB</a> Bad IP header</li>
<li><a class="el" href="ip__icmp_8h.html#a62bf3a7886f5cbbd6f0f67303a39fc8f" title="Timestamp request type.">ICMP_TSTAMP</a> Timestamp request</li>
<li><a class="el" href="ip__icmp_8h.html#afa0adb2fb9705db67f1145ab92d581a7" title="Timestamp reply type.">ICMP_TSTAMPREPLY</a> Timestamp reply</li>
<li><a class="el" href="ip__icmp_8h.html#a3fd3b310a59aa6bad86a0c37a99aeb8c" title="Information request type.">ICMP_IREQ</a> Information request</li>
<li><a class="el" href="ip__icmp_8h.html#ac25271988d45328dc281f8ed301d0b2a" title="Information reply type.">ICMP_IREQREPLY</a> Information reply</li>
<li><a class="el" href="ip__icmp_8h.html#ad200822fc3735b19416dbd8376b02e37" title="Address mask request type.">ICMP_MASKREQ</a> Address mask request</li>
<li><a class="el" href="ip__icmp_8h.html#aeecbd895301a4ebe549f270a6486b0c5" title="Address mask reply type.">ICMP_MASKREPLY</a> Address mask reply</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the ICMP message. </td></tr>
    <tr><td class="paramname">dest</td><td>Destination IP address. </td></tr>
    <tr><td class="paramname">nb</td><td>Network buffer structure containing the datagram.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="icmpout_8c_source.html#l00159">159</a> of file <a class="el" href="icmpout_8c_source.html">icmpout.c</a>.</p>

<p>References <a class="el" href="ip__icmp_8h_source.html#l00169">icmp::icmp_cksum</a>, <a class="el" href="ip__icmp_8h_source.html#l00167">icmp::icmp_type</a>, <a class="el" href="in_8h_source.html#l00130">IPPROTO_ICMP</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="ipcsum_8c_source.html#l00193">NutIpChkSum()</a>, <a class="el" href="ipcsum_8c_source.html#l00153">NutIpChkSumPartial()</a>, <a class="el" href="ipout_8c_source.html#l00182">NutIpOutput()</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="icmpout_8c_source.html#l00189">NutIcmpReply()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_i_c_m_p_ga66717aa9878b74c9e5801996b7de7431_cgraph.png" border="0" usemap="#group__xg_i_c_m_p_ga66717aa9878b74c9e5801996b7de7431_cgraph" alt=""/></div>
<map name="group__xg_i_c_m_p_ga66717aa9878b74c9e5801996b7de7431_cgraph" id="group__xg_i_c_m_p_ga66717aa9878b74c9e5801996b7de7431_cgraph">
<area shape="rect" id="node3" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="311,30,409,55"/><area shape="rect" id="node5" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="475,5,610,30"/><area shape="rect" id="node8" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="158,153,245,178"/><area shape="rect" id="node10" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="308,178,412,203"/><area shape="rect" id="node12" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="491,229,594,254"/><area shape="rect" id="node15" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="326,279,394,305"/><area shape="rect" id="node17" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="293,329,427,354"/><area shape="rect" id="node24" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="302,79,418,105"/><area shape="rect" id="node26" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="297,129,423,154"/><area shape="rect" id="node19" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="508,329,577,354"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa1a3c8e2fce88cb2ed41e6bf106e49be"></a><!-- doxytag: member="icmpout.c::NutIcmpReply" ref="gaa1a3c8e2fce88cb2ed41e6bf106e49be" args="(uint8_t type, uint8_t code, uint32_t spec, uint32_t dest, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutIcmpReply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send an ICMP message to a given destination. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the ICMP message. See <a class="el" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431" title="Send an ICMP datagram.">NutIcmpOutput()</a> for a list of valid types. </td></tr>
    <tr><td class="paramname">code</td><td>Type subcode. </td></tr>
    <tr><td class="paramname">spec</td><td>Type specific data item. </td></tr>
    <tr><td class="paramname">dest</td><td>IP address of the target. </td></tr>
    <tr><td class="paramname">nb</td><td>Network buffer structure containing the message to be sent. The structure must have been allocated by a previous call <a class="el" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re-allocate a network buffer part.">NutNetBufAlloc()</a> and will be freed if this function returns with an error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="icmpout_8c_source.html#l00189">189</a> of file <a class="el" href="icmpout_8c_source.html">icmpout.c</a>.</p>

<p>References <a class="el" href="ip__icmp_8h_source.html#l00168">icmp::icmp_code</a>, <a class="el" href="ip__icmp_8h_source.html#l00170">icmp::icmp_spec</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="netbuf_8h_source.html#l00133">NBAF_TRANSPORT</a>, <a class="el" href="icmpout_8c_source.html#l00159">NutIcmpOutput()</a>, <a class="el" href="netbuf_8c_source.html#l00173">NutNetBufAlloc()</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="icmpout_8c_source.html#l00219">NutIcmpResponse()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_i_c_m_p_gaa1a3c8e2fce88cb2ed41e6bf106e49be_cgraph.png" border="0" usemap="#group__xg_i_c_m_p_gaa1a3c8e2fce88cb2ed41e6bf106e49be_cgraph" alt=""/></div>
<map name="group__xg_i_c_m_p_gaa1a3c8e2fce88cb2ed41e6bf106e49be_cgraph" id="group__xg_i_c_m_p_gaa1a3c8e2fce88cb2ed41e6bf106e49be_cgraph">
<area shape="rect" id="node3" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431" title="Send an ICMP datagram." alt="" coords="152,223,256,249"/><area shape="rect" id="node12" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="455,6,559,31"/><area shape="rect" id="node5" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="622,330,757,355"/><area shape="rect" id="node7" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="457,305,556,330"/><area shape="rect" id="node10" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="305,179,391,205"/><area shape="rect" id="node14" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="638,205,741,230"/><area shape="rect" id="node17" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="473,55,541,81"/><area shape="rect" id="node19" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="440,255,573,281"/><area shape="rect" id="node26" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="449,105,565,130"/><area shape="rect" id="node28" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="443,154,570,179"/><area shape="rect" id="node21" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="655,255,724,281"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga387c1b71bb0ec69aa6467bdcedefbe26"></a><!-- doxytag: member="icmpout.c::NutIcmpResponse" ref="ga387c1b71bb0ec69aa6467bdcedefbe26" args="(uint8_t type, uint8_t code, uint32_t spec, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutIcmpResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send an ICMP message as a response to a given destination. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of the ICMP message. See <a class="el" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431" title="Send an ICMP datagram.">NutIcmpOutput()</a> for a list of valid types. </td></tr>
    <tr><td class="paramname">code</td><td>Type subcode. </td></tr>
    <tr><td class="paramname">spec</td><td>Type specific data item. </td></tr>
    <tr><td class="paramname">nb</td><td>Network buffer structure containing the previously recevied network packet. According to RFC792 the complete ip header and the first 8 bytes of the transport netbuf is used as the application data for the response. If this function returns with an error, the buffer is freed. The destination addess is taken from the ip header.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="icmpout_8c_source.html#l00219">219</a> of file <a class="el" href="icmpout_8c_source.html">icmpout.c</a>.</p>

<p>References <a class="el" href="netinet_2ip_8h_source.html#l00165">ip::ip_src</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="netbuf_8h_source.html#l00134">NBAF_APPLICATION</a>, <a class="el" href="icmpout_8c_source.html#l00189">NutIcmpReply()</a>, <a class="el" href="netbuf_8c_source.html#l00173">NutNetBufAlloc()</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="ipin_8c_source.html#l00165">NutIpInput()</a>, and <a class="el" href="udpin_8c_source.html#l00158">NutUdpInput()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_i_c_m_p_ga387c1b71bb0ec69aa6467bdcedefbe26_cgraph.png" border="0" usemap="#group__xg_i_c_m_p_ga387c1b71bb0ec69aa6467bdcedefbe26_cgraph" alt=""/></div>
<map name="group__xg_i_c_m_p_ga387c1b71bb0ec69aa6467bdcedefbe26_cgraph" id="group__xg_i_c_m_p_ga387c1b71bb0ec69aa6467bdcedefbe26_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="831,6,900,31"/><area shape="rect" id="node5" href="group__xg_i_c_m_p.html#gaa1a3c8e2fce88cb2ed41e6bf106e49be" title="Send an ICMP message to a given destination." alt="" coords="181,94,280,119"/><area shape="rect" id="node7" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="631,43,735,69"/><area shape="rect" id="node12" href="group__xg_i_c_m_p.html#ga66717aa9878b74c9e5801996b7de7431" title="Send an ICMP datagram." alt="" coords="328,293,432,318"/><area shape="rect" id="node9" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="814,93,917,118"/><area shape="rect" id="node14" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="798,367,933,393"/><area shape="rect" id="node16" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="633,342,732,367"/><area shape="rect" id="node19" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="481,218,567,243"/><area shape="rect" id="node22" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="649,243,717,269"/><area shape="rect" id="node24" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="616,93,749,118"/><area shape="rect" id="node30" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="625,293,741,318"/><area shape="rect" id="node32" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="619,142,746,167"/></map>
</div>
</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
