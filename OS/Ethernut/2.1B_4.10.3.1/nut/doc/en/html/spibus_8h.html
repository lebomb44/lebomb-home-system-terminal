<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: include/dev/spibus.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('spibus_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spibus.h File Reference</div>  </div>
</div>
<div class="contents">

<p>SPI bus declarations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="dev_2irqreg_8h_source.html">dev/irqreg.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="device_8h_source.html">sys/device.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="event_8h_source.html">sys/event.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for spibus.h:</div>
<div class="dyncontent">
<div class="center"><img src="spibus_8h__incl.png" border="0" usemap="#include_2dev_2spibus_8h" alt=""/></div>
<map name="include_2dev_2spibus_8h" id="include_2dev_2spibus_8h">
<area shape="rect" id="node3" href="dev_2irqreg_8h.html" title="Interrupt management definitions." alt="" coords="227,81,313,106"/><area shape="rect" id="node9" href="device_8h.html" title="Nut/OS device definitions." alt="" coords="126,155,215,181"/><area shape="rect" id="node25" href="event_8h.html" title="Event management definitions." alt="" coords="375,81,457,106"/><area shape="rect" id="node5" href="arch_8h.html" title="cfg/arch.h" alt="" coords="240,155,315,181"/><area shape="rect" id="node7" href="stdint_8h.html" title="stdint.h" alt="" coords="283,230,345,255"/><area shape="rect" id="node20" href="irqstack_8h.html" title="dev/irqstack.h" alt="" coords="5,155,101,181"/><area shape="rect" id="node11" href="file_8h.html" title="sys/file.h" alt="" coords="162,230,232,255"/><area shape="rect" id="node13" href="types_8h.html" title="Nut/OS type declarations." alt="" coords="305,305,388,330"/><area shape="rect" id="node15" href="compiler_8h.html" title="compiler.h" alt="" coords="395,379,475,405"/><area shape="rect" id="node22" href="dev_8h.html" title="cfg/dev.h" alt="" coords="18,230,88,255"/><area shape="rect" id="node27" href="thread_8h.html" title="Thread management definitions." alt="" coords="390,155,479,181"/><area shape="rect" id="node31" href="memory_8h.html" title="Default memory layout." alt="" coords="472,230,568,255"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="spibus_8h__dep__incl.png" border="0" usemap="#include_2dev_2spibus_8hdep" alt=""/></div>
<map name="include_2dev_2spibus_8hdep" id="include_2dev_2spibus_8hdep">
<area shape="rect" id="node3" href="spibus__npl_8h.html" title="Programmable logic SPI bus declarations." alt="" coords="173,81,331,106"/><area shape="rect" id="node9" href="serialflash_8h.html" title="include/dev/serialflash.h" alt="" coords="732,81,887,106"/><area shape="rect" id="node19" href="spi__node__at45d_8h.html" title="Low level access for Atmel AT45D SPI Flash." alt="" coords="916,155,1103,181"/><area shape="rect" id="node30" href="dev_2spi__7seg_8h.html" title="ntrx" alt="" coords="2064,81,2213,106"/><area shape="rect" id="node34" href="spi__at45d_8h.html" title="AT45D." alt="" coords="1519,81,1671,106"/><area shape="rect" id="node49" href="spibus__at91_8h.html" title="AT91 specific SPI bus declarations." alt="" coords="2354,81,2520,106"/><area shape="rect" id="node58" href="spibus__avr_8h.html" title="AVR specific SPI bus declarations." alt="" coords="2798,81,2956,106"/><area shape="rect" id="node64" href="spibus__avr32_8h.html" title="AVR32 specific SPI bus declarations." alt="" coords="2981,81,3152,106"/><area shape="rect" id="node72" href="spibus__gpio_8h.html" title="GPIO SPI bus declarations." alt="" coords="3177,81,3343,106"/><area shape="rect" id="node78" href="spi__mmc_8c.html" title="dev/spi_mmc.c" alt="" coords="3367,81,3472,106"/><area shape="rect" id="node80" href="spi__mmc__gpio_8c.html" title="dev/spi_mmc_gpio.c" alt="" coords="3497,81,3633,106"/><area shape="rect" id="node82" href="spi__mmc__npl_8c.html" title="dev/spi_mmc_npl.c" alt="" coords="3658,81,3787,106"/><area shape="rect" id="node84" href="spi__vscodec0_8c.html" title="dev/spi_vscodec0.c" alt="" coords="3811,81,3940,106"/><area shape="rect" id="node86" href="dev_2spibus_8c.html" title="dev/spibus.c" alt="" coords="3965,81,4056,106"/><area shape="rect" id="node5" href="ethernut3_8h.html" title="include/arch/arm/board/ethernut3.h" alt="" coords="145,155,359,181"/><area shape="rect" id="node7" href="spibus__npl_8c.html" title="dev/spibus_npl.c" alt="" coords="5,155,120,181"/><area shape="rect" id="node11" href="spi__at45dib_8h.html" title="include/dev/spi_at45dib.h" alt="" coords="540,155,703,181"/><area shape="rect" id="node17" href="spi__at45dxb_8h.html" title="include/dev/spi_at45dxb.h" alt="" coords="727,155,891,181"/><area shape="rect" id="node27" href="uflashfs_8h.html" title="include/fs/uflashfs.h" alt="" coords="383,155,515,181"/><area shape="rect" id="node13" href="spi__at45dib_8c.html" title="Low memory routines for Atmel AT45 serial DataFlash memory chips." alt="" coords="562,230,680,255"/><area shape="rect" id="node15" href="uflashfs_8c.html" title="UFLASH File System." alt="" coords="427,230,515,255"/><area shape="rect" id="node21" href="spi__blkio__at45d_8c.html" title="Low level block I/O routines for Atmel AT45D SPI Flash." alt="" coords="939,230,1080,255"/><area shape="rect" id="node23" href="spi__flash__at45d_8c.html" title="Low level SPI Flash routines for Atmel AT45D chips." alt="" coords="1105,230,1247,255"/><area shape="rect" id="node25" href="spi__node__at45d_8c.html" title="Low level routines for Atmel AT45D SPI Flash." alt="" coords="771,230,913,255"/><area shape="rect" id="node32" href="spi__7seg_8c.html" title="Routines for 7 segment display." alt="" coords="1971,155,2076,181"/><area shape="rect" id="node36" href="nvmem__at45d_8c.html" title="Non&#45;volatile memory support using Atmel AT45 serial DataFlash memory chips." alt="" coords="1815,155,1947,181"/><area shape="rect" id="node38" href="spi__at45d_8c.html" title="Routines for Atmel AT45 serial DataFlash memory chips." alt="" coords="1127,155,1235,181"/><area shape="rect" id="node40" href="spi__at45d0_8c.html" title="First AT45D DataFlash device." alt="" coords="1260,155,1375,181"/><area shape="rect" id="node42" href="spi__at45d1_8c.html" title="Second AT45D DataFlash device." alt="" coords="1399,155,1513,181"/><area shape="rect" id="node44" href="spi__at45d2_8c.html" title="Third AT45D DataFlash device." alt="" coords="1537,155,1652,181"/><area shape="rect" id="node46" href="spi__at45d3_8c.html" title="Forth AT45D DataFlash device." alt="" coords="1676,155,1791,181"/><area shape="rect" id="node51" href="spibus0at91_8c.html" title="arch/arm/dev/atmel/spibus0at91.c" alt="" coords="2333,155,2541,181"/><area shape="rect" id="node53" href="spibus1at91_8c.html" title="arch/arm/dev/atmel/spibus1at91.c" alt="" coords="2565,155,2773,181"/><area shape="rect" id="node55" href="spibus__at91_8c.html" title="arch/arm/dev/atmel/spibus_at91.c" alt="" coords="2101,155,2309,181"/><area shape="rect" id="node60" href="spibus0avr_8c.html" title="AVR SPI bus 0 driver." alt="" coords="2981,155,3141,181"/><area shape="rect" id="node62" href="spibus__avr_8c.html" title="General AVR SPI bus driver rotuines." alt="" coords="2797,155,2957,181"/><area shape="rect" id="node66" href="arch_2avr32_2dev_2spibus_8c.html" title="General AVR32 SPI bus controller routines." alt="" coords="3349,155,3499,181"/><area shape="rect" id="node68" href="spibus0_8c.html" title="Primary AVR32 SPI bus controller." alt="" coords="3523,155,3681,181"/><area shape="rect" id="node70" href="spibus1_8c.html" title="Primary AVR32 SPI bus controller." alt="" coords="3166,155,3324,181"/><area shape="rect" id="node74" href="spibus0gpio_8c.html" title="dev/spibus0gpio.c" alt="" coords="3853,155,3976,181"/><area shape="rect" id="node76" href="spibus__gpio_8c.html" title="dev/spibus_gpio.c" alt="" coords="3707,155,3829,181"/></map>
</div>
</div>
<p><a href="spibus_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html">_NUTSPIBUS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI bus structure.  <a href="struct___n_u_t_s_p_i_b_u_s.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_n_o_d_e.html">_NUTSPINODE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI node structure.  <a href="struct___n_u_t_s_p_i_n_o_d_e.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a173056c24c915ff013c0cb8d6c4a09b8">SPI_CURRENT_MODE</a>&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>)-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a35e98b37e3ec4889a90100abe884590f">SPI_MODE_CPHA</a>&#160;&#160;&#160;0x0001</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a5a2be1003873beaa0ade10e7218d67d5">SPI_MODE_CPOL</a>&#160;&#160;&#160;0x0002</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a4e29155a2ab3ea7c452e4f8c687d81ea">SPI_MODE_FAULT</a>&#160;&#160;&#160;0x0004</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a10456b0d23f82e31464c5700acdb2b71">SPI_MODE_LOOPBACK</a>&#160;&#160;&#160;0x0400</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a75f094fee5a9dc10b88401ccd17925d3">SPI_MODE_SLAVE</a>&#160;&#160;&#160;0x0800</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#ac201d5366aa8670bc30b1697eb589e8c">SPI_MODE_CSKEEP</a>&#160;&#160;&#160;0x1000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a4e351e1a89ffe2f6739f15a7bf4068c0">SPI_MODE_CSDEC</a>&#160;&#160;&#160;0x2000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a2ffe34b025c9fc03db068b86588be010">SPI_MODE_CSHIGH</a>&#160;&#160;&#160;0x4000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a0597d7ab51e85a1cb41a6b532ceb638b">SPI_MODE_UPDATE</a>&#160;&#160;&#160;0x8000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a1ec07ad94d5f6276c1c0b41d0550fe52">SPI_MODE_0</a>&#160;&#160;&#160;0x0000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#af2af9f45539491c9753960535dc20fde">SPI_MODE_1</a>&#160;&#160;&#160;SPI_MODE_CPHA</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a8fa3edd8616f8803490c93f09243a612">SPI_MODE_2</a>&#160;&#160;&#160;SPI_MODE_CPOL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a6a091da9f9011457fe28ab25f64c858d">SPI_MODE_3</a>&#160;&#160;&#160;(SPI_MODE_CPOL | SPI_MODE_CPHA)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a6fdc67790d4389e5c1abe877160809e6">SPI_CURRENT_RATE</a>&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>)-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a5b8d3e80396bd790f42d1045d9b2a908">SPI_CURRENT_BITS</a>&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)-1)</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___n_u_t_s_p_i_b_u_s.html">_NUTSPIBUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a13aa308d06e8dd80a561824c99d97659">NUTSPIBUS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___n_u_t_s_p_i_n_o_d_e.html">_NUTSPINODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a9f84b1e3e0d80febca1d2071b04f6fc7">NutRegisterSpiDevice</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="spibus_8h.html#a13aa308d06e8dd80a561824c99d97659">NUTSPIBUS</a> *bus, int cs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register and initialize an SPI device attached to a specified bus.  <a href="#a9f84b1e3e0d80febca1d2071b04f6fc7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a6ed085329b153773ff76afa0702cf897">uint_fast16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a97c4e8b5edd13bcbbe447b1f88c43506">NutSpiBusSetMode</a> (<a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *node, <a class="el" href="stdint_8h.html#a6ed085329b153773ff76afa0702cf897">uint_fast16_t</a> mode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set SPI mode of a specified bus device.  <a href="#a97c4e8b5edd13bcbbe447b1f88c43506"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a8f075c759c74e109e8184306c663809d">uint_fast32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#a75bb7de2545f6b22c2466fb9d9d188c3">NutSpiBusSetRate</a> (<a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *node, <a class="el" href="stdint_8h.html#a8f075c759c74e109e8184306c663809d">uint_fast32_t</a> rate)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set clock rate of a specified SPI device.  <a href="#a75bb7de2545f6b22c2466fb9d9d188c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#ad0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#aa29c28c7b0a5ceb06ddbacef4d88edf6">NutSpiBusSetBits</a> (<a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *node, <a class="el" href="stdint_8h.html#ad0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a> bits)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set clock rate of a specified SPI device.  <a href="#aa29c28c7b0a5ceb06ddbacef4d88edf6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spibus_8h.html#afc8436860a2eb534dac97cdd3e595c95">NutSpiBusWait</a> (<a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *node, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> tmo)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until all SPI bus transfers are done.  <a href="#afc8436860a2eb534dac97cdd3e595c95"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>SPI bus declarations. </p>
<div class="fragment"><pre class="fragment">
 * $Id: spibus.h 3653 2011-11-14 15:20:31Z haraldkipp $
 * </pre></div> 
<p>Definition in file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a173056c24c915ff013c0cb8d6c4a09b8"></a><!-- doxytag: member="spibus.h::SPI_CURRENT_MODE" ref="a173056c24c915ff013c0cb8d6c4a09b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_CURRENT_MODE&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00050">50</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2spibus_8c_source.html#l00154">NutSpiBusSetMode()</a>.</p>

</div>
</div>
<a class="anchor" id="a35e98b37e3ec4889a90100abe884590f"></a><!-- doxytag: member="spibus.h::SPI_MODE_CPHA" ref="a35e98b37e3ec4889a90100abe884590f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_CPHA&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00052">52</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus__at91_8c_source.html#l00074">At91SpiSetup()</a>, and <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00075">Avr32SpiSetup()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a2be1003873beaa0ade10e7218d67d5"></a><!-- doxytag: member="spibus.h::SPI_MODE_CPOL" ref="a5a2be1003873beaa0ade10e7218d67d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_CPOL&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00053">53</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus__at91_8c_source.html#l00074">At91SpiSetup()</a>, <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00075">Avr32SpiSetup()</a>, and <a class="el" href="spibus0gpio_8c_source.html#l00364">GpioSpiBus0Select()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e29155a2ab3ea7c452e4f8c687d81ea"></a><!-- doxytag: member="spibus.h::SPI_MODE_FAULT" ref="a4e29155a2ab3ea7c452e4f8c687d81ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_FAULT&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00054">54</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus__at91_8c_source.html#l00074">At91SpiSetup()</a>, and <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00075">Avr32SpiSetup()</a>.</p>

</div>
</div>
<a class="anchor" id="a10456b0d23f82e31464c5700acdb2b71"></a><!-- doxytag: member="spibus.h::SPI_MODE_LOOPBACK" ref="a10456b0d23f82e31464c5700acdb2b71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_LOOPBACK&#160;&#160;&#160;0x0400</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00055">55</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus__at91_8c_source.html#l00074">At91SpiSetup()</a>, and <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00075">Avr32SpiSetup()</a>.</p>

</div>
</div>
<a class="anchor" id="a75f094fee5a9dc10b88401ccd17925d3"></a><!-- doxytag: member="spibus.h::SPI_MODE_SLAVE" ref="a75f094fee5a9dc10b88401ccd17925d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_SLAVE&#160;&#160;&#160;0x0800</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00056">56</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac201d5366aa8670bc30b1697eb589e8c"></a><!-- doxytag: member="spibus.h::SPI_MODE_CSKEEP" ref="ac201d5366aa8670bc30b1697eb589e8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_CSKEEP&#160;&#160;&#160;0x1000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00057">57</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus__at91_8c_source.html#l00074">At91SpiSetup()</a>, and <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00075">Avr32SpiSetup()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e351e1a89ffe2f6739f15a7bf4068c0"></a><!-- doxytag: member="spibus.h::SPI_MODE_CSDEC" ref="a4e351e1a89ffe2f6739f15a7bf4068c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_CSDEC&#160;&#160;&#160;0x2000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00058">58</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2ffe34b025c9fc03db068b86588be010"></a><!-- doxytag: member="spibus.h::SPI_MODE_CSHIGH" ref="a2ffe34b025c9fc03db068b86588be010" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_CSHIGH&#160;&#160;&#160;0x4000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00059">59</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus0at91_8c_source.html#l00284">At91SpiBus0Deselect()</a>, <a class="el" href="spibus0at91_8c_source.html#l00233">At91SpiBus0Select()</a>, <a class="el" href="spibus__at91_8c_source.html#l00139">At91SpiBusNodeInit()</a>, <a class="el" href="spibus0_8c_source.html#l00329">Avr32SpiBus0Deselect()</a>, <a class="el" href="spibus0_8c_source.html#l00276">Avr32SpiBus0Select()</a>, <a class="el" href="spibus1_8c_source.html#l00311">Avr32SpiBus1Deselect()</a>, <a class="el" href="spibus1_8c_source.html#l00258">Avr32SpiBus1Select()</a>, <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00145">Avr32SpiBusNodeInit()</a>, <a class="el" href="spibus0avr_8c_source.html#l00477">AvrSpiBus0Deselect()</a>, <a class="el" href="spibus0avr_8c_source.html#l00366">AvrSpiBus0NodeInit()</a>, <a class="el" href="spibus0avr_8c_source.html#l00405">AvrSpiBus0Select()</a>, <a class="el" href="spibus0gpio_8c_source.html#l00411">GpioSpiBus0Deselect()</a>, <a class="el" href="spibus0gpio_8c_source.html#l00339">GpioSpiBus0NodeInit()</a>, and <a class="el" href="spibus0gpio_8c_source.html#l00364">GpioSpiBus0Select()</a>.</p>

</div>
</div>
<a class="anchor" id="a0597d7ab51e85a1cb41a6b532ceb638b"></a><!-- doxytag: member="spibus.h::SPI_MODE_UPDATE" ref="a0597d7ab51e85a1cb41a6b532ceb638b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_UPDATE&#160;&#160;&#160;0x8000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00060">60</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus0at91_8c_source.html#l00233">At91SpiBus0Select()</a>, <a class="el" href="spibus__at91_8c_source.html#l00074">At91SpiSetup()</a>, <a class="el" href="spibus0_8c_source.html#l00276">Avr32SpiBus0Select()</a>, <a class="el" href="spibus1_8c_source.html#l00258">Avr32SpiBus1Select()</a>, <a class="el" href="arch_2avr32_2dev_2spibus_8c_source.html#l00075">Avr32SpiSetup()</a>, <a class="el" href="spibus0avr_8c_source.html#l00405">AvrSpiBus0Select()</a>, <a class="el" href="spibus__avr_8c_source.html#l00051">AvrSpiSetup()</a>, <a class="el" href="spibus0gpio_8c_source.html#l00364">GpioSpiBus0Select()</a>, <a class="el" href="spibus__gpio_8c_source.html#l00051">GpioSpiSetup()</a>, <a class="el" href="spibus__npl_8c_source.html#l00150">NplSpiBusSelect()</a>, <a class="el" href="dev_2spibus_8c_source.html#l00201">NutSpiBusSetBits()</a>, <a class="el" href="dev_2spibus_8c_source.html#l00154">NutSpiBusSetMode()</a>, and <a class="el" href="dev_2spibus_8c_source.html#l00177">NutSpiBusSetRate()</a>.</p>

</div>
</div>
<a class="anchor" id="a1ec07ad94d5f6276c1c0b41d0550fe52"></a><!-- doxytag: member="spibus.h::SPI_MODE_0" ref="a1ec07ad94d5f6276c1c0b41d0550fe52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_0&#160;&#160;&#160;0x0000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00062">62</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus0gpio_8c_source.html#l00301">GpioSpiBus0Transfer()</a>.</p>

</div>
</div>
<a class="anchor" id="af2af9f45539491c9753960535dc20fde"></a><!-- doxytag: member="spibus.h::SPI_MODE_1" ref="af2af9f45539491c9753960535dc20fde" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_1&#160;&#160;&#160;SPI_MODE_CPHA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00063">63</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus0gpio_8c_source.html#l00301">GpioSpiBus0Transfer()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fa3edd8616f8803490c93f09243a612"></a><!-- doxytag: member="spibus.h::SPI_MODE_2" ref="a8fa3edd8616f8803490c93f09243a612" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_2&#160;&#160;&#160;SPI_MODE_CPOL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00064">64</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus0gpio_8c_source.html#l00301">GpioSpiBus0Transfer()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a091da9f9011457fe28ab25f64c858d"></a><!-- doxytag: member="spibus.h::SPI_MODE_3" ref="a6a091da9f9011457fe28ab25f64c858d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_MODE_3&#160;&#160;&#160;(SPI_MODE_CPOL | SPI_MODE_CPHA)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00065">65</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="spibus__avr_8c_source.html#l00051">AvrSpiSetup()</a>, and <a class="el" href="spibus0gpio_8c_source.html#l00301">GpioSpiBus0Transfer()</a>.</p>

</div>
</div>
<a class="anchor" id="a6fdc67790d4389e5c1abe877160809e6"></a><!-- doxytag: member="spibus.h::SPI_CURRENT_RATE" ref="a6fdc67790d4389e5c1abe877160809e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_CURRENT_RATE&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00068">68</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2spibus_8c_source.html#l00177">NutSpiBusSetRate()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b8d3e80396bd790f42d1045d9b2a908"></a><!-- doxytag: member="spibus.h::SPI_CURRENT_BITS" ref="a5b8d3e80396bd790f42d1045d9b2a908" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_CURRENT_BITS&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00070">70</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2spibus_8c_source.html#l00201">NutSpiBusSetBits()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a13aa308d06e8dd80a561824c99d97659"></a><!-- doxytag: member="spibus.h::NUTSPIBUS" ref="a13aa308d06e8dd80a561824c99d97659" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___n_u_t_s_p_i_b_u_s.html">_NUTSPIBUS</a> <a class="el" href="spibus_8h.html#a13aa308d06e8dd80a561824c99d97659">NUTSPIBUS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00073">73</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a773cdd0ed090ed95c3aa5b8b9fb878d4"></a><!-- doxytag: member="spibus.h::NUTSPINODE" ref="a773cdd0ed090ed95c3aa5b8b9fb878d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___n_u_t_s_p_i_n_o_d_e.html">_NUTSPINODE</a> <a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="spibus_8h_source.html#l00074">74</a> of file <a class="el" href="spibus_8h_source.html">spibus.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9f84b1e3e0d80febca1d2071b04f6fc7"></a><!-- doxytag: member="spibus.h::NutRegisterSpiDevice" ref="a9f84b1e3e0d80febca1d2071b04f6fc7" args="(NUTDEVICE *dev, NUTSPIBUS *bus, int cs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutRegisterSpiDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spibus_8h.html#a13aa308d06e8dd80a561824c99d97659">NUTSPIBUS</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register and initialize an SPI device attached to a specified bus. </p>
<p>Calls the bus controller initialization and, if successful, initializes the SPI device and adds it to the system device list.</p>
<p>Applications should call this function during initialization for each SPI device they intend to use.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Pointer to the <a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> structure, which is provided by the device driver. </td></tr>
    <tr><td class="paramname">bus</td><td>Pointer to the <a class="el" href="spibus_8h.html#a13aa308d06e8dd80a561824c99d97659">NUTSPIBUS</a> structure, which is provided by the bus controller driver. </td></tr>
    <tr><td class="paramname">cs</td><td>Zero based chip select number for this device. Must be set to 0, if only one device is attached to the bus and no chip select line is provided.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if the device has been registered for the first time and the initialization was successful. The function returns -1, if any device with the same name had been registered previously, if the <a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> structure or the chip select is invalid or if the device or bus controller initialization failed. </dd></dl>

<p>Definition at line <a class="el" href="dev_2spibus_8c_source.html#l00072">72</a> of file <a class="el" href="dev_2spibus_8c_source.html">spibus.c</a>.</p>

<p>References <a class="el" href="spibus_8h_source.html#l00100">_NUTSPIBUS::bus_initnode</a>, <a class="el" href="spibus_8h_source.html#l00082">_NUTSPIBUS::bus_mutex</a>, <a class="el" href="device_8h_source.html#l00209">_NUTDEVICE::dev_icb</a>, <a class="el" href="spibus_8h_source.html#l00143">_NUTSPINODE::node_bus</a>, <a class="el" href="spibus_8h_source.html#l00173">_NUTSPINODE::node_cs</a>, <a class="el" href="nutdebug_8h_source.html#l00047">NUTASSERT</a>, <a class="el" href="event_8c_source.html#l00454">NutEventPost()</a>, and <a class="el" href="devreg_8c_source.html#l00129">NutRegisterDevice()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spibus_8h_a9f84b1e3e0d80febca1d2071b04f6fc7_cgraph.png" border="0" usemap="#spibus_8h_a9f84b1e3e0d80febca1d2071b04f6fc7_cgraph" alt=""/></div>
<map name="spibus_8h_a9f84b1e3e0d80febca1d2071b04f6fc7_cgraph" id="spibus_8h_a9f84b1e3e0d80febca1d2071b04f6fc7_cgraph">
<area shape="rect" id="node3" href="group__xg_event.html#gad519c6b1469621d2b3909fe58d1ac40b" title="Post an event to a specified queue." alt="" coords="212,155,308,181"/><area shape="rect" id="node28" href="group__xg_device.html#ga0d73e3153bf9f210194bd862d9b91c61" title="Register and initialize a device." alt="" coords="197,205,323,230"/><area shape="rect" id="node5" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="768,155,896,181"/><area shape="rect" id="node13" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="377,79,484,105"/><area shape="rect" id="node7" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="991,154,1089,179"/><area shape="rect" id="node11" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="963,105,1117,130"/><area shape="rect" id="node9" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1165,79,1269,105"/><area shape="rect" id="node15" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="539,5,701,30"/><area shape="rect" id="node18" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="556,54,684,79"/><area shape="rect" id="node21" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="749,5,915,30"/><area shape="rect" id="node26" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="774,54,890,79"/><area shape="rect" id="node23" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="983,55,1097,81"/><area shape="rect" id="node30" href="group__xg_device.html#ga913130771bea4118ae58e2a0ccb50a4d" title="Find device entry by name." alt="" coords="371,206,490,231"/><area shape="rect" id="node32" href="group__xg_crt_string.html#gaafa356ff1e215725834bc57e8e4fae60" title="Compare two strings." alt="" coords="590,206,650,231"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a97c4e8b5edd13bcbbe447b1f88c43506"></a><!-- doxytag: member="spibus.h::NutSpiBusSetMode" ref="a97c4e8b5edd13bcbbe447b1f88c43506" args="(NUTSPINODE *node, uint_fast16_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a6ed085329b153773ff76afa0702cf897">uint_fast16_t</a> NutSpiBusSetMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a6ed085329b153773ff76afa0702cf897">uint_fast16_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set SPI mode of a specified bus device. </p>
<p>The new mode will be used during the next transfer. If its value is SPI_CURRENT_MODE, then the mode is not updated. This can be used to query the current mode.</p>
<p>Otherwise this parameter may be the or'ed combination of the following bits:</p>
<ul>
<li>SPI_MODE_CPHA: Data updated on leading edge.</li>
<li>SPI_MODE_CPOL: Idle clock is high.</li>
<li>SPI_MODE_FAULT: Enables mode fault detection.</li>
<li>SPI_MODE_LOOPBACK: Loopback mode.</li>
<li>SPI_MODE_SLAVE: Slave mode.</li>
<li>SPI_MODE_CSKEEP: Chip select remains active after transfer.</li>
<li>SPI_MODE_CSDEC: Decoded chip selects.</li>
<li>SPI_MODE_CSHIGH: Chip select is high active.</li>
</ul>
<p>Be aware, that SPI drivers may have implemented a subset only.</p>
<p>Instead of SPI_MODE_CPHA and SPI_MODE_CPOL one of the following mode numbers may be used:</p>
<ul>
<li>SPI_MODE_0: Idle clock is low and data is captured on the rising edge.</li>
<li>SPI_MODE_1: Idle clock is low and data is captured on the falling edge.</li>
<li>SPI_MODE_2: Idle clock is high and data is captured on the falling edge.</li>
<li>SPI_MODE_3: Idle clock is high and data is captured on the rising edge.</li>
</ul>
<p>The return value may additionally contain the bit SPI_MODE_UPDATE, which indicates that here had been no transfer since the last mode update.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Specifies the SPI bus node. </td></tr>
    <tr><td class="paramname">mode</td><td>New mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Old mode. </dd></dl>

<p>Definition at line <a class="el" href="dev_2spibus_8c_source.html#l00154">154</a> of file <a class="el" href="dev_2spibus_8c_source.html">spibus.c</a>.</p>

<p>References <a class="el" href="spibus_8h_source.html#l00161">_NUTSPINODE::node_mode</a>, <a class="el" href="spibus_8h_source.html#l00050">SPI_CURRENT_MODE</a>, and <a class="el" href="spibus_8h_source.html#l00060">SPI_MODE_UPDATE</a>.</p>

</div>
</div>
<a class="anchor" id="a75bb7de2545f6b22c2466fb9d9d188c3"></a><!-- doxytag: member="spibus.h::NutSpiBusSetRate" ref="a75bb7de2545f6b22c2466fb9d9d188c3" args="(NUTSPINODE *node, uint_fast32_t rate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a8f075c759c74e109e8184306c663809d">uint_fast32_t</a> NutSpiBusSetRate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a8f075c759c74e109e8184306c663809d">uint_fast32_t</a>&#160;</td>
          <td class="paramname"><em>rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set clock rate of a specified SPI device. </p>
<p>The new clock rate will be used for the next transfer. If the given rate is beyond the capabilities of the bus controller, it will automatically adjusted before the transfer starts.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Specifies the SPI bus node. </td></tr>
    <tr><td class="paramname">rate</td><td>New clock rate, given in bits per second. If the value is SPI_CURRENT_RATE, then the current rate is kept.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Previous rate. </dd></dl>

<p>Definition at line <a class="el" href="dev_2spibus_8c_source.html#l00177">177</a> of file <a class="el" href="dev_2spibus_8c_source.html">spibus.c</a>.</p>

<p>References <a class="el" href="spibus_8h_source.html#l00161">_NUTSPINODE::node_mode</a>, <a class="el" href="spibus_8h_source.html#l00155">_NUTSPINODE::node_rate</a>, <a class="el" href="spibus_8h_source.html#l00068">SPI_CURRENT_RATE</a>, and <a class="el" href="spibus_8h_source.html#l00060">SPI_MODE_UPDATE</a>.</p>

</div>
</div>
<a class="anchor" id="aa29c28c7b0a5ceb06ddbacef4d88edf6"></a><!-- doxytag: member="spibus.h::NutSpiBusSetBits" ref="aa29c28c7b0a5ceb06ddbacef4d88edf6" args="(NUTSPINODE *node, uint_fast8_t bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ad0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a> NutSpiBusSetBits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ad0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a>&#160;</td>
          <td class="paramname"><em>bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set clock rate of a specified SPI device. </p>
<p>The new clock rate will be used for the next transfer. If the given rate is beyond the capabilities of the bus controller, it will automatically adjusted before the transfer starts.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Specifies the SPI bus node. </td></tr>
    <tr><td class="paramname">rate</td><td>New clock rate, given in bits per second. If the value is SPI_CURRENT_RATE, then the current rate is kept.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Previous rate. </dd></dl>

<p>Definition at line <a class="el" href="dev_2spibus_8c_source.html#l00201">201</a> of file <a class="el" href="dev_2spibus_8c_source.html">spibus.c</a>.</p>

<p>References <a class="el" href="spibus_8h_source.html#l00167">_NUTSPINODE::node_bits</a>, <a class="el" href="spibus_8h_source.html#l00161">_NUTSPINODE::node_mode</a>, <a class="el" href="spibus_8h_source.html#l00070">SPI_CURRENT_BITS</a>, and <a class="el" href="spibus_8h_source.html#l00060">SPI_MODE_UPDATE</a>.</p>

</div>
</div>
<a class="anchor" id="afc8436860a2eb534dac97cdd3e595c95"></a><!-- doxytag: member="spibus.h::NutSpiBusWait" ref="afc8436860a2eb534dac97cdd3e595c95" args="(NUTSPINODE *node, uint32_t tmo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutSpiBusWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spibus_8h.html#a773cdd0ed090ed95c3aa5b8b9fb878d4">NUTSPINODE</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until all SPI bus transfers are done. </p>
<p>This dummy function is used by SPI device drivers, which do not provide asynchronous transfers.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Specifies the SPI bus node. </td></tr>
    <tr><td class="paramname">tmo</td><td>Timeout in milliseconds. To disable timeout, set this parameter to NUT_WAIT_INFINITE.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="dev_2spibus_8c_source.html#l00111">111</a> of file <a class="el" href="dev_2spibus_8c_source.html">spibus.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="spibus_8h.html">spibus.h</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
