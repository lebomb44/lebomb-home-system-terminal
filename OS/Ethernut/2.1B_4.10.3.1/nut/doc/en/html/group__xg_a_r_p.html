<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: ARP</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_a_r_p.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ARP</div>  </div>
<div class="ingroups"><a class="el" href="group__xg_base_pro.html">Base Protocols</a></div></div>
<div class="contents">

<p>RFC 826 address resolution protocol.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ARP:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_a_r_p.png" border="0" alt="" usemap="#group____xg__a__r__p"/>
<map name="group____xg__a__r__p" id="group____xg__a__r__p">
<area shape="rect" id="node1" href="group__xg_base_pro.html" title="TCP/IP and UDP applications." alt="" coords="5,5,112,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___a_r_p_e_n_t_r_y.html">_ARPENTRY</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ARP entry structure.  <a href="struct___a_r_p_e_n_t_r_y.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga2576f3ba0fd45696e1827878305944d6">ATF_REM</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry marked for removal.  <a href="#ga2576f3ba0fd45696e1827878305944d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga1d6c998dda361d89fbf2f867e88ef575">ATF_COM</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Completed entry.  <a href="#ga1d6c998dda361d89fbf2f867e88ef575"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gad9461bf03d724ba90c0defb77c623fd8">ATF_PERM</a>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Permanent entry.  <a href="#gad9461bf03d724ba90c0defb77c623fd8"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___a_r_p_e_n_t_r_y.html">_ARPENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gaa581e4af638bebda933cac439f4e01d2">ARPENTRY</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ARP entry type.  <a href="#gaa581e4af638bebda933cac439f4e01d2"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga714762bc6a1a681504fa425746497e7d">NutArpCacheUpdate</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="structip.html">ip</a>, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *ha)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Update an ARP entry.  <a href="#ga714762bc6a1a681504fa425746497e7d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gaa81c81a0e20751199a14e0bf10773a0d">NutArpCacheQuery</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, CONST <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="structip.html">ip</a>, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *mac)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query MAC address for a specified IP address.  <a href="#gaa81c81a0e20751199a14e0bf10773a0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga7561577580e637513a02fc8cf82ccc2d">NutArpInput</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming ARP packets.  <a href="#ga7561577580e637513a02fc8cf82ccc2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gabac6d94d31a9cac4a198e893e148ff11">NutArpAllocNetBuf</a> (<a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> type, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="structip.html">ip</a>, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *mac)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate an ARP network buffer structure.  <a href="#gabac6d94d31a9cac4a198e893e148ff11"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga6a7db32bf7002c79ca97cc405360ffd0">NutArpOutput</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, <a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an ARP packet.  <a href="#ga6a7db32bf7002c79ca97cc405360ffd0"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
ARP Configuration</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp3c75342061858e940fc0f5ad758ad839"></a> The Nut/OS Configurator may be used to override the default values. </p>
</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gaa04ce72a347eb29b9fa64e976337f878">MAX_ARPAGE</a>&#160;&#160;&#160;9</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum age of an entry in the ARP cache in minutes.  <a href="#gaa04ce72a347eb29b9fa64e976337f878"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gaa8285ef314585a34c8733a3d2cd8e3f1">MAX_ARPREQUESTS</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of ARP requests generated per query.  <a href="#gaa8285ef314585a34c8733a3d2cd8e3f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gaecc6cb0b5229e10736fd83a78c14bf80">MIN_ARPWAIT</a>&#160;&#160;&#160;500</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum wait before sending out a new ARP request.  <a href="#gaecc6cb0b5229e10736fd83a78c14bf80"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>RFC 826 address resolution protocol. </p>
<p>ARP is used to map IP addresses to hardware addresses. Each network interface of Nut/Net keeps its own mapping table.</p>
<p>When an IP packet has to be sent out, IP needs the hardware address to pass it to the Ethernet layer. If the mapping is not in the ARP cache, an Ethernet broadcast packet is sent to the local network requesting the physical hardware address for the given IP address.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd><p class="startdd">Add functions to manually add or remove ARP entries. </p>
<p class="enddd">Add function to query ARP tables. </p>
</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000043">Todo:</a></b></dt><dd>Response may reuse received ARP packet. </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga2576f3ba0fd45696e1827878305944d6"></a><!-- doxytag: member="if_var.h::ATF_REM" ref="ga2576f3ba0fd45696e1827878305944d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATF_REM&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Entry marked for removal. </p>

<p>Definition at line <a class="el" href="if__var_8h_source.html#l00125">125</a> of file <a class="el" href="if__var_8h_source.html">if_var.h</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00448">NutArpCacheQuery()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1d6c998dda361d89fbf2f867e88ef575"></a><!-- doxytag: member="if_var.h::ATF_COM" ref="ga1d6c998dda361d89fbf2f867e88ef575" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATF_COM&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Completed entry. </p>

<p>Definition at line <a class="el" href="if__var_8h_source.html#l00126">126</a> of file <a class="el" href="if__var_8h_source.html">if_var.h</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00448">NutArpCacheQuery()</a>, and <a class="el" href="arpcache_8c_source.html#l00393">NutArpCacheUpdate()</a>.</p>

</div>
</div>
<a class="anchor" id="gad9461bf03d724ba90c0defb77c623fd8"></a><!-- doxytag: member="if_var.h::ATF_PERM" ref="gad9461bf03d724ba90c0defb77c623fd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATF_PERM&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Permanent entry. </p>

<p>Definition at line <a class="el" href="if__var_8h_source.html#l00127">127</a> of file <a class="el" href="if__var_8h_source.html">if_var.h</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00393">NutArpCacheUpdate()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa04ce72a347eb29b9fa64e976337f878"></a><!-- doxytag: member="arpcache.c::MAX_ARPAGE" ref="gaa04ce72a347eb29b9fa64e976337f878" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ARPAGE&#160;&#160;&#160;9</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum age of an entry in the ARP cache in minutes. </p>
<p>Outdated entries will be regularly removed, forcing the Ethernet interface to generate new ARP requests. This way MAC address changes are detected. </p>

<p>Definition at line <a class="el" href="arpcache_8c_source.html#l00200">200</a> of file <a class="el" href="arpcache_8c_source.html">arpcache.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa8285ef314585a34c8733a3d2cd8e3f1"></a><!-- doxytag: member="arpcache.c::MAX_ARPREQUESTS" ref="gaa8285ef314585a34c8733a3d2cd8e3f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ARPREQUESTS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum number of ARP requests generated per query. </p>
<p>If no ARP response is received after sending out the specified number of request, the related IP address is considered unreachable. </p>

<p>Definition at line <a class="el" href="arpcache_8c_source.html#l00211">211</a> of file <a class="el" href="arpcache_8c_source.html">arpcache.c</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00448">NutArpCacheQuery()</a>.</p>

</div>
</div>
<a class="anchor" id="gaecc6cb0b5229e10736fd83a78c14bf80"></a><!-- doxytag: member="arpcache.c::MIN_ARPWAIT" ref="gaecc6cb0b5229e10736fd83a78c14bf80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_ARPWAIT&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Minimum wait before sending out a new ARP request. </p>
<p>The specified number of milliseconds will be doubled on each retry. </p>

<p>Definition at line <a class="el" href="arpcache_8c_source.html#l00221">221</a> of file <a class="el" href="arpcache_8c_source.html">arpcache.c</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00448">NutArpCacheQuery()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gaa581e4af638bebda933cac439f4e01d2"></a><!-- doxytag: member="if_var.h::ARPENTRY" ref="gaa581e4af638bebda933cac439f4e01d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___a_r_p_e_n_t_r_y.html">_ARPENTRY</a> <a class="el" href="group__xg_a_r_p.html#gaa581e4af638bebda933cac439f4e01d2">ARPENTRY</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ARP entry type. </p>

<p>Definition at line <a class="el" href="if__var_8h_source.html#l00132">132</a> of file <a class="el" href="if__var_8h_source.html">if_var.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga714762bc6a1a681504fa425746497e7d"></a><!-- doxytag: member="arpcache.c::NutArpCacheUpdate" ref="ga714762bc6a1a681504fa425746497e7d" args="(NUTDEVICE *dev, uint32_t ip, uint8_t *ha)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutArpCacheUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>ha</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update an ARP entry. </p>
<p>If an entry with the same IP address exists, then this entry is updated. If no entry exists, a new one is created. All threads waiting for address resolution are woken up.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is automatically called on each incoming ARP telegram. Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device. </td></tr>
    <tr><td class="paramname">ip</td><td>Requested IP address in network byte order. </td></tr>
    <tr><td class="paramname">ha</td><td>Pointer to a buffer which receives the MAC address. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="arpcache_8c_source.html#l00393">393</a> of file <a class="el" href="arpcache_8c_source.html">arpcache.c</a>.</p>

<p>References <a class="el" href="netdebug_8c_source.html#l00103">__tcp_trf</a>, <a class="el" href="netdebug_8c_source.html#l00102">__tcp_trs</a>, <a class="el" href="if__var_8h_source.html#l00145">_ARPENTRY::ae_flags</a>, <a class="el" href="if__var_8h_source.html#l00144">_ARPENTRY::ae_ha</a>, <a class="el" href="if__var_8h_source.html#l00146">_ARPENTRY::ae_outdated</a>, <a class="el" href="if__var_8h_source.html#l00147">_ARPENTRY::ae_tq</a>, <a class="el" href="if__var_8h_source.html#l00126">ATF_COM</a>, <a class="el" href="if__var_8h_source.html#l00127">ATF_PERM</a>, <a class="el" href="device_8h_source.html#l00209">_NUTDEVICE::dev_icb</a>, <a class="el" href="fprintf_8c_source.html#l00068">fprintf()</a>, <a class="el" href="fputc_8c_source.html#l00069">fputc()</a>, <a class="el" href="inet_8c_source.html#l00175">inet_ntoa()</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, and <a class="el" href="event_8c_source.html#l00533">NutEventBroadcast()</a>.</p>

<p>Referenced by <a class="el" href="arpin_8c_source.html#l00143">NutArpInput()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_a_r_p_ga714762bc6a1a681504fa425746497e7d_cgraph.png" border="0" usemap="#group__xg_a_r_p_ga714762bc6a1a681504fa425746497e7d_cgraph" alt=""/></div>
<map name="group__xg_a_r_p_ga714762bc6a1a681504fa425746497e7d_cgraph" id="group__xg_a_r_p_ga714762bc6a1a681504fa425746497e7d_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_stdio.html#ga2f7351ee13f3f4c465c65e849a12a3fd" title="Print formatted data to a stream." alt="" coords="227,103,279,129"/><area shape="rect" id="node21" href="group__xg_crt_stdio.html#gabe6299d5823dd023e610aaa619735a3f" title="Write a character to a stream." alt="" coords="421,154,469,179"/><area shape="rect" id="node24" href="group__xg_i_p.html#ga9daa3cef32d6bcb76a95d0e869fd8b7a" title="Convert numeric IP address into decimal dotted ASCII representation." alt="" coords="217,205,290,230"/><area shape="rect" id="node26" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="219,254,288,279"/><area shape="rect" id="node28" href="group__xg_event.html#ga575628f89864beb575a161f10f3de62c" title="Broadcast an event to a specified queue." alt="" coords="190,303,317,329"/><area shape="rect" id="node5" href="group__xg_crt_stdio.html#ga50c4b673b1d86ab16f2a46aff7122c5c" title="Write argument list to a stream using a given format." alt="" coords="417,103,474,129"/><area shape="rect" id="node7" href="group__xg_crt_stdio.html#ga651a41ea9a05d4294a58c1ec83e13f18" title="Write formatted data using a given output function." alt="" coords="630,103,679,129"/><area shape="rect" id="node19" href="io_8h.html#a901fa187b164dd6faaac1b62c88614b5" title="_write" alt="" coords="627,153,682,178"/><area shape="rect" id="node9" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="837,103,896,129"/><area shape="rect" id="node11" href="group__xg_crt_string.html#ga9d0726a46ae033e7755fd1313da76ab1" title="Locate byte in a memory region." alt="" coords="833,153,901,178"/><area shape="rect" id="node13" href="group__xg_crt_string.html#ga7b9fc4834c90ac78977b5fbb3076c5ac" title="Compute the length of a NUL terminated string." alt="" coords="840,202,893,227"/><area shape="rect" id="node15" href="group__xg_crt_string.html#ga5f9abaa6c5ffa26025ca901c14cb1056" title="Copy a string." alt="" coords="839,5,894,30"/><area shape="rect" id="node17" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="845,54,888,79"/><area shape="rect" id="node30" href="group__xg_event.html#ga21d9c3cc7ae2c9bddfb130b54b081076" title="Asynchronously broadcast an event to a specified queue." alt="" coords="366,229,525,254"/><area shape="rect" id="node40" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="392,305,499,330"/><area shape="rect" id="node32" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="803,305,931,330"/><area shape="rect" id="node34" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="1025,305,1124,330"/><area shape="rect" id="node38" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="998,255,1151,281"/><area shape="rect" id="node36" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1200,355,1304,381"/><area shape="rect" id="node42" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="573,354,736,379"/><area shape="rect" id="node45" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="591,305,719,330"/><area shape="rect" id="node48" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="784,354,949,379"/><area shape="rect" id="node53" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="809,403,925,429"/><area shape="rect" id="node50" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="1017,354,1132,379"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa81c81a0e20751199a14e0bf10773a0d"></a><!-- doxytag: member="arpcache.c::NutArpCacheQuery" ref="gaa81c81a0e20751199a14e0bf10773a0d" args="(NUTDEVICE *dev, CONST uint32_t ip, uint8_t *mac)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutArpCacheQuery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>mac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query MAC address for a specified IP address. </p>
<p>If no entry is available in the ARP cache, an incomplete entry is created and ARP requests are generated on increasing time intervals. The calling thread is suspended until a matching ARP response is received or until a number of requests have been generated without receiving a response.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is automatically called on each outgoing IP packet. Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device. </td></tr>
    <tr><td class="paramname">ip</td><td>IP address of which the caller asked the MAC address. </td></tr>
    <tr><td class="paramname">mac</td><td>Buffer for the retrieved MAC address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if address resolved, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="arpcache_8c_source.html#l00448">448</a> of file <a class="el" href="arpcache_8c_source.html">arpcache.c</a>.</p>

<p>References <a class="el" href="netdebug_8c_source.html#l00103">__tcp_trf</a>, <a class="el" href="netdebug_8c_source.html#l00102">__tcp_trs</a>, <a class="el" href="if__var_8h_source.html#l00145">_ARPENTRY::ae_flags</a>, <a class="el" href="if__var_8h_source.html#l00144">_ARPENTRY::ae_ha</a>, <a class="el" href="if__var_8h_source.html#l00147">_ARPENTRY::ae_tq</a>, <a class="el" href="if__arp_8h_source.html#l00100">ARPOP_REQUEST</a>, <a class="el" href="if__var_8h_source.html#l00126">ATF_COM</a>, <a class="el" href="if__var_8h_source.html#l00125">ATF_REM</a>, <a class="el" href="device_8h_source.html#l00209">_NUTDEVICE::dev_icb</a>, <a class="el" href="fprintf_8c_source.html#l00068">fprintf()</a>, <a class="el" href="inet_8c_source.html#l00175">inet_ntoa()</a>, <a class="el" href="arpcache_8c_source.html#l00211">MAX_ARPREQUESTS</a>, <a class="el" href="arpcache_8c_source.html#l00221">MIN_ARPWAIT</a>, <a class="el" href="arpout_8c_source.html#l00141">NutArpAllocNetBuf()</a>, <a class="el" href="arpout_8c_source.html#l00186">NutArpOutput()</a>, <a class="el" href="event_8c_source.html#l00271">NutEventWait()</a>, and <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_a_r_p_gaa81c81a0e20751199a14e0bf10773a0d_cgraph.png" border="0" usemap="#group__xg_a_r_p_gaa81c81a0e20751199a14e0bf10773a0d_cgraph" alt=""/></div>
<map name="group__xg_a_r_p_gaa81c81a0e20751199a14e0bf10773a0d_cgraph" id="group__xg_a_r_p_gaa81c81a0e20751199a14e0bf10773a0d_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_stdio.html#ga2f7351ee13f3f4c465c65e849a12a3fd" title="Print formatted data to a stream." alt="" coords="217,127,269,153"/><area shape="rect" id="node21" href="group__xg_i_p.html#ga9daa3cef32d6bcb76a95d0e869fd8b7a" title="Convert numeric IP address into decimal dotted ASCII representation." alt="" coords="206,177,279,202"/><area shape="rect" id="node23" href="group__xg_a_r_p.html#gabac6d94d31a9cac4a198e893e148ff11" title="Allocate an ARP network buffer structure." alt="" coords="181,327,304,353"/><area shape="rect" id="node27" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="547,289,650,314"/><area shape="rect" id="node34" href="group__xg_a_r_p.html#ga6a7db32bf7002c79ca97cc405360ffd0" title="Send an ARP packet." alt="" coords="195,278,290,303"/><area shape="rect" id="node37" href="group__xg_event.html#ga79af18e0842286182af7c5b647526ce5" title="Wait for an event in a specified queue." alt="" coords="195,527,290,553"/><area shape="rect" id="node5" href="group__xg_crt_stdio.html#ga50c4b673b1d86ab16f2a46aff7122c5c" title="Write argument list to a stream using a given format." alt="" coords="382,127,439,153"/><area shape="rect" id="node7" href="group__xg_crt_stdio.html#ga651a41ea9a05d4294a58c1ec83e13f18" title="Write formatted data using a given output function." alt="" coords="574,103,623,129"/><area shape="rect" id="node19" href="io_8h.html#a901fa187b164dd6faaac1b62c88614b5" title="_write" alt="" coords="571,153,626,178"/><area shape="rect" id="node9" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="781,153,840,178"/><area shape="rect" id="node11" href="group__xg_crt_string.html#ga9d0726a46ae033e7755fd1313da76ab1" title="Locate byte in a memory region." alt="" coords="777,202,845,227"/><area shape="rect" id="node13" href="group__xg_crt_string.html#ga7b9fc4834c90ac78977b5fbb3076c5ac" title="Compute the length of a NUL terminated string." alt="" coords="784,5,837,30"/><area shape="rect" id="node15" href="group__xg_crt_string.html#ga5f9abaa6c5ffa26025ca901c14cb1056" title="Copy a string." alt="" coords="783,54,838,79"/><area shape="rect" id="node17" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="789,103,832,129"/><area shape="rect" id="node25" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="359,377,463,402"/><area shape="rect" id="node30" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="376,278,445,303"/><area shape="rect" id="node32" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="377,327,445,353"/><area shape="rect" id="node39" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="357,578,464,603"/><area shape="rect" id="node41" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="517,527,680,553"/><area shape="rect" id="node43" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="942,515,1095,541"/><area shape="rect" id="node45" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="535,629,663,654"/><area shape="rect" id="node63" href="group__xg_timer.html#ga91b42f5fd833e1b72c27b3bfb0ed0af7" title="Start a system timer." alt="" coords="361,765,460,790"/><area shape="rect" id="node79" href="group__xg_event.html#gaaa944c4484d068bdacd8220b7e081302" title="Timer callback in case of event timeout." alt="" coords="353,426,469,451"/><area shape="rect" id="node47" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="747,603,875,629"/><area shape="rect" id="node54" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="728,702,893,727"/><area shape="rect" id="node59" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="753,653,869,678"/><area shape="rect" id="node49" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="969,626,1068,651"/><area shape="rect" id="node51" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1149,701,1253,726"/><area shape="rect" id="node56" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="961,751,1076,777"/><area shape="rect" id="node65" href="group__xg_timer.html#gaf104e0c3660b2a77bd0d7b00c4fd741c" title="Start a system timer." alt="" coords="535,765,662,790"/><area shape="rect" id="node71" href="group__xg_nut_arch_arm_os_timer_at91.html#gabb52a4e7f513a7c586898065e0a0c81a" title="Calculate system ticks for a given number of milliseconds." alt="" coords="527,839,671,865"/><area shape="rect" id="node67" href="group__xg_timer.html#ga1e47b683a996583386ebef7e7c92501e" title="Create a new system timer." alt="" coords="755,751,866,777"/><area shape="rect" id="node73" href="group__xg_nut_arch_arm_os_timer_at91.html#ga2724f52da15ed45123a32c1ed7e148f0" title="Return the number of system ticks per second." alt="" coords="754,853,867,878"/><area shape="rect" id="node75" href="group__xg_timer.html#ga784a7f52b5167c777149fd1d874c99f0" title="Return the CPU clock frequency." alt="" coords="961,853,1076,878"/><area shape="rect" id="node77" href="group__xg_nut_arch_arm_os_timer_gba.html#ga7d11c53224db0028ad4838f8b9df9872" title="Return the CPU clock in Hertz." alt="" coords="1144,853,1259,878"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7561577580e637513a02fc8cf82ccc2d"></a><!-- doxytag: member="arpin.c::NutArpInput" ref="ga7561577580e637513a02fc8cf82ccc2d" args="(NUTDEVICE *dev, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutArpInput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming ARP packets. </p>
<p>Packets not destined to us or packets with unsupported address type or item length are silently discarded.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This routine is called by the Ethernet layer on incoming ARP packets. Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device that received the packet. </td></tr>
    <tr><td class="paramname">nb</td><td>Pointer to a network buffer structure containing the ARP packet. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="arpin_8c_source.html#l00143">143</a> of file <a class="el" href="arpin_8c_source.html">arpin.c</a>.</p>

<p>References <a class="el" href="if__arp_8h_source.html#l00118">arphdr::ar_hln</a>, <a class="el" href="if__arp_8h_source.html#l00112">arphdr::ar_hrd</a>, <a class="el" href="if__arp_8h_source.html#l00120">arphdr::ar_op</a>, <a class="el" href="if__arp_8h_source.html#l00119">arphdr::ar_pln</a>, <a class="el" href="if__arp_8h_source.html#l00115">arphdr::ar_pro</a>, <a class="el" href="if__ether_8h_source.html#l00165">ether_arp::arp_sha</a>, <a class="el" href="if__ether_8h_source.html#l00166">ether_arp::arp_spa</a>, <a class="el" href="if__ether_8h_source.html#l00168">ether_arp::arp_tpa</a>, <a class="el" href="if__arp_8h_source.html#l00098">ARPHRD_ETHER</a>, <a class="el" href="if__arp_8h_source.html#l00101">ARPOP_REPLY</a>, <a class="el" href="if__arp_8h_source.html#l00100">ARPOP_REQUEST</a>, <a class="el" href="device_8h_source.html#l00209">_NUTDEVICE::dev_icb</a>, <a class="el" href="if__ether_8h_source.html#l00164">ether_arp::ea_hdr</a>, <a class="el" href="if__ether_8h_source.html#l00103">ETHERTYPE_IP</a>, <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="if__var_8h_source.html#l00198">ifnet::if_local_ip</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, <a class="el" href="types_8h_source.html#l00349">ntohs</a>, <a class="el" href="arpout_8c_source.html#l00141">NutArpAllocNetBuf()</a>, <a class="el" href="arpcache_8c_source.html#l00393">NutArpCacheUpdate()</a>, <a class="el" href="arpout_8c_source.html#l00186">NutArpOutput()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="ethin_8c_source.html#l00156">NutEtherInput()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_a_r_p_ga7561577580e637513a02fc8cf82ccc2d_cgraph.png" border="0" usemap="#group__xg_a_r_p_ga7561577580e637513a02fc8cf82ccc2d_cgraph" alt=""/></div>
<map name="group__xg_a_r_p_ga7561577580e637513a02fc8cf82ccc2d_cgraph" id="group__xg_a_r_p_ga7561577580e637513a02fc8cf82ccc2d_cgraph">
<area shape="rect" id="node3" href="group__xg_a_r_p.html#gabac6d94d31a9cac4a198e893e148ff11" title="Allocate an ARP network buffer structure." alt="" coords="148,105,271,130"/><area shape="rect" id="node7" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="503,30,606,55"/><area shape="rect" id="node14" href="group__xg_a_r_p.html#ga714762bc6a1a681504fa425746497e7d" title="Update an ARP entry." alt="" coords="142,229,277,254"/><area shape="rect" id="node67" href="group__xg_a_r_p.html#ga6a7db32bf7002c79ca97cc405360ffd0" title="Send an ARP packet." alt="" coords="162,154,257,179"/><area shape="rect" id="node5" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="337,55,441,81"/><area shape="rect" id="node10" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="355,154,424,179"/><area shape="rect" id="node12" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="355,105,423,130"/><area shape="rect" id="node16" href="group__xg_crt_stdio.html#ga2f7351ee13f3f4c465c65e849a12a3fd" title="Print formatted data to a stream." alt="" coords="363,203,415,229"/><area shape="rect" id="node34" href="group__xg_i_p.html#ga9daa3cef32d6bcb76a95d0e869fd8b7a" title="Convert numeric IP address into decimal dotted ASCII representation." alt="" coords="353,305,426,330"/><area shape="rect" id="node36" href="group__xg_crt_stdio.html#gabe6299d5823dd023e610aaa619735a3f" title="Write a character to a stream." alt="" coords="531,254,579,279"/><area shape="rect" id="node40" href="group__xg_event.html#ga575628f89864beb575a161f10f3de62c" title="Broadcast an event to a specified queue." alt="" coords="326,354,453,379"/><area shape="rect" id="node18" href="group__xg_crt_stdio.html#ga50c4b673b1d86ab16f2a46aff7122c5c" title="Write argument list to a stream using a given format." alt="" coords="526,203,583,229"/><area shape="rect" id="node20" href="group__xg_crt_stdio.html#ga651a41ea9a05d4294a58c1ec83e13f18" title="Write formatted data using a given output function." alt="" coords="713,203,762,229"/><area shape="rect" id="node32" href="io_8h.html#a901fa187b164dd6faaac1b62c88614b5" title="_write" alt="" coords="710,253,765,278"/><area shape="rect" id="node22" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="920,253,979,278"/><area shape="rect" id="node24" href="group__xg_crt_string.html#ga9d0726a46ae033e7755fd1313da76ab1" title="Locate byte in a memory region." alt="" coords="915,302,983,327"/><area shape="rect" id="node26" href="group__xg_crt_string.html#ga7b9fc4834c90ac78977b5fbb3076c5ac" title="Compute the length of a NUL terminated string." alt="" coords="923,105,976,130"/><area shape="rect" id="node28" href="group__xg_crt_string.html#ga5f9abaa6c5ffa26025ca901c14cb1056" title="Copy a string." alt="" coords="922,154,977,179"/><area shape="rect" id="node30" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="928,203,971,229"/><area shape="rect" id="node42" href="group__xg_event.html#ga21d9c3cc7ae2c9bddfb130b54b081076" title="Asynchronously broadcast an event to a specified queue." alt="" coords="658,321,817,346"/><area shape="rect" id="node52" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="501,410,608,435"/><area shape="rect" id="node44" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="885,422,1013,447"/><area shape="rect" id="node46" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="1108,421,1207,446"/><area shape="rect" id="node50" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="1081,371,1234,397"/><area shape="rect" id="node48" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1283,446,1387,471"/><area shape="rect" id="node54" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="656,422,819,447"/><area shape="rect" id="node57" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="673,471,801,497"/><area shape="rect" id="node60" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="867,471,1032,497"/><area shape="rect" id="node65" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="891,521,1007,546"/><area shape="rect" id="node62" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="1100,522,1215,547"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabac6d94d31a9cac4a198e893e148ff11"></a><!-- doxytag: member="arpout.c::NutArpAllocNetBuf" ref="gabac6d94d31a9cac4a198e893e148ff11" args="(uint16_t type, uint32_t ip, uint8_t *mac)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a>* NutArpAllocNetBuf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>mac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate an ARP network buffer structure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of ARP packet. </td></tr>
    <tr><td class="paramname">ip</td><td>Target IP address. </td></tr>
    <tr><td class="paramname">mac</td><td>Target MAC address, null pointer for broadcast.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the allocated network buffer structure or 0 on failure. </dd></dl>

<p>Definition at line <a class="el" href="arpout_8c_source.html#l00141">141</a> of file <a class="el" href="arpout_8c_source.html">arpout.c</a>.</p>

<p>References <a class="el" href="if__arp_8h_source.html#l00118">arphdr::ar_hln</a>, <a class="el" href="if__arp_8h_source.html#l00112">arphdr::ar_hrd</a>, <a class="el" href="if__arp_8h_source.html#l00120">arphdr::ar_op</a>, <a class="el" href="if__arp_8h_source.html#l00119">arphdr::ar_pln</a>, <a class="el" href="if__arp_8h_source.html#l00115">arphdr::ar_pro</a>, <a class="el" href="if__ether_8h_source.html#l00167">ether_arp::arp_tha</a>, <a class="el" href="if__ether_8h_source.html#l00168">ether_arp::arp_tpa</a>, <a class="el" href="if__arp_8h_source.html#l00098">ARPHRD_ETHER</a>, <a class="el" href="if__ether_8h_source.html#l00164">ether_arp::ea_hdr</a>, <a class="el" href="if__ether_8h_source.html#l00103">ETHERTYPE_IP</a>, <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="memset_8c_source.html#l00088">memset()</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, <a class="el" href="netbuf_8h_source.html#l00132">NBAF_NETWORK</a>, <a class="el" href="netbuf_8c_source.html#l00173">NutNetBufAlloc()</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00448">NutArpCacheQuery()</a>, and <a class="el" href="arpin_8c_source.html#l00143">NutArpInput()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_a_r_p_gabac6d94d31a9cac4a198e893e148ff11_cgraph.png" border="0" usemap="#group__xg_a_r_p_gabac6d94d31a9cac4a198e893e148ff11_cgraph" alt=""/></div>
<map name="group__xg_a_r_p_gabac6d94d31a9cac4a198e893e148ff11_cgraph" id="group__xg_a_r_p_gabac6d94d31a9cac4a198e893e148ff11_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="193,5,263,30"/><area shape="rect" id="node5" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="194,54,262,79"/><area shape="rect" id="node7" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="176,103,280,129"/><area shape="rect" id="node9" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="329,103,431,129"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6a7db32bf7002c79ca97cc405360ffd0"></a><!-- doxytag: member="arpout.c::NutArpOutput" ref="ga6a7db32bf7002c79ca97cc405360ffd0" args="(NUTDEVICE *dev, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutArpOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send an ARP packet. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device to use. </td></tr>
    <tr><td class="paramname">nb</td><td>Network buffer structure containing the packet to be sent. The structure must have been allocated by a previous call <a class="el" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re-allocate a network buffer part.">NutNetBufAlloc()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 in case of any errors. </dd></dl>

<p>Definition at line <a class="el" href="arpout_8c_source.html#l00186">186</a> of file <a class="el" href="arpout_8c_source.html">arpout.c</a>.</p>

<p>References <a class="el" href="if__ether_8h_source.html#l00165">ether_arp::arp_sha</a>, <a class="el" href="if__ether_8h_source.html#l00166">ether_arp::arp_spa</a>, <a class="el" href="if__ether_8h_source.html#l00167">ether_arp::arp_tha</a>, <a class="el" href="device_8h_source.html#l00209">_NUTDEVICE::dev_icb</a>, <a class="el" href="if__ether_8h_source.html#l00104">ETHERTYPE_ARP</a>, <a class="el" href="if__var_8h_source.html#l00198">ifnet::if_local_ip</a>, <a class="el" href="if__var_8h_source.html#l00197">ifnet::if_mac</a>, <a class="el" href="if__var_8h_source.html#l00207">ifnet::if_output</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c_source.html#l00448">NutArpCacheQuery()</a>, and <a class="el" href="arpin_8c_source.html#l00143">NutArpInput()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_a_r_p_ga6a7db32bf7002c79ca97cc405360ffd0_cgraph.png" border="0" usemap="#group__xg_a_r_p_ga6a7db32bf7002c79ca97cc405360ffd0_cgraph" alt=""/></div>
<map name="group__xg_a_r_p_ga6a7db32bf7002c79ca97cc405360ffd0_cgraph" id="group__xg_a_r_p_ga6a7db32bf7002c79ca97cc405360ffd0_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="149,5,219,30"/></map>
</div>
</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
