<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: SPI Digital I/O</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_spi_dig_io.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SPI Digital I/O</div>  </div>
<div class="ingroups"><a class="el" href="group__xg_hardware_avr.html">Special Hardware</a></div></div>
<div class="contents">

<p>SPI controlled digital input and output ports.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for SPI Digital I/O:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_spi_dig_io.png" border="0" alt="" usemap="#group____xg__spi__dig__io"/>
<map name="group____xg__spi__dig__io" id="group____xg__spi__dig__io">
<area shape="rect" id="node1" href="group__xg_hardware_avr.html" title="Support routines for direct hardware access." alt="" coords="5,5,125,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_spi_dig_io.html#gaf09afc0da334a903f2c6d8c98c85c6e3">SpiDigitalGet</a> (<a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a> num)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query digital inputs.  <a href="#gaf09afc0da334a903f2c6d8c98c85c6e3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_spi_dig_io.html#ga8d6321737dadc1a2cc92a6911497485a">SpiDigitalSet</a> (<a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a> num, <a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> bits)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set digital outputs.  <a href="#ga8d6321737dadc1a2cc92a6911497485a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_spi_dig_io.html#gac166df3b02135dbbc8bb0582c24cb5b0">SpiDigitalInit</a> (<a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a> *inputs, <a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a> *outputs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the digital I/O shift register interface.  <a href="#gac166df3b02135dbbc8bb0582c24cb5b0"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>SPI controlled digital input and output ports. </p>
<p>This simple driver supports digital I/O ports like relay outputs and optocoupler inputs. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaf09afc0da334a903f2c6d8c98c85c6e3"></a><!-- doxytag: member="spidigio.c::SpiDigitalGet" ref="gaf09afc0da334a903f2c6d8c98c85c6e3" args="(ureg_t num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> SpiDigitalGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a>&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query digital inputs. </p>
<p><a class="el" href="spidigio_8h.html#aa4c775ac4621267b278413108527b5e6">SpiDigitalInit()</a> must have been called by the application before calling this function.</p>
<p>This routine does not check the validity of the parameter.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number of bits to query, typically 8, 16, 24 or the maximum value of 32. This number should exactly match the number of input pins. If it is lower, only the most significant bits are returned. However, this may be used by an application to scan these bits more often with reduced overhead.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Binary value of the requested inputs. Only the specified number of bits are used. Bit 0 is the one, which has been shifted out last. </dd></dl>

<p>Definition at line <a class="el" href="spidigio_8c_source.html#l00272">272</a> of file <a class="el" href="spidigio_8c_source.html">spidigio.c</a>.</p>

<p>References <a class="el" href="arm_8h_source.html#l00206">bit_is_set</a>, <a class="el" href="arm_8h_source.html#l00205">cbi</a>, <a class="el" href="arm_8h_source.html#l00204">sbi</a>, <a class="el" href="avrpio_8h_source.html#l00171">SPIDIGIO_LDI_BIT</a>, <a class="el" href="spidigio_8c_source.html#l00177">SPIDIGIO_LDI_PORT</a>, <a class="el" href="avrpio_8h_source.html#l00147">SPIDIGIO_SIN_BIT</a>, <a class="el" href="avrpio_8h_source.html#l00151">SPIDIGIO_SIN_PIN</a>, <a class="el" href="avrpio_8h_source.html#l00139">SPIDIGIO_SOUT_BIT</a>, and <a class="el" href="spidigio_8c_source.html#l00106">SPIDIGIO_SOUT_PORT</a>.</p>

</div>
</div>
<a class="anchor" id="ga8d6321737dadc1a2cc92a6911497485a"></a><!-- doxytag: member="spidigio.c::SpiDigitalSet" ref="ga8d6321737dadc1a2cc92a6911497485a" args="(ureg_t num, uint32_t bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SpiDigitalSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a>&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set digital outputs. </p>
<p><a class="el" href="spidigio_8h.html#aa4c775ac4621267b278413108527b5e6">SpiDigitalInit()</a> must have been called by the application before calling this function.</p>
<p>This routine does not check the validity of any parameter.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number of bits to set, typically 8, 16, 24 or 32, which is the maximum. The number must not be lower than the number of shift register output bits. </td></tr>
    <tr><td class="paramname">bits</td><td>The bit value to set. Only the number of bits specified are used, of which the most significant bit is shifted in first. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spidigio_8c_source.html#l00326">326</a> of file <a class="el" href="spidigio_8c_source.html">spidigio.c</a>.</p>

<p>References <a class="el" href="arm_8h_source.html#l00205">cbi</a>, <a class="el" href="arm_8h_source.html#l00204">sbi</a>, <a class="el" href="avrpio_8h_source.html#l00179">SPIDIGIO_LDO_BIT</a>, <a class="el" href="spidigio_8c_source.html#l00159">SPIDIGIO_LDO_PORT</a>, <a class="el" href="avrpio_8h_source.html#l00139">SPIDIGIO_SOUT_BIT</a>, and <a class="el" href="spidigio_8c_source.html#l00106">SPIDIGIO_SOUT_PORT</a>.</p>

</div>
</div>
<a class="anchor" id="gac166df3b02135dbbc8bb0582c24cb5b0"></a><!-- doxytag: member="spidigio.c::SpiDigitalInit" ref="gac166df3b02135dbbc8bb0582c24cb5b0" args="(ureg_t *inputs, ureg_t *outputs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SpiDigitalInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a> *&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nut__types_8h.html#ae15262a08334eeeacd9a24f219a89d46">ureg_t</a> *&#160;</td>
          <td class="paramname"><em>outputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the digital I/O shift register interface. </p>
<p>This routine must be called before using the interface.</p>
<p>Automatically detects the number of digital inputs and outputs. However, the method used is limited and may fail on fast changing inputs. The application should check the result for plausibility. It is save to call the routine more than once.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">inputs</td><td>Pointer to an 8-bit value, where the number of detected inputs will be stored. </td></tr>
    <tr><td class="paramname">outputs</td><td>Pointer to an 8-bit value, where the number of detected outputs will be stored. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spidigio_8c_source.html#l00471">471</a> of file <a class="el" href="spidigio_8c_source.html">spidigio.c</a>.</p>

<p>References <a class="el" href="arm_8h_source.html#l00205">cbi</a>, <a class="el" href="timer_8c_source.html#l00818">NutGetCpuClock()</a>, <a class="el" href="arm_8h_source.html#l00204">sbi</a>, <a class="el" href="avrpio_8h_source.html#l00171">SPIDIGIO_LDI_BIT</a>, <a class="el" href="spidigio_8c_source.html#l00178">SPIDIGIO_LDI_DDR</a>, <a class="el" href="spidigio_8c_source.html#l00177">SPIDIGIO_LDI_PORT</a>, <a class="el" href="avrpio_8h_source.html#l00179">SPIDIGIO_LDO_BIT</a>, <a class="el" href="spidigio_8c_source.html#l00160">SPIDIGIO_LDO_DDR</a>, <a class="el" href="spidigio_8c_source.html#l00159">SPIDIGIO_LDO_PORT</a>, <a class="el" href="avrpio_8h_source.html#l00163">SPIDIGIO_SCLK_BIT</a>, <a class="el" href="spidigio_8c_source.html#l00146">SPIDIGIO_SCLK_DDR</a>, <a class="el" href="spidigio_8c_source.html#l00145">SPIDIGIO_SCLK_PORT</a>, <a class="el" href="avrpio_8h_source.html#l00147">SPIDIGIO_SIN_BIT</a>, <a class="el" href="avrpio_8h_source.html#l00159">SPIDIGIO_SIN_DDR</a>, <a class="el" href="avrpio_8h_source.html#l00155">SPIDIGIO_SIN_PORT</a>, <a class="el" href="avrpio_8h_source.html#l00139">SPIDIGIO_SOUT_BIT</a>, and <a class="el" href="spidigio_8c_source.html#l00107">SPIDIGIO_SOUT_DDR</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_spi_dig_io_gac166df3b02135dbbc8bb0582c24cb5b0_cgraph.png" border="0" usemap="#group__xg_spi_dig_io_gac166df3b02135dbbc8bb0582c24cb5b0_cgraph" alt=""/></div>
<map name="group__xg_spi_dig_io_gac166df3b02135dbbc8bb0582c24cb5b0_cgraph" id="group__xg_spi_dig_io_gac166df3b02135dbbc8bb0582c24cb5b0_cgraph">
<area shape="rect" id="node3" href="group__xg_timer.html#ga784a7f52b5167c777149fd1d874c99f0" title="Return the CPU clock frequency." alt="" coords="144,5,259,30"/><area shape="rect" id="node5" href="group__xg_nut_arch_arm_os_timer_gba.html#ga7d11c53224db0028ad4838f8b9df9872" title="Return the CPU clock in Hertz." alt="" coords="307,5,421,30"/></map>
</div>
</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
