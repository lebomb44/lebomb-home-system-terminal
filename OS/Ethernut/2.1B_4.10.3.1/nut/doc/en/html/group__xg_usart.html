<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: USART Driver Frame</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_usart.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">USART Driver Frame</div>  </div>
<div class="ingroups"><a class="el" href="group__xg_dev_serial.html">USART Devices</a></div></div>
<div class="contents">

<p>Universal synchronous/asynchronous receiver/transmitter device driver.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for USART Driver Frame:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_usart.png" border="0" alt="" usemap="#group____xg__usart"/>
<map name="group____xg__usart" id="group____xg__usart">
<area shape="rect" id="node1" href="group__xg_u_a_r_t_i_o_c_t_l.html" title="UART _ioctl() commands." alt="" coords="347,5,519,30"/><area shape="rect" id="node3" href="group__xg_dev_serial.html" title="Drivers for serial communication." alt="" coords="5,5,115,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___r_i_n_g_b_u_f.html">_RINGBUF</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Character device ring buffer structure.  <a href="struct___r_i_n_g_b_u_f.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_s_a_r_t_d_c_b.html">_USARTDCB</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">USART device low level information structure.  <a href="struct___u_s_a_r_t_d_c_b.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html">UART I/O Control Functions</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>UART <a class="el" href="group__xg_crt_lowio.html#ga6b356746f1f26fb46f2afe4357ab3534" title="Perform device specific control functions.">_ioctl()</a> commands. </p>
<br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaef422f6170cf3e67d618840363e90a90">USART_MF_RTSCONTROL</a>&#160;&#160;&#160;0x0001</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga5e7a49e7c75f7b2d57f661af3ba54253">USART_MF_CTSSENSE</a>&#160;&#160;&#160;0x0002</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga53861cfb918409034bdc00a1f007fec7">USART_MF_DTRCONTROL</a>&#160;&#160;&#160;0x0004</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga606890342b357c93c2a5f21da71e6e72">USART_MF_DSRSENSE</a>&#160;&#160;&#160;0x0008</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gabc97278df51db9e35feb48fc21750f0b">USART_MF_DCDSENSE</a>&#160;&#160;&#160;0x0010</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga49d77f8e00bfa7eb08b786c1cc10ac04">USART_MF_SENSEMASK</a>&#160;&#160;&#160;0x001A</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gad08ca42fa7075948eee3e161563af822">USART_MF_CONTROLMASK</a>&#160;&#160;&#160;0x0005</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaf5516e937008cee0c76c4e9db2bcc9b2">USART_MF_XONXOFF</a>&#160;&#160;&#160;0x0020</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Software handshake.  <a href="#gaf5516e937008cee0c76c4e9db2bcc9b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gad1d54f0eb5c09f24cde51dfe9b36bb4f">USART_MF_LOCALECHO</a>&#160;&#160;&#160;0x0040</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaaf2832053cbf56b4a38e5bf754a9265e">USART_MF_COOKEDMODE</a>&#160;&#160;&#160;0x0080</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga6798dc576a447b8f5e55c0141c1c3df6">USART_MF_NOBUFFER</a>&#160;&#160;&#160;0x0100</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga517730e2f59e151dcee6af4ad9366d45">USART_MF_LINEBUFFER</a>&#160;&#160;&#160;0x0200</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gae4edd209bd0069269535fd634c3b72ea">USART_MF_BUFFERMASK</a>&#160;&#160;&#160;0x0300</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga1675b30dee46081b367a81da653a0287">USART_MF_HALFDUPLEX</a>&#160;&#160;&#160;0x0400</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga9606def01c27ef3ec742ce804abc213d">USART_MF_BLOCKREAD</a>&#160;&#160;&#160;0x0800</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga759a7ec2436464376fdfb22ce732d804">USART_SF_RTSOFF</a>&#160;&#160;&#160;0x0001</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga662eb9b837d0bc65057da686f850a590">USART_SF_CTSOFF</a>&#160;&#160;&#160;0x0002</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga52a36a5925c371c6f4202949fd5305b7">USART_SF_DTROFF</a>&#160;&#160;&#160;0x0004</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga7d59597e438d3fe71ab2d8815c3c8bee">USART_SF_DSROFF</a>&#160;&#160;&#160;0x0008</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gac241c8855dd9a20165a00f888dcfafd9">USART_SF_DCDOFF</a>&#160;&#160;&#160;0x0010</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga2e3844715df0ee042683529eac592589">USART_SF_TXDISABLED</a>&#160;&#160;&#160;0x0040</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga9bf0e6ad4f85a079eb9e50c3e1836396">USART_SF_RXDISABLED</a>&#160;&#160;&#160;0x0080</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___u_s_a_r_t_d_c_b.html">_USARTDCB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga4557f1d2ce562f6aedca0e3d128a0b49">USARTDCB</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gafa5e18c57ac506d162b57d3c68373da4">UsartInit</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the USART device.  <a href="#gafa5e18c57ac506d162b57d3c68373da4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga2427bfd0d05b045434937ffb1244f9af">UsartRead</a> (<a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *fp, void *buffer, int size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from device.  <a href="#ga2427bfd0d05b045434937ffb1244f9af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga4c931f902d92a1ba5789681a9829d2af">UsartWrite</a> (<a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *fp, CONST void *buffer, int len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a device or file.  <a href="#ga4c931f902d92a1ba5789681a9829d2af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga9b8851fcd10fce74468b50a233391bf9">UsartWrite_P</a> (<a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *fp, PGM_P buffer, int len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a device or file.  <a href="#ga9b8851fcd10fce74468b50a233391bf9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga2e354f8b2c656751d69b253000cd8208">UsartClose</a> (<a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an USART device.  <a href="#ga2e354f8b2c656751d69b253000cd8208"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaeb1a110892efd2c8c1c40d9a1602958a">UsartOpen</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, CONST char *name, int mode, int acc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an USART device.  <a href="#gaeb1a110892efd2c8c1c40d9a1602958a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaf0819016c1aefd6cbb66e894ff1c4cd8">UsartIOCtl</a> (<a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *dev, int req, void *conf)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform USART control functions.  <a href="#gaf0819016c1aefd6cbb66e894ff1c4cd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga06d0ebd0cf76d7d935db8c234aca0d69">UsartSize</a> (<a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the number of characters in input buffer.  <a href="#ga06d0ebd0cf76d7d935db8c234aca0d69"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Ring Buffer</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct___r_i_n_g_b_u_f.html">_RINGBUF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaa4ec5a421d99b8914d97e7edf878e3da">RINGBUF</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Character device ring buffer type.  <a href="#gaa4ec5a421d99b8914d97e7edf878e3da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga431122dd312d660f7005fa8781eb20b7">USART_RXBUFSIZ</a>&#160;&#160;&#160;256</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial receive buffer size.  <a href="#ga431122dd312d660f7005fa8781eb20b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gab015ce04f0b63883d62f7352ea9f9f62">USART_RXHIWMARK</a>&#160;&#160;&#160;240</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Receiver's initial high water mark.  <a href="#gab015ce04f0b63883d62f7352ea9f9f62"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga38c07a8255415d935396298f4f0ad2b0">USART_RXLOWMARK</a>&#160;&#160;&#160;208</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Receiver's initial low water mark.  <a href="#ga38c07a8255415d935396298f4f0ad2b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaad5baff509a92f8acadfdedc57faaf5d">USART_TXBUFSIZ</a>&#160;&#160;&#160;64</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial transmit buffer size.  <a href="#gaad5baff509a92f8acadfdedc57faaf5d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#ga54ea167024d7674f230fbe4442614275">USART_TXHIWMARK</a>&#160;&#160;&#160;56</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmitter's initial high water mark.  <a href="#ga54ea167024d7674f230fbe4442614275"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gacc2da2d6d141ad656e1ab35ee835306f">USART_TXLOWMARK</a>&#160;&#160;&#160;40</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmitter's initial low water mark.  <a href="#gacc2da2d6d141ad656e1ab35ee835306f"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Initial UART Configuration</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_usart.html#gaef4a0501c3ef03d1435465e61f96b0fb">USART_INITSPEED</a>&#160;&#160;&#160;115200</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial bit rate.  <a href="#gaef4a0501c3ef03d1435465e61f96b0fb"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Universal synchronous/asynchronous receiver/transmitter device driver. </p>
<p><a class="anchor" id="xrUsart"></a> The USART device driver implements buffered, interrupt controlled serial communication. It supports software and hardware handshake, 9-bit communication, half duplex and synchronous operation.</p>
<p>The driver's code is devided into a general part and a hardware dependant part, which simplifies porting it to different USART chips. The <a class="el" href="group__xg_usart_avr.html#xrUsartAvr">AVR USART Devices</a> provide support for the ATmega128/103 on-chip USARTs. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga431122dd312d660f7005fa8781eb20b7"></a><!-- doxytag: member="usart.h::USART_RXBUFSIZ" ref="ga431122dd312d660f7005fa8781eb20b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_RXBUFSIZ&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initial receive buffer size. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00084">84</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>.</p>

</div>
</div>
<a class="anchor" id="gab015ce04f0b63883d62f7352ea9f9f62"></a><!-- doxytag: member="usart.h::USART_RXHIWMARK" ref="gab015ce04f0b63883d62f7352ea9f9f62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_RXHIWMARK&#160;&#160;&#160;240</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receiver's initial high water mark. </p>
<p>Disables receiver handshake. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00093">93</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>.</p>

</div>
</div>
<a class="anchor" id="ga38c07a8255415d935396298f4f0ad2b0"></a><!-- doxytag: member="usart.h::USART_RXLOWMARK" ref="ga38c07a8255415d935396298f4f0ad2b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_RXLOWMARK&#160;&#160;&#160;208</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receiver's initial low water mark. </p>
<p>Enables receiver handshake. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00102">102</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>.</p>

</div>
</div>
<a class="anchor" id="gaad5baff509a92f8acadfdedc57faaf5d"></a><!-- doxytag: member="usart.h::USART_TXBUFSIZ" ref="gaad5baff509a92f8acadfdedc57faaf5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_TXBUFSIZ&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initial transmit buffer size. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00109">109</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>.</p>

</div>
</div>
<a class="anchor" id="ga54ea167024d7674f230fbe4442614275"></a><!-- doxytag: member="usart.h::USART_TXHIWMARK" ref="ga54ea167024d7674f230fbe4442614275" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_TXHIWMARK&#160;&#160;&#160;56</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transmitter's initial high water mark. </p>
<p>Starts the transmitter. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00118">118</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>.</p>

</div>
</div>
<a class="anchor" id="gacc2da2d6d141ad656e1ab35ee835306f"></a><!-- doxytag: member="usart.h::USART_TXLOWMARK" ref="gacc2da2d6d141ad656e1ab35ee835306f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_TXLOWMARK&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transmitter's initial low water mark. </p>
<p>Wakes up transmitting threads. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00127">127</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>.</p>

</div>
</div>
<a class="anchor" id="gaef4a0501c3ef03d1435465e61f96b0fb"></a><!-- doxytag: member="usart.h::USART_INITSPEED" ref="gaef4a0501c3ef03d1435465e61f96b0fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_INITSPEED&#160;&#160;&#160;115200</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initial bit rate. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00226">226</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00111">UsartInit()</a>.</p>

</div>
</div>
<a class="anchor" id="gaef422f6170cf3e67d618840363e90a90"></a><!-- doxytag: member="usart.h::USART_MF_RTSCONTROL" ref="gaef422f6170cf3e67d618840363e90a90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_RTSCONTROL&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DTE output. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00231">231</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5e7a49e7c75f7b2d57f661af3ba54253"></a><!-- doxytag: member="usart.h::USART_MF_CTSSENSE" ref="ga5e7a49e7c75f7b2d57f661af3ba54253" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_CTSSENSE&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DTE input. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00232">232</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga53861cfb918409034bdc00a1f007fec7"></a><!-- doxytag: member="usart.h::USART_MF_DTRCONTROL" ref="ga53861cfb918409034bdc00a1f007fec7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_DTRCONTROL&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DTE output. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00233">233</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga606890342b357c93c2a5f21da71e6e72"></a><!-- doxytag: member="usart.h::USART_MF_DSRSENSE" ref="ga606890342b357c93c2a5f21da71e6e72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_DSRSENSE&#160;&#160;&#160;0x0008</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DTE input. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00234">234</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabc97278df51db9e35feb48fc21750f0b"></a><!-- doxytag: member="usart.h::USART_MF_DCDSENSE" ref="gabc97278df51db9e35feb48fc21750f0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_DCDSENSE&#160;&#160;&#160;0x0010</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DTE input. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00235">235</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga49d77f8e00bfa7eb08b786c1cc10ac04"></a><!-- doxytag: member="usart.h::USART_MF_SENSEMASK" ref="ga49d77f8e00bfa7eb08b786c1cc10ac04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_SENSEMASK&#160;&#160;&#160;0x001A</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handshake sense mask. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00237">237</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad08ca42fa7075948eee3e161563af822"></a><!-- doxytag: member="usart.h::USART_MF_CONTROLMASK" ref="gad08ca42fa7075948eee3e161563af822" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_CONTROLMASK&#160;&#160;&#160;0x0005</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handshake control mask. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00238">238</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf5516e937008cee0c76c4e9db2bcc9b2"></a><!-- doxytag: member="usart.h::USART_MF_XONXOFF" ref="gaf5516e937008cee0c76c4e9db2bcc9b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_XONXOFF&#160;&#160;&#160;0x0020</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Software handshake. </p>
<p>It is recommended to set a proper read timeout with software handshake. In this case a timeout may occur, if the communication peer lost our last XON character. The application may then use ioctl() to disable the receiver and do the read again. This will send out another XON. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00247">247</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="usartsc16is752_8c_source.html#l00941">Sc16is752UsartGetFlowControl()</a>.</p>

</div>
</div>
<a class="anchor" id="gad1d54f0eb5c09f24cde51dfe9b36bb4f"></a><!-- doxytag: member="usart.h::USART_MF_LOCALECHO" ref="gad1d54f0eb5c09f24cde51dfe9b36bb4f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_LOCALECHO&#160;&#160;&#160;0x0040</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Should be used in stream, not device. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00249">249</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00678">UsartIOCtl()</a>.</p>

</div>
</div>
<a class="anchor" id="gaaf2832053cbf56b4a38e5bf754a9265e"></a><!-- doxytag: member="usart.h::USART_MF_COOKEDMODE" ref="gaaf2832053cbf56b4a38e5bf754a9265e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_COOKEDMODE&#160;&#160;&#160;0x0080</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Should be used in stream, not device. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00250">250</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00678">UsartIOCtl()</a>, <a class="el" href="dev_2usart_8c_source.html#l00561">UsartOpen()</a>, and <a class="el" href="dev_2usart_8c_source.html#l00198">UsartRead()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6798dc576a447b8f5e55c0141c1c3df6"></a><!-- doxytag: member="usart.h::USART_MF_NOBUFFER" ref="ga6798dc576a447b8f5e55c0141c1c3df6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_NOBUFFER&#160;&#160;&#160;0x0100</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>No buffering. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00252">252</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga517730e2f59e151dcee6af4ad9366d45"></a><!-- doxytag: member="usart.h::USART_MF_LINEBUFFER" ref="ga517730e2f59e151dcee6af4ad9366d45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_LINEBUFFER&#160;&#160;&#160;0x0200</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Line buffered. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00253">253</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae4edd209bd0069269535fd634c3b72ea"></a><!-- doxytag: member="usart.h::USART_MF_BUFFERMASK" ref="gae4edd209bd0069269535fd634c3b72ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_BUFFERMASK&#160;&#160;&#160;0x0300</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Masks buffering mode flags. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00254">254</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1675b30dee46081b367a81da653a0287"></a><!-- doxytag: member="usart.h::USART_MF_HALFDUPLEX" ref="ga1675b30dee46081b367a81da653a0287" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_HALFDUPLEX&#160;&#160;&#160;0x0400</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Half duplex control. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00256">256</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

<p>Referenced by <a class="el" href="dev_2usart_8c_source.html#l00678">UsartIOCtl()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9606def01c27ef3ec742ce804abc213d"></a><!-- doxytag: member="usart.h::USART_MF_BLOCKREAD" ref="ga9606def01c27ef3ec742ce804abc213d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_MF_BLOCKREAD&#160;&#160;&#160;0x0800</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block read enabled </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00257">257</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga759a7ec2436464376fdfb22ce732d804"></a><!-- doxytag: member="usart.h::USART_SF_RTSOFF" ref="ga759a7ec2436464376fdfb22ce732d804" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_RTSOFF&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set if RTS line is off. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00259">259</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga662eb9b837d0bc65057da686f850a590"></a><!-- doxytag: member="usart.h::USART_SF_CTSOFF" ref="ga662eb9b837d0bc65057da686f850a590" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_CTSOFF&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set if CTS line is off. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00260">260</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga52a36a5925c371c6f4202949fd5305b7"></a><!-- doxytag: member="usart.h::USART_SF_DTROFF" ref="ga52a36a5925c371c6f4202949fd5305b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_DTROFF&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set if DTR line is off. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00261">261</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7d59597e438d3fe71ab2d8815c3c8bee"></a><!-- doxytag: member="usart.h::USART_SF_DSROFF" ref="ga7d59597e438d3fe71ab2d8815c3c8bee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_DSROFF&#160;&#160;&#160;0x0008</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set if DSR line is off. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00262">262</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac241c8855dd9a20165a00f888dcfafd9"></a><!-- doxytag: member="usart.h::USART_SF_DCDOFF" ref="gac241c8855dd9a20165a00f888dcfafd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_DCDOFF&#160;&#160;&#160;0x0010</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set if DCD line is off. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00263">263</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2e3844715df0ee042683529eac592589"></a><!-- doxytag: member="usart.h::USART_SF_TXDISABLED" ref="ga2e3844715df0ee042683529eac592589" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_TXDISABLED&#160;&#160;&#160;0x0040</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transmitter disabled. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00265">265</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9bf0e6ad4f85a079eb9e50c3e1836396"></a><!-- doxytag: member="usart.h::USART_SF_RXDISABLED" ref="ga9bf0e6ad4f85a079eb9e50c3e1836396" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_SF_RXDISABLED&#160;&#160;&#160;0x0080</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Receiver disabled. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00266">266</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gaa4ec5a421d99b8914d97e7edf878e3da"></a><!-- doxytag: member="usart.h::RINGBUF" ref="gaa4ec5a421d99b8914d97e7edf878e3da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_usart.html#gaa4ec5a421d99b8914d97e7edf878e3da">RINGBUF</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Character device ring buffer type. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00134">134</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4557f1d2ce562f6aedca0e3d128a0b49"></a><!-- doxytag: member="usart.h::USARTDCB" ref="ga4557f1d2ce562f6aedca0e3d128a0b49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___u_s_a_r_t_d_c_b.html">_USARTDCB</a> <a class="el" href="group__xg_usart.html#ga4557f1d2ce562f6aedca0e3d128a0b49">USARTDCB</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>USART device low level information type. </p>

<p>Definition at line <a class="el" href="usart_8h_source.html#l00399">399</a> of file <a class="el" href="usart_8h_source.html">usart.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gafa5e18c57ac506d162b57d3c68373da4"></a><!-- doxytag: member="usart.c::UsartInit" ref="gafa5e18c57ac506d162b57d3c68373da4" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsartInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the USART device. </p>
<p>This function is called by <a class="el" href="group__xg_device.html#ga0d73e3153bf9f210194bd862d9b91c61" title="Register and initialize a device.">NutRegisterDevice()</a>, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#a815ba9551081818364d0657480560e4b" title="Driver initialization routine.">_NUTDEVICE::dev_init</a> entry. It will call the low level driver's <a class="el" href="struct___u_s_a_r_t_d_c_b.html#a6297f0c38dd4da82b9283f4884c3a5f1" title="Driver control initialization.">_USARTDCB::dcb_init</a> routine to initialize the hardware.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device to initialize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000060">Todo:</a></b></dt><dd>Read initial settings from EEPROM. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00111">111</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="usart_8h_source.html#l00308">_USARTDCB::dcb_init</a>, <a class="el" href="usart_8h_source.html#l00338">_USARTDCB::dcb_set_speed</a>, <a class="el" href="device_8h_source.html#l00216">_NUTDEVICE::dev_dcb</a>, and <a class="el" href="usart_8h_source.html#l00226">USART_INITSPEED</a>.</p>

</div>
</div>
<a class="anchor" id="ga2427bfd0d05b045434937ffb1244f9af"></a><!-- doxytag: member="usart.c::UsartRead" ref="ga2427bfd0d05b045434937ffb1244f9af" args="(NUTFILE *fp, void *buffer, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsartRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from device. </p>
<p>This function is called by the low level input routines of the <a class="el" href="group__xg_crt_lowio.html#xrCrtLowio">C runtime library</a>, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#a105f32f25da275ccbc559aa28db75a26" title="Read from device.">_NUTDEVICE::dev_read</a> entry.</p>
<p>The function may block the calling thread until at least one character has been received or a timeout occurs.</p>
<p>It is recommended to set a proper read timeout with software handshake. In this case a timeout may occur, if the communication peer lost our last XON character. The application may then use ioctl() to disable the receiver and do the read again. This will send out another XON.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Pointer to a <a class="el" href="struct___n_u_t_f_i_l_e.html">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xg_usart.html#gaeb1a110892efd2c8c1c40d9a1602958a" title="Open an USART device.">UsartOpen()</a>. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to the buffer that receives the data. If zero, then all characters in the input buffer will be removed. </td></tr>
    <tr><td class="paramname">size</td><td>Maximum number of bytes to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes read, which may be less than the number of bytes specified. A return value of -1 indicates an error, while zero is returned in case of a timeout. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00198">198</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="usart_8h_source.html#l00302">_USARTDCB::dcb_last_eol</a>, <a class="el" href="usart_8h_source.html#l00278">_USARTDCB::dcb_modeflags</a>, <a class="el" href="usart_8h_source.html#l00286">_USARTDCB::dcb_rtimeout</a>, <a class="el" href="usart_8h_source.html#l00298">_USARTDCB::dcb_rx_rbf</a>, <a class="el" href="usart_8h_source.html#l00323">_USARTDCB::dcb_rx_start</a>, <a class="el" href="device_8h_source.html#l00216">_NUTDEVICE::dev_dcb</a>, <a class="el" href="file_8h_source.html#l00080">_NUTFILE::nf_dev</a>, <a class="el" href="arch_2arm_2atom_8h_source.html#l00136">NutEnterCritical</a>, <a class="el" href="event_8c_source.html#l00271">NutEventWait()</a>, <a class="el" href="arch_2arm_2atom_8h_source.html#l00147">NutExitCritical</a>, <a class="el" href="usart_8h_source.html#l00172">_RINGBUF::rbf_cnt</a>, <a class="el" href="usart_8h_source.html#l00186">_RINGBUF::rbf_hwm</a>, <a class="el" href="usart_8h_source.html#l00160">_RINGBUF::rbf_last</a>, <a class="el" href="usart_8h_source.html#l00179">_RINGBUF::rbf_lwm</a>, <a class="el" href="usart_8h_source.html#l00193">_RINGBUF::rbf_que</a>, <a class="el" href="usart_8h_source.html#l00166">_RINGBUF::rbf_siz</a>, <a class="el" href="usart_8h_source.html#l00156">_RINGBUF::rbf_start</a>, <a class="el" href="usart_8h_source.html#l00152">_RINGBUF::rbf_tail</a>, and <a class="el" href="usart_8h_source.html#l00250">USART_MF_COOKEDMODE</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_usart_ga2427bfd0d05b045434937ffb1244f9af_cgraph.png" border="0" usemap="#group__xg_usart_ga2427bfd0d05b045434937ffb1244f9af_cgraph" alt=""/></div>
<map name="group__xg_usart_ga2427bfd0d05b045434937ffb1244f9af_cgraph" id="group__xg_usart_ga2427bfd0d05b045434937ffb1244f9af_cgraph">
<area shape="rect" id="node3" href="group__xg_event.html#ga79af18e0842286182af7c5b647526ce5" title="Wait for an event in a specified queue." alt="" coords="137,133,231,158"/><area shape="rect" id="node5" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="285,158,392,183"/><area shape="rect" id="node7" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="445,107,608,133"/><area shape="rect" id="node9" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="870,95,1023,121"/><area shape="rect" id="node11" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="463,209,591,234"/><area shape="rect" id="node29" href="group__xg_timer.html#ga91b42f5fd833e1b72c27b3bfb0ed0af7" title="Start a system timer." alt="" coords="289,345,388,370"/><area shape="rect" id="node45" href="group__xg_event.html#gaaa944c4484d068bdacd8220b7e081302" title="Timer callback in case of event timeout." alt="" coords="281,6,397,31"/><area shape="rect" id="node13" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="675,183,803,209"/><area shape="rect" id="node20" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="656,282,821,307"/><area shape="rect" id="node25" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="681,233,797,258"/><area shape="rect" id="node15" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="897,206,996,231"/><area shape="rect" id="node17" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1077,281,1181,306"/><area shape="rect" id="node22" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="889,331,1004,357"/><area shape="rect" id="node31" href="group__xg_timer.html#gaf104e0c3660b2a77bd0d7b00c4fd741c" title="Start a system timer." alt="" coords="463,345,590,370"/><area shape="rect" id="node37" href="group__xg_nut_arch_arm_os_timer_at91.html#gabb52a4e7f513a7c586898065e0a0c81a" title="Calculate system ticks for a given number of milliseconds." alt="" coords="455,419,599,445"/><area shape="rect" id="node33" href="group__xg_timer.html#ga1e47b683a996583386ebef7e7c92501e" title="Create a new system timer." alt="" coords="683,331,794,357"/><area shape="rect" id="node39" href="group__xg_nut_arch_arm_os_timer_at91.html#ga2724f52da15ed45123a32c1ed7e148f0" title="Return the number of system ticks per second." alt="" coords="682,433,795,458"/><area shape="rect" id="node41" href="group__xg_timer.html#ga784a7f52b5167c777149fd1d874c99f0" title="Return the CPU clock frequency." alt="" coords="889,433,1004,458"/><area shape="rect" id="node43" href="group__xg_nut_arch_arm_os_timer_gba.html#ga7d11c53224db0028ad4838f8b9df9872" title="Return the CPU clock in Hertz." alt="" coords="1072,433,1187,458"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4c931f902d92a1ba5789681a9829d2af"></a><!-- doxytag: member="usart.c::UsartWrite" ref="ga4c931f902d92a1ba5789681a9829d2af" args="(NUTFILE *fp, CONST void *buffer, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsartWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a device or file. </p>
<p>This function is called by the low level output routines of the <a class="el" href="group__xg_crt_lowio.html#xrCrtLowio">C runtime library</a>, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#a2f1ae37c71ffc3af5aff422b3e992f14">_NUTDEVICE::dev_write</a> entry.</p>
<p>The function may block the calling thread.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Pointer to a <a class="el" href="struct___n_u_t_f_i_l_e.html" title="File structure.">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xg_usart.html#gaeb1a110892efd2c8c1c40d9a1602958a" title="Open an USART device.">UsartOpen()</a>. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to the data to be written. If zero, then the output buffer will be flushed. </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes written, which may be less than the number of bytes specified if a timeout occured. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00481">481</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="file_8h_source.html#l00080">_NUTFILE::nf_dev</a>.</p>

</div>
</div>
<a class="anchor" id="ga9b8851fcd10fce74468b50a233391bf9"></a><!-- doxytag: member="usart.c::UsartWrite_P" ref="ga9b8851fcd10fce74468b50a233391bf9" args="(NUTFILE *fp, PGM_P buffer, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsartWrite_P </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGM_P&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a device or file. </p>
<p>Similar to <a class="el" href="group__xg_usart.html#ga4c931f902d92a1ba5789681a9829d2af" title="Write a device or file.">UsartWrite()</a> except that the data is located in program memory.</p>
<p>This function is called by the low level output routines of the <a class="el" href="group__xg_crt_lowio.html#xrCrtLowio">C runtime library</a>, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#a965dec701781da979635e1cbba7098af" title="Write to device.">_NUTDEVICE::dev_write_P</a> entry.</p>
<p>The function may block the calling thread.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Pointer to a NUTFILE structure, obtained by a previous call to <a class="el" href="group__xg_usart.html#gaeb1a110892efd2c8c1c40d9a1602958a" title="Open an USART device.">UsartOpen()</a>. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to the data in program space to be written. </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes written, which may be less than the number of bytes specified if a timeout occured. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00507">507</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="arm_8h_source.html#l00143">CONST</a>, and <a class="el" href="file_8h_source.html#l00080">_NUTFILE::nf_dev</a>.</p>

</div>
</div>
<a class="anchor" id="ga2e354f8b2c656751d69b253000cd8208"></a><!-- doxytag: member="usart.c::UsartClose" ref="ga2e354f8b2c656751d69b253000cd8208" args="(NUTFILE *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsartClose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close an USART device. </p>
<p>This function is called by the low level close routine of the C runtime library, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#ac2d664b9f6a32cb760c5ba13ba2b4e4a" title="Close a device or file.">_NUTDEVICE::dev_close</a> entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Pointer to a <a class="el" href="struct___n_u_t_f_i_l_e.html" title="File structure.">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xg_usart.html#gaeb1a110892efd2c8c1c40d9a1602958a" title="Open an USART device.">UsartOpen()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success or -1 otherwise.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000061">Todo:</a></b></dt><dd>We may support shared open and use dev_irq as an open counter. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00525">525</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="usart_8h_source.html#l00298">_USARTDCB::dcb_rx_rbf</a>, <a class="el" href="usart_8h_source.html#l00378">_USARTDCB::dcb_set_status</a>, <a class="el" href="usart_8h_source.html#l00294">_USARTDCB::dcb_tx_rbf</a>, <a class="el" href="device_8h_source.html#l00216">_NUTDEVICE::dev_dcb</a>, <a class="el" href="malloc_8c_source.html#l00084">free()</a>, <a class="el" href="file_8h_source.html#l00080">_NUTFILE::nf_dev</a>, <a class="el" href="event_8c_source.html#l00533">NutEventBroadcast()</a>, <a class="el" href="file_8h_source.html#l00088">NUTFILE_EOF</a>, <a class="el" href="usart_8h_source.html#l00193">_RINGBUF::rbf_que</a>, and <a class="el" href="dev_2uart_8h_source.html#l00448">UART_RTSDISABLED</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_usart_ga2e354f8b2c656751d69b253000cd8208_cgraph.png" border="0" usemap="#group__xg_usart_ga2e354f8b2c656751d69b253000cd8208_cgraph" alt=""/></div>
<map name="group__xg_usart_ga2e354f8b2c656751d69b253000cd8208_cgraph" id="group__xg_usart_ga2e354f8b2c656751d69b253000cd8208_cgraph">
<area shape="rect" id="node3" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="181,6,224,31"/><area shape="rect" id="node5" href="group__xg_event.html#ga575628f89864beb575a161f10f3de62c" title="Broadcast an event to a specified queue." alt="" coords="139,55,266,81"/><area shape="rect" id="node7" href="group__xg_event.html#ga21d9c3cc7ae2c9bddfb130b54b081076" title="Asynchronously broadcast an event to a specified queue." alt="" coords="315,18,474,43"/><area shape="rect" id="node17" href="group__xg_thread.html#ga075836f9a2596c5983b7ba88420afd11" title="Give up the CPU." alt="" coords="341,93,448,118"/><area shape="rect" id="node9" href="group__xg_event.html#ga129d2de44ddf083f252d0754fc45d9d3" title="Asynchronously post an event to a specified queue." alt="" coords="752,5,880,30"/><area shape="rect" id="node11" href="group__xg_timer.html#gafb23f6965312663a72d41fefc574dc00" title="Stop a specified timer." alt="" coords="975,5,1073,30"/><area shape="rect" id="node15" href="group__xg_thread.html#ga4d2458fb9ec9d926a6f87706b19e7e06" title="Add a thread to a prioritiy ordered queue." alt="" coords="947,54,1101,79"/><area shape="rect" id="node13" href="group__xg_timer.html#ga681ca3c989be2bdeb5f0cc97e11d6e06" title="Insert a new timer in the global timer list." alt="" coords="1149,55,1253,81"/><area shape="rect" id="node19" href="group__xg_thread.html#gae45ebad9f604755d5c5ba8adaf9e4f89" title="Remove a thread from a specified queue." alt="" coords="523,155,685,181"/><area shape="rect" id="node22" href="group__xg_thread.html#gaabfac60c4d51b57c2dc422d09a69df5b" title="Continue with the highest priority thread, which is ready to run." alt="" coords="540,106,668,131"/><area shape="rect" id="node25" href="group__xg_timer.html#gaf719e88403b4ccc78f071ce5c85a5a71" title="Process elapsed timers." alt="" coords="733,106,899,131"/><area shape="rect" id="node30" href="group__xg_nut_arch_arm_os_context.html#gad63408e1c4ef1c03d9f979ad2d31b7e0" title="Switch to another thread." alt="" coords="758,155,874,181"/><area shape="rect" id="node27" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="967,155,1081,181"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaeb1a110892efd2c8c1c40d9a1602958a"></a><!-- doxytag: member="usart.c::UsartOpen" ref="gaeb1a110892efd2c8c1c40d9a1602958a" args="(NUTDEVICE *dev, CONST char *name, int mode, int acc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a>* UsartOpen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>acc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open an USART device. </p>
<p>This function is called by the low level open routine of the C runtime library, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#ab335cca3129f49584754e9123e24503f" title="Open a device or file.">_NUTDEVICE::dev_open</a> entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Pointer to the NUTDEVICE structure. </td></tr>
    <tr><td class="paramname">name</td><td>Ignored, should point to an empty string. </td></tr>
    <tr><td class="paramname">mode</td><td>Operation mode. Any of the following values may be or-ed:<ul>
<li><a class="el" href="group__xg_crt_lowio.html#ga166a079a4990ddeb0a32475728bbacd0">_O_BINARY</a></li>
<li><a class="el" href="group__xg_crt_lowio.html#ga4d457d93039cb26f27461c4af5868309">_O_RDONLY</a></li>
<li><a class="el" href="group__xg_crt_lowio.html#gac58f7734ab4dd8ae25bda2fba713ea56">_O_WRONLY</a> </li>
</ul>
</td></tr>
    <tr><td class="paramname">acc</td><td>Ignored, should be zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to a NUTFILE structure if successful or NUTFILE_EOF otherwise.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000062">Todo:</a></b></dt><dd>We may support shared open and use dev_irq as an open counter. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00561">561</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="fcntl_8h_source.html#l00084">_O_BINARY</a>, <a class="el" href="fcntl_8h_source.html#l00076">_O_RDONLY</a>, <a class="el" href="fcntl_8h_source.html#l00077">_O_WRONLY</a>, <a class="el" href="usart_8h_source.html#l00278">_USARTDCB::dcb_modeflags</a>, <a class="el" href="usart_8h_source.html#l00298">_USARTDCB::dcb_rx_rbf</a>, <a class="el" href="usart_8h_source.html#l00323">_USARTDCB::dcb_rx_start</a>, <a class="el" href="usart_8h_source.html#l00294">_USARTDCB::dcb_tx_rbf</a>, <a class="el" href="device_8h_source.html#l00216">_NUTDEVICE::dev_dcb</a>, <a class="el" href="malloc_8c_source.html#l00084">free()</a>, <a class="el" href="malloc_8c_source.html#l00064">malloc()</a>, <a class="el" href="file_8h_source.html#l00080">_NUTFILE::nf_dev</a>, <a class="el" href="file_8h_source.html#l00085">_NUTFILE::nf_fcb</a>, <a class="el" href="file_8h_source.html#l00075">_NUTFILE::nf_next</a>, <a class="el" href="file_8h_source.html#l00088">NUTFILE_EOF</a>, <a class="el" href="usart_8h_source.html#l00156">_RINGBUF::rbf_start</a>, <a class="el" href="usart_8h_source.html#l00250">USART_MF_COOKEDMODE</a>, <a class="el" href="usart_8h_source.html#l00084">USART_RXBUFSIZ</a>, <a class="el" href="usart_8h_source.html#l00093">USART_RXHIWMARK</a>, <a class="el" href="usart_8h_source.html#l00102">USART_RXLOWMARK</a>, <a class="el" href="usart_8h_source.html#l00109">USART_TXBUFSIZ</a>, <a class="el" href="usart_8h_source.html#l00118">USART_TXHIWMARK</a>, and <a class="el" href="usart_8h_source.html#l00127">USART_TXLOWMARK</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__xg_usart_gaeb1a110892efd2c8c1c40d9a1602958a_cgraph.png" border="0" usemap="#group__xg_usart_gaeb1a110892efd2c8c1c40d9a1602958a_cgraph" alt=""/></div>
<map name="group__xg_usart_gaeb1a110892efd2c8c1c40d9a1602958a_cgraph" id="group__xg_usart_gaeb1a110892efd2c8c1c40d9a1602958a_cgraph">
<area shape="rect" id="node3" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="144,5,187,30"/><area shape="rect" id="node5" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="136,54,195,79"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf0819016c1aefd6cbb66e894ff1c4cd8"></a><!-- doxytag: member="usart.c::UsartIOCtl" ref="gaf0819016c1aefd6cbb66e894ff1c4cd8" args="(NUTDEVICE *dev, int req, void *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsartIOCtl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga6e44357e76989d8e579d3f65bc3a2741">NUTDEVICE</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>conf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform USART control functions. </p>
<p>This function is called by the ioctl() function of the C runtime library.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Identifies the device that receives the device-control function. </td></tr>
    <tr><td class="paramname">req</td><td>Requested control function. May be set to one of the following constants:<ul>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga2f1b5053775ad3be83ae499273a04de8">UART_SETSPEED</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga9ed76ac26e95f245f8223386f710061d">UART_GETSPEED</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga3b101264c50cf41a2e89aefe18e42df3">UART_SETDATABITS</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gafe6cf4b5a593b2c1fc956e297813a30c">UART_GETDATABITS</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga00ef3904a6652a110b555edd6ddf3af2">UART_SETPARITY</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gae6ddb681c72800f37ea467de28dd283a">UART_GETPARITY</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga39c1831095f4f9b38e8df671a1e41f4a">UART_SETSTOPBITS</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga005fc980830939bafd142fd13a5b74b2">UART_GETSTOPBITS</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga37df12e471e2f27d27ae6020cce26962">UART_SETSTATUS</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga8efe4a75d8f44ee62aba6ccd05d760e2">UART_GETSTATUS</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gac6096987e89c87f241ec277eea1613e8">UART_SETREADTIMEOUT</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga890b2e58c2ff33fef2165422677ef6b2">UART_GETREADTIMEOUT</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga6a2390bee229176a9b472cb6c0479669">UART_SETWRITETIMEOUT</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga9c74f8eece2583077df1dd3f8afb7084">UART_GETWRITETIMEOUT</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga63fdba0e9438996d1774e3cce107ceb1">UART_SETLOCALECHO</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gadba39ea11065e7714c334d4774463d8c">UART_GETLOCALECHO</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gae31b52d0c12234585c9a7b7c440f4c48">UART_SETFLOWCONTROL</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gac561029505ca3b4762e9b0966c720b98">UART_GETFLOWCONTROL</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga72ecbdbfe7c8ed52eb7035c3cc18ce2e">UART_SETCOOKEDMODE</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga660718c27c8a129d6c10da961e148152">UART_GETCOOKEDMODE</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga8d20e5291580a511ccd4d93b03c1c9b4">UART_SETHDPXMODE</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gacbb8c1d1b32ee5eb40d7eb65d62fc78c">UART_GETHDPXMODE</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga4285dc19bc88c31c30f3cf41e74ad99f">UART_SETCLOCKMODE</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga4da08ec22603ce7a14286dd25d99dc3a">UART_GETCLOCKMODE</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga23d81c761ccfe599e75ade408e505ac2">UART_SETTXBUFSIZ</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga47a203945c0f77250b997454f1931ac7">UART_GETTXBUFSIZ</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga6b37a35c772362f7d9383b6b8a3f8194">UART_SETRXBUFSIZ</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga99a47504660bf9e91ea8824dc82aa561">UART_GETRXBUFSIZ</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga104d1015e711afde4375b28aa92ffa97">UART_SETTXBUFLWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga8ae934685306861688fbe3acb6e0550b">UART_GETTXBUFLWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga48e04a85af9331af32c326cfb1e7fe4a">UART_SETTXBUFHWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga7760a1d2e905684d09c04effb043cbd6">UART_GETTXBUFHWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga868a682df89d7ff345e1b624512836a4">UART_SETRXBUFLWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga104b281d6fa5030cb9be8147ca385a34">UART_GETRXBUFLWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#ga9018acb62de576ec5abcef3e4089d678">UART_SETRXBUFHWMARK</a></li>
<li><a class="el" href="group__xg_u_a_r_t_i_o_c_t_l.html#gabb89ec63e3de5410ae90f7732824d328">UART_GETRXBUFHWMARK</a></li>
</ul>
</td></tr>
    <tr><td class="paramname">conf</td><td>Points to a buffer that contains any data required for the given control function or receives data from that function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Not all control functions may be supported on all platforms. In any case applications should check the returned result.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000063">Todo:</a></b></dt><dd>Hardware handshake is not available with AT91 targets.</dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>Timeout values are given in milliseconds and are limited to the granularity of the system timer. To disable timeout, set the parameter to NUT_WAIT_INFINITE. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00678">678</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="usart_8h_source.html#l00393">_USARTDCB::dcb_get_clock_mode</a>, <a class="el" href="usart_8h_source.html#l00353">_USARTDCB::dcb_get_data_bits</a>, <a class="el" href="usart_8h_source.html#l00333">_USARTDCB::dcb_get_flow_control</a>, <a class="el" href="usart_8h_source.html#l00363">_USARTDCB::dcb_get_parity</a>, <a class="el" href="usart_8h_source.html#l00343">_USARTDCB::dcb_get_speed</a>, <a class="el" href="usart_8h_source.html#l00383">_USARTDCB::dcb_get_status</a>, <a class="el" href="usart_8h_source.html#l00373">_USARTDCB::dcb_get_stop_bits</a>, <a class="el" href="usart_8h_source.html#l00278">_USARTDCB::dcb_modeflags</a>, <a class="el" href="usart_8h_source.html#l00286">_USARTDCB::dcb_rtimeout</a>, <a class="el" href="usart_8h_source.html#l00298">_USARTDCB::dcb_rx_rbf</a>, <a class="el" href="usart_8h_source.html#l00323">_USARTDCB::dcb_rx_start</a>, <a class="el" href="usart_8h_source.html#l00388">_USARTDCB::dcb_set_clock_mode</a>, <a class="el" href="usart_8h_source.html#l00348">_USARTDCB::dcb_set_data_bits</a>, <a class="el" href="usart_8h_source.html#l00328">_USARTDCB::dcb_set_flow_control</a>, <a class="el" href="usart_8h_source.html#l00358">_USARTDCB::dcb_set_parity</a>, <a class="el" href="usart_8h_source.html#l00338">_USARTDCB::dcb_set_speed</a>, <a class="el" href="usart_8h_source.html#l00378">_USARTDCB::dcb_set_status</a>, <a class="el" href="usart_8h_source.html#l00368">_USARTDCB::dcb_set_stop_bits</a>, <a class="el" href="usart_8h_source.html#l00294">_USARTDCB::dcb_tx_rbf</a>, <a class="el" href="usart_8h_source.html#l00290">_USARTDCB::dcb_wtimeout</a>, <a class="el" href="device_8h_source.html#l00216">_NUTDEVICE::dev_dcb</a>, <a class="el" href="arch_2arm_2atom_8h_source.html#l00136">NutEnterCritical</a>, <a class="el" href="arch_2arm_2atom_8h_source.html#l00147">NutExitCritical</a>, <a class="el" href="usart_8h_source.html#l00172">_RINGBUF::rbf_cnt</a>, <a class="el" href="usart_8h_source.html#l00186">_RINGBUF::rbf_hwm</a>, <a class="el" href="usart_8h_source.html#l00179">_RINGBUF::rbf_lwm</a>, <a class="el" href="usart_8h_source.html#l00166">_RINGBUF::rbf_siz</a>, <a class="el" href="dev_2uart_8h_source.html#l00272">UART_GETCLOCKMODE</a>, <a class="el" href="dev_2uart_8h_source.html#l00236">UART_GETCOOKEDMODE</a>, <a class="el" href="dev_2uart_8h_source.html#l00130">UART_GETDATABITS</a>, <a class="el" href="dev_2uart_8h_source.html#l00222">UART_GETFLOWCONTROL</a>, <a class="el" href="dev_2uart_8h_source.html#l00396">UART_GETHDPXMODE</a>, <a class="el" href="dev_2uart_8h_source.html#l00210">UART_GETLOCALECHO</a>, <a class="el" href="dev_2uart_8h_source.html#l00144">UART_GETPARITY</a>, <a class="el" href="dev_2uart_8h_source.html#l00182">UART_GETREADTIMEOUT</a>, <a class="el" href="dev_2uart_8h_source.html#l00344">UART_GETRXBUFHWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00332">UART_GETRXBUFLWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00296">UART_GETRXBUFSIZ</a>, <a class="el" href="dev_2uart_8h_source.html#l00116">UART_GETSPEED</a>, <a class="el" href="dev_2uart_8h_source.html#l00168">UART_GETSTATUS</a>, <a class="el" href="dev_2uart_8h_source.html#l00156">UART_GETSTOPBITS</a>, <a class="el" href="dev_2uart_8h_source.html#l00320">UART_GETTXBUFHWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00308">UART_GETTXBUFLWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00284">UART_GETTXBUFSIZ</a>, <a class="el" href="dev_2uart_8h_source.html#l00196">UART_GETWRITETIMEOUT</a>, <a class="el" href="dev_2uart_8h_source.html#l00433">UART_RXBUFFEREMPTY</a>, <a class="el" href="dev_2uart_8h_source.html#l00266">UART_SETCLOCKMODE</a>, <a class="el" href="dev_2uart_8h_source.html#l00229">UART_SETCOOKEDMODE</a>, <a class="el" href="dev_2uart_8h_source.html#l00123">UART_SETDATABITS</a>, <a class="el" href="dev_2uart_8h_source.html#l00216">UART_SETFLOWCONTROL</a>, <a class="el" href="dev_2uart_8h_source.html#l00391">UART_SETHDPXMODE</a>, <a class="el" href="dev_2uart_8h_source.html#l00203">UART_SETLOCALECHO</a>, <a class="el" href="dev_2uart_8h_source.html#l00137">UART_SETPARITY</a>, <a class="el" href="dev_2uart_8h_source.html#l00175">UART_SETREADTIMEOUT</a>, <a class="el" href="dev_2uart_8h_source.html#l00338">UART_SETRXBUFHWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00326">UART_SETRXBUFLWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00290">UART_SETRXBUFSIZ</a>, <a class="el" href="dev_2uart_8h_source.html#l00109">UART_SETSPEED</a>, <a class="el" href="dev_2uart_8h_source.html#l00162">UART_SETSTATUS</a>, <a class="el" href="dev_2uart_8h_source.html#l00150">UART_SETSTOPBITS</a>, <a class="el" href="dev_2uart_8h_source.html#l00314">UART_SETTXBUFHWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00302">UART_SETTXBUFLWMARK</a>, <a class="el" href="dev_2uart_8h_source.html#l00278">UART_SETTXBUFSIZ</a>, <a class="el" href="dev_2uart_8h_source.html#l00189">UART_SETWRITETIMEOUT</a>, <a class="el" href="dev_2uart_8h_source.html#l00440">UART_TXBUFFEREMPTY</a>, <a class="el" href="usart_8h_source.html#l00250">USART_MF_COOKEDMODE</a>, <a class="el" href="usart_8h_source.html#l00256">USART_MF_HALFDUPLEX</a>, and <a class="el" href="usart_8h_source.html#l00249">USART_MF_LOCALECHO</a>.</p>

</div>
</div>
<a class="anchor" id="ga06d0ebd0cf76d7d935db8c234aca0d69"></a><!-- doxytag: member="usart.c::UsartSize" ref="ga06d0ebd0cf76d7d935db8c234aca0d69" args="(NUTFILE *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long UsartSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_device.html#ga66d4b4dd6b81551dadfe12d452ec4455">NUTFILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieves the number of characters in input buffer. </p>
<p>This function is called by the low level size routine of the C runtime library, using the <a class="el" href="struct___n_u_t_d_e_v_i_c_e.html#af6b0bfea0243c007df5e5068bf70c4ec" title="Request file size.">_NUTDEVICE::dev_size</a> entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>Pointer to a <a class="el" href="struct___n_u_t_f_i_l_e.html">_NUTFILE</a> structure, obtained by a previous call to <a class="el" href="group__xg_usart.html#gaeb1a110892efd2c8c1c40d9a1602958a" title="Open an USART device.">UsartOpen()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes currently stored in input buffer. </dd></dl>

<p>Definition at line <a class="el" href="dev_2usart_8c_source.html#l00888">888</a> of file <a class="el" href="dev_2usart_8c_source.html">usart.c</a>.</p>

<p>References <a class="el" href="usart_8h_source.html#l00298">_USARTDCB::dcb_rx_rbf</a>, <a class="el" href="device_8h_source.html#l00216">_NUTDEVICE::dev_dcb</a>, <a class="el" href="file_8h_source.html#l00080">_NUTFILE::nf_dev</a>, <a class="el" href="arch_2arm_2atom_8h_source.html#l00136">NutEnterCritical</a>, <a class="el" href="arch_2arm_2atom_8h_source.html#l00147">NutExitCritical</a>, and <a class="el" href="usart_8h_source.html#l00172">_RINGBUF::rbf_cnt</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
