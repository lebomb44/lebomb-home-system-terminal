<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: net/tcpout.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS
   &#160;<span id="projectnumber">4.10.3</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('tcpout_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tcpout.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="os_8h_source.html">cfg/os.h</a>&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="heap_8h_source.html">sys/heap.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="event_8h_source.html">sys/event.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sys_2timer_8h_source.html">sys/timer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="in_8h_source.html">netinet/in.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="netinet_2ip_8h_source.html">netinet/ip.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="icmp_8h_source.html">netinet/icmp.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ip__icmp_8h_source.html">netinet/ip_icmp.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ipcsum_8h_source.html">netinet/ipcsum.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="socket_8h_source.html">sys/socket.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="netinet_2tcp_8h_source.html">netinet/tcp.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="thread_8h_source.html">sys/thread.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="netdebug_8h_source.html">net/netdebug.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tcpout.c:</div>
<div class="dyncontent">
<div class="center"><img src="tcpout_8c__incl.png" border="0" usemap="#net_2tcpout_8c" alt=""/></div>
<map name="net_2tcpout_8c" id="net_2tcpout_8c">
<area shape="rect" id="node3" href="os_8h.html" title="cfg/os.h" alt="" coords="5,81,69,106"/><area shape="rect" id="node9" href="heap_8h.html" title="Heap management definitions." alt="" coords="93,305,176,330"/><area shape="rect" id="node19" href="event_8h.html" title="Event management definitions." alt="" coords="379,81,461,106"/><area shape="rect" id="node21" href="thread_8h.html" title="Thread management definitions." alt="" coords="201,305,289,330"/><area shape="rect" id="node28" href="sys_2timer_8h.html" title="Timer management definitions." alt="" coords="445,230,528,255"/><area shape="rect" id="node35" href="in_8h.html" title="Internet definitions." alt="" coords="1864,379,1947,405"/><area shape="rect" id="node38" href="netinet_2ip_8h.html" title="Definitions for internet protocol version 4." alt="" coords="853,155,936,181"/><area shape="rect" id="node61" href="icmp_8h.html" title="ICMP protocol definitions." alt="" coords="716,155,815,181"/><area shape="rect" id="node67" href="ip__icmp_8h.html" title="Interface control message protocol definitions." alt="" coords="915,81,1031,106"/><area shape="rect" id="node72" href="ipcsum_8h.html" title="IP checksum definitions." alt="" coords="1433,305,1545,330"/><area shape="rect" id="node76" href="socket_8h.html" title="UDP and TCP socket interface definitions." alt="" coords="1580,155,1671,181"/><area shape="rect" id="node90" href="netinet_2tcp_8h.html" title="TCP protocol definitions." alt="" coords="1239,155,1327,181"/><area shape="rect" id="node95" href="netdebug_8h.html" title="net/netdebug.h" alt="" coords="1329,81,1433,106"/><area shape="rect" id="node11" href="memory_8h.html" title="Default memory layout." alt="" coords="93,379,189,405"/><area shape="rect" id="node13" href="types_8h.html" title="Nut/OS type declarations." alt="" coords="1151,454,1233,479"/><area shape="rect" id="node15" href="compiler_8h.html" title="compiler.h" alt="" coords="1492,529,1572,554"/><area shape="rect" id="node26" href="stdint_8h.html" title="stdint.h" alt="" coords="863,379,925,405"/><area shape="rect" id="node31" href="arch_2timer_8h.html" title="arch/timer.h" alt="" coords="417,305,503,330"/><area shape="rect" id="node40" href="if__arp_8h.html" title="ARP protocol header." alt="" coords="932,230,1015,255"/><area shape="rect" id="node44" href="netbuf_8h.html" title="Network buffer definitions." alt="" coords="851,305,939,330"/><area shape="rect" id="node48" href="if__var_8h.html" title="Network interface structure." alt="" coords="725,230,805,255"/><area shape="rect" id="node52" href="device_8h.html" title="Nut/OS device definitions." alt="" coords="1065,305,1153,330"/><area shape="rect" id="node59" href="if__types_8h.html" title="Network interface type definitions." alt="" coords="630,305,724,330"/><area shape="rect" id="node54" href="file_8h.html" title="sys/file.h" alt="" coords="1079,379,1149,405"/><area shape="rect" id="node78" href="cfg_2udp_8h.html" title="UDP configuration." alt="" coords="1701,230,1773,255"/><area shape="rect" id="node81" href="sock__var_8h.html" title="UDP and TCP socket interface definitions." alt="" coords="1574,230,1676,255"/><area shape="rect" id="node88" href="tcp__fsm_8h.html" title="TCP state machine definitions." alt="" coords="1622,305,1737,330"/><area shape="rect" id="node97" href="stdio_8h.html" title="C Standard I/O." alt="" coords="1436,155,1495,181"/></map>
</div>
</div>
<p><a href="tcpout_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcpout_8c.html#a2dbf5a03e60e89a32ffcfd429aa81775">NutTcpOutput</a> (<a class="el" href="group__xg_tcp_socket.html#gaffc7ada36497e0b38f338c1aa1b5e394">TCPSOCKET</a> *sock, CONST <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *data, <a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiate TCP segment transmission.  <a href="#a2dbf5a03e60e89a32ffcfd429aa81775"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcpout_8c.html#a47fb9b8095e5720d1cf8bc1b9db8df2c">NutTcpReject</a> (<a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *nb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reject an incoming segment.  <a href="#a47fb9b8095e5720d1cf8bc1b9db8df2c"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2dbf5a03e60e89a32ffcfd429aa81775"></a><!-- doxytag: member="tcpout.c::NutTcpOutput" ref="a2dbf5a03e60e89a32ffcfd429aa81775" args="(TCPSOCKET *sock, CONST uint8_t *data, uint16_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutTcpOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_tcp_socket.html#gaffc7ada36497e0b38f338c1aa1b5e394">TCPSOCKET</a> *&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initiate TCP segment transmission. </p>
<p>Check the TCP socket status and send any segment waiting for transmission.</p>
<p>The function will not return until the data has been stored in the network device hardware for transmission. If the device is not ready for transmitting a new packet, the calling thread will be suspended until the device becomes ready again.</p>
<p>If the target host is connected through an Ethernet network and if the hardware address of that host is currently unknown, an ARP request is sent out and the function will block until a response is received or an ARP timeout occurs.</p>
<p>Segments containing data or SYN and FIN flags are added to a special queue for unacknowledged segments and will be retransmitted by the TCP timer thread, if not acknowledged by the remote within a specific time. The state machine will remove these segments from the queue as soon as they are acknowledged.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is mainly used by the TCP state machine. Applications typically do not call this function but use <a class="el" href="group__xg_tcp_socket.html#gafc14dd4c910afbb9269adc5bebba0281" title="Send data on a connected TCP socket.">NutTcpSend()</a>, which is part of the TCP socket interface.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Socket descriptor. This pointer must have been retrieved by calling <a class="el" href="group__xg_tcp_socket.html#ga6bf8ec59828c5a0e38423293b4dfe8e6" title="Create a TCP socket.">NutTcpCreateSocket()</a>. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to TCP segment contents. </td></tr>
    <tr><td class="paramname">size</td><td>TCP segment length.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. Returning 0 does not imply that the data has been successfully delivered, because flow control and retransmission is still handled in the background. </dd></dl>

<p>Definition at line <a class="el" href="tcpout_8c_source.html#l00209">209</a> of file <a class="el" href="tcpout_8c_source.html">tcpout.c</a>.</p>

<p>References <a class="el" href="netdebug_8c_source.html#l00103">__tcp_trf</a>, <a class="el" href="netdebug_8c_source.html#l00102">__tcp_trs</a>, <a class="el" href="errno_8h_source.html#l00117">ENOBUFS</a>, <a class="el" href="types_8h_source.html#l00340">htonl</a>, <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="in_8h_source.html#l00132">IPPROTO_TCP</a>, <a class="el" href="memcpy_8c_source.html#l00114">memcpy()</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00161">_NETBUF::nb_next</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="netbuf_8h_source.html#l00134">NBAF_APPLICATION</a>, <a class="el" href="netbuf_8h_source.html#l00133">NBAF_TRANSPORT</a>, <a class="el" href="types_8h_source.html#l00358">ntohl</a>, <a class="el" href="netdebug_8c_source.html#l00105">NutDumpTcpHeader()</a>, <a class="el" href="timer_8c_source.html#l00752">NutGetMillis()</a>, <a class="el" href="ipcsum_8c_source.html#l00193">NutIpChkSum()</a>, <a class="el" href="ipcsum_8c_source.html#l00153">NutIpChkSumPartial()</a>, <a class="el" href="ipout_8c_source.html#l00182">NutIpOutput()</a>, <a class="el" href="ipcsum_8c_source.html#l00214">NutIpPseudoChkSumPartial()</a>, <a class="el" href="netbuf_8c_source.html#l00173">NutNetBufAlloc()</a>, <a class="el" href="netbuf_8c_source.html#l00255">NutNetBufClonePart()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="sock__var_8h_source.html#l00273">SO_ACK</a>, <a class="el" href="sock__var_8h_source.html#l00270">SO_FIN</a>, <a class="el" href="sock__var_8h_source.html#l00272">SO_FORCE</a>, <a class="el" href="sock__var_8h_source.html#l00258">tcp_socket::so_last_error</a>, <a class="el" href="sock__var_8h_source.html#l00224">tcp_socket::so_local_addr</a>, <a class="el" href="sock__var_8h_source.html#l00225">tcp_socket::so_local_port</a>, <a class="el" href="sock__var_8h_source.html#l00251">tcp_socket::so_mss</a>, <a class="el" href="sock__var_8h_source.html#l00226">tcp_socket::so_remote_addr</a>, <a class="el" href="sock__var_8h_source.html#l00227">tcp_socket::so_remote_port</a>, <a class="el" href="sock__var_8h_source.html#l00257">tcp_socket::so_retran_time</a>, <a class="el" href="sock__var_8h_source.html#l00253">tcp_socket::so_rtt_seq</a>, <a class="el" href="sock__var_8h_source.html#l00241">tcp_socket::so_rx_nxt</a>, <a class="el" href="sock__var_8h_source.html#l00242">tcp_socket::so_rx_win</a>, <a class="el" href="sock__var_8h_source.html#l00271">SO_SYN</a>, <a class="el" href="sock__var_8h_source.html#l00229">tcp_socket::so_tx_flags</a>, <a class="el" href="sock__var_8h_source.html#l00237">tcp_socket::so_tx_nbq</a>, <a class="el" href="sock__var_8h_source.html#l00232">tcp_socket::so_tx_nxt</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00170">TCPOLEN_MAXSEG</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00169">TCPOPT_MAXSEG</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00130">TH_ACK</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00148">tcphdr::th_ack</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00146">tcphdr::th_dport</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00126">TH_FIN</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00161">tcphdr::th_flags</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00154">tcphdr::th_off</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00129">TH_PUSH</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00147">tcphdr::th_seq</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00145">tcphdr::th_sport</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00163">tcphdr::th_sum</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00127">TH_SYN</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00164">tcphdr::th_urp</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00162">tcphdr::th_win</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00154">tcphdr::th_x2</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="tcpsock_8c_source.html#l00692">NutTcpSend()</a>, <a class="el" href="tcpsm_8c_source.html#l01671">NutTcpSm()</a>, and <a class="el" href="tcpsm_8c_source.html#l00934">NutTcpStateWindowEvent()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tcpout_8c_a2dbf5a03e60e89a32ffcfd429aa81775_cgraph.png" border="0" usemap="#tcpout_8c_a2dbf5a03e60e89a32ffcfd429aa81775_cgraph" alt=""/></div>
<map name="tcpout_8c_a2dbf5a03e60e89a32ffcfd429aa81775_cgraph" id="tcpout_8c_a2dbf5a03e60e89a32ffcfd429aa81775_cgraph">
<area shape="rect" id="node3" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="593,15,663,40"/><area shape="rect" id="node5" href="netdebug_8h.html#a13243e59b9857a6c4ee17e4cee73af51" title="NutDumpTcpHeader" alt="" coords="173,543,309,568"/><area shape="rect" id="node29" href="group__xg_timer.html#gac1887264221d66b13d1e86d034227f1c" title="Return the milliseconds counter value." alt="" coords="197,643,285,668"/><area shape="rect" id="node39" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="396,391,495,416"/><area shape="rect" id="node41" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="561,441,695,467"/><area shape="rect" id="node44" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="198,228,285,253"/><area shape="rect" id="node46" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="393,89,497,115"/><area shape="rect" id="node48" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="577,140,679,165"/><area shape="rect" id="node53" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="379,40,512,65"/><area shape="rect" id="node63" href="group__xg_i_p.html#ga9ddc8d97c6179d3b2c562a78b2131632" title="Calculates the partial IP pseudo checksum." alt="" coords="153,492,330,517"/><area shape="rect" id="node7" href="group__xg_crt_stdio.html#ga2f7351ee13f3f4c465c65e849a12a3fd" title="Print formatted data to a stream." alt="" coords="419,593,471,619"/><area shape="rect" id="node25" href="group__xg_crt_stdio.html#ga14acfae1988535199b72df91e18f72f3" title="Write a string to a stream." alt="" coords="603,543,653,568"/><area shape="rect" id="node9" href="group__xg_crt_stdio.html#ga50c4b673b1d86ab16f2a46aff7122c5c" title="Write argument list to a stream using a given format." alt="" coords="599,593,657,619"/><area shape="rect" id="node11" href="group__xg_crt_stdio.html#ga651a41ea9a05d4294a58c1ec83e13f18" title="Write formatted data using a given output function." alt="" coords="777,593,826,619"/><area shape="rect" id="node23" href="io_8h.html#a901fa187b164dd6faaac1b62c88614b5" title="_write" alt="" coords="774,544,829,569"/><area shape="rect" id="node13" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="912,592,971,617"/><area shape="rect" id="node15" href="group__xg_crt_string.html#ga9d0726a46ae033e7755fd1313da76ab1" title="Locate byte in a memory region." alt="" coords="907,641,975,667"/><area shape="rect" id="node17" href="group__xg_crt_string.html#ga7b9fc4834c90ac78977b5fbb3076c5ac" title="Compute the length of a NUL terminated string." alt="" coords="915,493,968,519"/><area shape="rect" id="node19" href="group__xg_crt_string.html#ga5f9abaa6c5ffa26025ca901c14cb1056" title="Copy a string." alt="" coords="914,691,969,716"/><area shape="rect" id="node21" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="920,543,963,568"/><area shape="rect" id="node31" href="group__xg_timer.html#ga940f66286dcf28b8280e41b605064446" title="Return the number of system timer ticks." alt="" coords="388,692,503,717"/><area shape="rect" id="node33" href="group__xg_nut_arch_arm_os_timer_at91.html#ga2724f52da15ed45123a32c1ed7e148f0" title="Return the number of system ticks per second." alt="" coords="389,643,502,668"/><area shape="rect" id="node35" href="group__xg_timer.html#ga784a7f52b5167c777149fd1d874c99f0" title="Return the CPU clock frequency." alt="" coords="571,643,685,668"/><area shape="rect" id="node37" href="group__xg_nut_arch_arm_os_timer_gba.html#ga7d11c53224db0028ad4838f8b9df9872" title="Return the CPU clock in Hertz." alt="" coords="744,643,859,668"/><area shape="rect" id="node51" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="411,240,479,265"/><area shape="rect" id="node59" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="387,289,503,315"/><area shape="rect" id="node61" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="382,139,509,164"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a47fb9b8095e5720d1cf8bc1b9db8df2c"></a><!-- doxytag: member="tcpout.c::NutTcpReject" ref="a47fb9b8095e5720d1cf8bc1b9db8df2c" args="(NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutTcpReject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xgnetbuf.html#ga53335a44e4c6c554e11329de65ebc13e">NETBUF</a> *&#160;</td>
          <td class="paramname"><em>nb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reject an incoming segment. </p>
<p>Send RST in response to an incoming segment, which should be rejected.</p>
<p>The function avoids to send out a RST segment in response to an incoming RST segment.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is mainly used by the TCP state machine. Applications typically do not call this function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">nb</td><td>Network buffer structure of the incoming segment. Will be released within this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="tcpout_8c_source.html#l00395">395</a> of file <a class="el" href="tcpout_8c_source.html">tcpout.c</a>.</p>

<p>References <a class="el" href="netdebug_8c_source.html#l00103">__tcp_trf</a>, <a class="el" href="netdebug_8c_source.html#l00102">__tcp_trs</a>, <a class="el" href="types_8h_source.html#l00340">htonl</a>, <a class="el" href="types_8h_source.html#l00331">htons</a>, <a class="el" href="netinet_2ip_8h_source.html#l00166">ip::ip_dst</a>, <a class="el" href="netinet_2ip_8h_source.html#l00165">ip::ip_src</a>, <a class="el" href="in_8h_source.html#l00132">IPPROTO_TCP</a>, <a class="el" href="netbuf_8h_source.html#l00166">_NETBUF::nb_ap</a>, <a class="el" href="netbuf_8h_source.html#l00164">_NETBUF::nb_nw</a>, <a class="el" href="netbuf_8h_source.html#l00165">_NETBUF::nb_tp</a>, <a class="el" href="types_8h_source.html#l00358">ntohl</a>, <a class="el" href="netdebug_8c_source.html#l00105">NutDumpTcpHeader()</a>, <a class="el" href="ipcsum_8c_source.html#l00193">NutIpChkSum()</a>, <a class="el" href="ipout_8c_source.html#l00182">NutIpOutput()</a>, <a class="el" href="ipcsum_8c_source.html#l00214">NutIpPseudoChkSumPartial()</a>, <a class="el" href="netbuf_8c_source.html#l00364">NutNetBufFree()</a>, <a class="el" href="netbuf_8h_source.html#l00153">_NBDATA::sz</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00130">TH_ACK</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00128">TH_RST</a>, <a class="el" href="netinet_2tcp_8h_source.html#l00127">TH_SYN</a>, and <a class="el" href="netbuf_8h_source.html#l00152">_NBDATA::vp</a>.</p>

<p>Referenced by <a class="el" href="tcpsm_8c_source.html#l01671">NutTcpSm()</a>, and <a class="el" href="tcpsm_8c_source.html#l01786">NutTcpStateMachine()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tcpout_8c_a47fb9b8095e5720d1cf8bc1b9db8df2c_cgraph.png" border="0" usemap="#tcpout_8c_a47fb9b8095e5720d1cf8bc1b9db8df2c_cgraph" alt=""/></div>
<map name="tcpout_8c_a47fb9b8095e5720d1cf8bc1b9db8df2c_cgraph" id="tcpout_8c_a47fb9b8095e5720d1cf8bc1b9db8df2c_cgraph">
<area shape="rect" id="node3" href="netdebug_8h.html#a13243e59b9857a6c4ee17e4cee73af51" title="NutDumpTcpHeader" alt="" coords="171,81,307,106"/><area shape="rect" id="node27" href="group__xg_i_p.html#gacbd7636c68dcc06dd37e2fae11472278" title="Calculates an the final IP checksum over a block of data." alt="" coords="393,182,492,207"/><area shape="rect" id="node31" href="group__xg_i_p.html#gaa1d170f1dc44c4292480d40990483d85" title="Send IP datagram." alt="" coords="195,305,282,330"/><area shape="rect" id="node35" href="group__xgnetbuf.html#ga2e14a135152823a816388f50bdb3ea3f" title="Release a network buffer structure." alt="" coords="574,455,677,481"/><area shape="rect" id="node51" href="group__xg_i_p.html#ga9ddc8d97c6179d3b2c562a78b2131632" title="Calculates the partial IP pseudo checksum." alt="" coords="150,131,327,157"/><area shape="rect" id="node5" href="group__xg_crt_stdio.html#ga2f7351ee13f3f4c465c65e849a12a3fd" title="Print formatted data to a stream." alt="" coords="417,81,469,106"/><area shape="rect" id="node23" href="group__xg_crt_stdio.html#ga14acfae1988535199b72df91e18f72f3" title="Write a string to a stream." alt="" coords="601,30,650,55"/><area shape="rect" id="node7" href="group__xg_crt_stdio.html#ga50c4b673b1d86ab16f2a46aff7122c5c" title="Write argument list to a stream using a given format." alt="" coords="597,81,654,106"/><area shape="rect" id="node9" href="group__xg_crt_stdio.html#ga651a41ea9a05d4294a58c1ec83e13f18" title="Write formatted data using a given output function." alt="" coords="745,105,794,130"/><area shape="rect" id="node21" href="io_8h.html#a901fa187b164dd6faaac1b62c88614b5" title="_write" alt="" coords="742,55,797,81"/><area shape="rect" id="node11" href="group__xg_heap.html#ga381d0a123dbf80ca3efe2614aa826e08" title="Allocate a block from heap memory." alt="" coords="851,54,909,79"/><area shape="rect" id="node13" href="group__xg_crt_string.html#ga9d0726a46ae033e7755fd1313da76ab1" title="Locate byte in a memory region." alt="" coords="846,103,914,129"/><area shape="rect" id="node15" href="group__xg_crt_string.html#ga7b9fc4834c90ac78977b5fbb3076c5ac" title="Compute the length of a NUL terminated string." alt="" coords="853,5,907,30"/><area shape="rect" id="node17" href="group__xg_crt_string.html#ga5f9abaa6c5ffa26025ca901c14cb1056" title="Copy a string." alt="" coords="853,153,907,178"/><area shape="rect" id="node19" href="group__xg_heap.html#ga9f850d0608418aea291e4c0fdab93826" title="Return a block to heap memory." alt="" coords="859,202,901,227"/><area shape="rect" id="node29" href="group__xg_i_p.html#ga0586b4cd0a06f9e87f216037f937fab1" title="Calculate a partial IP checksum of a buffer." alt="" coords="558,157,693,182"/><area shape="rect" id="node33" href="group__xgnetbuf.html#ga7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re&#45;allocate a network buffer part." alt="" coords="391,481,495,506"/><area shape="rect" id="node38" href="group__xg_crt_string.html#gaa4075a014de11292d9105188ddbeb216" title="Fill memory region with a specific byte value." alt="" coords="409,281,477,306"/><area shape="rect" id="node40" href="group__xgnetbuf.html#ga3619cbf40ea5786bc0241c1e2e8e955a" title="Create a referencing copy of an existing network buffer structure." alt="" coords="376,231,509,257"/><area shape="rect" id="node47" href="group__xg_i_p.html#ga2534f1918ba2a63523659fc005344b25" title="Find a device associated with a particular IP route." alt="" coords="385,330,501,355"/><area shape="rect" id="node49" href="if__ether_8h.html#ad1273e0893b714b62384c38dcc443beb" title="NutArpCacheQuery" alt="" coords="379,379,506,405"/><area shape="rect" id="node42" href="group__xg_crt_string.html#ga09a4c3953e2e41a212a73cf3df4c8c8e" title="memcpy" alt="" coords="591,231,660,257"/></map>
</div>
</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="tcpout_8c.html">tcpout.c</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
