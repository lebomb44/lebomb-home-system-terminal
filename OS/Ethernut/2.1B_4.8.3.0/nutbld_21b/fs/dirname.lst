GAS LISTING C:\Temp/ccPyRDsO.s 			page 1


   1               		.file	"dirname.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.data
  11               	.LC0:
  12 0000 2E00      		.string	"."
  13               	.LC1:
  14 0002 2F00      		.string	"/"
  15               		.text
  16               	.global	dirname
  17               		.type	dirname, @function
  18               	dirname:
  19 0000 0F93      		push r16
  20 0002 1F93      		push r17
  21 0004 CF93      		push r28
  22 0006 DF93      		push r29
  23               	/* prologue: function */
  24               	/* frame size = 0 */
  25 0008 8C01      		movw r16,r24
  26 000a 8091 0000 		lds r24,bname.1671
  27 000e 9091 0000 		lds r25,(bname.1671)+1
  28 0012 892B      		or r24,r25
  29 0014 01F4      		brne .L2
  30 0016 80E0      		ldi r24,lo8(256)
  31 0018 91E0      		ldi r25,hi8(256)
  32 001a 0E94 0000 		call malloc
  33 001e 9093 0000 		sts (bname.1671)+1,r25
  34 0022 8093 0000 		sts bname.1671,r24
  35 0026 0097      		sbiw r24,0
  36 0028 01F4      		brne .+2
  37 002a 00C0      		rjmp .L20
  38               	.L2:
  39 002c 0115      		cp r16,__zero_reg__
  40 002e 1105      		cpc r17,__zero_reg__
  41 0030 01F0      		breq .L4
  42 0032 F801      		movw r30,r16
  43 0034 8081      		ld r24,Z
  44 0036 8823      		tst r24
  45 0038 01F4      		brne .L5
  46               	.L4:
  47 003a 40E0      		ldi r20,lo8(256)
  48 003c 51E0      		ldi r21,hi8(256)
  49 003e 60E0      		ldi r22,lo8(.LC0)
  50 0040 70E0      		ldi r23,hi8(.LC0)
  51 0042 00C0      		rjmp .L21
  52               	.L5:
  53 0044 D801      		movw r26,r16
  54 0046 0D90      		ld __tmp_reg__,X+
  55 0048 0020      		tst __tmp_reg__
  56 004a 01F4      		brne .-6
  57 004c A01B      		sub r26,r16
GAS LISTING C:\Temp/ccPyRDsO.s 			page 2


  58 004e B10B      		sbc r27,r17
  59 0050 1297      		sbiw r26,2
  60 0052 A00F      		add r26,r16
  61 0054 B11F      		adc r27,r17
  62 0056 00C0      		rjmp .L6
  63               	.L8:
  64 0058 1197      		sbiw r26,1
  65               	.L6:
  66 005a 0A17      		cp r16,r26
  67 005c 1B07      		cpc r17,r27
  68 005e 00F4      		brsh .L7
  69 0060 8C91      		ld r24,X
  70 0062 8F32      		cpi r24,lo8(47)
  71 0064 01F0      		breq .L8
  72 0066 00C0      		rjmp .L19
  73               	.L10:
  74 0068 1197      		sbiw r26,1
  75 006a 0A17      		cp r16,r26
  76 006c 1B07      		cpc r17,r27
  77 006e 00F4      		brsh .L7
  78               	.L19:
  79 0070 8C91      		ld r24,X
  80 0072 8F32      		cpi r24,lo8(47)
  81 0074 01F4      		brne .L10
  82               	.L7:
  83 0076 FD01      		movw r30,r26
  84 0078 A017      		cp r26,r16
  85 007a B107      		cpc r27,r17
  86 007c 01F4      		brne .L17
  87 007e 8C91      		ld r24,X
  88 0080 8F32      		cpi r24,lo8(47)
  89 0082 01F0      		breq .L12
  90 0084 60E0      		ldi r22,lo8(.LC0)
  91 0086 70E0      		ldi r23,hi8(.LC0)
  92 0088 00C0      		rjmp .L13
  93               	.L12:
  94 008a 60E0      		ldi r22,lo8(.LC1)
  95 008c 70E0      		ldi r23,hi8(.LC1)
  96               	.L13:
  97 008e 40E0      		ldi r20,lo8(256)
  98 0090 51E0      		ldi r21,hi8(256)
  99               	.L21:
 100 0092 8091 0000 		lds r24,bname.1671
 101 0096 9091 0000 		lds r25,(bname.1671)+1
 102 009a 0E94 0000 		call strncpy
 103 009e 2091 0000 		lds r18,bname.1671
 104 00a2 3091 0000 		lds r19,(bname.1671)+1
 105 00a6 00C0      		rjmp .L3
 106               	.L17:
 107 00a8 3197      		sbiw r30,1
 108 00aa 0E17      		cp r16,r30
 109 00ac 1F07      		cpc r17,r31
 110 00ae 00F4      		brsh .L14
 111 00b0 8081      		ld r24,Z
 112 00b2 8F32      		cpi r24,lo8(47)
 113 00b4 01F0      		breq .L17
 114               	.L14:
GAS LISTING C:\Temp/ccPyRDsO.s 			page 3


 115 00b6 EF01      		movw r28,r30
 116 00b8 C01B      		sub r28,r16
 117 00ba D10B      		sbc r29,r17
 118 00bc CF3F      		cpi r28,255
 119 00be D105      		cpc r29,__zero_reg__
 120 00c0 04F0      		brlt .L15
 121 00c2 8FE3      		ldi r24,lo8(63)
 122 00c4 90E0      		ldi r25,hi8(63)
 123 00c6 9093 0000 		sts (errno)+1,r25
 124 00ca 8093 0000 		sts errno,r24
 125               	.L20:
 126 00ce 20E0      		ldi r18,lo8(0)
 127 00d0 30E0      		ldi r19,hi8(0)
 128 00d2 00C0      		rjmp .L3
 129               	.L15:
 130 00d4 B801      		movw r22,r16
 131 00d6 8091 0000 		lds r24,bname.1671
 132 00da 9091 0000 		lds r25,(bname.1671)+1
 133 00de 0E94 0000 		call strcpy
 134 00e2 2091 0000 		lds r18,bname.1671
 135 00e6 3091 0000 		lds r19,(bname.1671)+1
 136 00ea C20F      		add r28,r18
 137 00ec D31F      		adc r29,r19
 138 00ee 1982      		std Y+1,__zero_reg__
 139               	.L3:
 140 00f0 C901      		movw r24,r18
 141               	/* epilogue start */
 142 00f2 DF91      		pop r29
 143 00f4 CF91      		pop r28
 144 00f6 1F91      		pop r17
 145 00f8 0F91      		pop r16
 146 00fa 0895      		ret
 147               		.size	dirname, .-dirname
 148               		.lcomm bname.1671,2
GAS LISTING C:\Temp/ccPyRDsO.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 dirname.c
  C:\Temp/ccPyRDsO.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccPyRDsO.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccPyRDsO.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccPyRDsO.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccPyRDsO.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccPyRDsO.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccPyRDsO.s:18     .text:00000000 dirname
                             .bss:00000000 bname.1671

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
malloc
strncpy
errno
strcpy
