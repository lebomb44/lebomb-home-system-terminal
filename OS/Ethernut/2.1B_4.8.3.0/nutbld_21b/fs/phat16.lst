GAS LISTING C:\Temp/ccbz3Mtf.s 			page 1


   1               		.file	"phat16.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	Phat16SetClusterLink
  12               		.type	Phat16SetClusterLink, @function
  13               	Phat16SetClusterLink:
  14 0000 2F92      		push r2
  15 0002 3F92      		push r3
  16 0004 4F92      		push r4
  17 0006 5F92      		push r5
  18 0008 6F92      		push r6
  19 000a 7F92      		push r7
  20 000c 8F92      		push r8
  21 000e 9F92      		push r9
  22 0010 AF92      		push r10
  23 0012 BF92      		push r11
  24 0014 CF92      		push r12
  25 0016 DF92      		push r13
  26 0018 EF92      		push r14
  27 001a FF92      		push r15
  28 001c 0F93      		push r16
  29 001e 1F93      		push r17
  30 0020 DF93      		push r29
  31 0022 CF93      		push r28
  32 0024 CDB7      		in r28,__SP_L__
  33 0026 DEB7      		in r29,__SP_H__
  34 0028 2997      		sbiw r28,9
  35 002a 0FB6      		in __tmp_reg__,__SREG__
  36 002c F894      		cli
  37 002e DEBF      		out __SP_H__,r29
  38 0030 0FBE      		out __SREG__,__tmp_reg__
  39 0032 CDBF      		out __SP_L__,r28
  40               	/* prologue: function */
  41               	/* frame size = 9 */
  42 0034 9B83      		std Y+3,r25
  43 0036 8A83      		std Y+2,r24
  44 0038 3A01      		movw r6,r20
  45 003a 4B01      		movw r8,r22
  46 003c 0C83      		std Y+4,r16
  47 003e 1D83      		std Y+5,r17
  48 0040 2E83      		std Y+6,r18
  49 0042 3F83      		std Y+7,r19
  50 0044 DC01      		movw r26,r24
  51 0046 5196      		adiw r26,17
  52 0048 4D90      		ld r4,X+
  53 004a 5C90      		ld r5,X
  54 004c 5297      		sbiw r26,17+1
  55 004e 660C      		lsl r6
  56 0050 771C      		rol r7
  57 0052 881C      		rol r8
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 2


  58 0054 991C      		rol r9
  59 0056 BB27      		clr r27
  60 0058 A32F      		mov r26,r19
  61 005a 922F      		mov r25,r18
  62 005c 812F      		mov r24,r17
  63 005e 8983      		std Y+1,r24
  64 0060 1201      		movw r2,r4
  65 0062 F201      		movw r30,r4
  66 0064 3896      		adiw r30,8
  67 0066 F987      		std Y+9,r31
  68 0068 E887      		std Y+8,r30
  69 006a 00C0      		rjmp .L2
  70               	.L6:
  71 006c D201      		movw r26,r4
  72 006e 5696      		adiw r26,22
  73 0070 8D91      		ld r24,X+
  74 0072 9C91      		ld r25,X
  75 0074 5797      		sbiw r26,22+1
  76 0076 5C01      		movw r10,r24
  77 0078 CC24      		clr r12
  78 007a DD24      		clr r13
  79 007c C401      		movw r24,r8
  80 007e B301      		movw r22,r6
  81 0080 A601      		movw r20,r12
  82 0082 9501      		movw r18,r10
  83 0084 0E94 0000 		call __udivmodsi4
  84 0088 E20E      		add r14,r18
  85 008a F31E      		adc r15,r19
  86 008c 041F      		adc r16,r20
  87 008e 151F      		adc r17,r21
  88 0090 B801      		movw r22,r16
  89 0092 A701      		movw r20,r14
  90 0094 8A81      		ldd r24,Y+2
  91 0096 9B81      		ldd r25,Y+3
  92 0098 0E94 0000 		call PhatSectorLoad
  93 009c 7C01      		movw r14,r24
  94 009e 97FF      		sbrs r25,7
  95 00a0 00C0      		rjmp .L3
  96 00a2 2FEF      		ldi r18,lo8(-1)
  97 00a4 3FEF      		ldi r19,hi8(-1)
  98 00a6 00C0      		rjmp .L4
  99               	.L3:
 100 00a8 C401      		movw r24,r8
 101 00aa B301      		movw r22,r6
 102 00ac A601      		movw r20,r12
 103 00ae 9501      		movw r18,r10
 104 00b0 0E94 0000 		call __udivmodsi4
 105 00b4 9B01      		movw r18,r22
 106 00b6 D701      		movw r26,r14
 107 00b8 93E0      		ldi r25,3
 108 00ba AA0F      	1:	lsl r26
 109 00bc BB1F      		rol r27
 110 00be 9A95      		dec r25
 111 00c0 01F4      		brne 1b
 112 00c2 A40D      		add r26,r4
 113 00c4 B51D      		adc r27,r5
 114 00c6 1A96      		adiw r26,10
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 3


 115 00c8 4D91      		ld r20,X+
 116 00ca 5C91      		ld r21,X
 117 00cc 1B97      		sbiw r26,10+1
 118 00ce 420F      		add r20,r18
 119 00d0 531F      		adc r21,r19
 120 00d2 8C81      		ldd r24,Y+4
 121 00d4 FA01      		movw r30,r20
 122 00d6 8083      		st Z,r24
 123 00d8 1A96      		adiw r26,10
 124 00da ED91      		ld r30,X+
 125 00dc FC91      		ld r31,X
 126 00de 1B97      		sbiw r26,10+1
 127 00e0 E20F      		add r30,r18
 128 00e2 F31F      		adc r31,r19
 129 00e4 9981      		ldd r25,Y+1
 130 00e6 9183      		std Z+1,r25
 131 00e8 A2E0      		ldi r26,lo8(2)
 132 00ea B0E0      		ldi r27,hi8(2)
 133 00ec EA0E      		add r14,r26
 134 00ee FB1E      		adc r15,r27
 135 00f0 83E0      		ldi r24,3
 136 00f2 EE0C      	1:	lsl r14
 137 00f4 FF1C      		rol r15
 138 00f6 8A95      		dec r24
 139 00f8 01F4      		brne 1b
 140 00fa E40C      		add r14,r4
 141 00fc F51C      		adc r15,r5
 142 00fe 21E0      		ldi r18,lo8(1)
 143 0100 30E0      		ldi r19,hi8(1)
 144 0102 F701      		movw r30,r14
 145 0104 3183      		std Z+1,r19
 146 0106 2083      		st Z,r18
 147 0108 44E0      		ldi r20,lo8(4)
 148 010a 50E0      		ldi r21,hi8(4)
 149 010c 240E      		add r2,r20
 150 010e 351E      		adc r3,r21
 151 0110 8885      		ldd r24,Y+8
 152 0112 9985      		ldd r25,Y+9
 153 0114 2816      		cp r2,r24
 154 0116 3906      		cpc r3,r25
 155 0118 01F0      		breq .L5
 156               	.L2:
 157 011a D101      		movw r26,r2
 158 011c 5E96      		adiw r26,30
 159 011e ED90      		ld r14,X+
 160 0120 FD90      		ld r15,X+
 161 0122 0D91      		ld r16,X+
 162 0124 1C91      		ld r17,X
 163 0126 9197      		sbiw r26,30+3
 164 0128 E114      		cp r14,__zero_reg__
 165 012a F104      		cpc r15,__zero_reg__
 166 012c 0105      		cpc r16,__zero_reg__
 167 012e 1105      		cpc r17,__zero_reg__
 168 0130 01F0      		breq .+2
 169 0132 00C0      		rjmp .L6
 170               	.L5:
 171 0134 20E0      		ldi r18,lo8(0)
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 4


 172 0136 30E0      		ldi r19,hi8(0)
 173               	.L4:
 174 0138 C901      		movw r24,r18
 175               	/* epilogue start */
 176 013a 2996      		adiw r28,9
 177 013c 0FB6      		in __tmp_reg__,__SREG__
 178 013e F894      		cli
 179 0140 DEBF      		out __SP_H__,r29
 180 0142 0FBE      		out __SREG__,__tmp_reg__
 181 0144 CDBF      		out __SP_L__,r28
 182 0146 CF91      		pop r28
 183 0148 DF91      		pop r29
 184 014a 1F91      		pop r17
 185 014c 0F91      		pop r16
 186 014e FF90      		pop r15
 187 0150 EF90      		pop r14
 188 0152 DF90      		pop r13
 189 0154 CF90      		pop r12
 190 0156 BF90      		pop r11
 191 0158 AF90      		pop r10
 192 015a 9F90      		pop r9
 193 015c 8F90      		pop r8
 194 015e 7F90      		pop r7
 195 0160 6F90      		pop r6
 196 0162 5F90      		pop r5
 197 0164 4F90      		pop r4
 198 0166 3F90      		pop r3
 199 0168 2F90      		pop r2
 200 016a 0895      		ret
 201               		.size	Phat16SetClusterLink, .-Phat16SetClusterLink
 202               	.global	Phat16GetClusterLink
 203               		.type	Phat16GetClusterLink, @function
 204               	Phat16GetClusterLink:
 205 016c 6F92      		push r6
 206 016e 7F92      		push r7
 207 0170 8F92      		push r8
 208 0172 9F92      		push r9
 209 0174 AF92      		push r10
 210 0176 BF92      		push r11
 211 0178 CF92      		push r12
 212 017a DF92      		push r13
 213 017c EF92      		push r14
 214 017e FF92      		push r15
 215 0180 0F93      		push r16
 216 0182 1F93      		push r17
 217 0184 CF93      		push r28
 218 0186 DF93      		push r29
 219               	/* prologue: function */
 220               	/* frame size = 0 */
 221 0188 8C01      		movw r16,r24
 222 018a 3901      		movw r6,r18
 223 018c DC01      		movw r26,r24
 224 018e 5196      		adiw r26,17
 225 0190 8C91      		ld r24,X
 226 0192 5197      		sbiw r26,17
 227 0194 5296      		adiw r26,18
 228 0196 9C91      		ld r25,X
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 5


 229 0198 483F      		cpi r20,lo8(65528)
 230 019a BFEF      		ldi r27,hi8(65528)
 231 019c 5B07      		cpc r21,r27
 232 019e B0E0      		ldi r27,hlo8(65528)
 233 01a0 6B07      		cpc r22,r27
 234 01a2 B0E0      		ldi r27,hhi8(65528)
 235 01a4 7B07      		cpc r23,r27
 236 01a6 00F0      		brlo .+2
 237 01a8 00C0      		rjmp .L9
 238 01aa EC01      		movw r28,r24
 239 01ac 4A01      		movw r8,r20
 240 01ae 5B01      		movw r10,r22
 241 01b0 880C      		lsl r8
 242 01b2 991C      		rol r9
 243 01b4 AA1C      		rol r10
 244 01b6 BB1C      		rol r11
 245 01b8 8E89      		ldd r24,Y+22
 246 01ba 9F89      		ldd r25,Y+23
 247 01bc 6C01      		movw r12,r24
 248 01be EE24      		clr r14
 249 01c0 FF24      		clr r15
 250 01c2 C501      		movw r24,r10
 251 01c4 B401      		movw r22,r8
 252 01c6 A701      		movw r20,r14
 253 01c8 9601      		movw r18,r12
 254 01ca 0E94 0000 		call __udivmodsi4
 255 01ce DA01      		movw r26,r20
 256 01d0 C901      		movw r24,r18
 257 01d2 4E8D      		ldd r20,Y+30
 258 01d4 5F8D      		ldd r21,Y+31
 259 01d6 68A1      		ldd r22,Y+32
 260 01d8 79A1      		ldd r23,Y+33
 261 01da 480F      		add r20,r24
 262 01dc 591F      		adc r21,r25
 263 01de 6A1F      		adc r22,r26
 264 01e0 7B1F      		adc r23,r27
 265 01e2 C801      		movw r24,r16
 266 01e4 0E94 0000 		call PhatSectorLoad
 267 01e8 8C01      		movw r16,r24
 268 01ea 97FD      		sbrc r25,7
 269 01ec 00C0      		rjmp .L9
 270 01ee C501      		movw r24,r10
 271 01f0 B401      		movw r22,r8
 272 01f2 A701      		movw r20,r14
 273 01f4 9601      		movw r18,r12
 274 01f6 0E94 0000 		call __udivmodsi4
 275 01fa 9B01      		movw r18,r22
 276 01fc 73E0      		ldi r23,3
 277 01fe 000F      	1:	lsl r16
 278 0200 111F      		rol r17
 279 0202 7A95      		dec r23
 280 0204 01F4      		brne 1b
 281 0206 C00F      		add r28,r16
 282 0208 D11F      		adc r29,r17
 283 020a EA85      		ldd r30,Y+10
 284 020c FB85      		ldd r31,Y+11
 285 020e E20F      		add r30,r18
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 6


 286 0210 F31F      		adc r31,r19
 287 0212 2081      		ld r18,Z
 288 0214 30E0      		ldi r19,lo8(0)
 289 0216 40E0      		ldi r20,lo8(0)
 290 0218 50E0      		ldi r21,hi8(0)
 291 021a D301      		movw r26,r6
 292 021c 2D93      		st X+,r18
 293 021e 3D93      		st X+,r19
 294 0220 4D93      		st X+,r20
 295 0222 5C93      		st X,r21
 296 0224 1397      		sbiw r26,3
 297 0226 8181      		ldd r24,Z+1
 298 0228 90E0      		ldi r25,lo8(0)
 299 022a A0E0      		ldi r26,lo8(0)
 300 022c B0E0      		ldi r27,hi8(0)
 301 022e BA2F      		mov r27,r26
 302 0230 A92F      		mov r26,r25
 303 0232 982F      		mov r25,r24
 304 0234 8827      		clr r24
 305 0236 820F      		add r24,r18
 306 0238 931F      		adc r25,r19
 307 023a A41F      		adc r26,r20
 308 023c B51F      		adc r27,r21
 309 023e F301      		movw r30,r6
 310 0240 8083      		st Z,r24
 311 0242 9183      		std Z+1,r25
 312 0244 A283      		std Z+2,r26
 313 0246 B383      		std Z+3,r27
 314 0248 20E0      		ldi r18,lo8(0)
 315 024a 30E0      		ldi r19,hi8(0)
 316 024c 00C0      		rjmp .L10
 317               	.L9:
 318 024e 2FEF      		ldi r18,lo8(-1)
 319 0250 3FEF      		ldi r19,hi8(-1)
 320               	.L10:
 321 0252 C901      		movw r24,r18
 322               	/* epilogue start */
 323 0254 DF91      		pop r29
 324 0256 CF91      		pop r28
 325 0258 1F91      		pop r17
 326 025a 0F91      		pop r16
 327 025c FF90      		pop r15
 328 025e EF90      		pop r14
 329 0260 DF90      		pop r13
 330 0262 CF90      		pop r12
 331 0264 BF90      		pop r11
 332 0266 AF90      		pop r10
 333 0268 9F90      		pop r9
 334 026a 8F90      		pop r8
 335 026c 7F90      		pop r7
 336 026e 6F90      		pop r6
 337 0270 0895      		ret
 338               		.size	Phat16GetClusterLink, .-Phat16GetClusterLink
 339               	.global	Phat16ReleaseChain
 340               		.type	Phat16ReleaseChain, @function
 341               	Phat16ReleaseChain:
 342 0272 6F92      		push r6
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 7


 343 0274 7F92      		push r7
 344 0276 8F92      		push r8
 345 0278 9F92      		push r9
 346 027a AF92      		push r10
 347 027c BF92      		push r11
 348 027e CF92      		push r12
 349 0280 DF92      		push r13
 350 0282 EF92      		push r14
 351 0284 FF92      		push r15
 352 0286 0F93      		push r16
 353 0288 1F93      		push r17
 354 028a DF93      		push r29
 355 028c CF93      		push r28
 356 028e 00D0      		rcall .
 357 0290 00D0      		rcall .
 358 0292 CDB7      		in r28,__SP_L__
 359 0294 DEB7      		in r29,__SP_H__
 360               	/* prologue: function */
 361               	/* frame size = 4 */
 362 0296 5C01      		movw r10,r24
 363 0298 6A01      		movw r12,r20
 364 029a 7B01      		movw r14,r22
 365 029c FC01      		movw r30,r24
 366 029e 8188      		ldd r8,Z+17
 367 02a0 9288      		ldd r9,Z+18
 368 02a2 3E01      		movw r6,r28
 369 02a4 0894      		sec
 370 02a6 611C      		adc r6,__zero_reg__
 371 02a8 711C      		adc r7,__zero_reg__
 372 02aa 00C0      		rjmp .L13
 373               	.L16:
 374 02ac 9301      		movw r18,r6
 375 02ae B701      		movw r22,r14
 376 02b0 A601      		movw r20,r12
 377 02b2 C501      		movw r24,r10
 378 02b4 0E94 0000 		call Phat16GetClusterLink
 379 02b8 892B      		or r24,r25
 380 02ba 01F4      		brne .L14
 381 02bc 8981      		ldd r24,Y+1
 382 02be 9A81      		ldd r25,Y+2
 383 02c0 AB81      		ldd r26,Y+3
 384 02c2 BC81      		ldd r27,Y+4
 385 02c4 0297      		sbiw r24,2
 386 02c6 A105      		cpc r26,__zero_reg__
 387 02c8 B105      		cpc r27,__zero_reg__
 388 02ca 00F0      		brlo .L15
 389 02cc 00E0      		ldi r16,lo8(0)
 390 02ce 10E0      		ldi r17,hi8(0)
 391 02d0 20E0      		ldi r18,hlo8(0)
 392 02d2 30E0      		ldi r19,hhi8(0)
 393 02d4 B701      		movw r22,r14
 394 02d6 A601      		movw r20,r12
 395 02d8 C501      		movw r24,r10
 396 02da 0E94 0000 		call Phat16SetClusterLink
 397 02de 892B      		or r24,r25
 398 02e0 01F4      		brne .L14
 399 02e2 F401      		movw r30,r8
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 8


 400 02e4 8281      		ldd r24,Z+2
 401 02e6 9381      		ldd r25,Z+3
 402 02e8 A481      		ldd r26,Z+4
 403 02ea B581      		ldd r27,Z+5
 404 02ec 0196      		adiw r24,1
 405 02ee A11D      		adc r26,__zero_reg__
 406 02f0 B11D      		adc r27,__zero_reg__
 407 02f2 8283      		std Z+2,r24
 408 02f4 9383      		std Z+3,r25
 409 02f6 A483      		std Z+4,r26
 410 02f8 B583      		std Z+5,r27
 411 02fa C980      		ldd r12,Y+1
 412 02fc DA80      		ldd r13,Y+2
 413 02fe EB80      		ldd r14,Y+3
 414 0300 FC80      		ldd r15,Y+4
 415               	.L13:
 416 0302 F8EF      		ldi r31,lo8(65528)
 417 0304 CF16      		cp r12,r31
 418 0306 FFEF      		ldi r31,hi8(65528)
 419 0308 DF06      		cpc r13,r31
 420 030a F0E0      		ldi r31,hlo8(65528)
 421 030c EF06      		cpc r14,r31
 422 030e F0E0      		ldi r31,hhi8(65528)
 423 0310 FF06      		cpc r15,r31
 424 0312 00F0      		brlo .L16
 425 0314 00C0      		rjmp .L15
 426               	.L14:
 427 0316 2FEF      		ldi r18,lo8(-1)
 428 0318 3FEF      		ldi r19,hi8(-1)
 429 031a 00C0      		rjmp .L17
 430               	.L15:
 431 031c 20E0      		ldi r18,lo8(0)
 432 031e 30E0      		ldi r19,hi8(0)
 433               	.L17:
 434 0320 C901      		movw r24,r18
 435               	/* epilogue start */
 436 0322 0F90      		pop __tmp_reg__
 437 0324 0F90      		pop __tmp_reg__
 438 0326 0F90      		pop __tmp_reg__
 439 0328 0F90      		pop __tmp_reg__
 440 032a CF91      		pop r28
 441 032c DF91      		pop r29
 442 032e 1F91      		pop r17
 443 0330 0F91      		pop r16
 444 0332 FF90      		pop r15
 445 0334 EF90      		pop r14
 446 0336 DF90      		pop r13
 447 0338 CF90      		pop r12
 448 033a BF90      		pop r11
 449 033c AF90      		pop r10
 450 033e 9F90      		pop r9
 451 0340 8F90      		pop r8
 452 0342 7F90      		pop r7
 453 0344 6F90      		pop r6
 454 0346 0895      		ret
 455               		.size	Phat16ReleaseChain, .-Phat16ReleaseChain
GAS LISTING C:\Temp/ccbz3Mtf.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 phat16.c
  C:\Temp/ccbz3Mtf.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccbz3Mtf.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccbz3Mtf.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccbz3Mtf.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccbz3Mtf.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccbz3Mtf.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccbz3Mtf.s:13     .text:00000000 Phat16SetClusterLink
  C:\Temp/ccbz3Mtf.s:204    .text:0000016c Phat16GetClusterLink
  C:\Temp/ccbz3Mtf.s:341    .text:00000272 Phat16ReleaseChain

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
__udivmodsi4
PhatSectorLoad
