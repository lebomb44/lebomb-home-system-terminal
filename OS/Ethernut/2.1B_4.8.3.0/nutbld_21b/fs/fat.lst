GAS LISTING C:\Temp/ccxbxlG2.s 			page 1


   1               		.file	"fat.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	RemoveChar, @function
  12               	RemoveChar:
  13               	/* prologue: function */
  14               	/* frame size = 0 */
  15 0000 582F      		mov r21,r24
  16 0002 792F      		mov r23,r25
  17 0004 6130      		cpi r22,lo8(1)
  18 0006 01F0      		breq .L2
  19 0008 9C01      		movw r18,r24
  20 000a F901      		movw r30,r18
  21 000c 80E0      		ldi r24,lo8(0)
  22 000e 00C0      		rjmp .L3
  23               	.L2:
  24 0010 282F      		mov r18,r24
  25 0012 392F      		mov r19,r25
  26 0014 C901      		movw r24,r18
  27 0016 DC01      		movw r26,r24
  28 0018 FC01      		movw r30,r24
  29 001a 00C0      		rjmp .L4
  30               	.L6:
  31 001c 8E32      		cpi r24,lo8(46)
  32 001e 01F0      		breq .L5
  33 0020 8D93      		st X+,r24
  34               	.L5:
  35 0022 3196      		adiw r30,1
  36               	.L4:
  37 0024 8081      		ld r24,Z
  38 0026 8823      		tst r24
  39 0028 01F4      		brne .L6
  40 002a 00C0      		rjmp .L15
  41               	.L9:
  42 002c 9E32      		cpi r25,lo8(46)
  43 002e 01F4      		brne .L8
  44 0030 8F5F      		subi r24,lo8(-(1))
  45               	.L8:
  46 0032 3196      		adiw r30,1
  47               	.L3:
  48 0034 9081      		ld r25,Z
  49 0036 9923      		tst r25
  50 0038 01F4      		brne .L9
  51 003a 8230      		cpi r24,lo8(2)
  52 003c 00F0      		brlo .L7
  53 003e 482F      		mov r20,r24
  54 0040 4150      		subi r20,lo8(-(-1))
  55 0042 252F      		mov r18,r21
  56 0044 372F      		mov r19,r23
  57 0046 C901      		movw r24,r18
GAS LISTING C:\Temp/ccxbxlG2.s 			page 2


  58 0048 DC01      		movw r26,r24
  59 004a FC01      		movw r30,r24
  60 004c 00C0      		rjmp .L10
  61               	.L13:
  62 004e 8E32      		cpi r24,lo8(46)
  63 0050 01F4      		brne .L11
  64 0052 4423      		tst r20
  65 0054 01F0      		breq .L11
  66 0056 4150      		subi r20,lo8(-(-1))
  67 0058 00C0      		rjmp .L12
  68               	.L11:
  69 005a 8D93      		st X+,r24
  70               	.L12:
  71 005c 3196      		adiw r30,1
  72               	.L10:
  73 005e 8081      		ld r24,Z
  74 0060 8823      		tst r24
  75 0062 01F4      		brne .L13
  76               	.L15:
  77 0064 1C92      		st X,__zero_reg__
  78               	.L7:
  79 0066 852F      		mov r24,r21
  80 0068 972F      		mov r25,r23
  81               	/* epilogue start */
  82 006a 0895      		ret
  83               		.size	RemoveChar, .-RemoveChar
  84               		.type	FATFileWrite, @function
  85               	FATFileWrite:
  86               	/* prologue: function */
  87               	/* frame size = 0 */
  88 006c 8FEF      		ldi r24,lo8(-1)
  89 006e 9FEF      		ldi r25,hi8(-1)
  90               	/* epilogue start */
  91 0070 0895      		ret
  92               		.size	FATFileWrite, .-FATFileWrite
  93               		.type	FATFileWriteP, @function
  94               	FATFileWriteP:
  95               	/* prologue: function */
  96               	/* frame size = 0 */
  97 0072 8FEF      		ldi r24,lo8(-1)
  98 0074 9FEF      		ldi r25,hi8(-1)
  99               	/* epilogue start */
 100 0076 0895      		ret
 101               		.size	FATFileWriteP, .-FATFileWriteP
 102               		.type	GetLongChar, @function
 103               	GetLongChar:
 104               	/* prologue: function */
 105               	/* frame size = 0 */
 106 0078 8F3F      		cpi r24,lo8(-1)
 107 007a 01F4      		brne .L21
 108 007c 80E0      		ldi r24,lo8(0)
 109 007e 0895      		ret
 110               	.L21:
 111 0080 8823      		tst r24
 112 0082 01F0      		breq .L22
 113 0084 90E0      		ldi r25,lo8(0)
 114 0086 0E94 0000 		call toupper
GAS LISTING C:\Temp/ccxbxlG2.s 			page 3


 115               	.L22:
 116 008a 0895      		ret
 117               		.size	GetLongChar, .-GetLongChar
 118               		.type	GetNextCluster, @function
 119               	GetNextCluster:
 120 008c 8F92      		push r8
 121 008e 9F92      		push r9
 122 0090 AF92      		push r10
 123 0092 BF92      		push r11
 124 0094 CF92      		push r12
 125 0096 DF92      		push r13
 126 0098 EF92      		push r14
 127 009a FF92      		push r15
 128 009c 0F93      		push r16
 129 009e 1F93      		push r17
 130               	/* prologue: function */
 131               	/* frame size = 0 */
 132 00a0 FC01      		movw r30,r24
 133 00a2 6A01      		movw r12,r20
 134 00a4 7B01      		movw r14,r22
 135 00a6 8381      		ldd r24,Z+3
 136 00a8 80FF      		sbrs r24,0
 137 00aa 00C0      		rjmp .L25
 138 00ac 9A01      		movw r18,r20
 139 00ae AB01      		movw r20,r22
 140 00b0 2F5F      		subi r18,lo8(-(1))
 141 00b2 3F4F      		sbci r19,hi8(-(1))
 142 00b4 4F4F      		sbci r20,hlo8(-(1))
 143 00b6 5F4F      		sbci r21,hhi8(-(1))
 144 00b8 00C0      		rjmp .L26
 145               	.L25:
 146 00ba 8081      		ld r24,Z
 147 00bc 8288      		ldd r8,Z+18
 148 00be 9388      		ldd r9,Z+19
 149 00c0 A488      		ldd r10,Z+20
 150 00c2 B588      		ldd r11,Z+21
 151 00c4 6091 0000 		lds r22,pSectorBuffer
 152 00c8 7091 0000 		lds r23,(pSectorBuffer)+1
 153 00cc 8130      		cpi r24,lo8(1)
 154 00ce 01F4      		brne .L27
 155 00d0 A701      		movw r20,r14
 156 00d2 9601      		movw r18,r12
 157 00d4 A7E0      		ldi r26,7
 158 00d6 5695      	1:	lsr r21
 159 00d8 4795      		ror r20
 160 00da 3795      		ror r19
 161 00dc 2795      		ror r18
 162 00de AA95      		dec r26
 163 00e0 01F4      		brne 1b
 164 00e2 280D      		add r18,r8
 165 00e4 391D      		adc r19,r9
 166 00e6 4A1D      		adc r20,r10
 167 00e8 5B1D      		adc r21,r11
 168 00ea 01E0      		ldi r16,lo8(1)
 169 00ec 10E0      		ldi r17,hi8(1)
 170 00ee 8181      		ldd r24,Z+1
 171 00f0 0E94 0000 		call IDEReadSectors
GAS LISTING C:\Temp/ccxbxlG2.s 			page 4


 172 00f4 E091 0000 		lds r30,pSectorBuffer
 173 00f8 F091 0000 		lds r31,(pSectorBuffer)+1
 174 00fc C601      		movw r24,r12
 175 00fe 8F77      		andi r24,lo8(127)
 176 0100 9070      		andi r25,hi8(127)
 177 0102 880F      		lsl r24
 178 0104 991F      		rol r25
 179 0106 880F      		lsl r24
 180 0108 991F      		rol r25
 181 010a E80F      		add r30,r24
 182 010c F91F      		adc r31,r25
 183 010e 2081      		ld r18,Z
 184 0110 3181      		ldd r19,Z+1
 185 0112 4281      		ldd r20,Z+2
 186 0114 5381      		ldd r21,Z+3
 187 0116 5F70      		andi r21,hhi8(268435455)
 188 0118 2F3F      		cpi r18,lo8(268435455)
 189 011a 8FEF      		ldi r24,hi8(268435455)
 190 011c 3807      		cpc r19,r24
 191 011e 8FEF      		ldi r24,hlo8(268435455)
 192 0120 4807      		cpc r20,r24
 193 0122 8FE0      		ldi r24,hhi8(268435455)
 194 0124 5807      		cpc r21,r24
 195 0126 01F0      		breq .L28
 196 0128 273F      		cpi r18,lo8(268435447)
 197 012a 8FEF      		ldi r24,hi8(268435447)
 198 012c 3807      		cpc r19,r24
 199 012e 8FEF      		ldi r24,hlo8(268435447)
 200 0130 4807      		cpc r20,r24
 201 0132 8FE0      		ldi r24,hhi8(268435447)
 202 0134 5807      		cpc r21,r24
 203 0136 01F4      		brne .L26
 204 0138 00C0      		rjmp .L28
 205               	.L27:
 206 013a 5527      		clr r21
 207 013c 4F2D      		mov r20,r15
 208 013e 3E2D      		mov r19,r14
 209 0140 2D2D      		mov r18,r13
 210 0142 280D      		add r18,r8
 211 0144 391D      		adc r19,r9
 212 0146 4A1D      		adc r20,r10
 213 0148 5B1D      		adc r21,r11
 214 014a 01E0      		ldi r16,lo8(1)
 215 014c 10E0      		ldi r17,hi8(1)
 216 014e 8181      		ldd r24,Z+1
 217 0150 0E94 0000 		call IDEReadSectors
 218 0154 E091 0000 		lds r30,pSectorBuffer
 219 0158 F091 0000 		lds r31,(pSectorBuffer)+1
 220 015c C601      		movw r24,r12
 221 015e 9070      		andi r25,hi8(255)
 222 0160 880F      		lsl r24
 223 0162 991F      		rol r25
 224 0164 E80F      		add r30,r24
 225 0166 F91F      		adc r31,r25
 226 0168 8081      		ld r24,Z
 227 016a 9181      		ldd r25,Z+1
 228 016c 9C01      		movw r18,r24
GAS LISTING C:\Temp/ccxbxlG2.s 			page 5


 229 016e 40E0      		ldi r20,lo8(0)
 230 0170 50E0      		ldi r21,hi8(0)
 231 0172 2F3F      		cpi r18,lo8(65535)
 232 0174 8FEF      		ldi r24,hi8(65535)
 233 0176 3807      		cpc r19,r24
 234 0178 80E0      		ldi r24,hlo8(65535)
 235 017a 4807      		cpc r20,r24
 236 017c 80E0      		ldi r24,hhi8(65535)
 237 017e 5807      		cpc r21,r24
 238 0180 01F0      		breq .L28
 239 0182 273F      		cpi r18,lo8(65527)
 240 0184 8FEF      		ldi r24,hi8(65527)
 241 0186 3807      		cpc r19,r24
 242 0188 80E0      		ldi r24,hlo8(65527)
 243 018a 4807      		cpc r20,r24
 244 018c 80E0      		ldi r24,hhi8(65527)
 245 018e 5807      		cpc r21,r24
 246 0190 01F4      		brne .L26
 247               	.L28:
 248 0192 20E0      		ldi r18,lo8(0)
 249 0194 30E0      		ldi r19,hi8(0)
 250 0196 40E0      		ldi r20,hlo8(0)
 251 0198 50E0      		ldi r21,hhi8(0)
 252               	.L26:
 253 019a B901      		movw r22,r18
 254 019c CA01      		movw r24,r20
 255               	/* epilogue start */
 256 019e 1F91      		pop r17
 257 01a0 0F91      		pop r16
 258 01a2 FF90      		pop r15
 259 01a4 EF90      		pop r14
 260 01a6 DF90      		pop r13
 261 01a8 CF90      		pop r12
 262 01aa BF90      		pop r11
 263 01ac AF90      		pop r10
 264 01ae 9F90      		pop r9
 265 01b0 8F90      		pop r8
 266 01b2 0895      		ret
 267               		.size	GetNextCluster, .-GetNextCluster
 268               		.type	FindFileATAPI, @function
 269               	FindFileATAPI:
 270 01b4 2F92      		push r2
 271 01b6 3F92      		push r3
 272 01b8 4F92      		push r4
 273 01ba 5F92      		push r5
 274 01bc 6F92      		push r6
 275 01be 7F92      		push r7
 276 01c0 8F92      		push r8
 277 01c2 9F92      		push r9
 278 01c4 AF92      		push r10
 279 01c6 BF92      		push r11
 280 01c8 CF92      		push r12
 281 01ca DF92      		push r13
 282 01cc EF92      		push r14
 283 01ce FF92      		push r15
 284 01d0 0F93      		push r16
 285 01d2 1F93      		push r17
GAS LISTING C:\Temp/ccxbxlG2.s 			page 6


 286 01d4 DF93      		push r29
 287 01d6 CF93      		push r28
 288 01d8 CDB7      		in r28,__SP_L__
 289 01da DEB7      		in r29,__SP_H__
 290 01dc 2C97      		sbiw r28,12
 291 01de 0FB6      		in __tmp_reg__,__SREG__
 292 01e0 F894      		cli
 293 01e2 DEBF      		out __SP_H__,r29
 294 01e4 0FBE      		out __SREG__,__tmp_reg__
 295 01e6 CDBF      		out __SP_L__,r28
 296               	/* prologue: function */
 297               	/* frame size = 12 */
 298 01e8 1C01      		movw r2,r24
 299 01ea 4801      		movw r8,r16
 300 01ec 5901      		movw r10,r18
 301 01ee FE82      		std Y+6,r15
 302 01f0 ED82      		std Y+5,r14
 303 01f2 DC01      		movw r26,r24
 304 01f4 1A96      		adiw r26,10
 305 01f6 CD90      		ld r12,X+
 306 01f8 DD90      		ld r13,X+
 307 01fa ED90      		ld r14,X+
 308 01fc FC90      		ld r15,X
 309 01fe 1D97      		sbiw r26,10+3
 310 0200 1696      		adiw r26,6
 311 0202 8D91      		ld r24,X+
 312 0204 9D91      		ld r25,X+
 313 0206 0D90      		ld __tmp_reg__,X+
 314 0208 BC91      		ld r27,X
 315 020a A02D      		mov r26,__tmp_reg__
 316 020c C80E      		add r12,r24
 317 020e D91E      		adc r13,r25
 318 0210 EA1E      		adc r14,r26
 319 0212 FB1E      		adc r15,r27
 320 0214 0894      		sec
 321 0216 C108      		sbc r12,__zero_reg__
 322 0218 D108      		sbc r13,__zero_reg__
 323 021a E108      		sbc r14,__zero_reg__
 324 021c F108      		sbc r15,__zero_reg__
 325 021e FB01      		movw r30,r22
 326 0220 8385      		ldd r24,Z+11
 327 0222 8031      		cpi r24,lo8(16)
 328 0224 01F4      		brne .L31
 329 0226 61E0      		ldi r22,lo8(1)
 330 0228 CA01      		movw r24,r20
 331 022a 0E94 0000 		call RemoveChar
 332 022e 8F83      		std Y+7,r24
 333 0230 9887      		std Y+8,r25
 334 0232 42E0      		ldi r20,lo8(2)
 335 0234 00C0      		rjmp .L32
 336               	.L31:
 337 0236 60E0      		ldi r22,lo8(0)
 338 0238 CA01      		movw r24,r20
 339 023a 0E94 0000 		call RemoveChar
 340 023e 8F83      		std Y+7,r24
 341 0240 9887      		std Y+8,r25
 342 0242 40E0      		ldi r20,lo8(0)
GAS LISTING C:\Temp/ccxbxlG2.s 			page 7


 343               	.L32:
 344 0244 8F81      		ldd r24,Y+7
 345 0246 9885      		ldd r25,Y+8
 346 0248 9C01      		movw r18,r24
 347 024a F901      		movw r30,r18
 348 024c 9FE5      		ldi r25,lo8(95)
 349 024e 00C0      		rjmp .L33
 350               	.L37:
 351 0250 8032      		cpi r24,lo8(32)
 352 0252 01F0      		breq .L35
 353 0254 8D32      		cpi r24,lo8(45)
 354 0256 01F4      		brne .L34
 355               	.L35:
 356 0258 9083      		st Z,r25
 357               	.L34:
 358 025a 3196      		adiw r30,1
 359               	.L33:
 360 025c 8081      		ld r24,Z
 361 025e 8823      		tst r24
 362 0260 01F4      		brne .L37
 363 0262 AF81      		ldd r26,Y+7
 364 0264 B885      		ldd r27,Y+8
 365 0266 FD01      		movw r30,r26
 366 0268 0190      		ld __tmp_reg__,Z+
 367 026a 0020      		tst __tmp_reg__
 368 026c 01F4      		brne .-6
 369 026e 9F01      		movw r18,r30
 370 0270 2150      		subi r18,lo8(-(-1))
 371 0272 3040      		sbci r19,hi8(-(-1))
 372 0274 F22F      		mov r31,r18
 373 0276 FA1B      		sub r31,r26
 374 0278 FB83      		std Y+3,r31
 375 027a 242F      		mov r18,r20
 376 027c 30E0      		ldi r19,lo8(0)
 377 027e 3A87      		std Y+10,r19
 378 0280 2987      		std Y+9,r18
 379 0282 00C0      		rjmp .L38
 380               	.L44:
 381 0284 6091 0000 		lds r22,pSectorBuffer
 382 0288 7091 0000 		lds r23,(pSectorBuffer)+1
 383 028c 01E0      		ldi r16,lo8(1)
 384 028e 10E0      		ldi r17,hi8(1)
 385 0290 A501      		movw r20,r10
 386 0292 9401      		movw r18,r8
 387 0294 D101      		movw r26,r2
 388 0296 1196      		adiw r26,1
 389 0298 8C91      		ld r24,X
 390 029a 0E94 0000 		call IDEReadSectors
 391 029e E091 0000 		lds r30,pSectorBuffer
 392 02a2 F091 0000 		lds r31,(pSectorBuffer)+1
 393 02a6 FA83      		std Y+2,r31
 394 02a8 E983      		std Y+1,r30
 395 02aa D101      		movw r26,r2
 396 02ac 5E96      		adiw r26,30
 397 02ae 4D90      		ld r4,X+
 398 02b0 5D90      		ld r5,X+
 399 02b2 6D90      		ld r6,X+
GAS LISTING C:\Temp/ccxbxlG2.s 			page 8


 400 02b4 7C90      		ld r7,X
 401 02b6 9197      		sbiw r26,30+3
 402 02b8 FC87      		std Y+12,r31
 403 02ba EB87      		std Y+11,r30
 404 02bc 00E0      		ldi r16,lo8(0)
 405 02be 10E0      		ldi r17,hi8(0)
 406 02c0 00C0      		rjmp .L39
 407               	.L43:
 408 02c2 EB85      		ldd r30,Y+11
 409 02c4 FC85      		ldd r31,Y+12
 410 02c6 F081      		ld r31,Z
 411 02c8 FC83      		std Y+4,r31
 412 02ca FF23      		tst r31
 413 02cc 01F4      		brne .+2
 414 02ce 00C0      		rjmp .L40
 415 02d0 AB85      		ldd r26,Y+11
 416 02d2 BC85      		ldd r27,Y+12
 417 02d4 5996      		adiw r26,25
 418 02d6 8C91      		ld r24,X
 419 02d8 5997      		sbiw r26,25
 420 02da 90E0      		ldi r25,lo8(0)
 421 02dc 8370      		andi r24,lo8(3)
 422 02de 9070      		andi r25,hi8(3)
 423 02e0 E985      		ldd r30,Y+9
 424 02e2 FA85      		ldd r31,Y+10
 425 02e4 8E17      		cp r24,r30
 426 02e6 9F07      		cpc r25,r31
 427 02e8 01F4      		brne .L41
 428 02ea 9096      		adiw r26,32
 429 02ec 8C91      		ld r24,X
 430 02ee 9097      		sbiw r26,32
 431 02f0 FB81      		ldd r31,Y+3
 432 02f2 8F17      		cp r24,r31
 433 02f4 00F0      		brlo .L41
 434 02f6 4F2F      		mov r20,r31
 435 02f8 50E0      		ldi r21,lo8(0)
 436 02fa 6F81      		ldd r22,Y+7
 437 02fc 7885      		ldd r23,Y+8
 438 02fe CD01      		movw r24,r26
 439 0300 8196      		adiw r24,33
 440 0302 0E94 0000 		call strncmp
 441 0306 0097      		sbiw r24,0
 442 0308 01F4      		brne .L41
 443 030a AB85      		ldd r26,Y+11
 444 030c BC85      		ldd r27,Y+12
 445 030e 1296      		adiw r26,2
 446 0310 2D91      		ld r18,X+
 447 0312 3D91      		ld r19,X+
 448 0314 4D91      		ld r20,X+
 449 0316 5C91      		ld r21,X
 450 0318 1597      		sbiw r26,2+3
 451 031a 1A96      		adiw r26,10
 452 031c 8D91      		ld r24,X+
 453 031e 9D91      		ld r25,X+
 454 0320 0D90      		ld __tmp_reg__,X+
 455 0322 BC91      		ld r27,X
 456 0324 A02D      		mov r26,__tmp_reg__
GAS LISTING C:\Temp/ccxbxlG2.s 			page 9


 457 0326 ED81      		ldd r30,Y+5
 458 0328 FE81      		ldd r31,Y+6
 459 032a 8083      		st Z,r24
 460 032c 9183      		std Z+1,r25
 461 032e A283      		std Z+2,r26
 462 0330 B383      		std Z+3,r27
 463 0332 00C0      		rjmp .L42
 464               	.L41:
 465 0334 FC81      		ldd r31,Y+4
 466 0336 0F0F      		add r16,r31
 467 0338 111D      		adc r17,__zero_reg__
 468 033a 2981      		ldd r18,Y+1
 469 033c 3A81      		ldd r19,Y+2
 470 033e 200F      		add r18,r16
 471 0340 311F      		adc r19,r17
 472 0342 3C87      		std Y+12,r19
 473 0344 2B87      		std Y+11,r18
 474               	.L39:
 475 0346 C801      		movw r24,r16
 476 0348 A0E0      		ldi r26,lo8(0)
 477 034a B0E0      		ldi r27,hi8(0)
 478 034c 8415      		cp r24,r4
 479 034e 9505      		cpc r25,r5
 480 0350 A605      		cpc r26,r6
 481 0352 B705      		cpc r27,r7
 482 0354 00F4      		brsh .+2
 483 0356 00C0      		rjmp .L43
 484               	.L40:
 485 0358 0894      		sec
 486 035a 811C      		adc r8,__zero_reg__
 487 035c 911C      		adc r9,__zero_reg__
 488 035e A11C      		adc r10,__zero_reg__
 489 0360 B11C      		adc r11,__zero_reg__
 490               	.L38:
 491 0362 C814      		cp r12,r8
 492 0364 D904      		cpc r13,r9
 493 0366 EA04      		cpc r14,r10
 494 0368 FB04      		cpc r15,r11
 495 036a 00F0      		brlo .+2
 496 036c 00C0      		rjmp .L44
 497 036e 20E0      		ldi r18,lo8(0)
 498 0370 30E0      		ldi r19,hi8(0)
 499 0372 40E0      		ldi r20,hlo8(0)
 500 0374 50E0      		ldi r21,hhi8(0)
 501               	.L42:
 502 0376 B901      		movw r22,r18
 503 0378 CA01      		movw r24,r20
 504               	/* epilogue start */
 505 037a 2C96      		adiw r28,12
 506 037c 0FB6      		in __tmp_reg__,__SREG__
 507 037e F894      		cli
 508 0380 DEBF      		out __SP_H__,r29
 509 0382 0FBE      		out __SREG__,__tmp_reg__
 510 0384 CDBF      		out __SP_L__,r28
 511 0386 CF91      		pop r28
 512 0388 DF91      		pop r29
 513 038a 1F91      		pop r17
GAS LISTING C:\Temp/ccxbxlG2.s 			page 10


 514 038c 0F91      		pop r16
 515 038e FF90      		pop r15
 516 0390 EF90      		pop r14
 517 0392 DF90      		pop r13
 518 0394 CF90      		pop r12
 519 0396 BF90      		pop r11
 520 0398 AF90      		pop r10
 521 039a 9F90      		pop r9
 522 039c 8F90      		pop r8
 523 039e 7F90      		pop r7
 524 03a0 6F90      		pop r6
 525 03a2 5F90      		pop r5
 526 03a4 4F90      		pop r4
 527 03a6 3F90      		pop r3
 528 03a8 2F90      		pop r2
 529 03aa 0895      		ret
 530               		.size	FindFileATAPI, .-FindFileATAPI
 531               		.type	FindFile, @function
 532               	FindFile:
 533 03ac 2F92      		push r2
 534 03ae 3F92      		push r3
 535 03b0 4F92      		push r4
 536 03b2 5F92      		push r5
 537 03b4 6F92      		push r6
 538 03b6 7F92      		push r7
 539 03b8 8F92      		push r8
 540 03ba 9F92      		push r9
 541 03bc AF92      		push r10
 542 03be BF92      		push r11
 543 03c0 CF92      		push r12
 544 03c2 DF92      		push r13
 545 03c4 EF92      		push r14
 546 03c6 FF92      		push r15
 547 03c8 0F93      		push r16
 548 03ca 1F93      		push r17
 549 03cc DF93      		push r29
 550 03ce CF93      		push r28
 551 03d0 CDB7      		in r28,__SP_L__
 552 03d2 DEB7      		in r29,__SP_H__
 553 03d4 6C97      		sbiw r28,28
 554 03d6 0FB6      		in __tmp_reg__,__SREG__
 555 03d8 F894      		cli
 556 03da DEBF      		out __SP_H__,r29
 557 03dc 0FBE      		out __SREG__,__tmp_reg__
 558 03de CDBF      		out __SP_L__,r28
 559               	/* prologue: function */
 560               	/* frame size = 28 */
 561 03e0 3C01      		movw r6,r24
 562 03e2 7C8B      		std Y+20,r23
 563 03e4 6B8B      		std Y+19,r22
 564 03e6 498F      		std Y+25,r20
 565 03e8 5A8F      		std Y+26,r21
 566 03ea 1801      		movw r2,r16
 567 03ec 2901      		movw r4,r18
 568 03ee FE8A      		std Y+22,r15
 569 03f0 ED8A      		std Y+21,r14
 570 03f2 D88E      		std Y+24,r13
GAS LISTING C:\Temp/ccxbxlG2.s 			page 11


 571 03f4 CF8A      		std Y+23,r12
 572 03f6 D701      		movw r26,r14
 573 03f8 1D92      		st X+,__zero_reg__
 574 03fa 1D92      		st X+,__zero_reg__
 575 03fc 1D92      		st X+,__zero_reg__
 576 03fe 1C92      		st X,__zero_reg__
 577 0400 1397      		sbiw r26,3
 578 0402 FA01      		movw r30,r20
 579 0404 0190      		ld __tmp_reg__,Z+
 580 0406 0020      		tst __tmp_reg__
 581 0408 01F4      		brne .-6
 582 040a E41B      		sub r30,r20
 583 040c F50B      		sbc r31,r21
 584 040e CF01      		movw r24,r30
 585 0410 0B96      		adiw r24,11
 586 0412 6DE0      		ldi r22,lo8(13)
 587 0414 70E0      		ldi r23,hi8(13)
 588 0416 0E94 0000 		call __divmodhi4
 589 041a B62F      		mov r27,r22
 590 041c B064      		ori r27,lo8(64)
 591 041e BF83      		std Y+7,r27
 592 0420 B53E      		cpi r27,lo8(-27)
 593 0422 01F4      		brne .+2
 594 0424 00C0      		rjmp .L47
 595 0426 8DE0      		ldi r24,lo8(13)
 596 0428 689F      		mul r22,r24
 597 042a F001      		movw r30,r0
 598 042c 1124      		clr r1
 599 042e F987      		std Y+9,r31
 600 0430 E887      		std Y+8,r30
 601 0432 EF33      		cpi r30,63
 602 0434 F105      		cpc r31,__zero_reg__
 603 0436 04F0      		brlt .+2
 604 0438 00C0      		rjmp .L47
 605 043a 6F01      		movw r12,r30
 606 043c BA87      		std Y+10,r27
 607 043e 188A      		std Y+16,__zero_reg__
 608 0440 EE24      		clr r14
 609 0442 FF24      		clr r15
 610 0444 00C0      		rjmp .L48
 611               	.L62:
 612 0446 D301      		movw r26,r6
 613 0448 1396      		adiw r26,3
 614 044a 8C91      		ld r24,X
 615 044c 80FF      		sbrs r24,0
 616 044e 00C0      		rjmp .L49
 617 0450 5201      		movw r10,r4
 618 0452 4101      		movw r8,r2
 619 0454 00C0      		rjmp .L50
 620               	.L49:
 621 0456 C201      		movw r24,r4
 622 0458 B101      		movw r22,r2
 623 045a 6250      		subi r22,lo8(-(-2))
 624 045c 7040      		sbci r23,hi8(-(-2))
 625 045e 8040      		sbci r24,hlo8(-(-2))
 626 0460 9040      		sbci r25,hhi8(-(-2))
 627 0462 F301      		movw r30,r6
GAS LISTING C:\Temp/ccxbxlG2.s 			page 12


 628 0464 2281      		ldd r18,Z+2
 629 0466 30E0      		ldi r19,lo8(0)
 630 0468 40E0      		ldi r20,lo8(0)
 631 046a 50E0      		ldi r21,hi8(0)
 632 046c 0E94 0000 		call __mulsi3
 633 0470 4B01      		movw r8,r22
 634 0472 5C01      		movw r10,r24
 635 0474 F301      		movw r30,r6
 636 0476 828D      		ldd r24,Z+26
 637 0478 938D      		ldd r25,Z+27
 638 047a A48D      		ldd r26,Z+28
 639 047c B58D      		ldd r27,Z+29
 640 047e 880E      		add r8,r24
 641 0480 991E      		adc r9,r25
 642 0482 AA1E      		adc r10,r26
 643 0484 BB1E      		adc r11,r27
 644               	.L50:
 645 0486 D301      		movw r26,r6
 646 0488 1296      		adiw r26,2
 647 048a 8C91      		ld r24,X
 648 048c 1297      		sbiw r26,2
 649 048e E82F      		mov r30,r24
 650 0490 F0E0      		ldi r31,lo8(0)
 651 0492 FE87      		std Y+14,r31
 652 0494 ED87      		std Y+13,r30
 653 0496 F1E0      		ldi r31,lo8(1)
 654 0498 2F16      		cp r2,r31
 655 049a 3104      		cpc r3,__zero_reg__
 656 049c 4104      		cpc r4,__zero_reg__
 657 049e 5104      		cpc r5,__zero_reg__
 658 04a0 01F4      		brne .L51
 659 04a2 8C91      		ld r24,X
 660 04a4 8823      		tst r24
 661 04a6 01F4      		brne .L51
 662 04a8 1A96      		adiw r26,10
 663 04aa 8D90      		ld r8,X+
 664 04ac 9D90      		ld r9,X+
 665 04ae AD90      		ld r10,X+
 666 04b0 BC90      		ld r11,X
 667 04b2 1D97      		sbiw r26,10+3
 668 04b4 1696      		adiw r26,6
 669 04b6 2D91      		ld r18,X+
 670 04b8 3C91      		ld r19,X
 671 04ba 1797      		sbiw r26,6+1
 672 04bc 3E87      		std Y+14,r19
 673 04be 2D87      		std Y+13,r18
 674               	.L51:
 675 04c0 8982      		std Y+1,r8
 676 04c2 9A82      		std Y+2,r9
 677 04c4 AB82      		std Y+3,r10
 678 04c6 BC82      		std Y+4,r11
 679 04c8 00C0      		rjmp .L52
 680               	.L61:
 681 04ca 6091 0000 		lds r22,pSectorBuffer
 682 04ce 7091 0000 		lds r23,(pSectorBuffer)+1
 683 04d2 01E0      		ldi r16,lo8(1)
 684 04d4 10E0      		ldi r17,hi8(1)
GAS LISTING C:\Temp/ccxbxlG2.s 			page 13


 685 04d6 2981      		ldd r18,Y+1
 686 04d8 3A81      		ldd r19,Y+2
 687 04da 4B81      		ldd r20,Y+3
 688 04dc 5C81      		ldd r21,Y+4
 689 04de D301      		movw r26,r6
 690 04e0 1196      		adiw r26,1
 691 04e2 8C91      		ld r24,X
 692 04e4 0E94 0000 		call IDEReadSectors
 693 04e8 E091 0000 		lds r30,pSectorBuffer
 694 04ec F091 0000 		lds r31,(pSectorBuffer)+1
 695 04f0 FC87      		std Y+12,r31
 696 04f2 EB87      		std Y+11,r30
 697 04f4 2091 0000 		lds r18,pLongName2
 698 04f8 3091 0000 		lds r19,(pLongName2)+1
 699 04fc 3E83      		std Y+6,r19
 700 04fe 2D83      		std Y+5,r18
 701 0500 FC8F      		std Y+28,r31
 702 0502 EB8F      		std Y+27,r30
 703 0504 1A8A      		std Y+18,__zero_reg__
 704 0506 198A      		std Y+17,__zero_reg__
 705               	.L60:
 706 0508 3889      		ldd r19,Y+16
 707 050a 3130      		cpi r19,lo8(1)
 708 050c 01F4      		brne .L53
 709 050e E989      		ldd r30,Y+17
 710 0510 FA89      		ldd r31,Y+18
 711 0512 55E0      		ldi r21,5
 712 0514 EE0F      	1:	lsl r30
 713 0516 FF1F      		rol r31
 714 0518 5A95      		dec r21
 715 051a 01F4      		brne 1b
 716 051c 8B85      		ldd r24,Y+11
 717 051e 9C85      		ldd r25,Y+12
 718 0520 E80F      		add r30,r24
 719 0522 F91F      		adc r31,r25
 720 0524 8489      		ldd r24,Z+20
 721 0526 9589      		ldd r25,Z+21
 722 0528 A0E0      		ldi r26,lo8(0)
 723 052a B0E0      		ldi r27,hi8(0)
 724 052c AC01      		movw r20,r24
 725 052e 3327      		clr r19
 726 0530 2227      		clr r18
 727 0532 00C0      		rjmp .L65
 728               	.L53:
 729 0534 2F89      		ldd r18,Y+23
 730 0536 388D      		ldd r19,Y+24
 731 0538 232B      		or r18,r19
 732 053a 01F0      		breq .+2
 733 053c 00C0      		rjmp .L55
 734 053e AB8D      		ldd r26,Y+27
 735 0540 BC8D      		ldd r27,Y+28
 736 0542 8C91      		ld r24,X
 737 0544 853E      		cpi r24,lo8(-27)
 738 0546 01F0      		breq .L55
 739 0548 8823      		tst r24
 740 054a 01F0      		breq .L55
 741 054c 0989      		ldd r16,Y+17
GAS LISTING C:\Temp/ccxbxlG2.s 			page 14


 742 054e 1A89      		ldd r17,Y+18
 743 0550 35E0      		ldi r19,5
 744 0552 000F      	1:	lsl r16
 745 0554 111F      		rol r17
 746 0556 3A95      		dec r19
 747 0558 01F4      		brne 1b
 748 055a EB85      		ldd r30,Y+11
 749 055c FC85      		ldd r31,Y+12
 750 055e 0E0F      		add r16,r30
 751 0560 1F1F      		adc r17,r31
 752 0562 4BE0      		ldi r20,lo8(11)
 753 0564 50E0      		ldi r21,hi8(11)
 754 0566 6B89      		ldd r22,Y+19
 755 0568 7C89      		ldd r23,Y+20
 756 056a C801      		movw r24,r16
 757 056c 0E94 0000 		call memcmp
 758 0570 0097      		sbiw r24,0
 759 0572 01F4      		brne .L55
 760 0574 AB89      		ldd r26,Y+19
 761 0576 BC89      		ldd r27,Y+20
 762 0578 1B96      		adiw r26,11
 763 057a 9C91      		ld r25,X
 764 057c EB8D      		ldd r30,Y+27
 765 057e FC8D      		ldd r31,Y+28
 766 0580 8385      		ldd r24,Z+11
 767 0582 8923      		and r24,r25
 768 0584 8917      		cp r24,r25
 769 0586 01F4      		brne .L55
 770 0588 D801      		movw r26,r16
 771 058a 5496      		adiw r26,20
 772 058c 8D91      		ld r24,X+
 773 058e 9C91      		ld r25,X
 774 0590 5597      		sbiw r26,20+1
 775 0592 A0E0      		ldi r26,lo8(0)
 776 0594 B0E0      		ldi r27,hi8(0)
 777 0596 AC01      		movw r20,r24
 778 0598 3327      		clr r19
 779 059a 2227      		clr r18
 780 059c F801      		movw r30,r16
 781               	.L65:
 782 059e 828D      		ldd r24,Z+26
 783 05a0 938D      		ldd r25,Z+27
 784 05a2 A0E0      		ldi r26,lo8(0)
 785 05a4 B0E0      		ldi r27,hi8(0)
 786 05a6 282B      		or r18,r24
 787 05a8 392B      		or r19,r25
 788 05aa 4A2B      		or r20,r26
 789 05ac 5B2B      		or r21,r27
 790 05ae 848D      		ldd r24,Z+28
 791 05b0 958D      		ldd r25,Z+29
 792 05b2 A68D      		ldd r26,Z+30
 793 05b4 B78D      		ldd r27,Z+31
 794 05b6 ED89      		ldd r30,Y+21
 795 05b8 FE89      		ldd r31,Y+22
 796 05ba 8083      		st Z,r24
 797 05bc 9183      		std Z+1,r25
 798 05be A283      		std Z+2,r26
GAS LISTING C:\Temp/ccxbxlG2.s 			page 15


 799 05c0 B383      		std Z+3,r27
 800 05c2 00C0      		rjmp .L54
 801               	.L55:
 802 05c4 AB8D      		ldd r26,Y+27
 803 05c6 BC8D      		ldd r27,Y+28
 804 05c8 1B96      		adiw r26,11
 805 05ca 8C91      		ld r24,X
 806 05cc 1B97      		sbiw r26,11
 807 05ce 8F30      		cpi r24,lo8(15)
 808 05d0 01F0      		breq .+2
 809 05d2 00C0      		rjmp .L56
 810 05d4 BC91      		ld r27,X
 811 05d6 BF87      		std Y+15,r27
 812 05d8 EA85      		ldd r30,Y+10
 813 05da BE17      		cp r27,r30
 814 05dc 01F0      		breq .+2
 815 05de 00C0      		rjmp .L56
 816 05e0 E6FF      		sbrs r30,6
 817 05e2 00C0      		rjmp .L57
 818 05e4 EF7B      		andi r30,lo8(-65)
 819 05e6 EF87      		std Y+15,r30
 820 05e8 ED81      		ldd r30,Y+5
 821 05ea FE81      		ldd r31,Y+6
 822 05ec EC0D      		add r30,r12
 823 05ee FD1D      		adc r31,r13
 824 05f0 1082      		st Z,__zero_reg__
 825 05f2 0894      		sec
 826 05f4 C108      		sbc r12,__zero_reg__
 827 05f6 D108      		sbc r13,__zero_reg__
 828 05f8 ED80      		ldd r14,Y+5
 829 05fa FE80      		ldd r15,Y+6
 830               	.L57:
 831 05fc AB8D      		ldd r26,Y+27
 832 05fe BC8D      		ldd r27,Y+28
 833 0600 5E96      		adiw r26,30
 834 0602 8D91      		ld r24,X+
 835 0604 9C91      		ld r25,X
 836 0606 5F97      		sbiw r26,30+1
 837 0608 0E94 0000 		call GetLongChar
 838 060c F701      		movw r30,r14
 839 060e EC0D      		add r30,r12
 840 0610 FD1D      		adc r31,r13
 841 0612 8083      		st Z,r24
 842 0614 8601      		movw r16,r12
 843 0616 0150      		subi r16,lo8(-(-1))
 844 0618 1040      		sbci r17,hi8(-(-1))
 845 061a EB8D      		ldd r30,Y+27
 846 061c FC8D      		ldd r31,Y+28
 847 061e 848D      		ldd r24,Z+28
 848 0620 958D      		ldd r25,Z+29
 849 0622 0E94 0000 		call GetLongChar
 850 0626 F701      		movw r30,r14
 851 0628 E00F      		add r30,r16
 852 062a F11F      		adc r31,r17
 853 062c 8083      		st Z,r24
 854 062e 0150      		subi r16,lo8(-(-1))
 855 0630 1040      		sbci r17,hi8(-(-1))
GAS LISTING C:\Temp/ccxbxlG2.s 			page 16


 856 0632 AB8D      		ldd r26,Y+27
 857 0634 BC8D      		ldd r27,Y+28
 858 0636 5896      		adiw r26,24
 859 0638 8D91      		ld r24,X+
 860 063a 9C91      		ld r25,X
 861 063c 5997      		sbiw r26,24+1
 862 063e 0E94 0000 		call GetLongChar
 863 0642 F701      		movw r30,r14
 864 0644 E00F      		add r30,r16
 865 0646 F11F      		adc r31,r17
 866 0648 8083      		st Z,r24
 867 064a 0150      		subi r16,lo8(-(-1))
 868 064c 1040      		sbci r17,hi8(-(-1))
 869 064e EB8D      		ldd r30,Y+27
 870 0650 FC8D      		ldd r31,Y+28
 871 0652 8689      		ldd r24,Z+22
 872 0654 9789      		ldd r25,Z+23
 873 0656 0E94 0000 		call GetLongChar
 874 065a F701      		movw r30,r14
 875 065c E00F      		add r30,r16
 876 065e F11F      		adc r31,r17
 877 0660 8083      		st Z,r24
 878 0662 0150      		subi r16,lo8(-(-1))
 879 0664 1040      		sbci r17,hi8(-(-1))
 880 0666 AB8D      		ldd r26,Y+27
 881 0668 BC8D      		ldd r27,Y+28
 882 066a 5496      		adiw r26,20
 883 066c 8D91      		ld r24,X+
 884 066e 9C91      		ld r25,X
 885 0670 5597      		sbiw r26,20+1
 886 0672 0E94 0000 		call GetLongChar
 887 0676 F701      		movw r30,r14
 888 0678 E00F      		add r30,r16
 889 067a F11F      		adc r31,r17
 890 067c 8083      		st Z,r24
 891 067e 0150      		subi r16,lo8(-(-1))
 892 0680 1040      		sbci r17,hi8(-(-1))
 893 0682 EB8D      		ldd r30,Y+27
 894 0684 FC8D      		ldd r31,Y+28
 895 0686 8289      		ldd r24,Z+18
 896 0688 9389      		ldd r25,Z+19
 897 068a 0E94 0000 		call GetLongChar
 898 068e F701      		movw r30,r14
 899 0690 E00F      		add r30,r16
 900 0692 F11F      		adc r31,r17
 901 0694 8083      		st Z,r24
 902 0696 0150      		subi r16,lo8(-(-1))
 903 0698 1040      		sbci r17,hi8(-(-1))
 904 069a AB8D      		ldd r26,Y+27
 905 069c BC8D      		ldd r27,Y+28
 906 069e 5096      		adiw r26,16
 907 06a0 8D91      		ld r24,X+
 908 06a2 9C91      		ld r25,X
 909 06a4 5197      		sbiw r26,16+1
 910 06a6 0E94 0000 		call GetLongChar
 911 06aa F701      		movw r30,r14
 912 06ac E00F      		add r30,r16
GAS LISTING C:\Temp/ccxbxlG2.s 			page 17


 913 06ae F11F      		adc r31,r17
 914 06b0 8083      		st Z,r24
 915 06b2 0150      		subi r16,lo8(-(-1))
 916 06b4 1040      		sbci r17,hi8(-(-1))
 917 06b6 EB8D      		ldd r30,Y+27
 918 06b8 FC8D      		ldd r31,Y+28
 919 06ba 8685      		ldd r24,Z+14
 920 06bc 9785      		ldd r25,Z+15
 921 06be 0E94 0000 		call GetLongChar
 922 06c2 F701      		movw r30,r14
 923 06c4 E00F      		add r30,r16
 924 06c6 F11F      		adc r31,r17
 925 06c8 8083      		st Z,r24
 926 06ca 0150      		subi r16,lo8(-(-1))
 927 06cc 1040      		sbci r17,hi8(-(-1))
 928 06ce AB8D      		ldd r26,Y+27
 929 06d0 BC8D      		ldd r27,Y+28
 930 06d2 1996      		adiw r26,9
 931 06d4 8D91      		ld r24,X+
 932 06d6 9C91      		ld r25,X
 933 06d8 1A97      		sbiw r26,9+1
 934 06da 0E94 0000 		call GetLongChar
 935 06de F701      		movw r30,r14
 936 06e0 E00F      		add r30,r16
 937 06e2 F11F      		adc r31,r17
 938 06e4 8083      		st Z,r24
 939 06e6 0150      		subi r16,lo8(-(-1))
 940 06e8 1040      		sbci r17,hi8(-(-1))
 941 06ea EB8D      		ldd r30,Y+27
 942 06ec FC8D      		ldd r31,Y+28
 943 06ee 8781      		ldd r24,Z+7
 944 06f0 9085      		ldd r25,Z+8
 945 06f2 0E94 0000 		call GetLongChar
 946 06f6 F701      		movw r30,r14
 947 06f8 E00F      		add r30,r16
 948 06fa F11F      		adc r31,r17
 949 06fc 8083      		st Z,r24
 950 06fe 0150      		subi r16,lo8(-(-1))
 951 0700 1040      		sbci r17,hi8(-(-1))
 952 0702 AB8D      		ldd r26,Y+27
 953 0704 BC8D      		ldd r27,Y+28
 954 0706 1596      		adiw r26,5
 955 0708 8D91      		ld r24,X+
 956 070a 9C91      		ld r25,X
 957 070c 1697      		sbiw r26,5+1
 958 070e 0E94 0000 		call GetLongChar
 959 0712 F701      		movw r30,r14
 960 0714 E00F      		add r30,r16
 961 0716 F11F      		adc r31,r17
 962 0718 8083      		st Z,r24
 963 071a 0150      		subi r16,lo8(-(-1))
 964 071c 1040      		sbci r17,hi8(-(-1))
 965 071e EB8D      		ldd r30,Y+27
 966 0720 FC8D      		ldd r31,Y+28
 967 0722 8381      		ldd r24,Z+3
 968 0724 9481      		ldd r25,Z+4
 969 0726 0E94 0000 		call GetLongChar
GAS LISTING C:\Temp/ccxbxlG2.s 			page 18


 970 072a F701      		movw r30,r14
 971 072c E00F      		add r30,r16
 972 072e F11F      		adc r31,r17
 973 0730 8083      		st Z,r24
 974 0732 0150      		subi r16,lo8(-(-1))
 975 0734 1040      		sbci r17,hi8(-(-1))
 976 0736 AB8D      		ldd r26,Y+27
 977 0738 BC8D      		ldd r27,Y+28
 978 073a 1196      		adiw r26,1
 979 073c 8D91      		ld r24,X+
 980 073e 9C91      		ld r25,X
 981 0740 1297      		sbiw r26,1+1
 982 0742 0E94 0000 		call GetLongChar
 983 0746 F701      		movw r30,r14
 984 0748 E00F      		add r30,r16
 985 074a F11F      		adc r31,r17
 986 074c 8083      		st Z,r24
 987 074e BF85      		ldd r27,Y+15
 988 0750 B150      		subi r27,lo8(-(-1))
 989 0752 BA87      		std Y+10,r27
 990 0754 BB23      		tst r27
 991 0756 01F0      		breq .L58
 992 0758 6801      		movw r12,r16
 993 075a 0894      		sec
 994 075c C108      		sbc r12,__zero_reg__
 995 075e D108      		sbc r13,__zero_reg__
 996 0760 00C0      		rjmp .L56
 997               	.L58:
 998 0762 E98D      		ldd r30,Y+25
 999 0764 FA8D      		ldd r31,Y+26
 1000 0766 DF01      		movw r26,r30
 1001 0768 0D90      		ld __tmp_reg__,X+
 1002 076a 0020      		tst __tmp_reg__
 1003 076c 01F4      		brne .-6
 1004 076e 1197      		sbiw r26,1
 1005 0770 AE1B      		sub r26,r30
 1006 0772 BF0B      		sbc r27,r31
 1007 0774 AD01      		movw r20,r26
 1008 0776 B701      		movw r22,r14
 1009 0778 CF01      		movw r24,r30
 1010 077a 0E94 0000 		call memcmp
 1011 077e 0097      		sbiw r24,0
 1012 0780 01F4      		brne .L59
 1013 0782 C884      		ldd r12,Y+8
 1014 0784 D984      		ldd r13,Y+9
 1015 0786 EF81      		ldd r30,Y+7
 1016 0788 EA87      		std Y+10,r30
 1017 078a F1E0      		ldi r31,lo8(1)
 1018 078c F88B      		std Y+16,r31
 1019 078e 00C0      		rjmp .L56
 1020               	.L59:
 1021 0790 C884      		ldd r12,Y+8
 1022 0792 D984      		ldd r13,Y+9
 1023 0794 2F81      		ldd r18,Y+7
 1024 0796 2A87      		std Y+10,r18
 1025               	.L56:
 1026 0798 8989      		ldd r24,Y+17
GAS LISTING C:\Temp/ccxbxlG2.s 			page 19


 1027 079a 9A89      		ldd r25,Y+18
 1028 079c 0196      		adiw r24,1
 1029 079e 9A8B      		std Y+18,r25
 1030 07a0 898B      		std Y+17,r24
 1031 07a2 AB8D      		ldd r26,Y+27
 1032 07a4 BC8D      		ldd r27,Y+28
 1033 07a6 9096      		adiw r26,32
 1034 07a8 BC8F      		std Y+28,r27
 1035 07aa AB8F      		std Y+27,r26
 1036 07ac 4097      		sbiw r24,16
 1037 07ae 01F0      		breq .+2
 1038 07b0 00C0      		rjmp .L60
 1039 07b2 8981      		ldd r24,Y+1
 1040 07b4 9A81      		ldd r25,Y+2
 1041 07b6 AB81      		ldd r26,Y+3
 1042 07b8 BC81      		ldd r27,Y+4
 1043 07ba 0196      		adiw r24,1
 1044 07bc A11D      		adc r26,__zero_reg__
 1045 07be B11D      		adc r27,__zero_reg__
 1046 07c0 8983      		std Y+1,r24
 1047 07c2 9A83      		std Y+2,r25
 1048 07c4 AB83      		std Y+3,r26
 1049 07c6 BC83      		std Y+4,r27
 1050               	.L52:
 1051 07c8 8981      		ldd r24,Y+1
 1052 07ca 9A81      		ldd r25,Y+2
 1053 07cc 8819      		sub r24,r8
 1054 07ce 9909      		sbc r25,r9
 1055 07d0 AD85      		ldd r26,Y+13
 1056 07d2 BE85      		ldd r27,Y+14
 1057 07d4 8A17      		cp r24,r26
 1058 07d6 9B07      		cpc r25,r27
 1059 07d8 04F4      		brge .+2
 1060 07da 00C0      		rjmp .L61
 1061 07dc B201      		movw r22,r4
 1062 07de A101      		movw r20,r2
 1063 07e0 C301      		movw r24,r6
 1064 07e2 0E94 0000 		call GetNextCluster
 1065 07e6 1B01      		movw r2,r22
 1066 07e8 2C01      		movw r4,r24
 1067               	.L48:
 1068 07ea 2114      		cp r2,__zero_reg__
 1069 07ec 3104      		cpc r3,__zero_reg__
 1070 07ee 4104      		cpc r4,__zero_reg__
 1071 07f0 5104      		cpc r5,__zero_reg__
 1072 07f2 01F0      		breq .+2
 1073 07f4 00C0      		rjmp .L62
 1074               	.L47:
 1075 07f6 20E0      		ldi r18,lo8(0)
 1076 07f8 30E0      		ldi r19,hi8(0)
 1077 07fa 40E0      		ldi r20,hlo8(0)
 1078 07fc 50E0      		ldi r21,hhi8(0)
 1079               	.L54:
 1080 07fe B901      		movw r22,r18
 1081 0800 CA01      		movw r24,r20
 1082               	/* epilogue start */
 1083 0802 6C96      		adiw r28,28
GAS LISTING C:\Temp/ccxbxlG2.s 			page 20


 1084 0804 0FB6      		in __tmp_reg__,__SREG__
 1085 0806 F894      		cli
 1086 0808 DEBF      		out __SP_H__,r29
 1087 080a 0FBE      		out __SREG__,__tmp_reg__
 1088 080c CDBF      		out __SP_L__,r28
 1089 080e CF91      		pop r28
 1090 0810 DF91      		pop r29
 1091 0812 1F91      		pop r17
 1092 0814 0F91      		pop r16
 1093 0816 FF90      		pop r15
 1094 0818 EF90      		pop r14
 1095 081a DF90      		pop r13
 1096 081c CF90      		pop r12
 1097 081e BF90      		pop r11
 1098 0820 AF90      		pop r10
 1099 0822 9F90      		pop r9
 1100 0824 8F90      		pop r8
 1101 0826 7F90      		pop r7
 1102 0828 6F90      		pop r6
 1103 082a 5F90      		pop r5
 1104 082c 4F90      		pop r4
 1105 082e 3F90      		pop r3
 1106 0830 2F90      		pop r2
 1107 0832 0895      		ret
 1108               		.size	FindFile, .-FindFile
 1109               	.global	FATSemaInit
 1110               		.type	FATSemaInit, @function
 1111               	FATSemaInit:
 1112               	/* prologue: function */
 1113               	/* frame size = 0 */
 1114 0834 80E0      		ldi r24,lo8(hFATSemaphore)
 1115 0836 90E0      		ldi r25,hi8(hFATSemaphore)
 1116 0838 0E94 0000 		call NutEventPost
 1117               	/* epilogue start */
 1118 083c 0895      		ret
 1119               		.size	FATSemaInit, .-FATSemaInit
 1120               	.global	FATFree
 1121               		.type	FATFree, @function
 1122               	FATFree:
 1123               	/* prologue: function */
 1124               	/* frame size = 0 */
 1125 083e 80E0      		ldi r24,lo8(hFATSemaphore)
 1126 0840 90E0      		ldi r25,hi8(hFATSemaphore)
 1127 0842 0E94 0000 		call NutEventPost
 1128               	/* epilogue start */
 1129 0846 0895      		ret
 1130               		.size	FATFree, .-FATFree
 1131               	.global	FATLock
 1132               		.type	FATLock, @function
 1133               	FATLock:
 1134               	/* prologue: function */
 1135               	/* frame size = 0 */
 1136 0848 40E0      		ldi r20,lo8(0)
 1137 084a 50E0      		ldi r21,hi8(0)
 1138 084c 60E0      		ldi r22,hlo8(0)
 1139 084e 70E0      		ldi r23,hhi8(0)
 1140 0850 80E0      		ldi r24,lo8(hFATSemaphore)
GAS LISTING C:\Temp/ccxbxlG2.s 			page 21


 1141 0852 90E0      		ldi r25,hi8(hFATSemaphore)
 1142 0854 0E94 0000 		call NutEventWait
 1143               	/* epilogue start */
 1144 0858 0895      		ret
 1145               		.size	FATLock, .-FATLock
 1146               		.type	FATFileClose, @function
 1147               	FATFileClose:
 1148 085a CF93      		push r28
 1149 085c DF93      		push r29
 1150               	/* prologue: function */
 1151               	/* frame size = 0 */
 1152 085e EC01      		movw r28,r24
 1153 0860 40E0      		ldi r20,lo8(0)
 1154 0862 50E0      		ldi r21,hi8(0)
 1155 0864 60E0      		ldi r22,hlo8(0)
 1156 0866 70E0      		ldi r23,hhi8(0)
 1157 0868 80E0      		ldi r24,lo8(hFATSemaphore)
 1158 086a 90E0      		ldi r25,hi8(hFATSemaphore)
 1159 086c 0E94 0000 		call NutEventWait
 1160 0870 2097      		sbiw r28,0
 1161 0872 01F4      		brne .L73
 1162 0874 CFEF      		ldi r28,lo8(-1)
 1163 0876 DFEF      		ldi r29,hi8(-1)
 1164 0878 00C0      		rjmp .L74
 1165               	.L73:
 1166 087a 6C81      		ldd r22,Y+4
 1167 087c 7D81      		ldd r23,Y+5
 1168 087e 6115      		cp r22,__zero_reg__
 1169 0880 7105      		cpc r23,__zero_reg__
 1170 0882 01F0      		breq .L75
 1171 0884 80E0      		ldi r24,lo8(heapFreeList)
 1172 0886 90E0      		ldi r25,hi8(heapFreeList)
 1173 0888 0E94 0000 		call NutHeapRootFree
 1174               	.L75:
 1175 088c BE01      		movw r22,r28
 1176 088e 80E0      		ldi r24,lo8(heapFreeList)
 1177 0890 90E0      		ldi r25,hi8(heapFreeList)
 1178 0892 0E94 0000 		call NutHeapRootFree
 1179 0896 C0E0      		ldi r28,lo8(0)
 1180 0898 D0E0      		ldi r29,hi8(0)
 1181               	.L74:
 1182 089a 80E0      		ldi r24,lo8(hFATSemaphore)
 1183 089c 90E0      		ldi r25,hi8(hFATSemaphore)
 1184 089e 0E94 0000 		call NutEventPost
 1185 08a2 CE01      		movw r24,r28
 1186               	/* epilogue start */
 1187 08a4 DF91      		pop r29
 1188 08a6 CF91      		pop r28
 1189 08a8 0895      		ret
 1190               		.size	FATFileClose, .-FATFileClose
 1191               		.type	FATMountDrive, @function
 1192               	FATMountDrive:
 1193 08aa 2F92      		push r2
 1194 08ac 3F92      		push r3
 1195 08ae 4F92      		push r4
 1196 08b0 5F92      		push r5
 1197 08b2 6F92      		push r6
GAS LISTING C:\Temp/ccxbxlG2.s 			page 22


 1198 08b4 7F92      		push r7
 1199 08b6 8F92      		push r8
 1200 08b8 9F92      		push r9
 1201 08ba AF92      		push r10
 1202 08bc BF92      		push r11
 1203 08be CF92      		push r12
 1204 08c0 DF92      		push r13
 1205 08c2 EF92      		push r14
 1206 08c4 FF92      		push r15
 1207 08c6 0F93      		push r16
 1208 08c8 1F93      		push r17
 1209 08ca DF93      		push r29
 1210 08cc CF93      		push r28
 1211 08ce 00D0      		rcall .
 1212 08d0 00D0      		rcall .
 1213 08d2 00D0      		rcall .
 1214 08d4 CDB7      		in r28,__SP_L__
 1215 08d6 DEB7      		in r29,__SP_H__
 1216               	/* prologue: function */
 1217               	/* frame size = 6 */
 1218 08d8 40E0      		ldi r20,lo8(0)
 1219 08da 50E0      		ldi r21,hi8(0)
 1220 08dc 60E0      		ldi r22,hlo8(0)
 1221 08de 70E0      		ldi r23,hhi8(0)
 1222 08e0 80E0      		ldi r24,lo8(hFATSemaphore)
 1223 08e2 90E0      		ldi r25,hi8(hFATSemaphore)
 1224 08e4 0E94 0000 		call NutEventWait
 1225 08e8 8091 0000 		lds r24,pLongName1
 1226 08ec 9091 0000 		lds r25,(pLongName1)+1
 1227 08f0 892B      		or r24,r25
 1228 08f2 01F4      		brne .L78
 1229 08f4 60E4      		ldi r22,lo8(64)
 1230 08f6 70E0      		ldi r23,hi8(64)
 1231 08f8 80E0      		ldi r24,lo8(heapFreeList)
 1232 08fa 90E0      		ldi r25,hi8(heapFreeList)
 1233 08fc 0E94 0000 		call NutHeapRootAlloc
 1234 0900 9093 0000 		sts (pLongName1)+1,r25
 1235 0904 8093 0000 		sts pLongName1,r24
 1236               	.L78:
 1237 0908 8091 0000 		lds r24,pLongName2
 1238 090c 9091 0000 		lds r25,(pLongName2)+1
 1239 0910 892B      		or r24,r25
 1240 0912 01F4      		brne .L79
 1241 0914 60E4      		ldi r22,lo8(64)
 1242 0916 70E0      		ldi r23,hi8(64)
 1243 0918 80E0      		ldi r24,lo8(heapFreeList)
 1244 091a 90E0      		ldi r25,hi8(heapFreeList)
 1245 091c 0E94 0000 		call NutHeapRootAlloc
 1246 0920 9093 0000 		sts (pLongName2)+1,r25
 1247 0924 8093 0000 		sts pLongName2,r24
 1248               	.L79:
 1249 0928 8091 0000 		lds r24,pSectorBuffer
 1250 092c 9091 0000 		lds r25,(pSectorBuffer)+1
 1251 0930 892B      		or r24,r25
 1252 0932 01F4      		brne .L80
 1253 0934 60E0      		ldi r22,lo8(2048)
 1254 0936 78E0      		ldi r23,hi8(2048)
GAS LISTING C:\Temp/ccxbxlG2.s 			page 23


 1255 0938 80E0      		ldi r24,lo8(heapFreeList)
 1256 093a 90E0      		ldi r25,hi8(heapFreeList)
 1257 093c 0E94 0000 		call NutHeapRootAlloc
 1258 0940 9093 0000 		sts (pSectorBuffer)+1,r25
 1259 0944 8093 0000 		sts pSectorBuffer,r24
 1260               	.L80:
 1261 0948 8091 0000 		lds r24,pSectorBuffer
 1262 094c 9091 0000 		lds r25,(pSectorBuffer)+1
 1263 0950 892B      		or r24,r25
 1264 0952 01F4      		brne .+2
 1265 0954 00C0      		rjmp .L81
 1266 0956 8091 0000 		lds r24,pLongName1
 1267 095a 9091 0000 		lds r25,(pLongName1)+1
 1268 095e 892B      		or r24,r25
 1269 0960 01F4      		brne .+2
 1270 0962 00C0      		rjmp .L81
 1271 0964 8091 0000 		lds r24,pLongName2
 1272 0968 9091 0000 		lds r25,(pLongName2)+1
 1273 096c 892B      		or r24,r25
 1274 096e 01F4      		brne .+2
 1275 0970 00C0      		rjmp .L81
 1276 0972 A0E0      		ldi r26,lo8(sDriveInfo)
 1277 0974 4A2E      		mov r4,r26
 1278 0976 A0E0      		ldi r26,hi8(sDriveInfo)
 1279 0978 5A2E      		mov r5,r26
 1280 097a 3324      		clr r3
 1281 097c 2224      		clr r2
 1282 097e 2394      		inc r2
 1283               	.L98:
 1284 0980 D201      		movw r26,r4
 1285 0982 22E2      		ldi r18,lo8(34)
 1286 0984 1D92      		st X+,__zero_reg__
 1287 0986 2A95      	        dec r18
 1288 0988 01F4      		brne .-6
 1289 098a D201      		movw r26,r4
 1290 098c 1196      		adiw r26,1
 1291 098e 3C92      		st X,r3
 1292 0990 832D      		mov r24,r3
 1293 0992 0E94 0000 		call IDEGetSectorSize
 1294 0996 F201      		movw r30,r4
 1295 0998 9583      		std Z+5,r25
 1296 099a 8483      		std Z+4,r24
 1297 099c 832D      		mov r24,r3
 1298 099e 0E94 0000 		call IDEIsCDROMDevice
 1299 09a2 0197      		sbiw r24,1
 1300 09a4 01F4      		brne .L82
 1301 09a6 D201      		movw r26,r4
 1302 09a8 1396      		adiw r26,3
 1303 09aa 8C91      		ld r24,X
 1304 09ac 1397      		sbiw r26,3
 1305 09ae 8160      		ori r24,lo8(1)
 1306 09b0 1396      		adiw r26,3
 1307 09b2 8C93      		st X,r24
 1308               	.L82:
 1309 09b4 832D      		mov r24,r3
 1310 09b6 0E94 0000 		call IDEIsZIPDevice
 1311 09ba 0197      		sbiw r24,1
GAS LISTING C:\Temp/ccxbxlG2.s 			page 24


 1312 09bc 01F4      		brne .L83
 1313 09be F201      		movw r30,r4
 1314 09c0 8381      		ldd r24,Z+3
 1315 09c2 8260      		ori r24,lo8(2)
 1316 09c4 8383      		std Z+3,r24
 1317               	.L83:
 1318 09c6 D201      		movw r26,r4
 1319 09c8 1496      		adiw r26,4
 1320 09ca 8D91      		ld r24,X+
 1321 09cc 9C91      		ld r25,X
 1322 09ce 1597      		sbiw r26,4+1
 1323 09d0 B2E0      		ldi r27,hi8(512)
 1324 09d2 8030      		cpi r24,lo8(512)
 1325 09d4 9B07      		cpc r25,r27
 1326 09d6 01F0      		breq .L85
 1327 09d8 8050      		subi r24,lo8(2048)
 1328 09da 9840      		sbci r25,hi8(2048)
 1329 09dc 01F4      		brne .+2
 1330 09de 00C0      		rjmp .L86
 1331 09e0 F1E0      		ldi r31,lo8(1)
 1332 09e2 6F2E      		mov r6,r31
 1333 09e4 712C      		mov r7,__zero_reg__
 1334 09e6 00C0      		rjmp .L87
 1335               	.L85:
 1336 09e8 D201      		movw r26,r4
 1337 09ea 1396      		adiw r26,3
 1338 09ec 8C91      		ld r24,X
 1339 09ee 81FF      		sbrs r24,1
 1340 09f0 00C0      		rjmp .L88
 1341 09f2 20E2      		ldi r18,lo8(32)
 1342 09f4 30E0      		ldi r19,hi8(32)
 1343 09f6 40E0      		ldi r20,hlo8(32)
 1344 09f8 50E0      		ldi r21,hhi8(32)
 1345 09fa 00C0      		rjmp .L89
 1346               	.L88:
 1347 09fc 6091 0000 		lds r22,pSectorBuffer
 1348 0a00 7091 0000 		lds r23,(pSectorBuffer)+1
 1349 0a04 01E0      		ldi r16,lo8(1)
 1350 0a06 10E0      		ldi r17,hi8(1)
 1351 0a08 20E0      		ldi r18,lo8(0)
 1352 0a0a 30E0      		ldi r19,hi8(0)
 1353 0a0c 40E0      		ldi r20,hlo8(0)
 1354 0a0e 50E0      		ldi r21,hhi8(0)
 1355 0a10 832D      		mov r24,r3
 1356 0a12 0E94 0000 		call IDEReadSectors
 1357 0a16 3C01      		movw r6,r24
 1358 0a18 0097      		sbiw r24,0
 1359 0a1a 01F0      		breq .+2
 1360 0a1c 00C0      		rjmp .L87
 1361 0a1e E091 0000 		lds r30,pSectorBuffer
 1362 0a22 F091 0000 		lds r31,(pSectorBuffer)+1
 1363 0a26 E250      		subi r30,lo8(-(510))
 1364 0a28 FE4F      		sbci r31,hi8(-(510))
 1365 0a2a 8081      		ld r24,Z
 1366 0a2c 9181      		ldd r25,Z+1
 1367 0a2e EE5F      		subi r30,lo8(-(-510))
 1368 0a30 F140      		sbci r31,hi8(-(-510))
GAS LISTING C:\Temp/ccxbxlG2.s 			page 25


 1369 0a32 8555      		subi r24,lo8(-21931)
 1370 0a34 9A4A      		sbci r25,hi8(-21931)
 1371 0a36 01F0      		breq .+2
 1372 0a38 00C0      		rjmp .L87
 1373 0a3a E653      		subi r30,lo8(-(458))
 1374 0a3c FE4F      		sbci r31,hi8(-(458))
 1375 0a3e 8081      		ld r24,Z
 1376 0a40 9181      		ldd r25,Z+1
 1377 0a42 A281      		ldd r26,Z+2
 1378 0a44 B381      		ldd r27,Z+3
 1379 0a46 EA5C      		subi r30,lo8(-(-458))
 1380 0a48 F140      		sbci r31,hi8(-(-458))
 1381 0a4a 0097      		sbiw r24,0
 1382 0a4c A105      		cpc r26,__zero_reg__
 1383 0a4e B105      		cpc r27,__zero_reg__
 1384 0a50 01F4      		brne .+2
 1385 0a52 00C0      		rjmp .L87
 1386 0a54 EA53      		subi r30,lo8(-(454))
 1387 0a56 FE4F      		sbci r31,hi8(-(454))
 1388 0a58 2081      		ld r18,Z
 1389 0a5a 3181      		ldd r19,Z+1
 1390 0a5c 4281      		ldd r20,Z+2
 1391 0a5e 5381      		ldd r21,Z+3
 1392 0a60 2115      		cp r18,__zero_reg__
 1393 0a62 3105      		cpc r19,__zero_reg__
 1394 0a64 4105      		cpc r20,__zero_reg__
 1395 0a66 5105      		cpc r21,__zero_reg__
 1396 0a68 01F4      		brne .+2
 1397 0a6a 00C0      		rjmp .L87
 1398               	.L89:
 1399 0a6c 6091 0000 		lds r22,pSectorBuffer
 1400 0a70 7091 0000 		lds r23,(pSectorBuffer)+1
 1401 0a74 01E0      		ldi r16,lo8(1)
 1402 0a76 10E0      		ldi r17,hi8(1)
 1403 0a78 832D      		mov r24,r3
 1404 0a7a 0E94 0000 		call IDEReadSectors
 1405 0a7e E091 0000 		lds r30,pSectorBuffer
 1406 0a82 F091 0000 		lds r31,(pSectorBuffer)+1
 1407 0a86 E250      		subi r30,lo8(-(510))
 1408 0a88 FE4F      		sbci r31,hi8(-(510))
 1409 0a8a 8081      		ld r24,Z
 1410 0a8c 9181      		ldd r25,Z+1
 1411 0a8e EE5F      		subi r30,lo8(-(-510))
 1412 0a90 F140      		sbci r31,hi8(-(-510))
 1413 0a92 FE83      		std Y+6,r31
 1414 0a94 ED83      		std Y+5,r30
 1415 0a96 8555      		subi r24,lo8(-21931)
 1416 0a98 9A4A      		sbci r25,hi8(-21931)
 1417 0a9a 01F0      		breq .+2
 1418 0a9c 00C0      		rjmp .L104
 1419               	.L90:
 1420 0a9e AD81      		ldd r26,Y+5
 1421 0aa0 BE81      		ldd r27,Y+6
 1422 0aa2 1D96      		adiw r26,13
 1423 0aa4 8C91      		ld r24,X
 1424 0aa6 1D97      		sbiw r26,13
 1425 0aa8 F201      		movw r30,r4
GAS LISTING C:\Temp/ccxbxlG2.s 			page 26


 1426 0aaa 8283      		std Z+2,r24
 1427 0aac 5696      		adiw r26,22
 1428 0aae 6D91      		ld r22,X+
 1429 0ab0 7C91      		ld r23,X
 1430 0ab2 5797      		sbiw r26,22+1
 1431 0ab4 6115      		cp r22,__zero_reg__
 1432 0ab6 7105      		cpc r23,__zero_reg__
 1433 0ab8 01F0      		breq .L91
 1434 0aba 9B01      		movw r18,r22
 1435 0abc 40E0      		ldi r20,lo8(0)
 1436 0abe 50E0      		ldi r21,hi8(0)
 1437 0ac0 2983      		std Y+1,r18
 1438 0ac2 3A83      		std Y+2,r19
 1439 0ac4 4B83      		std Y+3,r20
 1440 0ac6 5C83      		std Y+4,r21
 1441 0ac8 1082      		st Z,__zero_reg__
 1442 0aca 81E0      		ldi r24,lo8(1)
 1443 0acc 90E0      		ldi r25,hi8(1)
 1444 0ace A0E0      		ldi r26,hlo8(1)
 1445 0ad0 B0E0      		ldi r27,hhi8(1)
 1446 0ad2 00C0      		rjmp .L103
 1447               	.L91:
 1448 0ad4 AD81      		ldd r26,Y+5
 1449 0ad6 BE81      		ldd r27,Y+6
 1450 0ad8 9496      		adiw r26,36
 1451 0ada 2D91      		ld r18,X+
 1452 0adc 3D91      		ld r19,X+
 1453 0ade 4D91      		ld r20,X+
 1454 0ae0 5C91      		ld r21,X
 1455 0ae2 9797      		sbiw r26,36+3
 1456 0ae4 2983      		std Y+1,r18
 1457 0ae6 3A83      		std Y+2,r19
 1458 0ae8 4B83      		std Y+3,r20
 1459 0aea 5C83      		std Y+4,r21
 1460 0aec F201      		movw r30,r4
 1461 0aee 2082      		st Z,r2
 1462 0af0 ED81      		ldd r30,Y+5
 1463 0af2 FE81      		ldd r31,Y+6
 1464 0af4 84A5      		ldd r24,Z+44
 1465 0af6 95A5      		ldd r25,Z+45
 1466 0af8 A6A5      		ldd r26,Z+46
 1467 0afa B7A5      		ldd r27,Z+47
 1468 0afc F201      		movw r30,r4
 1469               	.L103:
 1470 0afe 8687      		std Z+14,r24
 1471 0b00 9787      		std Z+15,r25
 1472 0b02 A08B      		std Z+16,r26
 1473 0b04 B18B      		std Z+17,r27
 1474 0b06 AD81      		ldd r26,Y+5
 1475 0b08 BE81      		ldd r27,Y+6
 1476 0b0a 1B96      		adiw r26,11
 1477 0b0c 6D91      		ld r22,X+
 1478 0b0e 7C91      		ld r23,X
 1479 0b10 1C97      		sbiw r26,11+1
 1480 0b12 CB01      		movw r24,r22
 1481 0b14 0197      		sbiw r24,1
 1482 0b16 5196      		adiw r26,17
GAS LISTING C:\Temp/ccxbxlG2.s 			page 27


 1483 0b18 2D91      		ld r18,X+
 1484 0b1a 3C91      		ld r19,X
 1485 0b1c 5297      		sbiw r26,17+1
 1486 0b1e E5E0      		ldi r30,5
 1487 0b20 220F      	1:	lsl r18
 1488 0b22 331F      		rol r19
 1489 0b24 EA95      		dec r30
 1490 0b26 01F4      		brne 1b
 1491 0b28 820F      		add r24,r18
 1492 0b2a 931F      		adc r25,r19
 1493 0b2c 0E94 0000 		call __udivmodhi4
 1494 0b30 5B01      		movw r10,r22
 1495 0b32 CC24      		clr r12
 1496 0b34 DD24      		clr r13
 1497 0b36 ED81      		ldd r30,Y+5
 1498 0b38 FE81      		ldd r31,Y+6
 1499 0b3a E684      		ldd r14,Z+14
 1500 0b3c F784      		ldd r15,Z+15
 1501 0b3e 00E0      		ldi r16,lo8(0)
 1502 0b40 10E0      		ldi r17,hi8(0)
 1503 0b42 848D      		ldd r24,Z+28
 1504 0b44 958D      		ldd r25,Z+29
 1505 0b46 A68D      		ldd r26,Z+30
 1506 0b48 B78D      		ldd r27,Z+31
 1507 0b4a 8E0D      		add r24,r14
 1508 0b4c 9F1D      		adc r25,r15
 1509 0b4e A01F      		adc r26,r16
 1510 0b50 B11F      		adc r27,r17
 1511 0b52 F201      		movw r30,r4
 1512 0b54 828B      		std Z+18,r24
 1513 0b56 938B      		std Z+19,r25
 1514 0b58 A48B      		std Z+20,r26
 1515 0b5a B58B      		std Z+21,r27
 1516 0b5c 6980      		ldd r6,Y+1
 1517 0b5e 7A80      		ldd r7,Y+2
 1518 0b60 8B80      		ldd r8,Y+3
 1519 0b62 9C80      		ldd r9,Y+4
 1520 0b64 680E      		add r6,r24
 1521 0b66 791E      		adc r7,r25
 1522 0b68 8A1E      		adc r8,r26
 1523 0b6a 9B1E      		adc r9,r27
 1524 0b6c D201      		movw r26,r4
 1525 0b6e 5696      		adiw r26,22
 1526 0b70 6D92      		st X+,r6
 1527 0b72 7D92      		st X+,r7
 1528 0b74 8D92      		st X+,r8
 1529 0b76 9C92      		st X,r9
 1530 0b78 5997      		sbiw r26,22+3
 1531 0b7a ED81      		ldd r30,Y+5
 1532 0b7c FE81      		ldd r31,Y+6
 1533 0b7e 848D      		ldd r24,Z+28
 1534 0b80 958D      		ldd r25,Z+29
 1535 0b82 A68D      		ldd r26,Z+30
 1536 0b84 B78D      		ldd r27,Z+31
 1537 0b86 E80E      		add r14,r24
 1538 0b88 F91E      		adc r15,r25
 1539 0b8a 0A1F      		adc r16,r26
GAS LISTING C:\Temp/ccxbxlG2.s 			page 28


 1540 0b8c 1B1F      		adc r17,r27
 1541 0b8e EA0C      		add r14,r10
 1542 0b90 FB1C      		adc r15,r11
 1543 0b92 0C1D      		adc r16,r12
 1544 0b94 1D1D      		adc r17,r13
 1545 0b96 2089      		ldd r18,Z+16
 1546 0b98 30E0      		ldi r19,lo8(0)
 1547 0b9a 40E0      		ldi r20,lo8(0)
 1548 0b9c 50E0      		ldi r21,hi8(0)
 1549 0b9e 6981      		ldd r22,Y+1
 1550 0ba0 7A81      		ldd r23,Y+2
 1551 0ba2 8B81      		ldd r24,Y+3
 1552 0ba4 9C81      		ldd r25,Y+4
 1553 0ba6 0E94 0000 		call __mulsi3
 1554 0baa E60E      		add r14,r22
 1555 0bac F71E      		adc r15,r23
 1556 0bae 081F      		adc r16,r24
 1557 0bb0 191F      		adc r17,r25
 1558 0bb2 D201      		movw r26,r4
 1559 0bb4 5A96      		adiw r26,26
 1560 0bb6 ED92      		st X+,r14
 1561 0bb8 FD92      		st X+,r15
 1562 0bba 0D93      		st X+,r16
 1563 0bbc 1C93      		st X,r17
 1564 0bbe 5D97      		sbiw r26,26+3
 1565 0bc0 ED81      		ldd r30,Y+5
 1566 0bc2 FE81      		ldd r31,Y+6
 1567 0bc4 8585      		ldd r24,Z+13
 1568 0bc6 90E0      		ldi r25,lo8(0)
 1569 0bc8 1496      		adiw r26,4
 1570 0bca 2D91      		ld r18,X+
 1571 0bcc 3C91      		ld r19,X
 1572 0bce 1597      		sbiw r26,4+1
 1573 0bd0 AC01      		movw r20,r24
 1574 0bd2 429F      		mul r20,r18
 1575 0bd4 C001      		movw r24,r0
 1576 0bd6 439F      		mul r20,r19
 1577 0bd8 900D      		add r25,r0
 1578 0bda 529F      		mul r21,r18
 1579 0bdc 900D      		add r25,r0
 1580 0bde 1124      		clr r1
 1581 0be0 A0E0      		ldi r26,lo8(0)
 1582 0be2 B0E0      		ldi r27,hi8(0)
 1583 0be4 F201      		movw r30,r4
 1584 0be6 868F      		std Z+30,r24
 1585 0be8 978F      		std Z+31,r25
 1586 0bea A0A3      		std Z+32,r26
 1587 0bec B1A3      		std Z+33,r27
 1588 0bee D201      		movw r26,r4
 1589 0bf0 1696      		adiw r26,6
 1590 0bf2 AD92      		st X+,r10
 1591 0bf4 BD92      		st X+,r11
 1592 0bf6 CD92      		st X+,r12
 1593 0bf8 DC92      		st X,r13
 1594 0bfa 1997      		sbiw r26,6+3
 1595 0bfc 2981      		ldd r18,Y+1
 1596 0bfe 3A81      		ldd r19,Y+2
GAS LISTING C:\Temp/ccxbxlG2.s 			page 29


 1597 0c00 4B81      		ldd r20,Y+3
 1598 0c02 5C81      		ldd r21,Y+4
 1599 0c04 260D      		add r18,r6
 1600 0c06 371D      		adc r19,r7
 1601 0c08 481D      		adc r20,r8
 1602 0c0a 591D      		adc r21,r9
 1603 0c0c 1A96      		adiw r26,10
 1604 0c0e 2D93      		st X+,r18
 1605 0c10 3D93      		st X+,r19
 1606 0c12 4D93      		st X+,r20
 1607 0c14 5C93      		st X,r21
 1608 0c16 1D97      		sbiw r26,10+3
 1609               	.L104:
 1610 0c18 6624      		clr r6
 1611 0c1a 7724      		clr r7
 1612 0c1c 00C0      		rjmp .L87
 1613               	.L86:
 1614 0c1e 60E1      		ldi r22,lo8(16)
 1615 0c20 C62E      		mov r12,r22
 1616 0c22 D12C      		mov r13,__zero_reg__
 1617 0c24 E12C      		mov r14,__zero_reg__
 1618 0c26 F12C      		mov r15,__zero_reg__
 1619 0c28 8824      		clr r8
 1620 0c2a 9924      		clr r9
 1621 0c2c 5401      		movw r10,r8
 1622               	.L97:
 1623 0c2e 6091 0000 		lds r22,pSectorBuffer
 1624 0c32 7091 0000 		lds r23,(pSectorBuffer)+1
 1625 0c36 01E0      		ldi r16,lo8(1)
 1626 0c38 10E0      		ldi r17,hi8(1)
 1627 0c3a A701      		movw r20,r14
 1628 0c3c 9601      		movw r18,r12
 1629 0c3e 832D      		mov r24,r3
 1630 0c40 0E94 0000 		call IDEReadSectors
 1631 0c44 3C01      		movw r6,r24
 1632 0c46 0097      		sbiw r24,0
 1633 0c48 01F4      		brne .L93
 1634 0c4a E091 0000 		lds r30,pSectorBuffer
 1635 0c4e F091 0000 		lds r31,(pSectorBuffer)+1
 1636 0c52 8081      		ld r24,Z
 1637 0c54 8130      		cpi r24,lo8(1)
 1638 0c56 01F4      		brne .L94
 1639 0c58 8181      		ldd r24,Z+1
 1640 0c5a 8334      		cpi r24,lo8(67)
 1641 0c5c 01F4      		brne .L95
 1642 0c5e 8281      		ldd r24,Z+2
 1643 0c60 8434      		cpi r24,lo8(68)
 1644 0c62 01F4      		brne .L95
 1645 0c64 8381      		ldd r24,Z+3
 1646 0c66 8033      		cpi r24,lo8(48)
 1647 0c68 01F4      		brne .L95
 1648 0c6a 8481      		ldd r24,Z+4
 1649 0c6c 8033      		cpi r24,lo8(48)
 1650 0c6e 01F4      		brne .L95
 1651 0c70 8581      		ldd r24,Z+5
 1652 0c72 8133      		cpi r24,lo8(49)
 1653 0c74 01F4      		brne .L95
GAS LISTING C:\Temp/ccxbxlG2.s 			page 30


 1654 0c76 00C0      		rjmp .L105
 1655               	.L94:
 1656 0c78 8F3F      		cpi r24,lo8(-1)
 1657 0c7a 01F4      		brne .L95
 1658 0c7c 8181      		ldd r24,Z+1
 1659 0c7e 8334      		cpi r24,lo8(67)
 1660 0c80 01F4      		brne .L95
 1661 0c82 8281      		ldd r24,Z+2
 1662 0c84 8434      		cpi r24,lo8(68)
 1663 0c86 01F4      		brne .L95
 1664 0c88 8381      		ldd r24,Z+3
 1665 0c8a 8033      		cpi r24,lo8(48)
 1666 0c8c 01F4      		brne .L95
 1667 0c8e 8481      		ldd r24,Z+4
 1668 0c90 8033      		cpi r24,lo8(48)
 1669 0c92 01F4      		brne .L95
 1670 0c94 8581      		ldd r24,Z+5
 1671 0c96 8133      		cpi r24,lo8(49)
 1672 0c98 01F0      		breq .L93
 1673               	.L95:
 1674 0c9a 0894      		sec
 1675 0c9c C11C      		adc r12,__zero_reg__
 1676 0c9e D11C      		adc r13,__zero_reg__
 1677 0ca0 E11C      		adc r14,__zero_reg__
 1678 0ca2 F11C      		adc r15,__zero_reg__
 1679 0ca4 B5E6      		ldi r27,lo8(101)
 1680 0ca6 CB16      		cp r12,r27
 1681 0ca8 D104      		cpc r13,__zero_reg__
 1682 0caa E104      		cpc r14,__zero_reg__
 1683 0cac F104      		cpc r15,__zero_reg__
 1684 0cae 01F0      		breq .+2
 1685 0cb0 00C0      		rjmp .L97
 1686               	.L93:
 1687 0cb2 8114      		cp r8,__zero_reg__
 1688 0cb4 9104      		cpc r9,__zero_reg__
 1689 0cb6 A104      		cpc r10,__zero_reg__
 1690 0cb8 B104      		cpc r11,__zero_reg__
 1691 0cba 01F4      		brne .+2
 1692 0cbc 00C0      		rjmp .L87
 1693 0cbe 6091 0000 		lds r22,pSectorBuffer
 1694 0cc2 7091 0000 		lds r23,(pSectorBuffer)+1
 1695 0cc6 01E0      		ldi r16,lo8(1)
 1696 0cc8 10E0      		ldi r17,hi8(1)
 1697 0cca A501      		movw r20,r10
 1698 0ccc 9401      		movw r18,r8
 1699 0cce 832D      		mov r24,r3
 1700 0cd0 0E94 0000 		call IDEReadSectors
 1701 0cd4 E091 0000 		lds r30,pSectorBuffer
 1702 0cd8 F091 0000 		lds r31,(pSectorBuffer)+1
 1703 0cdc D201      		movw r26,r4
 1704 0cde 1296      		adiw r26,2
 1705 0ce0 2C92      		st X,r2
 1706 0ce2 1297      		sbiw r26,2
 1707 0ce4 E256      		subi r30,lo8(-(158))
 1708 0ce6 FF4F      		sbci r31,hi8(-(158))
 1709 0ce8 E080      		ld r14,Z
 1710 0cea F180      		ldd r15,Z+1
GAS LISTING C:\Temp/ccxbxlG2.s 			page 31


 1711 0cec 0281      		ldd r16,Z+2
 1712 0cee 1381      		ldd r17,Z+3
 1713 0cf0 1A96      		adiw r26,10
 1714 0cf2 ED92      		st X+,r14
 1715 0cf4 FD92      		st X+,r15
 1716 0cf6 0D93      		st X+,r16
 1717 0cf8 1C93      		st X,r17
 1718 0cfa 1D97      		sbiw r26,10+3
 1719 0cfc 7297      		sbiw r30,18
 1720 0cfe 2191      		ld r18,Z+
 1721 0d00 3191      		ld r19,Z+
 1722 0d02 4191      		ld r20,Z+
 1723 0d04 5191      		ld r21,Z+
 1724 0d06 5296      		adiw r26,18
 1725 0d08 2D93      		st X+,r18
 1726 0d0a 3D93      		st X+,r19
 1727 0d0c 4D93      		st X+,r20
 1728 0d0e 5C93      		st X,r21
 1729 0d10 5597      		sbiw r26,18+3
 1730 0d12 8081      		ld r24,Z
 1731 0d14 9181      		ldd r25,Z+1
 1732 0d16 A281      		ldd r26,Z+2
 1733 0d18 B381      		ldd r27,Z+3
 1734 0d1a F201      		movw r30,r4
 1735 0d1c 868B      		std Z+22,r24
 1736 0d1e 978B      		std Z+23,r25
 1737 0d20 A08F      		std Z+24,r26
 1738 0d22 B18F      		std Z+25,r27
 1739 0d24 2E19      		sub r18,r14
 1740 0d26 3F09      		sbc r19,r15
 1741 0d28 400B      		sbc r20,r16
 1742 0d2a 510B      		sbc r21,r17
 1743 0d2c D201      		movw r26,r4
 1744 0d2e 1696      		adiw r26,6
 1745 0d30 2D93      		st X+,r18
 1746 0d32 3D93      		st X+,r19
 1747 0d34 4D93      		st X+,r20
 1748 0d36 5C93      		st X,r21
 1749 0d38 1997      		sbiw r26,6+3
 1750 0d3a E686      		std Z+14,r14
 1751 0d3c F786      		std Z+15,r15
 1752 0d3e 008B      		std Z+16,r16
 1753 0d40 118B      		std Z+17,r17
 1754 0d42 8481      		ldd r24,Z+4
 1755 0d44 9581      		ldd r25,Z+5
 1756 0d46 A0E0      		ldi r26,lo8(0)
 1757 0d48 B0E0      		ldi r27,hi8(0)
 1758 0d4a 868F      		std Z+30,r24
 1759 0d4c 978F      		std Z+31,r25
 1760 0d4e A0A3      		std Z+32,r26
 1761 0d50 B1A3      		std Z+33,r27
 1762               	.L87:
 1763 0d52 3394      		inc r3
 1764 0d54 22E2      		ldi r18,lo8(34)
 1765 0d56 30E0      		ldi r19,hi8(34)
 1766 0d58 420E      		add r4,r18
 1767 0d5a 531E      		adc r5,r19
GAS LISTING C:\Temp/ccxbxlG2.s 			page 32


 1768 0d5c 32E0      		ldi r19,lo8(2)
 1769 0d5e 3316      		cp r3,r19
 1770 0d60 01F0      		breq .+2
 1771 0d62 00C0      		rjmp .L98
 1772 0d64 00C0      		rjmp .L99
 1773               	.L81:
 1774 0d66 6624      		clr r6
 1775 0d68 7724      		clr r7
 1776               	.L99:
 1777 0d6a 80E0      		ldi r24,lo8(hFATSemaphore)
 1778 0d6c 90E0      		ldi r25,hi8(hFATSemaphore)
 1779 0d6e 0E94 0000 		call NutEventPost
 1780 0d72 C301      		movw r24,r6
 1781               	/* epilogue start */
 1782 0d74 2696      		adiw r28,6
 1783 0d76 0FB6      		in __tmp_reg__,__SREG__
 1784 0d78 F894      		cli
 1785 0d7a DEBF      		out __SP_H__,r29
 1786 0d7c 0FBE      		out __SREG__,__tmp_reg__
 1787 0d7e CDBF      		out __SP_L__,r28
 1788 0d80 CF91      		pop r28
 1789 0d82 DF91      		pop r29
 1790 0d84 1F91      		pop r17
 1791 0d86 0F91      		pop r16
 1792 0d88 FF90      		pop r15
 1793 0d8a EF90      		pop r14
 1794 0d8c DF90      		pop r13
 1795 0d8e CF90      		pop r12
 1796 0d90 BF90      		pop r11
 1797 0d92 AF90      		pop r10
 1798 0d94 9F90      		pop r9
 1799 0d96 8F90      		pop r8
 1800 0d98 7F90      		pop r7
 1801 0d9a 6F90      		pop r6
 1802 0d9c 5F90      		pop r5
 1803 0d9e 4F90      		pop r4
 1804 0da0 3F90      		pop r3
 1805 0da2 2F90      		pop r2
 1806 0da4 0895      		ret
 1807               	.L105:
 1808 0da6 4601      		movw r8,r12
 1809 0da8 5701      		movw r10,r14
 1810 0daa 00C0      		rjmp .L95
 1811               		.size	FATMountDrive, .-FATMountDrive
 1812               		.type	FATInit, @function
 1813               	FATInit:
 1814 0dac 0F93      		push r16
 1815 0dae 1F93      		push r17
 1816 0db0 CF93      		push r28
 1817 0db2 DF93      		push r29
 1818               	/* prologue: function */
 1819               	/* frame size = 0 */
 1820 0db4 FC01      		movw r30,r24
 1821 0db6 8091 0000 		lds r24,gnIsInit
 1822 0dba 9091 0000 		lds r25,(gnIsInit)+1
 1823 0dbe 892B      		or r24,r25
 1824 0dc0 01F0      		breq .+2
GAS LISTING C:\Temp/ccxbxlG2.s 			page 33


 1825 0dc2 00C0      		rjmp .L107
 1826 0dc4 81E0      		ldi r24,lo8(1)
 1827 0dc6 90E0      		ldi r25,hi8(1)
 1828 0dc8 9093 0000 		sts (gnIsInit)+1,r25
 1829 0dcc 8093 0000 		sts gnIsInit,r24
 1830 0dd0 8485      		ldd r24,Z+12
 1831 0dd2 9585      		ldd r25,Z+13
 1832 0dd4 8230      		cpi r24,2
 1833 0dd6 9105      		cpc r25,__zero_reg__
 1834 0dd8 01F0      		breq .L110
 1835 0dda 8330      		cpi r24,3
 1836 0ddc 9105      		cpc r25,__zero_reg__
 1837 0dde 00F4      		brsh .L113
 1838 0de0 0197      		sbiw r24,1
 1839 0de2 01F4      		brne .L108
 1840 0de4 00C0      		rjmp .L117
 1841               	.L113:
 1842 0de6 8330      		cpi r24,3
 1843 0de8 9105      		cpc r25,__zero_reg__
 1844 0dea 01F0      		breq .L111
 1845 0dec 0497      		sbiw r24,4
 1846 0dee 01F0      		breq .L112
 1847               	.L108:
 1848 0df0 2FEF      		ldi r18,lo8(-1)
 1849 0df2 3FEF      		ldi r19,hi8(-1)
 1850 0df4 00C0      		rjmp .L114
 1851               	.L110:
 1852 0df6 01E0      		ldi r16,lo8(1)
 1853 0df8 10E0      		ldi r17,hi8(1)
 1854 0dfa 00C0      		rjmp .L115
 1855               	.L117:
 1856 0dfc 00E0      		ldi r16,lo8(0)
 1857 0dfe 10E0      		ldi r17,hi8(0)
 1858 0e00 00C0      		rjmp .L115
 1859               	.L111:
 1860 0e02 02E0      		ldi r16,lo8(2)
 1861 0e04 10E0      		ldi r17,hi8(2)
 1862 0e06 00C0      		rjmp .L115
 1863               	.L112:
 1864 0e08 03E0      		ldi r16,lo8(3)
 1865 0e0a 10E0      		ldi r17,hi8(3)
 1866               	.L115:
 1867 0e0c 80E0      		ldi r24,lo8(hFATSemaphore)
 1868 0e0e 90E0      		ldi r25,hi8(hFATSemaphore)
 1869 0e10 0E94 0000 		call NutEventPost
 1870 0e14 60E0      		ldi r22,lo8(2048)
 1871 0e16 78E0      		ldi r23,hi8(2048)
 1872 0e18 80E0      		ldi r24,lo8(heapFreeList)
 1873 0e1a 90E0      		ldi r25,hi8(heapFreeList)
 1874 0e1c 0E94 0000 		call NutHeapRootAlloc
 1875 0e20 EC01      		movw r28,r24
 1876 0e22 0097      		sbiw r24,0
 1877 0e24 01F0      		breq .L107
 1878 0e26 20E0      		ldi r18,lo8(gs(CFUnMount))
 1879 0e28 30E0      		ldi r19,hi8(gs(CFUnMount))
 1880 0e2a 40E0      		ldi r20,lo8(gs(CFMount))
 1881 0e2c 50E0      		ldi r21,hi8(gs(CFMount))
GAS LISTING C:\Temp/ccxbxlG2.s 			page 34


 1882 0e2e B801      		movw r22,r16
 1883 0e30 80E0      		ldi r24,lo8(0)
 1884 0e32 90E0      		ldi r25,hi8(0)
 1885 0e34 0E94 0000 		call IDEInit
 1886 0e38 BE01      		movw r22,r28
 1887 0e3a 80E0      		ldi r24,lo8(0)
 1888 0e3c 0E94 0000 		call IDEMountDevice
 1889 0e40 80E0      		ldi r24,lo8(0)
 1890 0e42 90E0      		ldi r25,hi8(0)
 1891 0e44 0E94 0000 		call FATMountDrive
 1892 0e48 BE01      		movw r22,r28
 1893 0e4a 80E0      		ldi r24,lo8(heapFreeList)
 1894 0e4c 90E0      		ldi r25,hi8(heapFreeList)
 1895 0e4e 0E94 0000 		call NutHeapRootFree
 1896               	.L107:
 1897 0e52 20E0      		ldi r18,lo8(0)
 1898 0e54 30E0      		ldi r19,hi8(0)
 1899               	.L114:
 1900 0e56 C901      		movw r24,r18
 1901               	/* epilogue start */
 1902 0e58 DF91      		pop r29
 1903 0e5a CF91      		pop r28
 1904 0e5c 1F91      		pop r17
 1905 0e5e 0F91      		pop r16
 1906 0e60 0895      		ret
 1907               		.size	FATInit, .-FATInit
 1908               		.type	CFMount, @function
 1909               	CFMount:
 1910 0e62 0F93      		push r16
 1911 0e64 1F93      		push r17
 1912 0e66 CF93      		push r28
 1913 0e68 DF93      		push r29
 1914               	/* prologue: function */
 1915               	/* frame size = 0 */
 1916 0e6a 8C01      		movw r16,r24
 1917 0e6c 60E0      		ldi r22,lo8(2048)
 1918 0e6e 78E0      		ldi r23,hi8(2048)
 1919 0e70 80E0      		ldi r24,lo8(heapFreeList)
 1920 0e72 90E0      		ldi r25,hi8(heapFreeList)
 1921 0e74 0E94 0000 		call NutHeapRootAlloc
 1922 0e78 EC01      		movw r28,r24
 1923 0e7a 0097      		sbiw r24,0
 1924 0e7c 01F0      		breq .L120
 1925 0e7e C801      		movw r24,r16
 1926 0e80 0E94 0000 		call FATMountDrive
 1927 0e84 BE01      		movw r22,r28
 1928 0e86 80E0      		ldi r24,lo8(heapFreeList)
 1929 0e88 90E0      		ldi r25,hi8(heapFreeList)
 1930 0e8a 0E94 0000 		call NutHeapRootFree
 1931               	.L120:
 1932               	/* epilogue start */
 1933 0e8e DF91      		pop r29
 1934 0e90 CF91      		pop r28
 1935 0e92 1F91      		pop r17
 1936 0e94 0F91      		pop r16
 1937 0e96 0895      		ret
 1938               		.size	CFMount, .-CFMount
GAS LISTING C:\Temp/ccxbxlG2.s 			page 35


 1939               		.type	FATFileOpen, @function
 1940               	FATFileOpen:
 1941 0e98 2F92      		push r2
 1942 0e9a 3F92      		push r3
 1943 0e9c 4F92      		push r4
 1944 0e9e 5F92      		push r5
 1945 0ea0 6F92      		push r6
 1946 0ea2 7F92      		push r7
 1947 0ea4 8F92      		push r8
 1948 0ea6 9F92      		push r9
 1949 0ea8 AF92      		push r10
 1950 0eaa BF92      		push r11
 1951 0eac CF92      		push r12
 1952 0eae DF92      		push r13
 1953 0eb0 EF92      		push r14
 1954 0eb2 FF92      		push r15
 1955 0eb4 0F93      		push r16
 1956 0eb6 1F93      		push r17
 1957 0eb8 DF93      		push r29
 1958 0eba CF93      		push r28
 1959 0ebc CDB7      		in r28,__SP_L__
 1960 0ebe DEB7      		in r29,__SP_H__
 1961 0ec0 AA97      		sbiw r28,42
 1962 0ec2 0FB6      		in __tmp_reg__,__SREG__
 1963 0ec4 F894      		cli
 1964 0ec6 DEBF      		out __SP_H__,r29
 1965 0ec8 0FBE      		out __SREG__,__tmp_reg__
 1966 0eca CDBF      		out __SP_L__,r28
 1967               	/* prologue: function */
 1968               	/* frame size = 42 */
 1969 0ecc 98A7      		std Y+40,r25
 1970 0ece 8FA3      		std Y+39,r24
 1971 0ed0 2B01      		movw r4,r22
 1972 0ed2 8091 0000 		lds r24,gnIsInit
 1973 0ed6 9091 0000 		lds r25,(gnIsInit)+1
 1974 0eda 892B      		or r24,r25
 1975 0edc 01F4      		brne .L122
 1976 0ede 8FA1      		ldd r24,Y+39
 1977 0ee0 98A5      		ldd r25,Y+40
 1978 0ee2 0E94 0000 		call FATInit
 1979               	.L122:
 1980 0ee6 40E0      		ldi r20,lo8(0)
 1981 0ee8 50E0      		ldi r21,hi8(0)
 1982 0eea 60E0      		ldi r22,hlo8(0)
 1983 0eec 70E0      		ldi r23,hhi8(0)
 1984 0eee 80E0      		ldi r24,lo8(hFATSemaphore)
 1985 0ef0 90E0      		ldi r25,hi8(hFATSemaphore)
 1986 0ef2 0E94 0000 		call NutEventWait
 1987 0ef6 8091 0000 		lds r24,pLongName1
 1988 0efa 9091 0000 		lds r25,(pLongName1)+1
 1989 0efe 9EA3      		std Y+38,r25
 1990 0f00 8DA3      		std Y+37,r24
 1991 0f02 AFA1      		ldd r26,Y+39
 1992 0f04 B8A5      		ldd r27,Y+40
 1993 0f06 1097      		sbiw r26,0
 1994 0f08 01F4      		brne .+2
 1995 0f0a 00C0      		rjmp .L123
GAS LISTING C:\Temp/ccxbxlG2.s 			page 36


 1996 0f0c 1696      		adiw r26,6
 1997 0f0e 8C91      		ld r24,X
 1998 0f10 8334      		cpi r24,lo8(67)
 1999 0f12 01F4      		brne .+2
 2000 0f14 00C0      		rjmp .L124
 2001 0f16 8434      		cpi r24,lo8(68)
 2002 0f18 01F0      		breq .+2
 2003 0f1a 00C0      		rjmp .L123
 2004 0f1c 10E0      		ldi r17,lo8(sDriveInfo+34)
 2005 0f1e 212E      		mov r2,r17
 2006 0f20 10E0      		ldi r17,hi8(sDriveInfo+34)
 2007 0f22 312E      		mov r3,r17
 2008 0f24 00C0      		rjmp .L126
 2009               	.L154:
 2010 0f26 F201      		movw r30,r4
 2011 0f28 8081      		ld r24,Z
 2012 0f2a 8823      		tst r24
 2013 0f2c 01F4      		brne .+2
 2014 0f2e 00C0      		rjmp .L123
 2015 0f30 6AE1      		ldi r22,lo8(26)
 2016 0f32 70E0      		ldi r23,hi8(26)
 2017 0f34 80E0      		ldi r24,lo8(heapFreeList)
 2018 0f36 90E0      		ldi r25,hi8(heapFreeList)
 2019 0f38 0E94 0000 		call NutHeapRootAlloc
 2020 0f3c 5C01      		movw r10,r24
 2021 0f3e F101      		movw r30,r2
 2022 0f40 8289      		ldd r24,Z+18
 2023 0f42 9389      		ldd r25,Z+19
 2024 0f44 A489      		ldd r26,Z+20
 2025 0f46 B589      		ldd r27,Z+21
 2026 0f48 0097      		sbiw r24,0
 2027 0f4a A105      		cpc r26,__zero_reg__
 2028 0f4c B105      		cpc r27,__zero_reg__
 2029 0f4e 01F4      		brne .+2
 2030 0f50 00C0      		rjmp .L127
 2031 0f52 A114      		cp r10,__zero_reg__
 2032 0f54 B104      		cpc r11,__zero_reg__
 2033 0f56 01F4      		brne .+2
 2034 0f58 00C0      		rjmp .L123
 2035 0f5a D201      		movw r26,r4
 2036 0f5c 8C91      		ld r24,X
 2037 0f5e 8E32      		cpi r24,lo8(46)
 2038 0f60 01F4      		brne .+2
 2039 0f62 00C0      		rjmp .L128
 2040 0f64 8AE1      		ldi r24,lo8(26)
 2041 0f66 F501      		movw r30,r10
 2042 0f68 1192      		st Z+,__zero_reg__
 2043 0f6a 8A95      	        dec r24
 2044 0f6c 01F4      		brne .-6
 2045 0f6e D101      		movw r26,r2
 2046 0f70 1E96      		adiw r26,14
 2047 0f72 6D90      		ld r6,X+
 2048 0f74 7D90      		ld r7,X+
 2049 0f76 8D90      		ld r8,X+
 2050 0f78 9C90      		ld r9,X
 2051 0f7a 5197      		sbiw r26,14+3
 2052 0f7c F201      		movw r30,r4
GAS LISTING C:\Temp/ccxbxlG2.s 			page 37


 2053 0f7e 8081      		ld r24,Z
 2054 0f80 8F32      		cpi r24,lo8(47)
 2055 0f82 01F0      		breq .+2
 2056 0f84 00C0      		rjmp .L129
 2057 0f86 0894      		sec
 2058 0f88 411C      		adc r4,__zero_reg__
 2059 0f8a 511C      		adc r5,__zero_reg__
 2060 0f8c 00C0      		rjmp .L129
 2061               	.L132:
 2062 0f8e FFE3      		ldi r31,lo8(63)
 2063 0f90 EF16      		cp r14,r31
 2064 0f92 F104      		cpc r15,__zero_reg__
 2065 0f94 01F4      		brne .+2
 2066 0f96 00C0      		rjmp .L130
 2067 0f98 9927      		clr r25
 2068 0f9a 87FD      		sbrc r24,7
 2069 0f9c 9095      		com r25
 2070 0f9e 0E94 0000 		call toupper
 2071 0fa2 EDA1      		ldd r30,Y+37
 2072 0fa4 FEA1      		ldd r31,Y+38
 2073 0fa6 EE0D      		add r30,r14
 2074 0fa8 FF1D      		adc r31,r15
 2075 0faa 8083      		st Z,r24
 2076 0fac 0894      		sec
 2077 0fae E11C      		adc r14,__zero_reg__
 2078 0fb0 F11C      		adc r15,__zero_reg__
 2079 0fb2 0894      		sec
 2080 0fb4 411C      		adc r4,__zero_reg__
 2081 0fb6 511C      		adc r5,__zero_reg__
 2082               	.L150:
 2083 0fb8 D201      		movw r26,r4
 2084 0fba 8C91      		ld r24,X
 2085 0fbc 8F32      		cpi r24,lo8(47)
 2086 0fbe 01F4      		brne .+2
 2087 0fc0 00C0      		rjmp .L131
 2088 0fc2 8C35      		cpi r24,lo8(92)
 2089 0fc4 01F4      		brne .+2
 2090 0fc6 00C0      		rjmp .L131
 2091 0fc8 8823      		tst r24
 2092 0fca 01F4      		brne .L132
 2093 0fcc 00C0      		rjmp .L131
 2094               	.L161:
 2095 0fce 6EE2      		ldi r22,lo8(46)
 2096 0fd0 70E0      		ldi r23,hi8(46)
 2097 0fd2 8DA1      		ldd r24,Y+37
 2098 0fd4 9EA1      		ldd r25,Y+38
 2099 0fd6 0E94 0000 		call strchr
 2100 0fda DC01      		movw r26,r24
 2101 0fdc 0097      		sbiw r24,0
 2102 0fde 01F4      		brne .L133
 2103 0fe0 B9E0      		ldi r27,lo8(9)
 2104 0fe2 EB16      		cp r14,r27
 2105 0fe4 F104      		cpc r15,__zero_reg__
 2106 0fe6 00F0      		brlo .+2
 2107 0fe8 00C0      		rjmp .L134
 2108 0fea 00C0      		rjmp .L135
 2109               	.L133:
GAS LISTING C:\Temp/ccxbxlG2.s 			page 38


 2110 0fec 1196      		adiw r26,1
 2111 0fee FD01      		movw r30,r26
 2112 0ff0 0190      		ld __tmp_reg__,Z+
 2113 0ff2 0020      		tst __tmp_reg__
 2114 0ff4 01F4      		brne .-6
 2115 0ff6 3197      		sbiw r30,1
 2116 0ff8 EA1B      		sub r30,r26
 2117 0ffa FB0B      		sbc r31,r27
 2118 0ffc 3497      		sbiw r30,4
 2119 0ffe 00F4      		brsh .L134
 2120               	.L135:
 2121 1000 E9A5      		ldd r30,Y+41
 2122 1002 FAA5      		ldd r31,Y+42
 2123 1004 80E2      		ldi r24,lo8(32)
 2124 1006 1192      		st Z+,__zero_reg__
 2125 1008 8A95      	        dec r24
 2126 100a 01F4      		brne .-6
 2127 100c 48E0      		ldi r20,lo8(8)
 2128 100e 50E0      		ldi r21,hi8(8)
 2129 1010 60E2      		ldi r22,lo8(32)
 2130 1012 70E0      		ldi r23,hi8(32)
 2131 1014 CE01      		movw r24,r28
 2132 1016 0596      		adiw r24,5
 2133 1018 0E94 0000 		call memset
 2134 101c 43E0      		ldi r20,lo8(3)
 2135 101e 50E0      		ldi r21,hi8(3)
 2136 1020 60E2      		ldi r22,lo8(32)
 2137 1022 70E0      		ldi r23,hi8(32)
 2138 1024 CE01      		movw r24,r28
 2139 1026 0D96      		adiw r24,13
 2140 1028 0E94 0000 		call memset
 2141 102c 80E0      		ldi r24,lo8(0)
 2142 102e 90E0      		ldi r25,hi8(0)
 2143 1030 00C0      		rjmp .L136
 2144               	.L138:
 2145 1032 E5E0      		ldi r30,lo8(5)
 2146 1034 F0E0      		ldi r31,hi8(5)
 2147 1036 EC0F      		add r30,r28
 2148 1038 FD1F      		adc r31,r29
 2149 103a E80F      		add r30,r24
 2150 103c F91F      		adc r31,r25
 2151 103e 2083      		st Z,r18
 2152 1040 0196      		adiw r24,1
 2153               	.L136:
 2154 1042 EDA1      		ldd r30,Y+37
 2155 1044 FEA1      		ldd r31,Y+38
 2156 1046 E80F      		add r30,r24
 2157 1048 F91F      		adc r31,r25
 2158 104a 2081      		ld r18,Z
 2159 104c 2E32      		cpi r18,lo8(46)
 2160 104e 01F0      		breq .L137
 2161 1050 2223      		tst r18
 2162 1052 01F4      		brne .L138
 2163 1054 00C0      		rjmp .L139
 2164               	.L137:
 2165 1056 DE01      		movw r26,r28
 2166 1058 1D96      		adiw r26,13
GAS LISTING C:\Temp/ccxbxlG2.s 			page 39


 2167 105a 00C0      		rjmp .L140
 2168               	.L141:
 2169 105c 8D93      		st X+,r24
 2170               	.L140:
 2171 105e 8181      		ldd r24,Z+1
 2172 1060 3196      		adiw r30,1
 2173 1062 8823      		tst r24
 2174 1064 01F4      		brne .L141
 2175 1066 00C0      		rjmp .L139
 2176               	.L134:
 2177 1068 21E0      		ldi r18,lo8(1)
 2178 106a 30E0      		ldi r19,hi8(1)
 2179 106c 00C0      		rjmp .L142
 2180               	.L139:
 2181 106e 20E0      		ldi r18,lo8(0)
 2182 1070 30E0      		ldi r19,hi8(0)
 2183               	.L142:
 2184 1072 D201      		movw r26,r4
 2185 1074 8C91      		ld r24,X
 2186 1076 8F32      		cpi r24,lo8(47)
 2187 1078 01F4      		brne .+2
 2188 107a 00C0      		rjmp .L144
 2189 107c 8C35      		cpi r24,lo8(92)
 2190 107e 01F4      		brne .+2
 2191 1080 00C0      		rjmp .L144
 2192 1082 8823      		tst r24
 2193 1084 01F0      		breq .+2
 2194 1086 00C0      		rjmp .L128
 2195 1088 80E2      		ldi r24,lo8(32)
 2196 108a 888B      		std Y+16,r24
 2197 108c F101      		movw r30,r2
 2198 108e 8381      		ldd r24,Z+3
 2199 1090 BE01      		movw r22,r28
 2200 1092 6B5F      		subi r22,lo8(-(5))
 2201 1094 7F4F      		sbci r23,hi8(-(5))
 2202 1096 7E01      		movw r14,r28
 2203 1098 0894      		sec
 2204 109a E11C      		adc r14,__zero_reg__
 2205 109c F11C      		adc r15,__zero_reg__
 2206 109e 80FF      		sbrs r24,0
 2207 10a0 00C0      		rjmp .L145
 2208 10a2 6901      		movw r12,r18
 2209 10a4 9401      		movw r18,r8
 2210 10a6 8301      		movw r16,r6
 2211 10a8 4DA1      		ldd r20,Y+37
 2212 10aa 5EA1      		ldd r21,Y+38
 2213 10ac C101      		movw r24,r2
 2214 10ae 0E94 0000 		call FindFileATAPI
 2215 10b2 00C0      		rjmp .L159
 2216               	.L145:
 2217 10b4 6901      		movw r12,r18
 2218 10b6 9401      		movw r18,r8
 2219 10b8 8301      		movw r16,r6
 2220 10ba 4DA1      		ldd r20,Y+37
 2221 10bc 5EA1      		ldd r21,Y+38
 2222 10be C101      		movw r24,r2
 2223 10c0 0E94 0000 		call FindFile
GAS LISTING C:\Temp/ccxbxlG2.s 			page 40


 2224               	.L159:
 2225 10c4 9B01      		movw r18,r22
 2226 10c6 AC01      		movw r20,r24
 2227 10c8 6115      		cp r22,__zero_reg__
 2228 10ca 7105      		cpc r23,__zero_reg__
 2229 10cc 8105      		cpc r24,__zero_reg__
 2230 10ce 9105      		cpc r25,__zero_reg__
 2231 10d0 01F4      		brne .+2
 2232 10d2 00C0      		rjmp .L130
 2233 10d4 8981      		ldd r24,Y+1
 2234 10d6 9A81      		ldd r25,Y+2
 2235 10d8 AB81      		ldd r26,Y+3
 2236 10da BC81      		ldd r27,Y+4
 2237 10dc F501      		movw r30,r10
 2238 10de 8083      		st Z,r24
 2239 10e0 9183      		std Z+1,r25
 2240 10e2 A283      		std Z+2,r26
 2241 10e4 B383      		std Z+3,r27
 2242 10e6 D501      		movw r26,r10
 2243 10e8 1496      		adiw r26,4
 2244 10ea 2D93      		st X+,r18
 2245 10ec 3D93      		st X+,r19
 2246 10ee 4D93      		st X+,r20
 2247 10f0 5C93      		st X,r21
 2248 10f2 1797      		sbiw r26,4+3
 2249 10f4 2087      		std Z+8,r18
 2250 10f6 3187      		std Z+9,r19
 2251 10f8 4287      		std Z+10,r20
 2252 10fa 5387      		std Z+11,r21
 2253 10fc 1C96      		adiw r26,12
 2254 10fe 1D92      		st X+,__zero_reg__
 2255 1100 1D92      		st X+,__zero_reg__
 2256 1102 1D92      		st X+,__zero_reg__
 2257 1104 1C92      		st X,__zero_reg__
 2258 1106 1F97      		sbiw r26,12+3
 2259 1108 108A      		std Z+16,__zero_reg__
 2260 110a 118A      		std Z+17,__zero_reg__
 2261 110c 128A      		std Z+18,__zero_reg__
 2262 110e 138A      		std Z+19,__zero_reg__
 2263 1110 318E      		std Z+25,r3
 2264 1112 208E      		std Z+24,r2
 2265 1114 158A      		std Z+21,__zero_reg__
 2266 1116 148A      		std Z+20,__zero_reg__
 2267 1118 178A      		std Z+23,__zero_reg__
 2268 111a 168A      		std Z+22,__zero_reg__
 2269 111c 80E0      		ldi r24,lo8(0)
 2270 111e 90E0      		ldi r25,hi8(0)
 2271 1120 00C0      		rjmp .L147
 2272               	.L144:
 2273 1122 F0E1      		ldi r31,lo8(16)
 2274 1124 F88B      		std Y+16,r31
 2275 1126 D101      		movw r26,r2
 2276 1128 1396      		adiw r26,3
 2277 112a 8C91      		ld r24,X
 2278 112c 80FF      		sbrs r24,0
 2279 112e 00C0      		rjmp .L148
 2280 1130 6901      		movw r12,r18
GAS LISTING C:\Temp/ccxbxlG2.s 			page 41


 2281 1132 7E01      		movw r14,r28
 2282 1134 0894      		sec
 2283 1136 E11C      		adc r14,__zero_reg__
 2284 1138 F11C      		adc r15,__zero_reg__
 2285 113a 9401      		movw r18,r8
 2286 113c 8301      		movw r16,r6
 2287 113e 4DA1      		ldd r20,Y+37
 2288 1140 5EA1      		ldd r21,Y+38
 2289 1142 BE01      		movw r22,r28
 2290 1144 6B5F      		subi r22,lo8(-(5))
 2291 1146 7F4F      		sbci r23,hi8(-(5))
 2292 1148 C101      		movw r24,r2
 2293 114a 0E94 0000 		call FindFileATAPI
 2294 114e 00C0      		rjmp .L160
 2295               	.L148:
 2296 1150 6901      		movw r12,r18
 2297 1152 7E01      		movw r14,r28
 2298 1154 0894      		sec
 2299 1156 E11C      		adc r14,__zero_reg__
 2300 1158 F11C      		adc r15,__zero_reg__
 2301 115a 9401      		movw r18,r8
 2302 115c 8301      		movw r16,r6
 2303 115e 4DA1      		ldd r20,Y+37
 2304 1160 5EA1      		ldd r21,Y+38
 2305 1162 BE01      		movw r22,r28
 2306 1164 6B5F      		subi r22,lo8(-(5))
 2307 1166 7F4F      		sbci r23,hi8(-(5))
 2308 1168 C101      		movw r24,r2
 2309 116a 0E94 0000 		call FindFile
 2310               	.L160:
 2311 116e 3B01      		movw r6,r22
 2312 1170 4C01      		movw r8,r24
 2313 1172 6115      		cp r22,__zero_reg__
 2314 1174 7105      		cpc r23,__zero_reg__
 2315 1176 8105      		cpc r24,__zero_reg__
 2316 1178 9105      		cpc r25,__zero_reg__
 2317 117a 01F4      		brne .+2
 2318 117c 00C0      		rjmp .L130
 2319 117e 0894      		sec
 2320 1180 411C      		adc r4,__zero_reg__
 2321 1182 511C      		adc r5,__zero_reg__
 2322 1184 00C0      		rjmp .L157
 2323               	.L129:
 2324 1186 FE01      		movw r30,r28
 2325 1188 3596      		adiw r30,5
 2326 118a FAA7      		std Y+42,r31
 2327 118c E9A7      		std Y+41,r30
 2328               	.L157:
 2329 118e EE24      		clr r14
 2330 1190 FF24      		clr r15
 2331 1192 00C0      		rjmp .L150
 2332               	.L127:
 2333 1194 A114      		cp r10,__zero_reg__
 2334 1196 B104      		cpc r11,__zero_reg__
 2335 1198 01F0      		breq .L123
 2336               	.L128:
 2337 119a B501      		movw r22,r10
GAS LISTING C:\Temp/ccxbxlG2.s 			page 42


 2338 119c 80E0      		ldi r24,lo8(heapFreeList)
 2339 119e 90E0      		ldi r25,hi8(heapFreeList)
 2340 11a0 0E94 0000 		call NutHeapRootFree
 2341 11a4 00C0      		rjmp .L123
 2342               	.L158:
 2343 11a6 66E0      		ldi r22,lo8(6)
 2344 11a8 70E0      		ldi r23,hi8(6)
 2345 11aa 80E0      		ldi r24,lo8(heapFreeList)
 2346 11ac 90E0      		ldi r25,hi8(heapFreeList)
 2347 11ae 0E94 0000 		call NutHeapRootAlloc
 2348 11b2 FC01      		movw r30,r24
 2349 11b4 8C01      		movw r16,r24
 2350 11b6 0097      		sbiw r24,0
 2351 11b8 01F0      		breq .L152
 2352 11ba 1182      		std Z+1,__zero_reg__
 2353 11bc 1082      		st Z,__zero_reg__
 2354 11be 8FA1      		ldd r24,Y+39
 2355 11c0 98A5      		ldd r25,Y+40
 2356 11c2 9383      		std Z+3,r25
 2357 11c4 8283      		std Z+2,r24
 2358 11c6 B582      		std Z+5,r11
 2359 11c8 A482      		std Z+4,r10
 2360 11ca 00C0      		rjmp .L151
 2361               	.L152:
 2362 11cc B501      		movw r22,r10
 2363 11ce 80E0      		ldi r24,lo8(heapFreeList)
 2364 11d0 90E0      		ldi r25,hi8(heapFreeList)
 2365 11d2 0E94 0000 		call NutHeapRootFree
 2366 11d6 00C0      		rjmp .L151
 2367               	.L123:
 2368 11d8 0FEF      		ldi r16,lo8(-1)
 2369 11da 1FEF      		ldi r17,hi8(-1)
 2370               	.L151:
 2371 11dc 80E0      		ldi r24,lo8(hFATSemaphore)
 2372 11de 90E0      		ldi r25,hi8(hFATSemaphore)
 2373 11e0 0E94 0000 		call NutEventPost
 2374 11e4 C801      		movw r24,r16
 2375               	/* epilogue start */
 2376 11e6 AA96      		adiw r28,42
 2377 11e8 0FB6      		in __tmp_reg__,__SREG__
 2378 11ea F894      		cli
 2379 11ec DEBF      		out __SP_H__,r29
 2380 11ee 0FBE      		out __SREG__,__tmp_reg__
 2381 11f0 CDBF      		out __SP_L__,r28
 2382 11f2 CF91      		pop r28
 2383 11f4 DF91      		pop r29
 2384 11f6 1F91      		pop r17
 2385 11f8 0F91      		pop r16
 2386 11fa FF90      		pop r15
 2387 11fc EF90      		pop r14
 2388 11fe DF90      		pop r13
 2389 1200 CF90      		pop r12
 2390 1202 BF90      		pop r11
 2391 1204 AF90      		pop r10
 2392 1206 9F90      		pop r9
 2393 1208 8F90      		pop r8
 2394 120a 7F90      		pop r7
GAS LISTING C:\Temp/ccxbxlG2.s 			page 43


 2395 120c 6F90      		pop r6
 2396 120e 5F90      		pop r5
 2397 1210 4F90      		pop r4
 2398 1212 3F90      		pop r3
 2399 1214 2F90      		pop r2
 2400 1216 0895      		ret
 2401               	.L131:
 2402 1218 ADA1      		ldd r26,Y+37
 2403 121a BEA1      		ldd r27,Y+38
 2404 121c EA0E      		add r14,r26
 2405 121e FB1E      		adc r15,r27
 2406 1220 F701      		movw r30,r14
 2407 1222 1082      		st Z,__zero_reg__
 2408 1224 EDA1      		ldd r30,Y+37
 2409 1226 FEA1      		ldd r31,Y+38
 2410 1228 DF01      		movw r26,r30
 2411 122a 0D90      		ld __tmp_reg__,X+
 2412 122c 0020      		tst __tmp_reg__
 2413 122e 01F4      		brne .-6
 2414 1230 7D01      		movw r14,r26
 2415 1232 0894      		sec
 2416 1234 E108      		sbc r14,__zero_reg__
 2417 1236 F108      		sbc r15,__zero_reg__
 2418 1238 EE1A      		sub r14,r30
 2419 123a FF0A      		sbc r15,r31
 2420 123c BDE0      		ldi r27,lo8(13)
 2421 123e EB16      		cp r14,r27
 2422 1240 F104      		cpc r15,__zero_reg__
 2423 1242 00F0      		brlo .+2
 2424 1244 00C0      		rjmp .L134
 2425 1246 00C0      		rjmp .L161
 2426               	.L124:
 2427 1248 B0E0      		ldi r27,lo8(sDriveInfo)
 2428 124a 2B2E      		mov r2,r27
 2429 124c B0E0      		ldi r27,hi8(sDriveInfo)
 2430 124e 3B2E      		mov r3,r27
 2431               	.L126:
 2432 1250 F101      		movw r30,r2
 2433 1252 8281      		ldd r24,Z+2
 2434 1254 8823      		tst r24
 2435 1256 01F0      		breq .+2
 2436 1258 00C0      		rjmp .L154
 2437 125a 00C0      		rjmp .L123
 2438               	.L130:
 2439 125c 81E0      		ldi r24,lo8(1)
 2440 125e 90E0      		ldi r25,hi8(1)
 2441               	.L147:
 2442 1260 0197      		sbiw r24,1
 2443 1262 01F0      		breq .+2
 2444 1264 00C0      		rjmp .L158
 2445 1266 00C0      		rjmp .L128
 2446               		.size	FATFileOpen, .-FATFileOpen
 2447               		.type	CFUnMount, @function
 2448               	CFUnMount:
 2449 1268 0F93      		push r16
 2450 126a 1F93      		push r17
 2451               	/* prologue: function */
GAS LISTING C:\Temp/ccxbxlG2.s 			page 44


 2452               	/* frame size = 0 */
 2453 126c 182F      		mov r17,r24
 2454 126e 092F      		mov r16,r25
 2455 1270 40E0      		ldi r20,lo8(0)
 2456 1272 50E0      		ldi r21,hi8(0)
 2457 1274 60E0      		ldi r22,hlo8(0)
 2458 1276 70E0      		ldi r23,hhi8(0)
 2459 1278 80E0      		ldi r24,lo8(hFATSemaphore)
 2460 127a 90E0      		ldi r25,hi8(hFATSemaphore)
 2461 127c 0E94 0000 		call NutEventWait
 2462 1280 812F      		mov r24,r17
 2463 1282 902F      		mov r25,r16
 2464 1284 8230      		cpi r24,2
 2465 1286 9105      		cpc r25,__zero_reg__
 2466 1288 00F4      		brsh .L163
 2467 128a FC01      		movw r30,r24
 2468 128c 25E0      		ldi r18,5
 2469 128e EE0F      	1:	lsl r30
 2470 1290 FF1F      		rol r31
 2471 1292 2A95      		dec r18
 2472 1294 01F4      		brne 1b
 2473 1296 880F      		lsl r24
 2474 1298 991F      		rol r25
 2475 129a E80F      		add r30,r24
 2476 129c F91F      		adc r31,r25
 2477 129e E050      		subi r30,lo8(-(sDriveInfo))
 2478 12a0 F040      		sbci r31,hi8(-(sDriveInfo))
 2479 12a2 1282      		std Z+2,__zero_reg__
 2480               	.L163:
 2481 12a4 80E0      		ldi r24,lo8(hFATSemaphore)
 2482 12a6 90E0      		ldi r25,hi8(hFATSemaphore)
 2483 12a8 0E94 0000 		call NutEventPost
 2484               	/* epilogue start */
 2485 12ac 1F91      		pop r17
 2486 12ae 0F91      		pop r16
 2487 12b0 0895      		ret
 2488               		.size	CFUnMount, .-CFUnMount
 2489               	.global	FATFileRead
 2490               		.type	FATFileRead, @function
 2491               	FATFileRead:
 2492 12b2 2F92      		push r2
 2493 12b4 3F92      		push r3
 2494 12b6 4F92      		push r4
 2495 12b8 5F92      		push r5
 2496 12ba 6F92      		push r6
 2497 12bc 7F92      		push r7
 2498 12be 8F92      		push r8
 2499 12c0 9F92      		push r9
 2500 12c2 AF92      		push r10
 2501 12c4 BF92      		push r11
 2502 12c6 CF92      		push r12
 2503 12c8 DF92      		push r13
 2504 12ca EF92      		push r14
 2505 12cc FF92      		push r15
 2506 12ce 0F93      		push r16
 2507 12d0 1F93      		push r17
 2508 12d2 DF93      		push r29
GAS LISTING C:\Temp/ccxbxlG2.s 			page 45


 2509 12d4 CF93      		push r28
 2510 12d6 CDB7      		in r28,__SP_L__
 2511 12d8 DEB7      		in r29,__SP_H__
 2512 12da 2A97      		sbiw r28,10
 2513 12dc 0FB6      		in __tmp_reg__,__SREG__
 2514 12de F894      		cli
 2515 12e0 DEBF      		out __SP_H__,r29
 2516 12e2 0FBE      		out __SREG__,__tmp_reg__
 2517 12e4 CDBF      		out __SP_L__,r28
 2518               	/* prologue: function */
 2519               	/* frame size = 10 */
 2520 12e6 8C01      		movw r16,r24
 2521 12e8 D62E      		mov r13,r22
 2522 12ea C72E      		mov r12,r23
 2523 12ec 5C83      		std Y+4,r21
 2524 12ee 4B83      		std Y+3,r20
 2525 12f0 40E0      		ldi r20,lo8(0)
 2526 12f2 50E0      		ldi r21,hi8(0)
 2527 12f4 60E0      		ldi r22,hlo8(0)
 2528 12f6 70E0      		ldi r23,hhi8(0)
 2529 12f8 80E0      		ldi r24,lo8(hFATSemaphore)
 2530 12fa 90E0      		ldi r25,hi8(hFATSemaphore)
 2531 12fc 0E94 0000 		call NutEventWait
 2532 1300 0115      		cp r16,__zero_reg__
 2533 1302 1105      		cpc r17,__zero_reg__
 2534 1304 01F4      		brne .+2
 2535 1306 00C0      		rjmp .L166
 2536 1308 D801      		movw r26,r16
 2537 130a 1496      		adiw r26,4
 2538 130c 0D90      		ld __tmp_reg__,X+
 2539 130e BC91      		ld r27,X
 2540 1310 A02D      		mov r26,__tmp_reg__
 2541 1312 BA87      		std Y+10,r27
 2542 1314 A987      		std Y+9,r26
 2543 1316 1097      		sbiw r26,0
 2544 1318 01F4      		brne .+2
 2545 131a 00C0      		rjmp .L166
 2546 131c EB81      		ldd r30,Y+3
 2547 131e FC81      		ldd r31,Y+4
 2548 1320 3097      		sbiw r30,0
 2549 1322 01F4      		brne .+2
 2550 1324 00C0      		rjmp .L166
 2551 1326 1C96      		adiw r26,12
 2552 1328 ED90      		ld r14,X+
 2553 132a FD90      		ld r15,X+
 2554 132c 0D91      		ld r16,X+
 2555 132e 1C91      		ld r17,X
 2556 1330 1F97      		sbiw r26,12+3
 2557 1332 2D91      		ld r18,X+
 2558 1334 3D91      		ld r19,X+
 2559 1336 4D91      		ld r20,X+
 2560 1338 5C91      		ld r21,X
 2561 133a E216      		cp r14,r18
 2562 133c F306      		cpc r15,r19
 2563 133e 0407      		cpc r16,r20
 2564 1340 1507      		cpc r17,r21
 2565 1342 00F0      		brlo .+2
GAS LISTING C:\Temp/ccxbxlG2.s 			page 46


 2566 1344 00C0      		rjmp .L167
 2567 1346 CF01      		movw r24,r30
 2568 1348 AA27      		clr r26
 2569 134a 97FD      		sbrc r25,7
 2570 134c A095      		com r26
 2571 134e BA2F      		mov r27,r26
 2572 1350 8E0D      		add r24,r14
 2573 1352 9F1D      		adc r25,r15
 2574 1354 A01F      		adc r26,r16
 2575 1356 B11F      		adc r27,r17
 2576 1358 2817      		cp r18,r24
 2577 135a 3907      		cpc r19,r25
 2578 135c 4A07      		cpc r20,r26
 2579 135e 5B07      		cpc r21,r27
 2580 1360 00F4      		brsh .L168
 2581 1362 B901      		movw r22,r18
 2582 1364 6E19      		sub r22,r14
 2583 1366 7F09      		sbc r23,r15
 2584 1368 7C83      		std Y+4,r23
 2585 136a 6B83      		std Y+3,r22
 2586               	.L168:
 2587 136c A985      		ldd r26,Y+9
 2588 136e BA85      		ldd r27,Y+10
 2589 1370 5896      		adiw r26,24
 2590 1372 6D90      		ld r6,X+
 2591 1374 7C90      		ld r7,X
 2592 1376 5997      		sbiw r26,24+1
 2593 1378 8D2D      		mov r24,r13
 2594 137a 9C2D      		mov r25,r12
 2595 137c 9C01      		movw r18,r24
 2596 137e 3A83      		std Y+2,r19
 2597 1380 2983      		std Y+1,r18
 2598 1382 F301      		movw r30,r6
 2599 1384 2480      		ldd r2,Z+4
 2600 1386 3580      		ldd r3,Z+5
 2601 1388 4B80      		ldd r4,Y+3
 2602 138a 5C80      		ldd r5,Y+4
 2603 138c 9101      		movw r18,r2
 2604 138e 40E0      		ldi r20,lo8(0)
 2605 1390 50E0      		ldi r21,hi8(0)
 2606 1392 2D83      		std Y+5,r18
 2607 1394 3E83      		std Y+6,r19
 2608 1396 4F83      		std Y+7,r20
 2609 1398 5887      		std Y+8,r21
 2610 139a 00C0      		rjmp .L169
 2611               	.L178:
 2612 139c A985      		ldd r26,Y+9
 2613 139e BA85      		ldd r27,Y+10
 2614 13a0 1896      		adiw r26,8
 2615 13a2 CD90      		ld r12,X+
 2616 13a4 DD90      		ld r13,X+
 2617 13a6 ED90      		ld r14,X+
 2618 13a8 FC90      		ld r15,X
 2619 13aa 1B97      		sbiw r26,8+3
 2620 13ac F301      		movw r30,r6
 2621 13ae 8381      		ldd r24,Z+3
 2622 13b0 80FD      		sbrc r24,0
GAS LISTING C:\Temp/ccxbxlG2.s 			page 47


 2623 13b2 00C0      		rjmp .L170
 2624 13b4 6281      		ldd r22,Z+2
 2625 13b6 70E0      		ldi r23,lo8(0)
 2626 13b8 80E0      		ldi r24,lo8(0)
 2627 13ba 90E0      		ldi r25,hi8(0)
 2628 13bc 2EEF      		ldi r18,lo8(-2)
 2629 13be 3FEF      		ldi r19,hi8(-2)
 2630 13c0 4FEF      		ldi r20,hlo8(-2)
 2631 13c2 5FEF      		ldi r21,hhi8(-2)
 2632 13c4 C20E      		add r12,r18
 2633 13c6 D31E      		adc r13,r19
 2634 13c8 E41E      		adc r14,r20
 2635 13ca F51E      		adc r15,r21
 2636 13cc A701      		movw r20,r14
 2637 13ce 9601      		movw r18,r12
 2638 13d0 0E94 0000 		call __mulsi3
 2639 13d4 6B01      		movw r12,r22
 2640 13d6 7C01      		movw r14,r24
 2641 13d8 F301      		movw r30,r6
 2642 13da 828D      		ldd r24,Z+26
 2643 13dc 938D      		ldd r25,Z+27
 2644 13de A48D      		ldd r26,Z+28
 2645 13e0 B58D      		ldd r27,Z+29
 2646 13e2 C80E      		add r12,r24
 2647 13e4 D91E      		adc r13,r25
 2648 13e6 EA1E      		adc r14,r26
 2649 13e8 FB1E      		adc r15,r27
 2650               	.L170:
 2651 13ea A985      		ldd r26,Y+9
 2652 13ec BA85      		ldd r27,Y+10
 2653 13ee 5096      		adiw r26,16
 2654 13f0 8D90      		ld r8,X+
 2655 13f2 9D90      		ld r9,X+
 2656 13f4 AD90      		ld r10,X+
 2657 13f6 BC90      		ld r11,X
 2658 13f8 5397      		sbiw r26,16+3
 2659 13fa C501      		movw r24,r10
 2660 13fc B401      		movw r22,r8
 2661 13fe 2D81      		ldd r18,Y+5
 2662 1400 3E81      		ldd r19,Y+6
 2663 1402 4F81      		ldd r20,Y+7
 2664 1404 5885      		ldd r21,Y+8
 2665 1406 0E94 0000 		call __udivmodsi4
 2666 140a 4427      		clr r20
 2667 140c 37FD      		sbrc r19,7
 2668 140e 4095      		com r20
 2669 1410 542F      		mov r21,r20
 2670 1412 C20E      		add r12,r18
 2671 1414 D31E      		adc r13,r19
 2672 1416 E41E      		adc r14,r20
 2673 1418 F51E      		adc r15,r21
 2674 141a 6091 0000 		lds r22,pSectorBuffer
 2675 141e 7091 0000 		lds r23,(pSectorBuffer)+1
 2676 1422 01E0      		ldi r16,lo8(1)
 2677 1424 10E0      		ldi r17,hi8(1)
 2678 1426 A701      		movw r20,r14
 2679 1428 9601      		movw r18,r12
GAS LISTING C:\Temp/ccxbxlG2.s 			page 48


 2680 142a F301      		movw r30,r6
 2681 142c 8181      		ldd r24,Z+1
 2682 142e 0E94 0000 		call IDEReadSectors
 2683 1432 892B      		or r24,r25
 2684 1434 01F0      		breq .+2
 2685 1436 00C0      		rjmp .L171
 2686 1438 C501      		movw r24,r10
 2687 143a B401      		movw r22,r8
 2688 143c 2D81      		ldd r18,Y+5
 2689 143e 3E81      		ldd r19,Y+6
 2690 1440 4F81      		ldd r20,Y+7
 2691 1442 5885      		ldd r21,Y+8
 2692 1444 0E94 0000 		call __udivmodsi4
 2693 1448 6201      		movw r12,r4
 2694 144a 2414      		cp r2,r4
 2695 144c 3504      		cpc r3,r5
 2696 144e 04F4      		brge .L172
 2697 1450 6101      		movw r12,r2
 2698               	.L172:
 2699 1452 C601      		movw r24,r12
 2700 1454 860F      		add r24,r22
 2701 1456 971F      		adc r25,r23
 2702 1458 2816      		cp r2,r24
 2703 145a 3906      		cpc r3,r25
 2704 145c 04F4      		brge .L173
 2705 145e 6101      		movw r12,r2
 2706 1460 C61A      		sub r12,r22
 2707 1462 D70A      		sbc r13,r23
 2708               	.L173:
 2709 1464 8091 0000 		lds r24,pSectorBuffer
 2710 1468 9091 0000 		lds r25,(pSectorBuffer)+1
 2711 146c 860F      		add r24,r22
 2712 146e 971F      		adc r25,r23
 2713 1470 A601      		movw r20,r12
 2714 1472 BC01      		movw r22,r24
 2715 1474 8981      		ldd r24,Y+1
 2716 1476 9A81      		ldd r25,Y+2
 2717 1478 0E94 0000 		call memcpy
 2718 147c 7601      		movw r14,r12
 2719 147e 0027      		clr r16
 2720 1480 F7FC      		sbrc r15,7
 2721 1482 0095      		com r16
 2722 1484 102F      		mov r17,r16
 2723 1486 A985      		ldd r26,Y+9
 2724 1488 BA85      		ldd r27,Y+10
 2725 148a 1C96      		adiw r26,12
 2726 148c 2D91      		ld r18,X+
 2727 148e 3D91      		ld r19,X+
 2728 1490 4D91      		ld r20,X+
 2729 1492 5C91      		ld r21,X
 2730 1494 1F97      		sbiw r26,12+3
 2731 1496 2E0D      		add r18,r14
 2732 1498 3F1D      		adc r19,r15
 2733 149a 401F      		adc r20,r16
 2734 149c 511F      		adc r21,r17
 2735 149e FD01      		movw r30,r26
 2736 14a0 2487      		std Z+12,r18
GAS LISTING C:\Temp/ccxbxlG2.s 			page 49


 2737 14a2 3587      		std Z+13,r19
 2738 14a4 4687      		std Z+14,r20
 2739 14a6 5787      		std Z+15,r21
 2740 14a8 8089      		ldd r24,Z+16
 2741 14aa 9189      		ldd r25,Z+17
 2742 14ac A289      		ldd r26,Z+18
 2743 14ae B389      		ldd r27,Z+19
 2744 14b0 8E0D      		add r24,r14
 2745 14b2 9F1D      		adc r25,r15
 2746 14b4 A01F      		adc r26,r16
 2747 14b6 B11F      		adc r27,r17
 2748 14b8 808B      		std Z+16,r24
 2749 14ba 918B      		std Z+17,r25
 2750 14bc A28B      		std Z+18,r26
 2751 14be B38B      		std Z+19,r27
 2752 14c0 8081      		ld r24,Z
 2753 14c2 9181      		ldd r25,Z+1
 2754 14c4 A281      		ldd r26,Z+2
 2755 14c6 B381      		ldd r27,Z+3
 2756 14c8 2817      		cp r18,r24
 2757 14ca 3907      		cpc r19,r25
 2758 14cc 4A07      		cpc r20,r26
 2759 14ce 5B07      		cpc r21,r27
 2760 14d0 00F0      		brlo .L175
 2761 14d2 81E0      		ldi r24,lo8(1)
 2762 14d4 90E0      		ldi r25,hi8(1)
 2763 14d6 978B      		std Z+23,r25
 2764 14d8 868B      		std Z+22,r24
 2765               	.L175:
 2766 14da A985      		ldd r26,Y+9
 2767 14dc BA85      		ldd r27,Y+10
 2768 14de 5096      		adiw r26,16
 2769 14e0 2D91      		ld r18,X+
 2770 14e2 3D91      		ld r19,X+
 2771 14e4 4D91      		ld r20,X+
 2772 14e6 5C91      		ld r21,X
 2773 14e8 5397      		sbiw r26,16+3
 2774 14ea F301      		movw r30,r6
 2775 14ec 868D      		ldd r24,Z+30
 2776 14ee 978D      		ldd r25,Z+31
 2777 14f0 A0A1      		ldd r26,Z+32
 2778 14f2 B1A1      		ldd r27,Z+33
 2779 14f4 2817      		cp r18,r24
 2780 14f6 3907      		cpc r19,r25
 2781 14f8 4A07      		cpc r20,r26
 2782 14fa 5B07      		cpc r21,r27
 2783 14fc 00F0      		brlo .L176
 2784 14fe A985      		ldd r26,Y+9
 2785 1500 BA85      		ldd r27,Y+10
 2786 1502 1896      		adiw r26,8
 2787 1504 4D91      		ld r20,X+
 2788 1506 5D91      		ld r21,X+
 2789 1508 6D91      		ld r22,X+
 2790 150a 7C91      		ld r23,X
 2791 150c 1B97      		sbiw r26,8+3
 2792 150e C301      		movw r24,r6
 2793 1510 0E94 0000 		call GetNextCluster
GAS LISTING C:\Temp/ccxbxlG2.s 			page 50


 2794 1514 E985      		ldd r30,Y+9
 2795 1516 FA85      		ldd r31,Y+10
 2796 1518 6087      		std Z+8,r22
 2797 151a 7187      		std Z+9,r23
 2798 151c 8287      		std Z+10,r24
 2799 151e 9387      		std Z+11,r25
 2800 1520 108A      		std Z+16,__zero_reg__
 2801 1522 118A      		std Z+17,__zero_reg__
 2802 1524 128A      		std Z+18,__zero_reg__
 2803 1526 138A      		std Z+19,__zero_reg__
 2804               	.L176:
 2805 1528 E981      		ldd r30,Y+1
 2806 152a FA81      		ldd r31,Y+2
 2807 152c EC0D      		add r30,r12
 2808 152e FD1D      		adc r31,r13
 2809 1530 FA83      		std Y+2,r31
 2810 1532 E983      		std Y+1,r30
 2811 1534 4C18      		sub r4,r12
 2812 1536 5D08      		sbc r5,r13
 2813 1538 00C0      		rjmp .L169
 2814               	.L171:
 2815 153a 8DEF      		ldi r24,lo8(-3)
 2816 153c 9FEF      		ldi r25,hi8(-3)
 2817 153e A985      		ldd r26,Y+9
 2818 1540 BA85      		ldd r27,Y+10
 2819 1542 5596      		adiw r26,20+1
 2820 1544 9C93      		st X,r25
 2821 1546 8E93      		st -X,r24
 2822 1548 5497      		sbiw r26,20
 2823 154a 00C0      		rjmp .L166
 2824               	.L169:
 2825 154c 4114      		cp r4,__zero_reg__
 2826 154e 5104      		cpc r5,__zero_reg__
 2827 1550 01F0      		breq .+2
 2828 1552 00C0      		rjmp .L178
 2829 1554 0B81      		ldd r16,Y+3
 2830 1556 1C81      		ldd r17,Y+4
 2831 1558 00C0      		rjmp .L177
 2832               	.L167:
 2833 155a 8EEF      		ldi r24,lo8(-2)
 2834 155c 9FEF      		ldi r25,hi8(-2)
 2835 155e E985      		ldd r30,Y+9
 2836 1560 FA85      		ldd r31,Y+10
 2837 1562 958B      		std Z+21,r25
 2838 1564 848B      		std Z+20,r24
 2839               	.L166:
 2840 1566 00E0      		ldi r16,lo8(0)
 2841 1568 10E0      		ldi r17,hi8(0)
 2842               	.L177:
 2843 156a 80E0      		ldi r24,lo8(hFATSemaphore)
 2844 156c 90E0      		ldi r25,hi8(hFATSemaphore)
 2845 156e 0E94 0000 		call NutEventPost
 2846 1572 C801      		movw r24,r16
 2847               	/* epilogue start */
 2848 1574 2A96      		adiw r28,10
 2849 1576 0FB6      		in __tmp_reg__,__SREG__
 2850 1578 F894      		cli
GAS LISTING C:\Temp/ccxbxlG2.s 			page 51


 2851 157a DEBF      		out __SP_H__,r29
 2852 157c 0FBE      		out __SREG__,__tmp_reg__
 2853 157e CDBF      		out __SP_L__,r28
 2854 1580 CF91      		pop r28
 2855 1582 DF91      		pop r29
 2856 1584 1F91      		pop r17
 2857 1586 0F91      		pop r16
 2858 1588 FF90      		pop r15
 2859 158a EF90      		pop r14
 2860 158c DF90      		pop r13
 2861 158e CF90      		pop r12
 2862 1590 BF90      		pop r11
 2863 1592 AF90      		pop r10
 2864 1594 9F90      		pop r9
 2865 1596 8F90      		pop r8
 2866 1598 7F90      		pop r7
 2867 159a 6F90      		pop r6
 2868 159c 5F90      		pop r5
 2869 159e 4F90      		pop r4
 2870 15a0 3F90      		pop r3
 2871 15a2 2F90      		pop r2
 2872 15a4 0895      		ret
 2873               		.size	FATFileRead, .-FATFileRead
 2874               	.global	FATFileSize
 2875               		.type	FATFileSize, @function
 2876               	FATFileSize:
 2877 15a6 EF92      		push r14
 2878 15a8 FF92      		push r15
 2879 15aa 0F93      		push r16
 2880 15ac 1F93      		push r17
 2881 15ae CF93      		push r28
 2882 15b0 DF93      		push r29
 2883               	/* prologue: function */
 2884               	/* frame size = 0 */
 2885 15b2 EC01      		movw r28,r24
 2886 15b4 40E0      		ldi r20,lo8(0)
 2887 15b6 50E0      		ldi r21,hi8(0)
 2888 15b8 60E0      		ldi r22,hlo8(0)
 2889 15ba 70E0      		ldi r23,hhi8(0)
 2890 15bc 80E0      		ldi r24,lo8(hFATSemaphore)
 2891 15be 90E0      		ldi r25,hi8(hFATSemaphore)
 2892 15c0 0E94 0000 		call NutEventWait
 2893 15c4 2097      		sbiw r28,0
 2894 15c6 01F0      		breq .L181
 2895 15c8 EC81      		ldd r30,Y+4
 2896 15ca FD81      		ldd r31,Y+5
 2897 15cc 3097      		sbiw r30,0
 2898 15ce 01F0      		breq .L181
 2899 15d0 E080      		ld r14,Z
 2900 15d2 F180      		ldd r15,Z+1
 2901 15d4 0281      		ldd r16,Z+2
 2902 15d6 1381      		ldd r17,Z+3
 2903 15d8 00C0      		rjmp .L182
 2904               	.L181:
 2905 15da EE24      		clr r14
 2906 15dc EA94      		dec r14
 2907 15de FE2C      		mov r15,r14
GAS LISTING C:\Temp/ccxbxlG2.s 			page 52


 2908 15e0 8701      		movw r16,r14
 2909               	.L182:
 2910 15e2 80E0      		ldi r24,lo8(hFATSemaphore)
 2911 15e4 90E0      		ldi r25,hi8(hFATSemaphore)
 2912 15e6 0E94 0000 		call NutEventPost
 2913 15ea B701      		movw r22,r14
 2914 15ec C801      		movw r24,r16
 2915               	/* epilogue start */
 2916 15ee DF91      		pop r29
 2917 15f0 CF91      		pop r28
 2918 15f2 1F91      		pop r17
 2919 15f4 0F91      		pop r16
 2920 15f6 FF90      		pop r15
 2921 15f8 EF90      		pop r14
 2922 15fa 0895      		ret
 2923               		.size	FATFileSize, .-FATFileSize
 2924               	.global	devFATC
 2925               		.data
 2926               		.type	devFATC, @object
 2927               		.size	devFATC, 35
 2928               	devFATC:
 2929 0000 0000      		.word	0
 2930 0002 46        		.byte	70
 2931 0003 41        		.byte	65
 2932 0004 54        		.byte	84
 2933 0005 5F        		.byte	95
 2934 0006 43        		.byte	67
 2935 0007 00        		.byte	0
 2936 0008 00        		.byte	0
 2937 0009 00        		.byte	0
 2938 000a 00        		.byte	0
 2939 000b 02        		.byte	2
 2940 000c 0200      		.word	2
 2941 000e 00        		.byte	0
 2942 000f 0000      		.word	0
 2943 0011 0000      		.word	0
 2944 0013 0000      		.word	gs(FATInit)
 2945 0015 0000      		.word	0
 2946 0017 0000      		.word	gs(FATFileRead)
 2947 0019 0000      		.word	gs(FATFileWrite)
 2948 001b 0000      		.word	gs(FATFileWriteP)
 2949 001d 0000      		.word	gs(FATFileOpen)
 2950 001f 0000      		.word	gs(FATFileClose)
 2951 0021 0000      		.word	gs(FATFileSize)
 2952               		.lcomm gnIsInit,2
 2953               		.lcomm pLongName1,2
 2954               		.lcomm pSectorBuffer,2
 2955               		.lcomm pLongName2,2
 2956               		.lcomm sDriveInfo,68
 2957               		.lcomm hFATSemaphore,2
GAS LISTING C:\Temp/ccxbxlG2.s 			page 53


DEFINED SYMBOLS
                            *ABS*:00000000 fat.c
  C:\Temp/ccxbxlG2.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccxbxlG2.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccxbxlG2.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccxbxlG2.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccxbxlG2.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccxbxlG2.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccxbxlG2.s:12     .text:00000000 RemoveChar
  C:\Temp/ccxbxlG2.s:85     .text:0000006c FATFileWrite
  C:\Temp/ccxbxlG2.s:94     .text:00000072 FATFileWriteP
  C:\Temp/ccxbxlG2.s:103    .text:00000078 GetLongChar
  C:\Temp/ccxbxlG2.s:119    .text:0000008c GetNextCluster
  C:\Temp/ccxbxlG2.s:2953   .bss:00000004 pSectorBuffer
  C:\Temp/ccxbxlG2.s:269    .text:000001b4 FindFileATAPI
  C:\Temp/ccxbxlG2.s:532    .text:000003ac FindFile
  C:\Temp/ccxbxlG2.s:2954   .bss:00000006 pLongName2
  C:\Temp/ccxbxlG2.s:1111   .text:00000834 FATSemaInit
  C:\Temp/ccxbxlG2.s:2956   .bss:0000004c hFATSemaphore
  C:\Temp/ccxbxlG2.s:1122   .text:0000083e FATFree
  C:\Temp/ccxbxlG2.s:1133   .text:00000848 FATLock
  C:\Temp/ccxbxlG2.s:1147   .text:0000085a FATFileClose
  C:\Temp/ccxbxlG2.s:1192   .text:000008aa FATMountDrive
  C:\Temp/ccxbxlG2.s:2952   .bss:00000002 pLongName1
  C:\Temp/ccxbxlG2.s:2955   .bss:00000008 sDriveInfo
  C:\Temp/ccxbxlG2.s:1813   .text:00000dac FATInit
                             .bss:00000000 gnIsInit
  C:\Temp/ccxbxlG2.s:2448   .text:00001268 CFUnMount
  C:\Temp/ccxbxlG2.s:1909   .text:00000e62 CFMount
  C:\Temp/ccxbxlG2.s:1940   .text:00000e98 FATFileOpen
  C:\Temp/ccxbxlG2.s:2491   .text:000012b2 FATFileRead
  C:\Temp/ccxbxlG2.s:2876   .text:000015a6 FATFileSize
  C:\Temp/ccxbxlG2.s:2928   .data:00000000 devFATC

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
toupper
IDEReadSectors
strncmp
__divmodhi4
__mulsi3
memcmp
NutEventPost
NutEventWait
heapFreeList
NutHeapRootFree
NutHeapRootAlloc
IDEGetSectorSize
IDEIsCDROMDevice
IDEIsZIPDevice
__udivmodhi4
IDEInit
IDEMountDevice
strchr
memset
__udivmodsi4
GAS LISTING C:\Temp/ccxbxlG2.s 			page 54


memcpy
