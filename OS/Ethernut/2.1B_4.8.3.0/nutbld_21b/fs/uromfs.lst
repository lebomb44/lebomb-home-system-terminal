GAS LISTING C:\Temp/ccYiK8uy.s 			page 1


   1               		.file	"uromfs.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	UromWrite, @function
  12               	UromWrite:
  13               	/* prologue: function */
  14               	/* frame size = 0 */
  15 0000 8FEF      		ldi r24,lo8(-1)
  16 0002 9FEF      		ldi r25,hi8(-1)
  17               	/* epilogue start */
  18 0004 0895      		ret
  19               		.size	UromWrite, .-UromWrite
  20               		.type	UromWrite_P, @function
  21               	UromWrite_P:
  22               	/* prologue: function */
  23               	/* frame size = 0 */
  24 0006 8FEF      		ldi r24,lo8(-1)
  25 0008 9FEF      		ldi r25,hi8(-1)
  26               	/* epilogue start */
  27 000a 0895      		ret
  28               		.size	UromWrite_P, .-UromWrite_P
  29               		.type	UromSize, @function
  30               	UromSize:
  31               	/* prologue: function */
  32               	/* frame size = 0 */
  33 000c DC01      		movw r26,r24
  34 000e 1496      		adiw r26,4
  35 0010 ED91      		ld r30,X+
  36 0012 FC91      		ld r31,X
  37 0014 1597      		sbiw r26,4+1
  38 0016 0190      		ld __tmp_reg__,Z+
  39 0018 F081      		ld r31,Z
  40 001a E02D      		mov r30,__tmp_reg__
  41 001c 8481      		ldd r24,Z+4
  42 001e 9581      		ldd r25,Z+5
  43 0020 BC01      		movw r22,r24
  44 0022 80E0      		ldi r24,lo8(0)
  45 0024 90E0      		ldi r25,lo8(0)
  46               	/* epilogue start */
  47 0026 0895      		ret
  48               		.size	UromSize, .-UromSize
  49               	.global	UromIOCtl
  50               		.type	UromIOCtl, @function
  51               	UromIOCtl:
  52 0028 0F93      		push r16
  53 002a 1F93      		push r17
  54 002c CF93      		push r28
  55 002e DF93      		push r29
  56               	/* prologue: function */
  57               	/* frame size = 0 */
GAS LISTING C:\Temp/ccYiK8uy.s 			page 2


  58 0030 6352      		subi r22,lo8(4387)
  59 0032 7141      		sbci r23,hi8(4387)
  60 0034 01F4      		brne .L8
  61 0036 FA01      		movw r30,r20
  62 0038 0281      		ldd r16,Z+2
  63 003a 1381      		ldd r17,Z+3
  64 003c A081      		ld r26,Z
  65 003e B181      		ldd r27,Z+1
  66 0040 1496      		adiw r26,4
  67 0042 CD91      		ld r28,X+
  68 0044 DC91      		ld r29,X
  69 0046 1597      		sbiw r26,4+1
  70 0048 6881      		ld r22,Y
  71 004a 7981      		ldd r23,Y+1
  72 004c D801      		movw r26,r16
  73 004e 2D91      		ld r18,X+
  74 0050 3D91      		ld r19,X+
  75 0052 4D91      		ld r20,X+
  76 0054 5C91      		ld r21,X
  77 0056 8481      		ldd r24,Z+4
  78 0058 9581      		ldd r25,Z+5
  79 005a 8130      		cpi r24,1
  80 005c 9105      		cpc r25,__zero_reg__
  81 005e 01F0      		breq .L11
  82 0060 0297      		sbiw r24,2
  83 0062 01F4      		brne .L10
  84 0064 00C0      		rjmp .L15
  85               	.L11:
  86 0066 8A81      		ldd r24,Y+2
  87 0068 9B81      		ldd r25,Y+3
  88 006a 00C0      		rjmp .L14
  89               	.L15:
  90 006c FB01      		movw r30,r22
  91 006e 8481      		ldd r24,Z+4
  92 0070 9581      		ldd r25,Z+5
  93               	.L14:
  94 0072 A0E0      		ldi r26,lo8(0)
  95 0074 B0E0      		ldi r27,hi8(0)
  96 0076 280F      		add r18,r24
  97 0078 391F      		adc r19,r25
  98 007a 4A1F      		adc r20,r26
  99 007c 5B1F      		adc r21,r27
 100               	.L10:
 101 007e 57FD      		sbrc r21,7
 102 0080 00C0      		rjmp .L8
 103 0082 DB01      		movw r26,r22
 104 0084 1496      		adiw r26,4
 105 0086 8D91      		ld r24,X+
 106 0088 9C91      		ld r25,X
 107 008a 1597      		sbiw r26,4+1
 108 008c A0E0      		ldi r26,lo8(0)
 109 008e B0E0      		ldi r27,hi8(0)
 110 0090 8217      		cp r24,r18
 111 0092 9307      		cpc r25,r19
 112 0094 A407      		cpc r26,r20
 113 0096 B507      		cpc r27,r21
 114 0098 04F0      		brlt .L8
GAS LISTING C:\Temp/ccYiK8uy.s 			page 3


 115 009a 3B83      		std Y+3,r19
 116 009c 2A83      		std Y+2,r18
 117 009e F801      		movw r30,r16
 118 00a0 2083      		st Z,r18
 119 00a2 3183      		std Z+1,r19
 120 00a4 4283      		std Z+2,r20
 121 00a6 5383      		std Z+3,r21
 122               	.L8:
 123 00a8 8FEF      		ldi r24,lo8(-1)
 124 00aa 9FEF      		ldi r25,hi8(-1)
 125               	/* epilogue start */
 126 00ac DF91      		pop r29
 127 00ae CF91      		pop r28
 128 00b0 1F91      		pop r17
 129 00b2 0F91      		pop r16
 130 00b4 0895      		ret
 131               		.size	UromIOCtl, .-UromIOCtl
 132               		.type	UromClose, @function
 133               	UromClose:
 134 00b6 CF93      		push r28
 135 00b8 DF93      		push r29
 136               	/* prologue: function */
 137               	/* frame size = 0 */
 138 00ba EC01      		movw r28,r24
 139 00bc 0197      		sbiw r24,1
 140 00be 8E5F      		subi r24,lo8(-2)
 141 00c0 9F4F      		sbci r25,hi8(-2)
 142 00c2 00F4      		brsh .L17
 143 00c4 8C81      		ldd r24,Y+4
 144 00c6 9D81      		ldd r25,Y+5
 145 00c8 0097      		sbiw r24,0
 146 00ca 01F0      		breq .L18
 147 00cc 0E94 0000 		call free
 148               	.L18:
 149 00d0 CE01      		movw r24,r28
 150 00d2 0E94 0000 		call free
 151               	.L17:
 152 00d6 80E0      		ldi r24,lo8(0)
 153 00d8 90E0      		ldi r25,hi8(0)
 154               	/* epilogue start */
 155 00da DF91      		pop r29
 156 00dc CF91      		pop r28
 157 00de 0895      		ret
 158               		.size	UromClose, .-UromClose
 159               		.type	UromOpen, @function
 160               	UromOpen:
 161 00e0 AF92      		push r10
 162 00e2 BF92      		push r11
 163 00e4 CF92      		push r12
 164 00e6 DF92      		push r13
 165 00e8 EF92      		push r14
 166 00ea FF92      		push r15
 167 00ec 0F93      		push r16
 168 00ee 1F93      		push r17
 169 00f0 CF93      		push r28
 170 00f2 DF93      		push r29
 171               	/* prologue: function */
GAS LISTING C:\Temp/ccYiK8uy.s 			page 4


 172               	/* frame size = 0 */
 173 00f4 5C01      		movw r10,r24
 174 00f6 6B01      		movw r12,r22
 175 00f8 86E0      		ldi r24,lo8(6)
 176 00fa 90E0      		ldi r25,hi8(6)
 177 00fc 0E94 0000 		call malloc
 178 0100 EC01      		movw r28,r24
 179 0102 7C01      		movw r14,r24
 180 0104 0097      		sbiw r24,0
 181 0106 01F4      		brne .L21
 182 0108 8CE0      		ldi r24,lo8(12)
 183 010a 90E0      		ldi r25,hi8(12)
 184 010c 9093 0000 		sts (errno)+1,r25
 185 0110 8093 0000 		sts errno,r24
 186 0114 00C0      		rjmp .L32
 187               	.L21:
 188 0116 0091 0000 		lds r16,romEntryList
 189 011a 1091 0000 		lds r17,(romEntryList)+1
 190 011e 00C0      		rjmp .L23
 191               	.L25:
 192 0120 F801      		movw r30,r16
 193 0122 6281      		ldd r22,Z+2
 194 0124 7381      		ldd r23,Z+3
 195 0126 C601      		movw r24,r12
 196 0128 0E94 0000 		call strcmp_P
 197 012c 892B      		or r24,r25
 198 012e 01F0      		breq .L24
 199 0130 F801      		movw r30,r16
 200 0132 0081      		ld r16,Z
 201 0134 1181      		ldd r17,Z+1
 202               	.L23:
 203 0136 0115      		cp r16,__zero_reg__
 204 0138 1105      		cpc r17,__zero_reg__
 205 013a 01F4      		brne .L25
 206 013c 00C0      		rjmp .L33
 207               	.L24:
 208 013e 64E0      		ldi r22,lo8(4)
 209 0140 70E0      		ldi r23,hi8(4)
 210 0142 81E0      		ldi r24,lo8(1)
 211 0144 90E0      		ldi r25,hi8(1)
 212 0146 0E94 0000 		call calloc
 213 014a FC01      		movw r30,r24
 214 014c 0097      		sbiw r24,0
 215 014e 01F0      		breq .L27
 216 0150 1183      		std Z+1,r17
 217 0152 0083      		st Z,r16
 218 0154 1982      		std Y+1,__zero_reg__
 219 0156 1882      		st Y,__zero_reg__
 220 0158 BB82      		std Y+3,r11
 221 015a AA82      		std Y+2,r10
 222 015c 9D83      		std Y+5,r25
 223 015e 8C83      		std Y+4,r24
 224 0160 00C0      		rjmp .L22
 225               	.L27:
 226 0162 8CE0      		ldi r24,lo8(12)
 227 0164 90E0      		ldi r25,hi8(12)
 228               	.L31:
GAS LISTING C:\Temp/ccYiK8uy.s 			page 5


 229 0166 9093 0000 		sts (errno)+1,r25
 230 016a 8093 0000 		sts errno,r24
 231 016e CE01      		movw r24,r28
 232 0170 0E94 0000 		call free
 233               	.L32:
 234 0174 EE24      		clr r14
 235 0176 EA94      		dec r14
 236 0178 FE2C      		mov r15,r14
 237               	.L22:
 238 017a C701      		movw r24,r14
 239               	/* epilogue start */
 240 017c DF91      		pop r29
 241 017e CF91      		pop r28
 242 0180 1F91      		pop r17
 243 0182 0F91      		pop r16
 244 0184 FF90      		pop r15
 245 0186 EF90      		pop r14
 246 0188 DF90      		pop r13
 247 018a CF90      		pop r12
 248 018c BF90      		pop r11
 249 018e AF90      		pop r10
 250 0190 0895      		ret
 251               	.L33:
 252 0192 82E0      		ldi r24,lo8(2)
 253 0194 90E0      		ldi r25,hi8(2)
 254 0196 00C0      		rjmp .L31
 255               		.size	UromOpen, .-UromOpen
 256               		.type	UromRead, @function
 257               	UromRead:
 258 0198 EF92      		push r14
 259 019a FF92      		push r15
 260 019c 0F93      		push r16
 261 019e 1F93      		push r17
 262 01a0 CF93      		push r28
 263 01a2 DF93      		push r29
 264               	/* prologue: function */
 265               	/* frame size = 0 */
 266 01a4 7B01      		movw r14,r22
 267 01a6 EA01      		movw r28,r20
 268 01a8 DC01      		movw r26,r24
 269 01aa 1496      		adiw r26,4
 270 01ac 0D91      		ld r16,X+
 271 01ae 1C91      		ld r17,X
 272 01b0 1597      		sbiw r26,4+1
 273 01b2 D801      		movw r26,r16
 274 01b4 ED91      		ld r30,X+
 275 01b6 FC91      		ld r31,X
 276 01b8 1197      		sbiw r26,1
 277 01ba 1296      		adiw r26,2
 278 01bc 2D91      		ld r18,X+
 279 01be 3C91      		ld r19,X
 280 01c0 1397      		sbiw r26,2+1
 281 01c2 8481      		ldd r24,Z+4
 282 01c4 9581      		ldd r25,Z+5
 283 01c6 821B      		sub r24,r18
 284 01c8 930B      		sbc r25,r19
 285 01ca 8417      		cp r24,r20
GAS LISTING C:\Temp/ccYiK8uy.s 			page 6


 286 01cc 9507      		cpc r25,r21
 287 01ce 00F4      		brsh .L35
 288 01d0 EC01      		movw r28,r24
 289               	.L35:
 290 01d2 2097      		sbiw r28,0
 291 01d4 01F0      		breq .L36
 292 01d6 6681      		ldd r22,Z+6
 293 01d8 7781      		ldd r23,Z+7
 294 01da 620F      		add r22,r18
 295 01dc 731F      		adc r23,r19
 296 01de AE01      		movw r20,r28
 297 01e0 C701      		movw r24,r14
 298 01e2 0E94 0000 		call memcpy_P
 299 01e6 F801      		movw r30,r16
 300 01e8 8281      		ldd r24,Z+2
 301 01ea 9381      		ldd r25,Z+3
 302 01ec 8C0F      		add r24,r28
 303 01ee 9D1F      		adc r25,r29
 304 01f0 9383      		std Z+3,r25
 305 01f2 8283      		std Z+2,r24
 306               	.L36:
 307 01f4 CE01      		movw r24,r28
 308               	/* epilogue start */
 309 01f6 DF91      		pop r29
 310 01f8 CF91      		pop r28
 311 01fa 1F91      		pop r17
 312 01fc 0F91      		pop r16
 313 01fe FF90      		pop r15
 314 0200 EF90      		pop r14
 315 0202 0895      		ret
 316               		.size	UromRead, .-UromRead
 317               	.global	devUrom
 318               		.data
 319               		.type	devUrom, @object
 320               		.size	devUrom, 35
 321               	devUrom:
 322 0000 0000      		.word	0
 323 0002 55        		.byte	85
 324 0003 52        		.byte	82
 325 0004 4F        		.byte	79
 326 0005 4D        		.byte	77
 327 0006 00        		.byte	0
 328 0007 00        		.byte	0
 329 0008 00        		.byte	0
 330 0009 00        		.byte	0
 331 000a 00        		.byte	0
 332 000b 01        		.byte	1
 333 000c 0000      		.word	0
 334 000e 00        		.byte	0
 335 000f 0000      		.word	0
 336 0011 0000      		.word	0
 337 0013 0000      		.word	0
 338 0015 0000      		.word	gs(UromIOCtl)
 339 0017 0000      		.word	gs(UromRead)
 340 0019 0000      		.word	gs(UromWrite)
 341 001b 0000      		.word	gs(UromWrite_P)
 342 001d 0000      		.word	gs(UromOpen)
GAS LISTING C:\Temp/ccYiK8uy.s 			page 7


 343 001f 0000      		.word	gs(UromClose)
 344 0021 0000      		.word	gs(UromSize)
GAS LISTING C:\Temp/ccYiK8uy.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 uromfs.c
  C:\Temp/ccYiK8uy.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccYiK8uy.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccYiK8uy.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccYiK8uy.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccYiK8uy.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccYiK8uy.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccYiK8uy.s:12     .text:00000000 UromWrite
  C:\Temp/ccYiK8uy.s:21     .text:00000006 UromWrite_P
  C:\Temp/ccYiK8uy.s:30     .text:0000000c UromSize
  C:\Temp/ccYiK8uy.s:51     .text:00000028 UromIOCtl
  C:\Temp/ccYiK8uy.s:133    .text:000000b6 UromClose
  C:\Temp/ccYiK8uy.s:160    .text:000000e0 UromOpen
  C:\Temp/ccYiK8uy.s:257    .text:00000198 UromRead
  C:\Temp/ccYiK8uy.s:321    .data:00000000 devUrom

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
free
malloc
errno
romEntryList
strcmp_P
calloc
memcpy_P
