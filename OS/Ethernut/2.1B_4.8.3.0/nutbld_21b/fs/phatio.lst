GAS LISTING C:\Temp/ccZIrweV.s 			page 1


   1               		.file	"phatio.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	PhatSectorFlush
  12               		.type	PhatSectorFlush, @function
  13               	PhatSectorFlush:
  14 0000 6F92      		push r6
  15 0002 7F92      		push r7
  16 0004 8F92      		push r8
  17 0006 9F92      		push r9
  18 0008 AF92      		push r10
  19 000a BF92      		push r11
  20 000c CF92      		push r12
  21 000e DF92      		push r13
  22 0010 EF92      		push r14
  23 0012 FF92      		push r15
  24 0014 0F93      		push r16
  25 0016 1F93      		push r17
  26 0018 DF93      		push r29
  27 001a CF93      		push r28
  28 001c 00D0      		rcall .
  29 001e 00D0      		rcall .
  30 0020 00D0      		rcall .
  31 0022 CDB7      		in r28,__SP_L__
  32 0024 DEB7      		in r29,__SP_H__
  33               	/* prologue: function */
  34               	/* frame size = 6 */
  35 0026 FC01      		movw r30,r24
  36 0028 6B01      		movw r12,r22
  37 002a 8189      		ldd r24,Z+17
  38 002c 9289      		ldd r25,Z+18
  39 002e 8784      		ldd r8,Z+15
  40 0030 9088      		ldd r9,Z+16
  41 0032 D401      		movw r26,r8
  42 0034 1296      		adiw r26,2
  43 0036 AD90      		ld r10,X+
  44 0038 BC90      		ld r11,X
  45 003a 1397      		sbiw r26,2+1
  46 003c 77FD      		sbrc r23,7
  47 003e 00C0      		rjmp .L2
  48 0040 7B01      		movw r14,r22
  49 0042 00C0      		rjmp .L3
  50               	.L2:
  51 0044 EE24      		clr r14
  52 0046 FF24      		clr r15
  53 0048 CC24      		clr r12
  54 004a DD24      		clr r13
  55               	.L3:
  56 004c 8701      		movw r16,r14
  57 004e 23E0      		ldi r18,3
GAS LISTING C:\Temp/ccZIrweV.s 			page 2


  58 0050 000F      	1:	lsl r16
  59 0052 111F      		rol r17
  60 0054 2A95      		dec r18
  61 0056 01F4      		brne 1b
  62 0058 065F      		subi r16,lo8(-(10))
  63 005a 1F4F      		sbci r17,hi8(-(10))
  64 005c 080F      		add r16,r24
  65 005e 191F      		adc r17,r25
  66 0060 3E01      		movw r6,r28
  67 0062 0894      		sec
  68 0064 611C      		adc r6,__zero_reg__
  69 0066 711C      		adc r7,__zero_reg__
  70 0068 00C0      		rjmp .L4
  71               	.L9:
  72 006a F801      		movw r30,r16
  73 006c 8681      		ldd r24,Z+6
  74 006e 9781      		ldd r25,Z+7
  75 0070 892B      		or r24,r25
  76 0072 01F0      		breq .L5
  77 0074 9A82      		std Y+2,r9
  78 0076 8982      		std Y+1,r8
  79 0078 8281      		ldd r24,Z+2
  80 007a 9381      		ldd r25,Z+3
  81 007c A481      		ldd r26,Z+4
  82 007e B581      		ldd r27,Z+5
  83 0080 8B83      		std Y+3,r24
  84 0082 9C83      		std Y+4,r25
  85 0084 AD83      		std Y+5,r26
  86 0086 BE83      		std Y+6,r27
  87 0088 D501      		movw r26,r10
  88 008a 5596      		adiw r26,21
  89 008c ED91      		ld r30,X+
  90 008e FC91      		ld r31,X
  91 0090 5697      		sbiw r26,21+1
  92 0092 A301      		movw r20,r6
  93 0094 63E0      		ldi r22,lo8(4611)
  94 0096 72E1      		ldi r23,hi8(4611)
  95 0098 C501      		movw r24,r10
  96 009a 0995      		icall
  97 009c 892B      		or r24,r25
  98 009e 01F4      		brne .L11
  99               	.L6:
 100 00a0 F801      		movw r30,r16
 101 00a2 6081      		ld r22,Z
 102 00a4 7181      		ldd r23,Z+1
 103 00a6 D501      		movw r26,r10
 104 00a8 5996      		adiw r26,25
 105 00aa ED91      		ld r30,X+
 106 00ac FC91      		ld r31,X
 107 00ae 5A97      		sbiw r26,25+1
 108 00b0 41E0      		ldi r20,lo8(1)
 109 00b2 50E0      		ldi r21,hi8(1)
 110 00b4 C401      		movw r24,r8
 111 00b6 0995      		icall
 112 00b8 0197      		sbiw r24,1
 113 00ba 01F0      		breq .L8
 114               	.L11:
GAS LISTING C:\Temp/ccZIrweV.s 			page 3


 115 00bc 85E0      		ldi r24,lo8(5)
 116 00be 90E0      		ldi r25,hi8(5)
 117 00c0 9093 0000 		sts (errno)+1,r25
 118 00c4 8093 0000 		sts errno,r24
 119 00c8 2FEF      		ldi r18,lo8(-1)
 120 00ca 3FEF      		ldi r19,hi8(-1)
 121 00cc 00C0      		rjmp .L7
 122               	.L8:
 123 00ce F801      		movw r30,r16
 124 00d0 1782      		std Z+7,__zero_reg__
 125 00d2 1682      		std Z+6,__zero_reg__
 126               	.L5:
 127 00d4 0894      		sec
 128 00d6 E11C      		adc r14,__zero_reg__
 129 00d8 F11C      		adc r15,__zero_reg__
 130 00da 085F      		subi r16,lo8(-(8))
 131 00dc 1F4F      		sbci r17,hi8(-(8))
 132               	.L4:
 133 00de CE14      		cp r12,r14
 134 00e0 DF04      		cpc r13,r15
 135 00e2 04F4      		brge .L9
 136 00e4 20E0      		ldi r18,lo8(0)
 137 00e6 30E0      		ldi r19,hi8(0)
 138               	.L7:
 139 00e8 C901      		movw r24,r18
 140               	/* epilogue start */
 141 00ea 2696      		adiw r28,6
 142 00ec 0FB6      		in __tmp_reg__,__SREG__
 143 00ee F894      		cli
 144 00f0 DEBF      		out __SP_H__,r29
 145 00f2 0FBE      		out __SREG__,__tmp_reg__
 146 00f4 CDBF      		out __SP_L__,r28
 147 00f6 CF91      		pop r28
 148 00f8 DF91      		pop r29
 149 00fa 1F91      		pop r17
 150 00fc 0F91      		pop r16
 151 00fe FF90      		pop r15
 152 0100 EF90      		pop r14
 153 0102 DF90      		pop r13
 154 0104 CF90      		pop r12
 155 0106 BF90      		pop r11
 156 0108 AF90      		pop r10
 157 010a 9F90      		pop r9
 158 010c 8F90      		pop r8
 159 010e 7F90      		pop r7
 160 0110 6F90      		pop r6
 161 0112 0895      		ret
 162               		.size	PhatSectorFlush, .-PhatSectorFlush
 163               	.global	PhatSectorRead
 164               		.type	PhatSectorRead, @function
 165               	PhatSectorRead:
 166 0114 CF92      		push r12
 167 0116 DF92      		push r13
 168 0118 EF92      		push r14
 169 011a FF92      		push r15
 170 011c 0F93      		push r16
 171 011e 1F93      		push r17
GAS LISTING C:\Temp/ccZIrweV.s 			page 4


 172 0120 DF93      		push r29
 173 0122 CF93      		push r28
 174 0124 00D0      		rcall .
 175 0126 00D0      		rcall .
 176 0128 00D0      		rcall .
 177 012a CDB7      		in r28,__SP_L__
 178 012c DEB7      		in r29,__SP_H__
 179               	/* prologue: function */
 180               	/* frame size = 6 */
 181 012e 7C01      		movw r14,r24
 182 0130 6901      		movw r12,r18
 183 0132 DC01      		movw r26,r24
 184 0134 1296      		adiw r26,2
 185 0136 0D91      		ld r16,X+
 186 0138 1C91      		ld r17,X
 187 013a 1397      		sbiw r26,2+1
 188 013c 9A83      		std Y+2,r25
 189 013e 8983      		std Y+1,r24
 190 0140 4B83      		std Y+3,r20
 191 0142 5C83      		std Y+4,r21
 192 0144 6D83      		std Y+5,r22
 193 0146 7E83      		std Y+6,r23
 194 0148 D801      		movw r26,r16
 195 014a 5596      		adiw r26,21
 196 014c ED91      		ld r30,X+
 197 014e FC91      		ld r31,X
 198 0150 5697      		sbiw r26,21+1
 199 0152 AE01      		movw r20,r28
 200 0154 4F5F      		subi r20,lo8(-(1))
 201 0156 5F4F      		sbci r21,hi8(-(1))
 202 0158 63E0      		ldi r22,lo8(4611)
 203 015a 72E1      		ldi r23,hi8(4611)
 204 015c C801      		movw r24,r16
 205 015e 0995      		icall
 206 0160 892B      		or r24,r25
 207 0162 01F4      		brne .L15
 208               	.L13:
 209 0164 D801      		movw r26,r16
 210 0166 5796      		adiw r26,23
 211 0168 ED91      		ld r30,X+
 212 016a FC91      		ld r31,X
 213 016c 5897      		sbiw r26,23+1
 214 016e 41E0      		ldi r20,lo8(1)
 215 0170 50E0      		ldi r21,hi8(1)
 216 0172 B601      		movw r22,r12
 217 0174 C701      		movw r24,r14
 218 0176 0995      		icall
 219 0178 0197      		sbiw r24,1
 220 017a 01F4      		brne .L15
 221 017c 20E0      		ldi r18,lo8(0)
 222 017e 30E0      		ldi r19,hi8(0)
 223 0180 00C0      		rjmp .L14
 224               	.L15:
 225 0182 85E0      		ldi r24,lo8(5)
 226 0184 90E0      		ldi r25,hi8(5)
 227 0186 9093 0000 		sts (errno)+1,r25
 228 018a 8093 0000 		sts errno,r24
GAS LISTING C:\Temp/ccZIrweV.s 			page 5


 229 018e 2FEF      		ldi r18,lo8(-1)
 230 0190 3FEF      		ldi r19,hi8(-1)
 231               	.L14:
 232 0192 C901      		movw r24,r18
 233               	/* epilogue start */
 234 0194 2696      		adiw r28,6
 235 0196 0FB6      		in __tmp_reg__,__SREG__
 236 0198 F894      		cli
 237 019a DEBF      		out __SP_H__,r29
 238 019c 0FBE      		out __SREG__,__tmp_reg__
 239 019e CDBF      		out __SP_L__,r28
 240 01a0 CF91      		pop r28
 241 01a2 DF91      		pop r29
 242 01a4 1F91      		pop r17
 243 01a6 0F91      		pop r16
 244 01a8 FF90      		pop r15
 245 01aa EF90      		pop r14
 246 01ac DF90      		pop r13
 247 01ae CF90      		pop r12
 248 01b0 0895      		ret
 249               		.size	PhatSectorRead, .-PhatSectorRead
 250               	.global	PhatSectorLoad
 251               		.type	PhatSectorLoad, @function
 252               	PhatSectorLoad:
 253 01b2 AF92      		push r10
 254 01b4 BF92      		push r11
 255 01b6 CF92      		push r12
 256 01b8 DF92      		push r13
 257 01ba EF92      		push r14
 258 01bc FF92      		push r15
 259 01be 0F93      		push r16
 260 01c0 1F93      		push r17
 261 01c2 CF93      		push r28
 262 01c4 DF93      		push r29
 263               	/* prologue: function */
 264               	/* frame size = 0 */
 265 01c6 6C01      		movw r12,r24
 266 01c8 7A01      		movw r14,r20
 267 01ca 8B01      		movw r16,r22
 268 01cc FC01      		movw r30,r24
 269 01ce C189      		ldd r28,Z+17
 270 01d0 D289      		ldd r29,Z+18
 271 01d2 34E1      		ldi r19,lo8(20)
 272 01d4 A32E      		mov r10,r19
 273 01d6 B12C      		mov r11,__zero_reg__
 274 01d8 AC0E      		add r10,r28
 275 01da BD1E      		adc r11,r29
 276 01dc 40E0      		ldi r20,lo8(0)
 277 01de 50E0      		ldi r21,hi8(0)
 278 01e0 60E0      		ldi r22,hlo8(0)
 279 01e2 70E0      		ldi r23,hhi8(0)
 280 01e4 C501      		movw r24,r10
 281 01e6 0E94 0000 		call NutEventWait
 282 01ea 8C85      		ldd r24,Y+12
 283 01ec 9D85      		ldd r25,Y+13
 284 01ee AE85      		ldd r26,Y+14
 285 01f0 BF85      		ldd r27,Y+15
GAS LISTING C:\Temp/ccZIrweV.s 			page 6


 286 01f2 8E15      		cp r24,r14
 287 01f4 9F05      		cpc r25,r15
 288 01f6 A007      		cpc r26,r16
 289 01f8 B107      		cpc r27,r17
 290 01fa 01F4      		brne .L18
 291 01fc C501      		movw r24,r10
 292 01fe 0E94 0000 		call NutEventPostAsync
 293 0202 C0E0      		ldi r28,lo8(0)
 294 0204 D0E0      		ldi r29,hi8(0)
 295 0206 00C0      		rjmp .L19
 296               	.L18:
 297 0208 60E0      		ldi r22,lo8(0)
 298 020a 70E0      		ldi r23,hi8(0)
 299 020c C601      		movw r24,r12
 300 020e 0E94 0000 		call PhatSectorFlush
 301 0212 892B      		or r24,r25
 302 0214 01F4      		brne .L20
 303 0216 2A85      		ldd r18,Y+10
 304 0218 3B85      		ldd r19,Y+11
 305 021a B801      		movw r22,r16
 306 021c A701      		movw r20,r14
 307 021e F601      		movw r30,r12
 308 0220 8785      		ldd r24,Z+15
 309 0222 9089      		ldd r25,Z+16
 310 0224 0E94 0000 		call PhatSectorRead
 311 0228 892B      		or r24,r25
 312 022a 01F4      		brne .L20
 313 022c EC86      		std Y+12,r14
 314 022e FD86      		std Y+13,r15
 315 0230 0E87      		std Y+14,r16
 316 0232 1F87      		std Y+15,r17
 317 0234 C0E0      		ldi r28,lo8(0)
 318 0236 D0E0      		ldi r29,hi8(0)
 319 0238 00C0      		rjmp .L21
 320               	.L20:
 321 023a CFEF      		ldi r28,lo8(-1)
 322 023c DFEF      		ldi r29,hi8(-1)
 323               	.L21:
 324 023e C501      		movw r24,r10
 325 0240 0E94 0000 		call NutEventPostAsync
 326               	.L19:
 327 0244 CE01      		movw r24,r28
 328               	/* epilogue start */
 329 0246 DF91      		pop r29
 330 0248 CF91      		pop r28
 331 024a 1F91      		pop r17
 332 024c 0F91      		pop r16
 333 024e FF90      		pop r15
 334 0250 EF90      		pop r14
 335 0252 DF90      		pop r13
 336 0254 CF90      		pop r12
 337 0256 BF90      		pop r11
 338 0258 AF90      		pop r10
 339 025a 0895      		ret
 340               		.size	PhatSectorLoad, .-PhatSectorLoad
GAS LISTING C:\Temp/ccZIrweV.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 phatio.c
  C:\Temp/ccZIrweV.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccZIrweV.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccZIrweV.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccZIrweV.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccZIrweV.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccZIrweV.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccZIrweV.s:13     .text:00000000 PhatSectorFlush
  C:\Temp/ccZIrweV.s:165    .text:00000114 PhatSectorRead
  C:\Temp/ccZIrweV.s:252    .text:000001b2 PhatSectorLoad

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
errno
NutEventWait
NutEventPostAsync
