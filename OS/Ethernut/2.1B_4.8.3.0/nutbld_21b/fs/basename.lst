GAS LISTING C:\Temp/ccRNq1PH.s 			page 1


   1               		.file	"basename.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.data
  11               	.LC0:
  12 0000 2E00      		.string	"."
  13               	.LC1:
  14 0002 2F00      		.string	"/"
  15               		.text
  16               	.global	basename
  17               		.type	basename, @function
  18               	basename:
  19 0000 CF93      		push r28
  20 0002 DF93      		push r29
  21               	/* prologue: function */
  22               	/* frame size = 0 */
  23 0004 EC01      		movw r28,r24
  24 0006 8091 0000 		lds r24,bname.1671
  25 000a 9091 0000 		lds r25,(bname.1671)+1
  26 000e 892B      		or r24,r25
  27 0010 01F4      		brne .L2
  28 0012 80E0      		ldi r24,lo8(256)
  29 0014 91E0      		ldi r25,hi8(256)
  30 0016 0E94 0000 		call malloc
  31 001a 9093 0000 		sts (bname.1671)+1,r25
  32 001e 8093 0000 		sts bname.1671,r24
  33 0022 0097      		sbiw r24,0
  34 0024 01F4      		brne .+2
  35 0026 00C0      		rjmp .L14
  36               	.L2:
  37 0028 2097      		sbiw r28,0
  38 002a 01F0      		breq .L4
  39 002c 8881      		ld r24,Y
  40 002e 8823      		tst r24
  41 0030 01F4      		brne .L5
  42               	.L4:
  43 0032 60E0      		ldi r22,lo8(.LC0)
  44 0034 70E0      		ldi r23,hi8(.LC0)
  45 0036 00C0      		rjmp .L15
  46               	.L5:
  47 0038 DE01      		movw r26,r28
  48 003a 0D90      		ld __tmp_reg__,X+
  49 003c 0020      		tst __tmp_reg__
  50 003e 01F4      		brne .-6
  51 0040 AC1B      		sub r26,r28
  52 0042 BD0B      		sbc r27,r29
  53 0044 1297      		sbiw r26,2
  54 0046 AC0F      		add r26,r28
  55 0048 BD1F      		adc r27,r29
  56 004a 00C0      		rjmp .L6
  57               	.L8:
GAS LISTING C:\Temp/ccRNq1PH.s 			page 2


  58 004c 1197      		sbiw r26,1
  59               	.L6:
  60 004e CA17      		cp r28,r26
  61 0050 DB07      		cpc r29,r27
  62 0052 00F4      		brsh .L7
  63 0054 8C91      		ld r24,X
  64 0056 8F32      		cpi r24,lo8(47)
  65 0058 01F0      		breq .L8
  66               	.L7:
  67 005a 9D01      		movw r18,r26
  68 005c AC17      		cp r26,r28
  69 005e BD07      		cpc r27,r29
  70 0060 01F4      		brne .L11
  71 0062 8C91      		ld r24,X
  72 0064 8F32      		cpi r24,lo8(47)
  73 0066 01F4      		brne .L11
  74 0068 60E0      		ldi r22,lo8(.LC1)
  75 006a 70E0      		ldi r23,hi8(.LC1)
  76               	.L15:
  77 006c 8091 0000 		lds r24,bname.1671
  78 0070 9091 0000 		lds r25,(bname.1671)+1
  79 0074 0E94 0000 		call strcpy
  80 0078 2091 0000 		lds r18,bname.1671
  81 007c 3091 0000 		lds r19,(bname.1671)+1
  82 0080 00C0      		rjmp .L3
  83               	.L11:
  84 0082 C217      		cp r28,r18
  85 0084 D307      		cpc r29,r19
  86 0086 00F4      		brsh .L10
  87 0088 F901      		movw r30,r18
  88 008a 8291      		ld r24,-Z
  89 008c 8F32      		cpi r24,lo8(47)
  90 008e 01F0      		breq .L10
  91 0090 9F01      		movw r18,r30
  92 0092 00C0      		rjmp .L11
  93               	.L10:
  94 0094 ED01      		movw r28,r26
  95 0096 C21B      		sub r28,r18
  96 0098 D30B      		sbc r29,r19
  97 009a CE3F      		cpi r28,254
  98 009c D105      		cpc r29,__zero_reg__
  99 009e 04F0      		brlt .L12
 100 00a0 8FE3      		ldi r24,lo8(63)
 101 00a2 90E0      		ldi r25,hi8(63)
 102 00a4 9093 0000 		sts (errno)+1,r25
 103 00a8 8093 0000 		sts errno,r24
 104               	.L14:
 105 00ac 20E0      		ldi r18,lo8(0)
 106 00ae 30E0      		ldi r19,hi8(0)
 107 00b0 00C0      		rjmp .L3
 108               	.L12:
 109 00b2 B901      		movw r22,r18
 110 00b4 8091 0000 		lds r24,bname.1671
 111 00b8 9091 0000 		lds r25,(bname.1671)+1
 112 00bc 0E94 0000 		call strcpy
 113 00c0 2091 0000 		lds r18,bname.1671
 114 00c4 3091 0000 		lds r19,(bname.1671)+1
GAS LISTING C:\Temp/ccRNq1PH.s 			page 3


 115 00c8 C20F      		add r28,r18
 116 00ca D31F      		adc r29,r19
 117 00cc 1982      		std Y+1,__zero_reg__
 118               	.L3:
 119 00ce C901      		movw r24,r18
 120               	/* epilogue start */
 121 00d0 DF91      		pop r29
 122 00d2 CF91      		pop r28
 123 00d4 0895      		ret
 124               		.size	basename, .-basename
 125               		.lcomm bname.1671,2
GAS LISTING C:\Temp/ccRNq1PH.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 basename.c
  C:\Temp/ccRNq1PH.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccRNq1PH.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccRNq1PH.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccRNq1PH.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccRNq1PH.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccRNq1PH.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccRNq1PH.s:18     .text:00000000 basename
                             .bss:00000000 bname.1671

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
malloc
strcpy
errno
