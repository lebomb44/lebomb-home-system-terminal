GAS LISTING C:\Temp/ccDRRGiL.s 			page 1


   1               		.file	"tcpsock.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutTcpFindSocket
  12               		.type	NutTcpFindSocket, @function
  13               	NutTcpFindSocket:
  14 0000 0F93      		push r16
  15 0002 1F93      		push r17
  16 0004 CF93      		push r28
  17 0006 DF93      		push r29
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20 0008 8C01      		movw r16,r24
  21 000a C091 0000 		lds r28,tcpSocketList
  22 000e D091 0000 		lds r29,(tcpSocketList)+1
  23 0012 FE01      		movw r30,r28
  24 0014 00C0      		rjmp .L2
  25               	.L5:
  26 0016 808D      		ldd r24,Z+24
  27 0018 918D      		ldd r25,Z+25
  28 001a 8017      		cp r24,r16
  29 001c 9107      		cpc r25,r17
  30 001e 01F4      		brne .L3
  31 0020 828D      		ldd r24,Z+26
  32 0022 938D      		ldd r25,Z+27
  33 0024 A48D      		ldd r26,Z+28
  34 0026 B58D      		ldd r27,Z+29
  35 0028 8217      		cp r24,r18
  36 002a 9307      		cpc r25,r19
  37 002c A407      		cpc r26,r20
  38 002e B507      		cpc r27,r21
  39 0030 01F4      		brne .L3
  40 0032 868D      		ldd r24,Z+30
  41 0034 978D      		ldd r25,Z+31
  42 0036 8617      		cp r24,r22
  43 0038 9707      		cpc r25,r23
  44 003a 01F4      		brne .L3
  45 003c 8389      		ldd r24,Z+19
  46 003e 8823      		tst r24
  47 0040 01F0      		breq .L3
  48 0042 9F01      		movw r18,r30
  49 0044 00C0      		rjmp .L4
  50               	.L3:
  51 0046 0190      		ld __tmp_reg__,Z+
  52 0048 F081      		ld r31,Z
  53 004a E02D      		mov r30,__tmp_reg__
  54               	.L2:
  55 004c 3097      		sbiw r30,0
  56 004e 01F4      		brne .L5
  57 0050 00C0      		rjmp .L10
GAS LISTING C:\Temp/ccDRRGiL.s 			page 2


  58               	.L8:
  59 0052 8B89      		ldd r24,Y+19
  60 0054 8130      		cpi r24,lo8(1)
  61 0056 01F4      		brne .L7
  62 0058 888D      		ldd r24,Y+24
  63 005a 998D      		ldd r25,Y+25
  64 005c 8017      		cp r24,r16
  65 005e 9107      		cpc r25,r17
  66 0060 01F4      		brne .L7
  67 0062 9E01      		movw r18,r28
  68 0064 00C0      		rjmp .L4
  69               	.L7:
  70 0066 0990      		ld __tmp_reg__,Y+
  71 0068 D881      		ld r29,Y
  72 006a C02D      		mov r28,__tmp_reg__
  73               	.L10:
  74 006c 2097      		sbiw r28,0
  75 006e 01F4      		brne .L8
  76 0070 20E0      		ldi r18,lo8(0)
  77 0072 30E0      		ldi r19,hi8(0)
  78               	.L4:
  79 0074 C901      		movw r24,r18
  80               	/* epilogue start */
  81 0076 DF91      		pop r29
  82 0078 CF91      		pop r28
  83 007a 1F91      		pop r17
  84 007c 0F91      		pop r16
  85 007e 0895      		ret
  86               		.size	NutTcpFindSocket, .-NutTcpFindSocket
  87               	.global	NutTcpGetSockOpt
  88               		.type	NutTcpGetSockOpt, @function
  89               	NutTcpGetSockOpt:
  90 0080 CF93      		push r28
  91 0082 DF93      		push r29
  92               	/* prologue: function */
  93               	/* frame size = 0 */
  94 0084 FC01      		movw r30,r24
  95 0086 EA01      		movw r28,r20
  96 0088 0097      		sbiw r24,0
  97 008a 01F4      		brne .+2
  98 008c 00C0      		rjmp .L33
  99               	.L12:
 100 008e 80E1      		ldi r24,hi8(4098)
 101 0090 6230      		cpi r22,lo8(4098)
 102 0092 7807      		cpc r23,r24
 103 0094 01F0      		breq .L17
 104 0096 80E1      		ldi r24,hi8(4099)
 105 0098 6330      		cpi r22,lo8(4099)
 106 009a 7807      		cpc r23,r24
 107 009c 04F4      		brge .L20
 108 009e 6230      		cpi r22,2
 109 00a0 7105      		cpc r23,__zero_reg__
 110 00a2 01F0      		breq .L15
 111 00a4 6150      		subi r22,lo8(4097)
 112 00a6 7041      		sbci r23,hi8(4097)
 113 00a8 01F0      		breq .+2
 114 00aa 00C0      		rjmp .L14
GAS LISTING C:\Temp/ccDRRGiL.s 			page 3


 115 00ac 00C0      		rjmp .L38
 116               	.L20:
 117 00ae 80E1      		ldi r24,hi8(4101)
 118 00b0 6530      		cpi r22,lo8(4101)
 119 00b2 7807      		cpc r23,r24
 120 00b4 01F0      		breq .L18
 121 00b6 6650      		subi r22,lo8(4102)
 122 00b8 7041      		sbci r23,hi8(4102)
 123 00ba 01F0      		breq .+2
 124 00bc 00C0      		rjmp .L14
 125 00be 00C0      		rjmp .L39
 126               	.L15:
 127 00c0 4115      		cp r20,__zero_reg__
 128 00c2 5105      		cpc r21,__zero_reg__
 129 00c4 01F0      		breq .L29
 130 00c6 2230      		cpi r18,2
 131 00c8 3105      		cpc r19,__zero_reg__
 132 00ca 01F4      		brne .L29
 133               	.L22:
 134 00cc EE5A      		subi r30,lo8(-(82))
 135 00ce FF4F      		sbci r31,hi8(-(82))
 136 00d0 00C0      		rjmp .L36
 137               	.L17:
 138 00d2 4115      		cp r20,__zero_reg__
 139 00d4 5105      		cpc r21,__zero_reg__
 140 00d6 01F0      		breq .L29
 141 00d8 2230      		cpi r18,2
 142 00da 3105      		cpc r19,__zero_reg__
 143 00dc 01F4      		brne .L29
 144               	.L24:
 145 00de E85B      		subi r30,lo8(-(72))
 146 00e0 FF4F      		sbci r31,hi8(-(72))
 147               	.L36:
 148 00e2 8081      		ld r24,Z
 149 00e4 9181      		ldd r25,Z+1
 150 00e6 00C0      		rjmp .L34
 151               	.L18:
 152 00e8 4115      		cp r20,__zero_reg__
 153 00ea 5105      		cpc r21,__zero_reg__
 154 00ec 01F0      		breq .L29
 155 00ee 2430      		cpi r18,4
 156 00f0 3105      		cpc r19,__zero_reg__
 157 00f2 01F4      		brne .L29
 158               	.L26:
 159 00f4 E659      		subi r30,lo8(-(106))
 160 00f6 FF4F      		sbci r31,hi8(-(106))
 161 00f8 00C0      		rjmp .L37
 162               	.L39:
 163 00fa 4115      		cp r20,__zero_reg__
 164 00fc 5105      		cpc r21,__zero_reg__
 165 00fe 01F0      		breq .L29
 166 0100 2430      		cpi r18,4
 167 0102 3105      		cpc r19,__zero_reg__
 168 0104 01F4      		brne .L29
 169               	.L28:
 170 0106 EA59      		subi r30,lo8(-(102))
 171 0108 FF4F      		sbci r31,hi8(-(102))
GAS LISTING C:\Temp/ccDRRGiL.s 			page 4


 172               	.L37:
 173 010a 8081      		ld r24,Z
 174 010c 9181      		ldd r25,Z+1
 175 010e A281      		ldd r26,Z+2
 176 0110 B381      		ldd r27,Z+3
 177 0112 8883      		st Y,r24
 178 0114 9983      		std Y+1,r25
 179 0116 AA83      		std Y+2,r26
 180 0118 BB83      		std Y+3,r27
 181 011a 00C0      		rjmp .L35
 182               	.L38:
 183 011c 4115      		cp r20,__zero_reg__
 184 011e 5105      		cpc r21,__zero_reg__
 185 0120 01F0      		breq .L29
 186 0122 2230      		cpi r18,2
 187 0124 3105      		cpc r19,__zero_reg__
 188 0126 01F0      		breq .L30
 189               	.L29:
 190 0128 E05A      		subi r30,lo8(-(96))
 191 012a FF4F      		sbci r31,hi8(-(96))
 192 012c 86E1      		ldi r24,lo8(22)
 193 012e 90E0      		ldi r25,hi8(22)
 194 0130 00C0      		rjmp .L32
 195               	.L30:
 196 0132 8189      		ldd r24,Z+17
 197 0134 9289      		ldd r25,Z+18
 198               	.L34:
 199 0136 9983      		std Y+1,r25
 200 0138 8883      		st Y,r24
 201               	.L35:
 202 013a 20E0      		ldi r18,lo8(0)
 203 013c 30E0      		ldi r19,hi8(0)
 204 013e 00C0      		rjmp .L13
 205               	.L14:
 206 0140 E05A      		subi r30,lo8(-(96))
 207 0142 FF4F      		sbci r31,hi8(-(96))
 208 0144 8AE2      		ldi r24,lo8(42)
 209 0146 90E0      		ldi r25,hi8(42)
 210               	.L32:
 211 0148 9183      		std Z+1,r25
 212 014a 8083      		st Z,r24
 213               	.L33:
 214 014c 2FEF      		ldi r18,lo8(-1)
 215 014e 3FEF      		ldi r19,hi8(-1)
 216               	.L13:
 217 0150 C901      		movw r24,r18
 218               	/* epilogue start */
 219 0152 DF91      		pop r29
 220 0154 CF91      		pop r28
 221 0156 0895      		ret
 222               		.size	NutTcpGetSockOpt, .-NutTcpGetSockOpt
 223               	.global	NutTcpError
 224               		.type	NutTcpError, @function
 225               	NutTcpError:
 226               	/* prologue: function */
 227               	/* frame size = 0 */
 228 0158 FC01      		movw r30,r24
GAS LISTING C:\Temp/ccDRRGiL.s 			page 5


 229 015a 0097      		sbiw r24,0
 230 015c 01F4      		brne .L41
 231 015e 26E2      		ldi r18,lo8(38)
 232 0160 30E0      		ldi r19,hi8(38)
 233 0162 00C0      		rjmp .L42
 234               	.L41:
 235 0164 E05A      		subi r30,lo8(-(96))
 236 0166 FF4F      		sbci r31,hi8(-(96))
 237 0168 2081      		ld r18,Z
 238 016a 3181      		ldd r19,Z+1
 239               	.L42:
 240 016c C901      		movw r24,r18
 241               	/* epilogue start */
 242 016e 0895      		ret
 243               		.size	NutTcpError, .-NutTcpError
 244               	.global	NutTcpDeviceIOCtl
 245               		.type	NutTcpDeviceIOCtl, @function
 246               	NutTcpDeviceIOCtl:
 247 0170 CF93      		push r28
 248 0172 DF93      		push r29
 249               	/* prologue: function */
 250               	/* frame size = 0 */
 251 0174 DC01      		movw r26,r24
 252 0176 EA01      		movw r28,r20
 253 0178 6A30      		cpi r22,10
 254 017a 7105      		cpc r23,__zero_reg__
 255 017c 01F0      		breq .L46
 256 017e 6A30      		cpi r22,10
 257 0180 7105      		cpc r23,__zero_reg__
 258 0182 04F0      		brlt .L45
 259 0184 6B30      		cpi r22,11
 260 0186 7105      		cpc r23,__zero_reg__
 261 0188 01F0      		breq .L47
 262 018a 6C30      		cpi r22,12
 263 018c 7105      		cpc r23,__zero_reg__
 264 018e 01F0      		breq .L46
 265               	.L45:
 266 0190 2FEF      		ldi r18,lo8(-1)
 267 0192 3FEF      		ldi r19,hi8(-1)
 268 0194 00C0      		rjmp .L48
 269               	.L46:
 270 0196 FD01      		movw r30,r26
 271 0198 E65B      		subi r30,lo8(-(74))
 272 019a FF4F      		sbci r31,hi8(-(74))
 273 019c AA5B      		subi r26,lo8(-(70))
 274 019e BF4F      		sbci r27,hi8(-(70))
 275 01a0 8D91      		ld r24,X+
 276 01a2 9C91      		ld r25,X
 277 01a4 2081      		ld r18,Z
 278 01a6 3181      		ldd r19,Z+1
 279 01a8 821B      		sub r24,r18
 280 01aa 930B      		sbc r25,r19
 281 01ac AA27      		clr r26
 282 01ae 97FD      		sbrc r25,7
 283 01b0 A095      		com r26
 284 01b2 BA2F      		mov r27,r26
 285 01b4 00C0      		rjmp .L50
GAS LISTING C:\Temp/ccDRRGiL.s 			page 6


 286               	.L47:
 287 01b6 1D96      		adiw r26,13
 288 01b8 8D91      		ld r24,X+
 289 01ba 9C91      		ld r25,X
 290 01bc 1E97      		sbiw r26,13+1
 291 01be A0E0      		ldi r26,lo8(0)
 292 01c0 B0E0      		ldi r27,hi8(0)
 293               	.L50:
 294 01c2 8883      		st Y,r24
 295 01c4 9983      		std Y+1,r25
 296 01c6 AA83      		std Y+2,r26
 297 01c8 BB83      		std Y+3,r27
 298 01ca 20E0      		ldi r18,lo8(0)
 299 01cc 30E0      		ldi r19,hi8(0)
 300               	.L48:
 301 01ce C901      		movw r24,r18
 302               	/* epilogue start */
 303 01d0 DF91      		pop r29
 304 01d2 CF91      		pop r28
 305 01d4 0895      		ret
 306               		.size	NutTcpDeviceIOCtl, .-NutTcpDeviceIOCtl
 307               	.global	NutTcpDiscardBuffers
 308               		.type	NutTcpDiscardBuffers, @function
 309               	NutTcpDiscardBuffers:
 310 01d6 0F93      		push r16
 311 01d8 1F93      		push r17
 312 01da CF93      		push r28
 313 01dc DF93      		push r29
 314               	/* prologue: function */
 315               	/* frame size = 0 */
 316 01de EC01      		movw r28,r24
 317 01e0 8C01      		movw r16,r24
 318 01e2 045B      		subi r16,lo8(-(76))
 319 01e4 1F4F      		sbci r17,hi8(-(76))
 320 01e6 00C0      		rjmp .L52
 321               	.L53:
 322 01e8 8081      		ld r24,Z
 323 01ea 9181      		ldd r25,Z+1
 324 01ec D801      		movw r26,r16
 325 01ee 8D93      		st X+,r24
 326 01f0 9C93      		st X,r25
 327 01f2 CF01      		movw r24,r30
 328 01f4 0E94 0000 		call NutNetBufFree
 329               	.L52:
 330 01f8 D801      		movw r26,r16
 331 01fa ED91      		ld r30,X+
 332 01fc FC91      		ld r31,X
 333 01fe 3097      		sbiw r30,0
 334 0200 01F4      		brne .L53
 335 0202 00C0      		rjmp .L59
 336               	.L55:
 337 0204 8081      		ld r24,Z
 338 0206 9181      		ldd r25,Z+1
 339 0208 99AF      		std Y+57,r25
 340 020a 88AF      		std Y+56,r24
 341 020c CF01      		movw r24,r30
 342 020e 0E94 0000 		call NutNetBufFree
GAS LISTING C:\Temp/ccDRRGiL.s 			page 7


 343               	.L59:
 344 0212 E8AD      		ldd r30,Y+56
 345 0214 F9AD      		ldd r31,Y+57
 346 0216 3097      		sbiw r30,0
 347 0218 01F4      		brne .L55
 348 021a 00C0      		rjmp .L62
 349               	.L57:
 350 021c 8081      		ld r24,Z
 351 021e 9181      		ldd r25,Z+1
 352 0220 9983      		std Y+1,r25
 353 0222 8883      		st Y,r24
 354 0224 CF01      		movw r24,r30
 355 0226 0E94 0000 		call NutNetBufFree
 356 022a 00C0      		rjmp .L61
 357               	.L62:
 358 022c C05B      		subi r28,lo8(-(80))
 359 022e DF4F      		sbci r29,hi8(-(80))
 360               	.L61:
 361 0230 E881      		ld r30,Y
 362 0232 F981      		ldd r31,Y+1
 363 0234 3097      		sbiw r30,0
 364 0236 01F4      		brne .L57
 365               	/* epilogue start */
 366 0238 DF91      		pop r29
 367 023a CF91      		pop r28
 368 023c 1F91      		pop r17
 369 023e 0F91      		pop r16
 370 0240 0895      		ret
 371               		.size	NutTcpDiscardBuffers, .-NutTcpDiscardBuffers
 372               	.global	NutTcpReceive
 373               		.type	NutTcpReceive, @function
 374               	NutTcpReceive:
 375 0242 2F92      		push r2
 376 0244 3F92      		push r3
 377 0246 4F92      		push r4
 378 0248 5F92      		push r5
 379 024a 6F92      		push r6
 380 024c 7F92      		push r7
 381 024e 8F92      		push r8
 382 0250 9F92      		push r9
 383 0252 AF92      		push r10
 384 0254 BF92      		push r11
 385 0256 CF92      		push r12
 386 0258 DF92      		push r13
 387 025a EF92      		push r14
 388 025c FF92      		push r15
 389 025e 0F93      		push r16
 390 0260 1F93      		push r17
 391 0262 DF93      		push r29
 392 0264 CF93      		push r28
 393 0266 00D0      		rcall .
 394 0268 00D0      		rcall .
 395 026a CDB7      		in r28,__SP_L__
 396 026c DEB7      		in r29,__SP_H__
 397               	/* prologue: function */
 398               	/* frame size = 4 */
 399 026e 9C83      		std Y+4,r25
GAS LISTING C:\Temp/ccDRRGiL.s 			page 8


 400 0270 8B83      		std Y+3,r24
 401 0272 7A83      		std Y+2,r23
 402 0274 6983      		std Y+1,r22
 403 0276 4A01      		movw r8,r20
 404 0278 0E94 0000 		call NutThreadYield
 405 027c 2B81      		ldd r18,Y+3
 406 027e 3C81      		ldd r19,Y+4
 407 0280 232B      		or r18,r19
 408 0282 01F0      		breq .L82
 409               	.L64:
 410 0284 EB81      		ldd r30,Y+3
 411 0286 FC81      		ldd r31,Y+4
 412 0288 8389      		ldd r24,Z+19
 413 028a 8430      		cpi r24,lo8(4)
 414 028c 01F0      		breq .L66
 415 028e 8389      		ldd r24,Z+19
 416 0290 8530      		cpi r24,lo8(5)
 417 0292 01F4      		brne .L81
 418               	.L66:
 419 0294 2981      		ldd r18,Y+1
 420 0296 3A81      		ldd r19,Y+2
 421 0298 232B      		or r18,r19
 422 029a 01F4      		brne .+2
 423 029c 00C0      		rjmp .L67
 424 029e 8114      		cp r8,__zero_reg__
 425 02a0 9104      		cpc r9,__zero_reg__
 426 02a2 01F4      		brne .+2
 427 02a4 00C0      		rjmp .L65
 428 02a6 4EE4      		ldi r20,lo8(78)
 429 02a8 A42E      		mov r10,r20
 430 02aa B12C      		mov r11,__zero_reg__
 431 02ac 6B81      		ldd r22,Y+3
 432 02ae 7C81      		ldd r23,Y+4
 433 02b0 A60E      		add r10,r22
 434 02b2 B71E      		adc r11,r23
 435 02b4 36E4      		ldi r19,lo8(70)
 436 02b6 C32E      		mov r12,r19
 437 02b8 D12C      		mov r13,__zero_reg__
 438 02ba C60E      		add r12,r22
 439 02bc D71E      		adc r13,r23
 440 02be 2AE4      		ldi r18,lo8(74)
 441 02c0 E22E      		mov r14,r18
 442 02c2 F12C      		mov r15,__zero_reg__
 443 02c4 E60E      		add r14,r22
 444 02c6 F71E      		adc r15,r23
 445 02c8 8B01      		movw r16,r22
 446 02ca 0A59      		subi r16,lo8(-(102))
 447 02cc 1F4F      		sbci r17,hi8(-(102))
 448 02ce 00C0      		rjmp .L68
 449               	.L70:
 450 02d0 EB81      		ldd r30,Y+3
 451 02d2 FC81      		ldd r31,Y+4
 452 02d4 8389      		ldd r24,Z+19
 453 02d6 8430      		cpi r24,lo8(4)
 454 02d8 01F0      		breq .L69
 455               	.L81:
 456 02da E05A      		subi r30,lo8(-(96))
GAS LISTING C:\Temp/ccDRRGiL.s 			page 9


 457 02dc FF4F      		sbci r31,hi8(-(96))
 458 02de 89E3      		ldi r24,lo8(57)
 459 02e0 90E0      		ldi r25,hi8(57)
 460 02e2 9183      		std Z+1,r25
 461 02e4 8083      		st Z,r24
 462               	.L82:
 463 02e6 8824      		clr r8
 464 02e8 8A94      		dec r8
 465 02ea 982C      		mov r9,r8
 466 02ec 00C0      		rjmp .L65
 467               	.L69:
 468 02ee F801      		movw r30,r16
 469 02f0 4081      		ld r20,Z
 470 02f2 5181      		ldd r21,Z+1
 471 02f4 6281      		ldd r22,Z+2
 472 02f6 7381      		ldd r23,Z+3
 473 02f8 C501      		movw r24,r10
 474 02fa 0E94 0000 		call NutEventWait
 475 02fe 892B      		or r24,r25
 476 0300 01F0      		breq .+2
 477 0302 00C0      		rjmp .L67
 478               	.L68:
 479 0304 F601      		movw r30,r12
 480 0306 8081      		ld r24,Z
 481 0308 9181      		ldd r25,Z+1
 482 030a F701      		movw r30,r14
 483 030c 2081      		ld r18,Z
 484 030e 3181      		ldd r19,Z+1
 485 0310 8217      		cp r24,r18
 486 0312 9307      		cpc r25,r19
 487 0314 01F0      		breq .L70
 488 0316 821B      		sub r24,r18
 489 0318 930B      		sbc r25,r19
 490 031a 8815      		cp r24,r8
 491 031c 9905      		cpc r25,r9
 492 031e 04F4      		brge .L71
 493 0320 0097      		sbiw r24,0
 494 0322 01F4      		brne .+2
 495 0324 00C0      		rjmp .L67
 496               	.L72:
 497 0326 4C01      		movw r8,r24
 498               	.L71:
 499 0328 7901      		movw r14,r18
 500 032a 6624      		clr r6
 501 032c 7724      		clr r7
 502 032e 9CE4      		ldi r25,lo8(76)
 503 0330 292E      		mov r2,r25
 504 0332 312C      		mov r3,__zero_reg__
 505 0334 2B81      		ldd r18,Y+3
 506 0336 3C81      		ldd r19,Y+4
 507 0338 220E      		add r2,r18
 508 033a 331E      		adc r3,r19
 509 033c 86E4      		ldi r24,lo8(70)
 510 033e 482E      		mov r4,r24
 511 0340 512C      		mov r5,__zero_reg__
 512 0342 420E      		add r4,r18
 513 0344 531E      		adc r5,r19
GAS LISTING C:\Temp/ccDRRGiL.s 			page 10


 514 0346 00C0      		rjmp .L73
 515               	.L77:
 516 0348 F101      		movw r30,r2
 517 034a A080      		ld r10,Z
 518 034c B180      		ldd r11,Z+1
 519 034e F501      		movw r30,r10
 520 0350 C188      		ldd r12,Z+17
 521 0352 D288      		ldd r13,Z+18
 522 0354 CE18      		sub r12,r14
 523 0356 DF08      		sbc r13,r15
 524 0358 8401      		movw r16,r8
 525 035a 0619      		sub r16,r6
 526 035c 1709      		sbc r17,r7
 527 035e C016      		cp r12,r16
 528 0360 D106      		cpc r13,r17
 529 0362 00F4      		brsh .L74
 530 0364 8601      		movw r16,r12
 531               	.L74:
 532 0366 2981      		ldd r18,Y+1
 533 0368 3A81      		ldd r19,Y+2
 534 036a 260D      		add r18,r6
 535 036c 371D      		adc r19,r7
 536 036e F501      		movw r30,r10
 537 0370 8785      		ldd r24,Z+15
 538 0372 9089      		ldd r25,Z+16
 539 0374 8E0D      		add r24,r14
 540 0376 9F1D      		adc r25,r15
 541 0378 A801      		movw r20,r16
 542 037a BC01      		movw r22,r24
 543 037c C901      		movw r24,r18
 544 037e 0E94 0000 		call memcpy
 545 0382 E00E      		add r14,r16
 546 0384 F11E      		adc r15,r17
 547 0386 0C15      		cp r16,r12
 548 0388 1D05      		cpc r17,r13
 549 038a 00F0      		brlo .L76
 550 038c F501      		movw r30,r10
 551 038e 8081      		ld r24,Z
 552 0390 9181      		ldd r25,Z+1
 553 0392 F101      		movw r30,r2
 554 0394 9183      		std Z+1,r25
 555 0396 8083      		st Z,r24
 556 0398 F201      		movw r30,r4
 557 039a 8081      		ld r24,Z
 558 039c 9181      		ldd r25,Z+1
 559 039e 8E19      		sub r24,r14
 560 03a0 9F09      		sbc r25,r15
 561 03a2 9183      		std Z+1,r25
 562 03a4 8083      		st Z,r24
 563 03a6 C501      		movw r24,r10
 564 03a8 0E94 0000 		call NutNetBufFree
 565 03ac EE24      		clr r14
 566 03ae FF24      		clr r15
 567               	.L76:
 568 03b0 600E      		add r6,r16
 569 03b2 711E      		adc r7,r17
 570               	.L73:
GAS LISTING C:\Temp/ccDRRGiL.s 			page 11


 571 03b4 6814      		cp r6,r8
 572 03b6 7904      		cpc r7,r9
 573 03b8 00F0      		brlo .L77
 574 03ba 2B81      		ldd r18,Y+3
 575 03bc 3C81      		ldd r19,Y+4
 576 03be 265B      		subi r18,lo8(-(74))
 577 03c0 3F4F      		sbci r19,hi8(-(74))
 578 03c2 F901      		movw r30,r18
 579 03c4 F182      		std Z+1,r15
 580 03c6 E082      		st Z,r14
 581 03c8 EA54      		subi r30,lo8(-(-74))
 582 03ca F040      		sbci r31,hi8(-(-74))
 583 03cc FC83      		std Y+4,r31
 584 03ce EB83      		std Y+3,r30
 585 03d0 8389      		ldd r24,Z+19
 586 03d2 8430      		cpi r24,lo8(4)
 587 03d4 01F4      		brne .L65
 588 03d6 EC5B      		subi r30,lo8(-(68))
 589 03d8 FF4F      		sbci r31,hi8(-(68))
 590 03da 4081      		ld r20,Z
 591 03dc 5181      		ldd r21,Z+1
 592 03de 3496      		adiw r30,4
 593 03e0 2081      		ld r18,Z
 594 03e2 3181      		ldd r19,Z+1
 595 03e4 E854      		subi r30,lo8(-(-72))
 596 03e6 F040      		sbci r31,hi8(-(-72))
 597 03e8 FC83      		std Y+4,r31
 598 03ea EB83      		std Y+3,r30
 599 03ec C401      		movw r24,r8
 600 03ee 840F      		add r24,r20
 601 03f0 951F      		adc r25,r21
 602 03f2 2817      		cp r18,r24
 603 03f4 3907      		cpc r19,r25
 604 03f6 04F4      		brge .L78
 605 03f8 C901      		movw r24,r18
 606               	.L78:
 607 03fa 2B81      		ldd r18,Y+3
 608 03fc 3C81      		ldd r19,Y+4
 609 03fe 2E5A      		subi r18,lo8(-(82))
 610 0400 3F4F      		sbci r19,hi8(-(82))
 611 0402 F901      		movw r30,r18
 612 0404 2081      		ld r18,Z
 613 0406 3181      		ldd r19,Z+1
 614 0408 E255      		subi r30,lo8(-(-82))
 615 040a F040      		sbci r31,hi8(-(-82))
 616 040c FC83      		std Y+4,r31
 617 040e EB83      		std Y+3,r30
 618 0410 2417      		cp r18,r20
 619 0412 3507      		cpc r19,r21
 620 0414 00F0      		brlo .L79
 621 0416 2817      		cp r18,r24
 622 0418 3907      		cpc r19,r25
 623 041a 00F4      		brsh .L79
 624 041c EC5B      		subi r30,lo8(-(68))
 625 041e FF4F      		sbci r31,hi8(-(68))
 626 0420 9183      		std Z+1,r25
 627 0422 8083      		st Z,r24
GAS LISTING C:\Temp/ccDRRGiL.s 			page 12


 628 0424 E454      		subi r30,lo8(-(-68))
 629 0426 F040      		sbci r31,hi8(-(-68))
 630 0428 FC83      		std Y+4,r31
 631 042a EB83      		std Y+3,r30
 632 042c CF01      		movw r24,r30
 633 042e 0E94 0000 		call NutTcpStateWindowEvent
 634 0432 00C0      		rjmp .L65
 635               	.L79:
 636 0434 2B81      		ldd r18,Y+3
 637 0436 3C81      		ldd r19,Y+4
 638 0438 2C5B      		subi r18,lo8(-(68))
 639 043a 3F4F      		sbci r19,hi8(-(68))
 640 043c F901      		movw r30,r18
 641 043e 9183      		std Z+1,r25
 642 0440 8083      		st Z,r24
 643 0442 00C0      		rjmp .L65
 644               	.L67:
 645 0444 8824      		clr r8
 646 0446 9924      		clr r9
 647               	.L65:
 648 0448 C401      		movw r24,r8
 649               	/* epilogue start */
 650 044a 0F90      		pop __tmp_reg__
 651 044c 0F90      		pop __tmp_reg__
 652 044e 0F90      		pop __tmp_reg__
 653 0450 0F90      		pop __tmp_reg__
 654 0452 CF91      		pop r28
 655 0454 DF91      		pop r29
 656 0456 1F91      		pop r17
 657 0458 0F91      		pop r16
 658 045a FF90      		pop r15
 659 045c EF90      		pop r14
 660 045e DF90      		pop r13
 661 0460 CF90      		pop r12
 662 0462 BF90      		pop r11
 663 0464 AF90      		pop r10
 664 0466 9F90      		pop r9
 665 0468 8F90      		pop r8
 666 046a 7F90      		pop r7
 667 046c 6F90      		pop r6
 668 046e 5F90      		pop r5
 669 0470 4F90      		pop r4
 670 0472 3F90      		pop r3
 671 0474 2F90      		pop r2
 672 0476 0895      		ret
 673               		.size	NutTcpReceive, .-NutTcpReceive
 674               	.global	NutTcpDeviceRead
 675               		.type	NutTcpDeviceRead, @function
 676               	NutTcpDeviceRead:
 677               	/* prologue: function */
 678               	/* frame size = 0 */
 679 0478 0E94 0000 		call NutTcpReceive
 680               	/* epilogue start */
 681 047c 0895      		ret
 682               		.size	NutTcpDeviceRead, .-NutTcpDeviceRead
 683               	.global	NutTcpSend
 684               		.type	NutTcpSend, @function
GAS LISTING C:\Temp/ccDRRGiL.s 			page 13


 685               	NutTcpSend:
 686 047e 8F92      		push r8
 687 0480 9F92      		push r9
 688 0482 AF92      		push r10
 689 0484 BF92      		push r11
 690 0486 CF92      		push r12
 691 0488 DF92      		push r13
 692 048a EF92      		push r14
 693 048c FF92      		push r15
 694 048e 0F93      		push r16
 695 0490 1F93      		push r17
 696 0492 CF93      		push r28
 697 0494 DF93      		push r29
 698               	/* prologue: function */
 699               	/* frame size = 0 */
 700 0496 EC01      		movw r28,r24
 701 0498 4B01      		movw r8,r22
 702 049a 8A01      		movw r16,r20
 703 049c 0E94 0000 		call NutThreadYield
 704 04a0 2097      		sbiw r28,0
 705 04a2 01F4      		brne .+2
 706 04a4 00C0      		rjmp .L86
 707 04a6 8114      		cp r8,__zero_reg__
 708 04a8 9104      		cpc r9,__zero_reg__
 709 04aa 01F4      		brne .+2
 710 04ac 00C0      		rjmp .L87
 711 04ae 0115      		cp r16,__zero_reg__
 712 04b0 1105      		cpc r17,__zero_reg__
 713 04b2 01F4      		brne .+2
 714 04b4 00C0      		rjmp .L88
 715 04b6 CE5A      		subi r28,lo8(-(82))
 716 04b8 DF4F      		sbci r29,hi8(-(82))
 717 04ba 8881      		ld r24,Y
 718 04bc 9981      		ldd r25,Y+1
 719 04be C255      		subi r28,lo8(-(-82))
 720 04c0 D040      		sbci r29,hi8(-(-82))
 721 04c2 8017      		cp r24,r16
 722 04c4 9107      		cpc r25,r17
 723 04c6 00F4      		brsh .L89
 724 04c8 8C01      		movw r16,r24
 725               	.L89:
 726 04ca FAE3      		ldi r31,lo8(58)
 727 04cc AF2E      		mov r10,r31
 728 04ce B12C      		mov r11,__zero_reg__
 729 04d0 AC0E      		add r10,r28
 730 04d2 BD1E      		adc r11,r29
 731 04d4 E2E5      		ldi r30,lo8(82)
 732 04d6 CE2E      		mov r12,r30
 733 04d8 D12C      		mov r13,__zero_reg__
 734 04da CC0E      		add r12,r28
 735 04dc DD1E      		adc r13,r29
 736 04de 7AE6      		ldi r23,lo8(106)
 737 04e0 E72E      		mov r14,r23
 738 04e2 F12C      		mov r15,__zero_reg__
 739 04e4 EC0E      		add r14,r28
 740 04e6 FD1E      		adc r15,r29
 741               	.L93:
GAS LISTING C:\Temp/ccDRRGiL.s 			page 14


 742 04e8 8B89      		ldd r24,Y+19
 743 04ea 8430      		cpi r24,lo8(4)
 744 04ec 01F0      		breq .L90
 745 04ee C05A      		subi r28,lo8(-(96))
 746 04f0 DF4F      		sbci r29,hi8(-(96))
 747 04f2 89E3      		ldi r24,lo8(57)
 748 04f4 90E0      		ldi r25,hi8(57)
 749 04f6 9983      		std Y+1,r25
 750 04f8 8883      		st Y,r24
 751 04fa 00C0      		rjmp .L86
 752               	.L90:
 753 04fc 49A5      		ldd r20,Y+41
 754 04fe 5AA5      		ldd r21,Y+42
 755 0500 8DA1      		ldd r24,Y+37
 756 0502 9EA1      		ldd r25,Y+38
 757 0504 481B      		sub r20,r24
 758 0506 590B      		sbc r21,r25
 759 0508 9A01      		movw r18,r20
 760 050a 3695      		lsr r19
 761 050c 2795      		ror r18
 762 050e 3695      		lsr r19
 763 0510 2795      		ror r18
 764 0512 F601      		movw r30,r12
 765 0514 8081      		ld r24,Z
 766 0516 9181      		ldd r25,Z+1
 767 0518 2817      		cp r18,r24
 768 051a 3907      		cpc r19,r25
 769 051c 00F4      		brsh .L91
 770 051e 8DA9      		ldd r24,Y+53
 771 0520 9EA9      		ldd r25,Y+54
 772 0522 841B      		sub r24,r20
 773 0524 950B      		sbc r25,r21
 774 0526 8017      		cp r24,r16
 775 0528 9107      		cpc r25,r17
 776 052a 00F4      		brsh .L92
 777               	.L91:
 778 052c F701      		movw r30,r14
 779 052e 4081      		ld r20,Z
 780 0530 5181      		ldd r21,Z+1
 781 0532 6281      		ldd r22,Z+2
 782 0534 7381      		ldd r23,Z+3
 783 0536 C501      		movw r24,r10
 784 0538 0E94 0000 		call NutEventWait
 785 053c 892B      		or r24,r25
 786 053e 01F0      		breq .L93
 787 0540 00C0      		rjmp .L87
 788               	.L92:
 789 0542 88A1      		ldd r24,Y+32
 790 0544 8061      		ori r24,lo8(16)
 791 0546 88A3      		std Y+32,r24
 792 0548 A801      		movw r20,r16
 793 054a B401      		movw r22,r8
 794 054c CE01      		movw r24,r28
 795 054e 0E94 0000 		call NutTcpOutput
 796 0552 892B      		or r24,r25
 797 0554 01F0      		breq .L88
 798               	.L86:
GAS LISTING C:\Temp/ccDRRGiL.s 			page 15


 799 0556 0FEF      		ldi r16,lo8(-1)
 800 0558 1FEF      		ldi r17,hi8(-1)
 801 055a 00C0      		rjmp .L88
 802               	.L87:
 803 055c 00E0      		ldi r16,lo8(0)
 804 055e 10E0      		ldi r17,hi8(0)
 805               	.L88:
 806 0560 C801      		movw r24,r16
 807               	/* epilogue start */
 808 0562 DF91      		pop r29
 809 0564 CF91      		pop r28
 810 0566 1F91      		pop r17
 811 0568 0F91      		pop r16
 812 056a FF90      		pop r15
 813 056c EF90      		pop r14
 814 056e DF90      		pop r13
 815 0570 CF90      		pop r12
 816 0572 BF90      		pop r11
 817 0574 AF90      		pop r10
 818 0576 9F90      		pop r9
 819 0578 8F90      		pop r8
 820 057a 0895      		ret
 821               		.size	NutTcpSend, .-NutTcpSend
 822               		.type	SendBuffer, @function
 823               	SendBuffer:
 824 057c CF92      		push r12
 825 057e DF92      		push r13
 826 0580 EF92      		push r14
 827 0582 FF92      		push r15
 828 0584 0F93      		push r16
 829 0586 1F93      		push r17
 830 0588 CF93      		push r28
 831 058a DF93      		push r29
 832               	/* prologue: function */
 833               	/* frame size = 0 */
 834 058c 6C01      		movw r12,r24
 835 058e 7B01      		movw r14,r22
 836 0590 8A01      		movw r16,r20
 837 0592 C0E0      		ldi r28,lo8(0)
 838 0594 D0E0      		ldi r29,hi8(0)
 839 0596 00C0      		rjmp .L96
 840               	.L99:
 841 0598 A801      		movw r20,r16
 842 059a 4C1B      		sub r20,r28
 843 059c 5D0B      		sbc r21,r29
 844 059e B701      		movw r22,r14
 845 05a0 6C0F      		add r22,r28
 846 05a2 7D1F      		adc r23,r29
 847 05a4 C601      		movw r24,r12
 848 05a6 0E94 0000 		call NutTcpSend
 849 05aa 1816      		cp __zero_reg__,r24
 850 05ac 1906      		cpc __zero_reg__,r25
 851 05ae 04F0      		brlt .L97
 852 05b0 CFEF      		ldi r28,lo8(-1)
 853 05b2 DFEF      		ldi r29,hi8(-1)
 854 05b4 00C0      		rjmp .L98
 855               	.L97:
GAS LISTING C:\Temp/ccDRRGiL.s 			page 16


 856 05b6 C80F      		add r28,r24
 857 05b8 D91F      		adc r29,r25
 858               	.L96:
 859 05ba C017      		cp r28,r16
 860 05bc D107      		cpc r29,r17
 861 05be 04F0      		brlt .L99
 862               	.L98:
 863 05c0 CE01      		movw r24,r28
 864               	/* epilogue start */
 865 05c2 DF91      		pop r29
 866 05c4 CF91      		pop r28
 867 05c6 1F91      		pop r17
 868 05c8 0F91      		pop r16
 869 05ca FF90      		pop r15
 870 05cc EF90      		pop r14
 871 05ce DF90      		pop r13
 872 05d0 CF90      		pop r12
 873 05d2 0895      		ret
 874               		.size	SendBuffer, .-SendBuffer
 875               	.global	NutTcpDeviceWrite
 876               		.type	NutTcpDeviceWrite, @function
 877               	NutTcpDeviceWrite:
 878 05d4 AF92      		push r10
 879 05d6 BF92      		push r11
 880 05d8 CF92      		push r12
 881 05da DF92      		push r13
 882 05dc EF92      		push r14
 883 05de FF92      		push r15
 884 05e0 0F93      		push r16
 885 05e2 1F93      		push r17
 886 05e4 CF93      		push r28
 887 05e6 DF93      		push r29
 888               	/* prologue: function */
 889               	/* frame size = 0 */
 890 05e8 8C01      		movw r16,r24
 891 05ea E72F      		mov r30,r23
 892 05ec 6A01      		movw r12,r20
 893 05ee 0097      		sbiw r24,0
 894 05f0 01F4      		brne .+2
 895 05f2 00C0      		rjmp .L102
 896 05f4 DC01      		movw r26,r24
 897 05f6 5396      		adiw r26,19
 898 05f8 8C91      		ld r24,X
 899 05fa 8430      		cpi r24,lo8(4)
 900 05fc 01F0      		breq .L103
 901 05fe 005A      		subi r16,lo8(-(96))
 902 0600 1F4F      		sbci r17,hi8(-(96))
 903 0602 89E3      		ldi r24,lo8(57)
 904 0604 90E0      		ldi r25,hi8(57)
 905 0606 F801      		movw r30,r16
 906 0608 9183      		std Z+1,r25
 907 060a 8083      		st Z,r24
 908 060c 00C0      		rjmp .L102
 909               	.L103:
 910 060e D801      		movw r26,r16
 911 0610 1D96      		adiw r26,13
 912 0612 4D91      		ld r20,X+
GAS LISTING C:\Temp/ccDRRGiL.s 			page 17


 913 0614 5C91      		ld r21,X
 914 0616 1E97      		sbiw r26,13+1
 915 0618 C114      		cp r12,__zero_reg__
 916 061a D104      		cpc r13,__zero_reg__
 917 061c 01F4      		brne .L105
 918 061e 4115      		cp r20,__zero_reg__
 919 0620 5105      		cpc r21,__zero_reg__
 920 0622 01F4      		brne .+2
 921 0624 00C0      		rjmp .L104
 922 0626 1F96      		adiw r26,15
 923 0628 6D91      		ld r22,X+
 924 062a 7C91      		ld r23,X
 925 062c 5097      		sbiw r26,15+1
 926 062e C801      		movw r24,r16
 927 0630 0E94 0000 		call SendBuffer
 928 0634 F801      		movw r30,r16
 929 0636 2785      		ldd r18,Z+15
 930 0638 3089      		ldd r19,Z+16
 931 063a 97FF      		sbrs r25,7
 932 063c 00C0      		rjmp .L106
 933 063e C901      		movw r24,r18
 934 0640 00C0      		rjmp .L122
 935               	.L106:
 936 0642 C901      		movw r24,r18
 937 0644 0E94 0000 		call free
 938 0648 F801      		movw r30,r16
 939 064a 1686      		std Z+14,__zero_reg__
 940 064c 1586      		std Z+13,__zero_reg__
 941 064e 00C0      		rjmp .L104
 942               	.L105:
 943 0650 C62F      		mov r28,r22
 944 0652 D72F      		mov r29,r23
 945 0654 5E01      		movw r10,r28
 946 0656 D801      		movw r26,r16
 947 0658 5196      		adiw r26,17
 948 065a 6D91      		ld r22,X+
 949 065c 7C91      		ld r23,X
 950 065e 5297      		sbiw r26,17+1
 951 0660 4115      		cp r20,__zero_reg__
 952 0662 5105      		cpc r21,__zero_reg__
 953 0664 01F4      		brne .L107
 954 0666 C616      		cp r12,r22
 955 0668 D706      		cpc r13,r23
 956 066a 00F4      		brsh .L108
 957 066c E601      		movw r28,r12
 958 066e 00C0      		rjmp .L109
 959               	.L108:
 960 0670 C601      		movw r24,r12
 961 0672 0E94 0000 		call __udivmodhi4
 962 0676 EC01      		movw r28,r24
 963 0678 7601      		movw r14,r12
 964 067a E81A      		sub r14,r24
 965 067c F90A      		sbc r15,r25
 966 067e A701      		movw r20,r14
 967 0680 B501      		movw r22,r10
 968 0682 C801      		movw r24,r16
 969 0684 0E94 0000 		call SendBuffer
GAS LISTING C:\Temp/ccDRRGiL.s 			page 18


 970 0688 97FD      		sbrc r25,7
 971 068a 00C0      		rjmp .L102
 972 068c 2097      		sbiw r28,0
 973 068e 01F4      		brne .+2
 974 0690 00C0      		rjmp .L104
 975 0692 AE0C      		add r10,r14
 976 0694 BF1C      		adc r11,r15
 977               	.L109:
 978 0696 F801      		movw r30,r16
 979 0698 8189      		ldd r24,Z+17
 980 069a 9289      		ldd r25,Z+18
 981 069c 0E94 0000 		call malloc
 982 06a0 D801      		movw r26,r16
 983 06a2 5096      		adiw r26,15+1
 984 06a4 9C93      		st X,r25
 985 06a6 8E93      		st -X,r24
 986 06a8 1F97      		sbiw r26,15
 987 06aa 0097      		sbiw r24,0
 988 06ac 01F4      		brne .+2
 989 06ae 00C0      		rjmp .L102
 990 06b0 AE01      		movw r20,r28
 991 06b2 B501      		movw r22,r10
 992 06b4 0E94 0000 		call memcpy
 993 06b8 F801      		movw r30,r16
 994 06ba C587      		std Z+13,r28
 995 06bc D687      		std Z+14,r29
 996 06be 00C0      		rjmp .L104
 997               	.L107:
 998 06c0 C601      		movw r24,r12
 999 06c2 840F      		add r24,r20
 1000 06c4 951F      		adc r25,r21
 1001 06c6 D801      		movw r26,r16
 1002 06c8 1F96      		adiw r26,15
 1003 06ca 2D91      		ld r18,X+
 1004 06cc 3C91      		ld r19,X
 1005 06ce 5097      		sbiw r26,15+1
 1006 06d0 8617      		cp r24,r22
 1007 06d2 9707      		cpc r25,r23
 1008 06d4 00F4      		brsh .L111
 1009 06d6 240F      		add r18,r20
 1010 06d8 351F      		adc r19,r21
 1011 06da A601      		movw r20,r12
 1012 06dc 6C2F      		mov r22,r28
 1013 06de 7E2F      		mov r23,r30
 1014 06e0 C901      		movw r24,r18
 1015 06e2 0E94 0000 		call memcpy
 1016 06e6 F801      		movw r30,r16
 1017 06e8 8585      		ldd r24,Z+13
 1018 06ea 9685      		ldd r25,Z+14
 1019 06ec 8C0D      		add r24,r12
 1020 06ee 9D1D      		adc r25,r13
 1021 06f0 9687      		std Z+14,r25
 1022 06f2 8587      		std Z+13,r24
 1023 06f4 00C0      		rjmp .L104
 1024               	.L111:
 1025 06f6 7B01      		movw r14,r22
 1026 06f8 E41A      		sub r14,r20
GAS LISTING C:\Temp/ccDRRGiL.s 			page 19


 1027 06fa F50A      		sbc r15,r21
 1028 06fc 240F      		add r18,r20
 1029 06fe 351F      		adc r19,r21
 1030 0700 A701      		movw r20,r14
 1031 0702 6C2F      		mov r22,r28
 1032 0704 7E2F      		mov r23,r30
 1033 0706 C901      		movw r24,r18
 1034 0708 0E94 0000 		call memcpy
 1035 070c D801      		movw r26,r16
 1036 070e 5196      		adiw r26,17
 1037 0710 4D91      		ld r20,X+
 1038 0712 5C91      		ld r21,X
 1039 0714 5297      		sbiw r26,17+1
 1040 0716 1F96      		adiw r26,15
 1041 0718 6D91      		ld r22,X+
 1042 071a 7C91      		ld r23,X
 1043 071c 5097      		sbiw r26,15+1
 1044 071e C801      		movw r24,r16
 1045 0720 0E94 0000 		call SendBuffer
 1046 0724 97FF      		sbrs r25,7
 1047 0726 00C0      		rjmp .L114
 1048 0728 F801      		movw r30,r16
 1049 072a 8785      		ldd r24,Z+15
 1050 072c 9089      		ldd r25,Z+16
 1051               	.L122:
 1052 072e 0E94 0000 		call free
 1053 0732 D801      		movw r26,r16
 1054 0734 1E96      		adiw r26,13+1
 1055 0736 1C92      		st X,__zero_reg__
 1056 0738 1E92      		st -X,__zero_reg__
 1057 073a 1D97      		sbiw r26,13
 1058 073c 00C0      		rjmp .L102
 1059               	.L114:
 1060 073e 5E01      		movw r10,r28
 1061 0740 AE0C      		add r10,r14
 1062 0742 BF1C      		adc r11,r15
 1063 0744 9601      		movw r18,r12
 1064 0746 2E19      		sub r18,r14
 1065 0748 3F09      		sbc r19,r15
 1066 074a F801      		movw r30,r16
 1067 074c 6189      		ldd r22,Z+17
 1068 074e 7289      		ldd r23,Z+18
 1069 0750 2617      		cp r18,r22
 1070 0752 3707      		cpc r19,r23
 1071 0754 00F0      		brlo .L115
 1072 0756 C601      		movw r24,r12
 1073 0758 0E94 0000 		call __udivmodhi4
 1074 075c EC01      		movw r28,r24
 1075 075e 7901      		movw r14,r18
 1076 0760 E81A      		sub r14,r24
 1077 0762 F90A      		sbc r15,r25
 1078 0764 A701      		movw r20,r14
 1079 0766 B501      		movw r22,r10
 1080 0768 C801      		movw r24,r16
 1081 076a 0E94 0000 		call SendBuffer
 1082 076e 97FF      		sbrs r25,7
 1083 0770 00C0      		rjmp .L116
GAS LISTING C:\Temp/ccDRRGiL.s 			page 20


 1084 0772 D801      		movw r26,r16
 1085 0774 1F96      		adiw r26,15
 1086 0776 8D91      		ld r24,X+
 1087 0778 9C91      		ld r25,X
 1088 077a 5097      		sbiw r26,15+1
 1089 077c 0E94 0000 		call free
 1090 0780 F801      		movw r30,r16
 1091 0782 1686      		std Z+14,__zero_reg__
 1092 0784 1586      		std Z+13,__zero_reg__
 1093 0786 00C0      		rjmp .L102
 1094               	.L116:
 1095 0788 AE0C      		add r10,r14
 1096 078a BF1C      		adc r11,r15
 1097 078c 00C0      		rjmp .L117
 1098               	.L115:
 1099 078e E901      		movw r28,r18
 1100               	.L117:
 1101 0790 2097      		sbiw r28,0
 1102 0792 01F0      		breq .L118
 1103 0794 AE01      		movw r20,r28
 1104 0796 B501      		movw r22,r10
 1105 0798 D801      		movw r26,r16
 1106 079a 1F96      		adiw r26,15
 1107 079c 8C91      		ld r24,X
 1108 079e 1F97      		sbiw r26,15
 1109 07a0 5096      		adiw r26,16
 1110 07a2 9C91      		ld r25,X
 1111 07a4 0E94 0000 		call memcpy
 1112 07a8 00C0      		rjmp .L120
 1113               	.L118:
 1114 07aa F801      		movw r30,r16
 1115 07ac 8785      		ldd r24,Z+15
 1116 07ae 9089      		ldd r25,Z+16
 1117 07b0 0E94 0000 		call free
 1118               	.L120:
 1119 07b4 D801      		movw r26,r16
 1120 07b6 1E96      		adiw r26,13+1
 1121 07b8 DC93      		st X,r29
 1122 07ba CE93      		st -X,r28
 1123 07bc 1D97      		sbiw r26,13
 1124 07be 00C0      		rjmp .L104
 1125               	.L102:
 1126 07c0 CC24      		clr r12
 1127 07c2 CA94      		dec r12
 1128 07c4 DC2C      		mov r13,r12
 1129               	.L104:
 1130 07c6 C601      		movw r24,r12
 1131               	/* epilogue start */
 1132 07c8 DF91      		pop r29
 1133 07ca CF91      		pop r28
 1134 07cc 1F91      		pop r17
 1135 07ce 0F91      		pop r16
 1136 07d0 FF90      		pop r15
 1137 07d2 EF90      		pop r14
 1138 07d4 DF90      		pop r13
 1139 07d6 CF90      		pop r12
 1140 07d8 BF90      		pop r11
GAS LISTING C:\Temp/ccDRRGiL.s 			page 21


 1141 07da AF90      		pop r10
 1142 07dc 0895      		ret
 1143               		.size	NutTcpDeviceWrite, .-NutTcpDeviceWrite
 1144               	.global	NutTcpDeviceWrite_P
 1145               		.type	NutTcpDeviceWrite_P, @function
 1146               	NutTcpDeviceWrite_P:
 1147 07de CF92      		push r12
 1148 07e0 DF92      		push r13
 1149 07e2 EF92      		push r14
 1150 07e4 FF92      		push r15
 1151 07e6 0F93      		push r16
 1152 07e8 1F93      		push r17
 1153 07ea CF93      		push r28
 1154 07ec DF93      		push r29
 1155               	/* prologue: function */
 1156               	/* frame size = 0 */
 1157 07ee 6C01      		movw r12,r24
 1158 07f0 7B01      		movw r14,r22
 1159 07f2 8A01      		movw r16,r20
 1160 07f4 4115      		cp r20,__zero_reg__
 1161 07f6 5105      		cpc r21,__zero_reg__
 1162 07f8 01F4      		brne .L124
 1163 07fa C0E0      		ldi r28,lo8(0)
 1164 07fc D0E0      		ldi r29,hi8(0)
 1165 07fe 00C0      		rjmp .L125
 1166               	.L124:
 1167 0800 BA01      		movw r22,r20
 1168 0802 80E0      		ldi r24,lo8(heapFreeList)
 1169 0804 90E0      		ldi r25,hi8(heapFreeList)
 1170 0806 0E94 0000 		call NutHeapRootAlloc
 1171 080a EC01      		movw r28,r24
 1172 080c 0097      		sbiw r24,0
 1173 080e 01F0      		breq .L125
 1174 0810 A801      		movw r20,r16
 1175 0812 B701      		movw r22,r14
 1176 0814 0E94 0000 		call memcpy_P
 1177               	.L125:
 1178 0818 A801      		movw r20,r16
 1179 081a BE01      		movw r22,r28
 1180 081c C601      		movw r24,r12
 1181 081e 0E94 0000 		call NutTcpDeviceWrite
 1182 0822 182F      		mov r17,r24
 1183 0824 092F      		mov r16,r25
 1184 0826 2097      		sbiw r28,0
 1185 0828 01F0      		breq .L126
 1186 082a BE01      		movw r22,r28
 1187 082c 80E0      		ldi r24,lo8(heapFreeList)
 1188 082e 90E0      		ldi r25,hi8(heapFreeList)
 1189 0830 0E94 0000 		call NutHeapRootFree
 1190               	.L126:
 1191 0834 812F      		mov r24,r17
 1192 0836 902F      		mov r25,r16
 1193               	/* epilogue start */
 1194 0838 DF91      		pop r29
 1195 083a CF91      		pop r28
 1196 083c 1F91      		pop r17
 1197 083e 0F91      		pop r16
GAS LISTING C:\Temp/ccDRRGiL.s 			page 22


 1198 0840 FF90      		pop r15
 1199 0842 EF90      		pop r14
 1200 0844 DF90      		pop r13
 1201 0846 CF90      		pop r12
 1202 0848 0895      		ret
 1203               		.size	NutTcpDeviceWrite_P, .-NutTcpDeviceWrite_P
 1204               	.global	NutTcpCloseSocket
 1205               		.type	NutTcpCloseSocket, @function
 1206               	NutTcpCloseSocket:
 1207 084a 0F93      		push r16
 1208 084c 1F93      		push r17
 1209               	/* prologue: function */
 1210               	/* frame size = 0 */
 1211 084e 8C01      		movw r16,r24
 1212 0850 40E0      		ldi r20,lo8(0)
 1213 0852 50E0      		ldi r21,hi8(0)
 1214 0854 60E0      		ldi r22,lo8(0)
 1215 0856 70E0      		ldi r23,hi8(0)
 1216 0858 0E94 0000 		call NutTcpDeviceWrite
 1217 085c C801      		movw r24,r16
 1218 085e 0E94 0000 		call NutTcpStateCloseEvent
 1219               	/* epilogue start */
 1220 0862 1F91      		pop r17
 1221 0864 0F91      		pop r16
 1222 0866 0895      		ret
 1223               		.size	NutTcpCloseSocket, .-NutTcpCloseSocket
 1224               	.global	NutTcpSetSockOpt
 1225               		.type	NutTcpSetSockOpt, @function
 1226               	NutTcpSetSockOpt:
 1227 0868 0F93      		push r16
 1228 086a 1F93      		push r17
 1229 086c CF93      		push r28
 1230 086e DF93      		push r29
 1231               	/* prologue: function */
 1232               	/* frame size = 0 */
 1233 0870 EC01      		movw r28,r24
 1234 0872 8A01      		movw r16,r20
 1235 0874 0097      		sbiw r24,0
 1236 0876 01F4      		brne .+2
 1237 0878 00C0      		rjmp .L153
 1238               	.L131:
 1239 087a 80E1      		ldi r24,hi8(4098)
 1240 087c 6230      		cpi r22,lo8(4098)
 1241 087e 7807      		cpc r23,r24
 1242 0880 01F0      		breq .L136
 1243 0882 E0E1      		ldi r30,hi8(4099)
 1244 0884 6330      		cpi r22,lo8(4099)
 1245 0886 7E07      		cpc r23,r30
 1246 0888 04F4      		brge .L139
 1247 088a 6230      		cpi r22,2
 1248 088c 7105      		cpc r23,__zero_reg__
 1249 088e 01F0      		breq .L134
 1250 0890 6150      		subi r22,lo8(4097)
 1251 0892 7041      		sbci r23,hi8(4097)
 1252 0894 01F0      		breq .+2
 1253 0896 00C0      		rjmp .L133
 1254 0898 00C0      		rjmp .L157
GAS LISTING C:\Temp/ccDRRGiL.s 			page 23


 1255               	.L139:
 1256 089a 80E1      		ldi r24,hi8(4101)
 1257 089c 6530      		cpi r22,lo8(4101)
 1258 089e 7807      		cpc r23,r24
 1259 08a0 01F0      		breq .L137
 1260 08a2 6650      		subi r22,lo8(4102)
 1261 08a4 7041      		sbci r23,hi8(4102)
 1262 08a6 01F0      		breq .+2
 1263 08a8 00C0      		rjmp .L133
 1264 08aa 00C0      		rjmp .L158
 1265               	.L134:
 1266 08ac 4115      		cp r20,__zero_reg__
 1267 08ae 5105      		cpc r21,__zero_reg__
 1268 08b0 01F4      		brne .+2
 1269 08b2 00C0      		rjmp .L149
 1270 08b4 2230      		cpi r18,2
 1271 08b6 3105      		cpc r19,__zero_reg__
 1272 08b8 01F0      		breq .+2
 1273 08ba 00C0      		rjmp .L149
 1274               	.L141:
 1275 08bc 8B89      		ldd r24,Y+19
 1276 08be 8823      		tst r24
 1277 08c0 01F0      		breq .L142
 1278 08c2 C05A      		subi r28,lo8(-(96))
 1279 08c4 DF4F      		sbci r29,hi8(-(96))
 1280 08c6 88E3      		ldi r24,lo8(56)
 1281 08c8 90E0      		ldi r25,hi8(56)
 1282 08ca 00C0      		rjmp .L152
 1283               	.L142:
 1284 08cc CE5A      		subi r28,lo8(-(82))
 1285 08ce DF4F      		sbci r29,hi8(-(82))
 1286 08d0 FA01      		movw r30,r20
 1287 08d2 8081      		ld r24,Z
 1288 08d4 9181      		ldd r25,Z+1
 1289 08d6 00C0      		rjmp .L155
 1290               	.L136:
 1291 08d8 4115      		cp r20,__zero_reg__
 1292 08da 5105      		cpc r21,__zero_reg__
 1293 08dc 01F0      		breq .L149
 1294 08de 2230      		cpi r18,2
 1295 08e0 3105      		cpc r19,__zero_reg__
 1296 08e2 01F4      		brne .L149
 1297               	.L144:
 1298 08e4 FA01      		movw r30,r20
 1299 08e6 8081      		ld r24,Z
 1300 08e8 9181      		ldd r25,Z+1
 1301 08ea C85B      		subi r28,lo8(-(72))
 1302 08ec DF4F      		sbci r29,hi8(-(72))
 1303 08ee 9983      		std Y+1,r25
 1304 08f0 8883      		st Y,r24
 1305 08f2 2497      		sbiw r28,4
 1306               	.L155:
 1307 08f4 9983      		std Y+1,r25
 1308 08f6 8883      		st Y,r24
 1309 08f8 00C0      		rjmp .L154
 1310               	.L137:
 1311 08fa 4115      		cp r20,__zero_reg__
GAS LISTING C:\Temp/ccDRRGiL.s 			page 24


 1312 08fc 5105      		cpc r21,__zero_reg__
 1313 08fe 01F0      		breq .L149
 1314 0900 2430      		cpi r18,4
 1315 0902 3105      		cpc r19,__zero_reg__
 1316 0904 01F4      		brne .L149
 1317               	.L146:
 1318 0906 C659      		subi r28,lo8(-(106))
 1319 0908 DF4F      		sbci r29,hi8(-(106))
 1320 090a 00C0      		rjmp .L156
 1321               	.L158:
 1322 090c 4115      		cp r20,__zero_reg__
 1323 090e 5105      		cpc r21,__zero_reg__
 1324 0910 01F0      		breq .L149
 1325 0912 2430      		cpi r18,4
 1326 0914 3105      		cpc r19,__zero_reg__
 1327 0916 01F4      		brne .L149
 1328               	.L148:
 1329 0918 CA59      		subi r28,lo8(-(102))
 1330 091a DF4F      		sbci r29,hi8(-(102))
 1331               	.L156:
 1332 091c F801      		movw r30,r16
 1333 091e 8081      		ld r24,Z
 1334 0920 9181      		ldd r25,Z+1
 1335 0922 A281      		ldd r26,Z+2
 1336 0924 B381      		ldd r27,Z+3
 1337 0926 8883      		st Y,r24
 1338 0928 9983      		std Y+1,r25
 1339 092a AA83      		std Y+2,r26
 1340 092c BB83      		std Y+3,r27
 1341 092e 00C0      		rjmp .L154
 1342               	.L157:
 1343 0930 4115      		cp r20,__zero_reg__
 1344 0932 5105      		cpc r21,__zero_reg__
 1345 0934 01F0      		breq .L149
 1346 0936 2230      		cpi r18,2
 1347 0938 3105      		cpc r19,__zero_reg__
 1348 093a 01F0      		breq .L150
 1349               	.L149:
 1350 093c C05A      		subi r28,lo8(-(96))
 1351 093e DF4F      		sbci r29,hi8(-(96))
 1352 0940 86E1      		ldi r24,lo8(22)
 1353 0942 90E0      		ldi r25,hi8(22)
 1354 0944 00C0      		rjmp .L152
 1355               	.L150:
 1356 0946 40E0      		ldi r20,lo8(0)
 1357 0948 50E0      		ldi r21,hi8(0)
 1358 094a 60E0      		ldi r22,lo8(0)
 1359 094c 70E0      		ldi r23,hi8(0)
 1360 094e CE01      		movw r24,r28
 1361 0950 0E94 0000 		call NutTcpDeviceWrite
 1362 0954 F801      		movw r30,r16
 1363 0956 8081      		ld r24,Z
 1364 0958 9181      		ldd r25,Z+1
 1365 095a 9A8B      		std Y+18,r25
 1366 095c 898B      		std Y+17,r24
 1367               	.L154:
 1368 095e 20E0      		ldi r18,lo8(0)
GAS LISTING C:\Temp/ccDRRGiL.s 			page 25


 1369 0960 30E0      		ldi r19,hi8(0)
 1370 0962 00C0      		rjmp .L132
 1371               	.L133:
 1372 0964 C05A      		subi r28,lo8(-(96))
 1373 0966 DF4F      		sbci r29,hi8(-(96))
 1374 0968 8AE2      		ldi r24,lo8(42)
 1375 096a 90E0      		ldi r25,hi8(42)
 1376               	.L152:
 1377 096c 9983      		std Y+1,r25
 1378 096e 8883      		st Y,r24
 1379               	.L153:
 1380 0970 2FEF      		ldi r18,lo8(-1)
 1381 0972 3FEF      		ldi r19,hi8(-1)
 1382               	.L132:
 1383 0974 C901      		movw r24,r18
 1384               	/* epilogue start */
 1385 0976 DF91      		pop r29
 1386 0978 CF91      		pop r28
 1387 097a 1F91      		pop r17
 1388 097c 0F91      		pop r16
 1389 097e 0895      		ret
 1390               		.size	NutTcpSetSockOpt, .-NutTcpSetSockOpt
 1391               	.global	NutTcpAccept
 1392               		.type	NutTcpAccept, @function
 1393               	NutTcpAccept:
 1394               	/* prologue: function */
 1395               	/* frame size = 0 */
 1396 0980 FC01      		movw r30,r24
 1397               	/* #APP */
 1398               	 ;  295 "../../nut/include/sys/types.h" 1
 1399 0982 062E      		mov __tmp_reg__, r22
 1400 0984 672F      		mov r22, r23
 1401 0986 702D      		mov r23, __tmp_reg__
 1402               		
 1403               	 ;  0 "" 2
 1404               	/* #NOAPP */
 1405 0988 718F      		std Z+25,r23
 1406 098a 608F      		std Z+24,r22
 1407 098c 0E94 0000 		call NutTcpStatePassiveOpenEvent
 1408               	/* epilogue start */
 1409 0990 0895      		ret
 1410               		.size	NutTcpAccept, .-NutTcpAccept
 1411               	.global	NutTcpConnect
 1412               		.type	NutTcpConnect, @function
 1413               	NutTcpConnect:
 1414 0992 EF92      		push r14
 1415 0994 FF92      		push r15
 1416 0996 0F93      		push r16
 1417 0998 1F93      		push r17
 1418 099a CF93      		push r28
 1419 099c DF93      		push r29
 1420               	/* prologue: function */
 1421               	/* frame size = 0 */
 1422 099e EC01      		movw r28,r24
 1423 09a0 7A01      		movw r14,r20
 1424 09a2 8B01      		movw r16,r22
 1425 09a4 A901      		movw r20,r18
GAS LISTING C:\Temp/ccDRRGiL.s 			page 26


 1426 09a6 0097      		sbiw r24,0
 1427 09a8 01F4      		brne .+2
 1428 09aa 00C0      		rjmp .L178
 1429               	.L162:
 1430 09ac 8B89      		ldd r24,Y+19
 1431 09ae 8130      		cpi r24,lo8(1)
 1432 09b0 01F4      		brne .L164
 1433 09b2 C05A      		subi r28,lo8(-(96))
 1434 09b4 DF4F      		sbci r29,hi8(-(96))
 1435 09b6 8DE2      		ldi r24,lo8(45)
 1436 09b8 90E0      		ldi r25,hi8(45)
 1437 09ba 00C0      		rjmp .L177
 1438               	.L164:
 1439 09bc 8B89      		ldd r24,Y+19
 1440 09be 8823      		tst r24
 1441 09c0 01F0      		breq .L165
 1442 09c2 C05A      		subi r28,lo8(-(96))
 1443 09c4 DF4F      		sbci r29,hi8(-(96))
 1444 09c6 88E3      		ldi r24,lo8(56)
 1445 09c8 90E0      		ldi r25,hi8(56)
 1446 09ca 00C0      		rjmp .L177
 1447               	.L165:
 1448 09cc B091 0000 		lds r27,tcpSocketList
 1449 09d0 A091 0000 		lds r26,tcpSocketList+1
 1450 09d4 60E0      		ldi r22,lo8(4096)
 1451 09d6 70E1      		ldi r23,hi8(4096)
 1452               	.L168:
 1453 09d8 8091 0000 		lds r24,last_local_port
 1454 09dc 9091 0000 		lds r25,(last_local_port)+1
 1455 09e0 0196      		adiw r24,1
 1456 09e2 9093 0000 		sts (last_local_port)+1,r25
 1457 09e6 8093 0000 		sts last_local_port,r24
 1458 09ea 8091 0000 		lds r24,last_local_port
 1459 09ee 9091 0000 		lds r25,(last_local_port)+1
 1460 09f2 892B      		or r24,r25
 1461 09f4 01F4      		brne .L166
 1462 09f6 7093 0000 		sts (last_local_port)+1,r23
 1463 09fa 6093 0000 		sts last_local_port,r22
 1464               	.L166:
 1465 09fe 8B2F      		mov r24,r27
 1466 0a00 9A2F      		mov r25,r26
 1467 0a02 9C01      		movw r18,r24
 1468 0a04 F901      		movw r30,r18
 1469 0a06 00C0      		rjmp .L167
 1470               	.L169:
 1471 0a08 8091 0000 		lds r24,last_local_port
 1472 0a0c 9091 0000 		lds r25,(last_local_port)+1
 1473               	/* #APP */
 1474               	 ;  295 "../../nut/include/sys/types.h" 1
 1475 0a10 082E      		mov __tmp_reg__, r24
 1476 0a12 892F      		mov r24, r25
 1477 0a14 902D      		mov r25, __tmp_reg__
 1478               		
 1479               	 ;  0 "" 2
 1480               	/* #NOAPP */
 1481 0a16 208D      		ldd r18,Z+24
 1482 0a18 318D      		ldd r19,Z+25
GAS LISTING C:\Temp/ccDRRGiL.s 			page 27


 1483 0a1a 2817      		cp r18,r24
 1484 0a1c 3907      		cpc r19,r25
 1485 0a1e 01F0      		breq .L168
 1486 0a20 0190      		ld __tmp_reg__,Z+
 1487 0a22 F081      		ld r31,Z
 1488 0a24 E02D      		mov r30,__tmp_reg__
 1489               	.L167:
 1490 0a26 3097      		sbiw r30,0
 1491 0a28 01F4      		brne .L169
 1492 0a2a 00C0      		rjmp .L179
 1493               	.L171:
 1494 0a2c 0784      		ldd __tmp_reg__,Z+15
 1495 0a2e F089      		ldd r31,Z+16
 1496 0a30 E02D      		mov r30,__tmp_reg__
 1497 0a32 8385      		ldd r24,Z+11
 1498 0a34 9485      		ldd r25,Z+12
 1499 0a36 A585      		ldd r26,Z+13
 1500 0a38 B685      		ldd r27,Z+14
 1501 0a3a 8C8B      		std Y+20,r24
 1502 0a3c 9D8B      		std Y+21,r25
 1503 0a3e AE8B      		std Y+22,r26
 1504 0a40 BF8B      		std Y+23,r27
 1505 0a42 CE01      		movw r24,r28
 1506 0a44 0E94 0000 		call NutTcpStateActiveOpenEvent
 1507 0a48 9C01      		movw r18,r24
 1508 0a4a 00C0      		rjmp .L163
 1509               	.L180:
 1510 0a4c C05A      		subi r28,lo8(-(96))
 1511 0a4e DF4F      		sbci r29,hi8(-(96))
 1512 0a50 81E4      		ldi r24,lo8(65)
 1513 0a52 90E0      		ldi r25,hi8(65)
 1514               	.L177:
 1515 0a54 9983      		std Y+1,r25
 1516 0a56 8883      		st Y,r24
 1517               	.L178:
 1518 0a58 2FEF      		ldi r18,lo8(-1)
 1519 0a5a 3FEF      		ldi r19,hi8(-1)
 1520               	.L163:
 1521 0a5c C901      		movw r24,r18
 1522               	/* epilogue start */
 1523 0a5e DF91      		pop r29
 1524 0a60 CF91      		pop r28
 1525 0a62 1F91      		pop r17
 1526 0a64 0F91      		pop r16
 1527 0a66 FF90      		pop r15
 1528 0a68 EF90      		pop r14
 1529 0a6a 0895      		ret
 1530               	.L179:
 1531 0a6c 8091 0000 		lds r24,last_local_port
 1532 0a70 9091 0000 		lds r25,(last_local_port)+1
 1533               	/* #APP */
 1534               	 ;  295 "../../nut/include/sys/types.h" 1
 1535 0a74 082E      		mov __tmp_reg__, r24
 1536 0a76 892F      		mov r24, r25
 1537 0a78 902D      		mov r25, __tmp_reg__
 1538               		
 1539               	 ;  0 "" 2
GAS LISTING C:\Temp/ccDRRGiL.s 			page 28


 1540               	/* #NOAPP */
 1541 0a7a 998F      		std Y+25,r25
 1542 0a7c 888F      		std Y+24,r24
 1543               	/* #APP */
 1544               	 ;  295 "../../nut/include/sys/types.h" 1
 1545 0a7e 042E      		mov __tmp_reg__, r20
 1546 0a80 452F      		mov r20, r21
 1547 0a82 502D      		mov r21, __tmp_reg__
 1548               		
 1549               	 ;  0 "" 2
 1550               	/* #NOAPP */
 1551 0a84 5F8F      		std Y+31,r21
 1552 0a86 4E8F      		std Y+30,r20
 1553 0a88 EA8E      		std Y+26,r14
 1554 0a8a FB8E      		std Y+27,r15
 1555 0a8c 0C8F      		std Y+28,r16
 1556 0a8e 1D8F      		std Y+29,r17
 1557 0a90 40E0      		ldi r20,lo8(0)
 1558 0a92 50E0      		ldi r21,hi8(0)
 1559 0a94 C801      		movw r24,r16
 1560 0a96 B701      		movw r22,r14
 1561 0a98 0E94 0000 		call NutIpRouteQuery
 1562 0a9c FC01      		movw r30,r24
 1563 0a9e 0097      		sbiw r24,0
 1564 0aa0 01F0      		breq .+2
 1565 0aa2 00C0      		rjmp .L171
 1566 0aa4 00C0      		rjmp .L180
 1567               		.size	NutTcpConnect, .-NutTcpConnect
 1568               	.global	NutTcpCreateSocket
 1569               		.type	NutTcpCreateSocket, @function
 1570               	NutTcpCreateSocket:
 1571 0aa6 0F93      		push r16
 1572 0aa8 1F93      		push r17
 1573 0aaa CF93      		push r28
 1574 0aac DF93      		push r29
 1575               	/* prologue: function */
 1576               	/* frame size = 0 */
 1577 0aae 8091 0000 		lds r24,registered
 1578 0ab2 8823      		tst r24
 1579 0ab4 01F4      		brne .L182
 1580 0ab6 60E0      		ldi r22,lo8(gs(NutTcpInput))
 1581 0ab8 70E0      		ldi r23,hi8(gs(NutTcpInput))
 1582 0aba 86E0      		ldi r24,lo8(6)
 1583 0abc 0E94 0000 		call NutRegisterIpHandler
 1584 0ac0 892B      		or r24,r25
 1585 0ac2 01F0      		breq .+2
 1586 0ac4 00C0      		rjmp .L183
 1587 0ac6 0E94 0000 		call NutTcpInitStateMachine
 1588 0aca 892B      		or r24,r25
 1589 0acc 01F0      		breq .+2
 1590 0ace 00C0      		rjmp .L183
 1591 0ad0 81E0      		ldi r24,lo8(1)
 1592 0ad2 8093 0000 		sts registered,r24
 1593               	.L182:
 1594 0ad6 62E7      		ldi r22,lo8(114)
 1595 0ad8 70E0      		ldi r23,hi8(114)
 1596 0ada 81E0      		ldi r24,lo8(1)
GAS LISTING C:\Temp/ccDRRGiL.s 			page 29


 1597 0adc 90E0      		ldi r25,hi8(1)
 1598 0ade 0E94 0000 		call calloc
 1599 0ae2 EC01      		movw r28,r24
 1600 0ae4 8C01      		movw r16,r24
 1601 0ae6 0097      		sbiw r24,0
 1602 0ae8 01F4      		brne .+2
 1603 0aea 00C0      		rjmp .L184
 1604 0aec 1B8A      		std Y+19,__zero_reg__
 1605 0aee 84E0      		ldi r24,lo8(4)
 1606 0af0 8C83      		std Y+4,r24
 1607 0af2 80E0      		ldi r24,lo8(gs(NutTcpDeviceRead))
 1608 0af4 90E0      		ldi r25,hi8(gs(NutTcpDeviceRead))
 1609 0af6 9E83      		std Y+6,r25
 1610 0af8 8D83      		std Y+5,r24
 1611 0afa 80E0      		ldi r24,lo8(gs(NutTcpDeviceWrite))
 1612 0afc 90E0      		ldi r25,hi8(gs(NutTcpDeviceWrite))
 1613 0afe 9887      		std Y+8,r25
 1614 0b00 8F83      		std Y+7,r24
 1615 0b02 80E0      		ldi r24,lo8(gs(NutTcpDeviceWrite_P))
 1616 0b04 90E0      		ldi r25,hi8(gs(NutTcpDeviceWrite_P))
 1617 0b06 9A87      		std Y+10,r25
 1618 0b08 8987      		std Y+9,r24
 1619 0b0a 80E0      		ldi r24,lo8(gs(NutTcpDeviceIOCtl))
 1620 0b0c 90E0      		ldi r25,hi8(gs(NutTcpDeviceIOCtl))
 1621 0b0e 9C87      		std Y+12,r25
 1622 0b10 8B87      		std Y+11,r24
 1623 0b12 0E94 0000 		call NutGetTickCount
 1624 0b16 69A3      		std Y+33,r22
 1625 0b18 7AA3      		std Y+34,r23
 1626 0b1a 8BA3      		std Y+35,r24
 1627 0b1c 9CA3      		std Y+36,r25
 1628 0b1e 6DA3      		std Y+37,r22
 1629 0b20 7EA3      		std Y+38,r23
 1630 0b22 8FA3      		std Y+39,r24
 1631 0b24 98A7      		std Y+40,r25
 1632 0b26 69A7      		std Y+41,r22
 1633 0b28 7AA7      		std Y+42,r23
 1634 0b2a 8BA7      		std Y+43,r24
 1635 0b2c 9CA7      		std Y+44,r25
 1636 0b2e 0C5B      		subi r16,lo8(-(68))
 1637 0b30 1F4F      		sbci r17,hi8(-(68))
 1638 0b32 80E9      		ldi r24,lo8(3216)
 1639 0b34 9CE0      		ldi r25,hi8(3216)
 1640 0b36 F801      		movw r30,r16
 1641 0b38 9183      		std Z+1,r25
 1642 0b3a 8083      		st Z,r24
 1643 0b3c 0C5F      		subi r16,lo8(-(4))
 1644 0b3e 1F4F      		sbci r17,hi8(-(4))
 1645 0b40 F801      		movw r30,r16
 1646 0b42 9183      		std Z+1,r25
 1647 0b44 8083      		st Z,r24
 1648 0b46 065F      		subi r16,lo8(-(10))
 1649 0b48 1F4F      		sbci r17,hi8(-(10))
 1650 0b4a 28E1      		ldi r18,lo8(536)
 1651 0b4c 32E0      		ldi r19,hi8(536)
 1652 0b4e F801      		movw r30,r16
 1653 0b50 3183      		std Z+1,r19
GAS LISTING C:\Temp/ccDRRGiL.s 			page 30


 1654 0b52 2083      		st Z,r18
 1655 0b54 0A5F      		subi r16,lo8(-(6))
 1656 0b56 1F4F      		sbci r17,hi8(-(6))
 1657 0b58 88EE      		ldi r24,lo8(1000)
 1658 0b5a 93E0      		ldi r25,hi8(1000)
 1659 0b5c F801      		movw r30,r16
 1660 0b5e 9183      		std Z+1,r25
 1661 0b60 8083      		st Z,r24
 1662 0b62 0855      		subi r16,lo8(-(-88))
 1663 0b64 1040      		sbci r17,hi8(-(-88))
 1664 0b66 8091 0000 		lds r24,tcpSocketList
 1665 0b6a 9091 0000 		lds r25,(tcpSocketList)+1
 1666 0b6e 9983      		std Y+1,r25
 1667 0b70 8883      		st Y,r24
 1668 0b72 3A8B      		std Y+18,r19
 1669 0b74 298B      		std Y+17,r18
 1670 0b76 1093 0000 		sts (tcpSocketList)+1,r17
 1671 0b7a 0093 0000 		sts tcpSocketList,r16
 1672 0b7e 00C0      		rjmp .L184
 1673               	.L183:
 1674 0b80 00E0      		ldi r16,lo8(0)
 1675 0b82 10E0      		ldi r17,hi8(0)
 1676               	.L184:
 1677 0b84 C801      		movw r24,r16
 1678               	/* epilogue start */
 1679 0b86 DF91      		pop r29
 1680 0b88 CF91      		pop r28
 1681 0b8a 1F91      		pop r17
 1682 0b8c 0F91      		pop r16
 1683 0b8e 0895      		ret
 1684               		.size	NutTcpCreateSocket, .-NutTcpCreateSocket
 1685               	.global	NutTcpDestroySocket
 1686               		.type	NutTcpDestroySocket, @function
 1687               	NutTcpDestroySocket:
 1688 0b90 CF93      		push r28
 1689 0b92 DF93      		push r29
 1690               	/* prologue: function */
 1691               	/* frame size = 0 */
 1692 0b94 EC01      		movw r28,r24
 1693 0b96 E091 0000 		lds r30,tcpSocketList
 1694 0b9a F091 0000 		lds r31,(tcpSocketList)+1
 1695 0b9e A0E0      		ldi r26,lo8(tcpSocketList)
 1696 0ba0 B0E0      		ldi r27,hi8(tcpSocketList)
 1697 0ba2 00C0      		rjmp .L187
 1698               	.L191:
 1699 0ba4 EC17      		cp r30,r28
 1700 0ba6 FD07      		cpc r31,r29
 1701 0ba8 01F4      		brne .L188
 1702 0baa 8881      		ld r24,Y
 1703 0bac 9981      		ldd r25,Y+1
 1704 0bae 1196      		adiw r26,1
 1705 0bb0 9C93      		st X,r25
 1706 0bb2 8E93      		st -X,r24
 1707 0bb4 CE01      		movw r24,r28
 1708 0bb6 0E94 0000 		call NutTcpDiscardBuffers
 1709 0bba 8D85      		ldd r24,Y+13
 1710 0bbc 9E85      		ldd r25,Y+14
GAS LISTING C:\Temp/ccDRRGiL.s 			page 31


 1711 0bbe 892B      		or r24,r25
 1712 0bc0 01F0      		breq .L190
 1713 0bc2 00C0      		rjmp .L194
 1714               	.L188:
 1715 0bc4 DF01      		movw r26,r30
 1716 0bc6 0190      		ld __tmp_reg__,Z+
 1717 0bc8 F081      		ld r31,Z
 1718 0bca E02D      		mov r30,__tmp_reg__
 1719               	.L187:
 1720 0bcc 3097      		sbiw r30,0
 1721 0bce 01F4      		brne .L191
 1722 0bd0 00C0      		rjmp .L193
 1723               	.L194:
 1724 0bd2 8F85      		ldd r24,Y+15
 1725 0bd4 9889      		ldd r25,Y+16
 1726 0bd6 0E94 0000 		call free
 1727 0bda 1E86      		std Y+14,__zero_reg__
 1728 0bdc 1D86      		std Y+13,__zero_reg__
 1729               	.L190:
 1730 0bde 82E7      		ldi r24,lo8(114)
 1731 0be0 FE01      		movw r30,r28
 1732 0be2 1192      		st Z+,__zero_reg__
 1733 0be4 8A95      	        dec r24
 1734 0be6 01F4      		brne .-6
 1735 0be8 CE01      		movw r24,r28
 1736 0bea 0E94 0000 		call free
 1737               	.L193:
 1738               	/* epilogue start */
 1739 0bee DF91      		pop r29
 1740 0bf0 CF91      		pop r28
 1741 0bf2 0895      		ret
 1742               		.size	NutTcpDestroySocket, .-NutTcpDestroySocket
 1743               	.global	tcpSocketList
 1744               	.global	tcpSocketList
 1745               		.section .bss
 1746               		.type	tcpSocketList, @object
 1747               		.size	tcpSocketList, 2
 1748               	tcpSocketList:
 1749 0000 0000      		.skip 2,0
 1750               		.data
 1751               		.type	last_local_port, @object
 1752               		.size	last_local_port, 2
 1753               	last_local_port:
 1754 0000 0010      		.word	4096
 1755               		.lcomm registered,1
GAS LISTING C:\Temp/ccDRRGiL.s 			page 32


DEFINED SYMBOLS
                            *ABS*:00000000 tcpsock.c
  C:\Temp/ccDRRGiL.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccDRRGiL.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccDRRGiL.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccDRRGiL.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccDRRGiL.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccDRRGiL.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccDRRGiL.s:13     .text:00000000 NutTcpFindSocket
  C:\Temp/ccDRRGiL.s:1748   .bss:00000000 tcpSocketList
  C:\Temp/ccDRRGiL.s:89     .text:00000080 NutTcpGetSockOpt
  C:\Temp/ccDRRGiL.s:225    .text:00000158 NutTcpError
  C:\Temp/ccDRRGiL.s:246    .text:00000170 NutTcpDeviceIOCtl
  C:\Temp/ccDRRGiL.s:309    .text:000001d6 NutTcpDiscardBuffers
  C:\Temp/ccDRRGiL.s:374    .text:00000242 NutTcpReceive
  C:\Temp/ccDRRGiL.s:676    .text:00000478 NutTcpDeviceRead
  C:\Temp/ccDRRGiL.s:685    .text:0000047e NutTcpSend
  C:\Temp/ccDRRGiL.s:823    .text:0000057c SendBuffer
  C:\Temp/ccDRRGiL.s:877    .text:000005d4 NutTcpDeviceWrite
  C:\Temp/ccDRRGiL.s:1146   .text:000007de NutTcpDeviceWrite_P
  C:\Temp/ccDRRGiL.s:1206   .text:0000084a NutTcpCloseSocket
  C:\Temp/ccDRRGiL.s:1226   .text:00000868 NutTcpSetSockOpt
  C:\Temp/ccDRRGiL.s:1393   .text:00000980 NutTcpAccept
  C:\Temp/ccDRRGiL.s:1413   .text:00000992 NutTcpConnect
  C:\Temp/ccDRRGiL.s:1753   .data:00000000 last_local_port
  C:\Temp/ccDRRGiL.s:1570   .text:00000aa6 NutTcpCreateSocket
                             .bss:00000002 registered
  C:\Temp/ccDRRGiL.s:1687   .text:00000b90 NutTcpDestroySocket

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutNetBufFree
NutThreadYield
NutEventWait
memcpy
NutTcpStateWindowEvent
NutTcpOutput
free
__udivmodhi4
malloc
heapFreeList
NutHeapRootAlloc
memcpy_P
NutHeapRootFree
NutTcpStateCloseEvent
NutTcpStatePassiveOpenEvent
NutTcpStateActiveOpenEvent
NutIpRouteQuery
NutTcpInput
NutRegisterIpHandler
NutTcpInitStateMachine
calloc
NutGetTickCount
