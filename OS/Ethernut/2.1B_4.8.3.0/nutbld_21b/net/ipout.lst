GAS LISTING C:\Temp/ccyIr1PH.s 			page 1


   1               		.file	"ipout.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutIpOutput
  12               		.type	NutIpOutput, @function
  13               	NutIpOutput:
  14 0000 6F92      		push r6
  15 0002 7F92      		push r7
  16 0004 8F92      		push r8
  17 0006 9F92      		push r9
  18 0008 AF92      		push r10
  19 000a BF92      		push r11
  20 000c CF92      		push r12
  21 000e DF92      		push r13
  22 0010 EF92      		push r14
  23 0012 FF92      		push r15
  24 0014 0F93      		push r16
  25 0016 1F93      		push r17
  26 0018 DF93      		push r29
  27 001a CF93      		push r28
  28 001c CDB7      		in r28,__SP_L__
  29 001e DEB7      		in r29,__SP_H__
  30 0020 2A97      		sbiw r28,10
  31 0022 0FB6      		in __tmp_reg__,__SREG__
  32 0024 F894      		cli
  33 0026 DEBF      		out __SP_H__,r29
  34 0028 0FBE      		out __SREG__,__tmp_reg__
  35 002a CDBF      		out __SP_L__,r28
  36               	/* prologue: function */
  37               	/* frame size = 10 */
  38 002c 182F      		mov r17,r24
  39 002e 3A01      		movw r6,r20
  40 0030 4B01      		movw r8,r22
  41 0032 C901      		movw r24,r18
  42 0034 44E1      		ldi r20,lo8(20)
  43 0036 50E0      		ldi r21,hi8(20)
  44 0038 60E2      		ldi r22,lo8(32)
  45 003a 0E94 0000 		call NutNetBufAlloc
  46 003e 5C01      		movw r10,r24
  47 0040 0097      		sbiw r24,0
  48 0042 01F4      		brne .+2
  49 0044 00C0      		rjmp .L19
  50               	.L2:
  51 0046 DC01      		movw r26,r24
  52 0048 1796      		adiw r26,7
  53 004a ED90      		ld r14,X+
  54 004c FC90      		ld r15,X
  55 004e 1897      		sbiw r26,7+1
  56 0050 85E4      		ldi r24,lo8(69)
  57 0052 F701      		movw r30,r14
GAS LISTING C:\Temp/ccyIr1PH.s 			page 2


  58 0054 8083      		st Z,r24
  59 0056 1182      		std Z+1,__zero_reg__
  60 0058 1D96      		adiw r26,13
  61 005a 8D91      		ld r24,X+
  62 005c 9C91      		ld r25,X
  63 005e 1E97      		sbiw r26,13+1
  64 0060 1996      		adiw r26,9
  65 0062 2D91      		ld r18,X+
  66 0064 3C91      		ld r19,X
  67 0066 1A97      		sbiw r26,9+1
  68 0068 820F      		add r24,r18
  69 006a 931F      		adc r25,r19
  70 006c 5196      		adiw r26,17
  71 006e 2D91      		ld r18,X+
  72 0070 3C91      		ld r19,X
  73 0072 5297      		sbiw r26,17+1
  74 0074 820F      		add r24,r18
  75 0076 931F      		adc r25,r19
  76               	/* #APP */
  77               	 ;  295 "../../nut/include/sys/types.h" 1
  78 0078 082E      		mov __tmp_reg__, r24
  79 007a 892F      		mov r24, r25
  80 007c 902D      		mov r25, __tmp_reg__
  81               		
  82               	 ;  0 "" 2
  83               	/* #NOAPP */
  84 007e D701      		movw r26,r14
  85 0080 1396      		adiw r26,2+1
  86 0082 9C93      		st X,r25
  87 0084 8E93      		st -X,r24
  88 0086 1297      		sbiw r26,2
  89 0088 1796      		adiw r26,6+1
  90 008a 1C92      		st X,__zero_reg__
  91 008c 1E92      		st -X,__zero_reg__
  92 008e 1697      		sbiw r26,6
  93 0090 1230      		cpi r17,lo8(2)
  94 0092 01F4      		brne .L4
  95 0094 81E0      		ldi r24,lo8(1)
  96 0096 1896      		adiw r26,8
  97 0098 8C93      		st X,r24
  98 009a 00C0      		rjmp .L5
  99               	.L4:
 100 009c 80E4      		ldi r24,lo8(64)
 101 009e F701      		movw r30,r14
 102 00a0 8087      		std Z+8,r24
 103               	.L5:
 104 00a2 D701      		movw r26,r14
 105 00a4 1996      		adiw r26,9
 106 00a6 1C93      		st X,r17
 107 00a8 F701      		movw r30,r14
 108 00aa 608A      		std Z+16,r6
 109 00ac 718A      		std Z+17,r7
 110 00ae 828A      		std Z+18,r8
 111 00b0 938A      		std Z+19,r9
 112 00b2 FFEF      		ldi r31,lo8(-1)
 113 00b4 6F16      		cp r6,r31
 114 00b6 FFEF      		ldi r31,hi8(-1)
GAS LISTING C:\Temp/ccyIr1PH.s 			page 3


 115 00b8 7F06      		cpc r7,r31
 116 00ba FFEF      		ldi r31,hlo8(-1)
 117 00bc 8F06      		cpc r8,r31
 118 00be FFEF      		ldi r31,hhi8(-1)
 119 00c0 9F06      		cpc r9,r31
 120 00c2 01F0      		breq .+2
 121 00c4 00C0      		rjmp .L6
 122 00c6 8E01      		movw r16,r28
 123 00c8 0B5F      		subi r16,lo8(-(5))
 124 00ca 1F4F      		sbci r17,hi8(-(5))
 125 00cc 46E0      		ldi r20,lo8(6)
 126 00ce 50E0      		ldi r21,hi8(6)
 127 00d0 6FEF      		ldi r22,lo8(255)
 128 00d2 70E0      		ldi r23,hi8(255)
 129 00d4 C801      		movw r24,r16
 130 00d6 0E94 0000 		call memset
 131 00da C090 0000 		lds r12,nutDeviceList
 132 00de D090 0000 		lds r13,(nutDeviceList)+1
 133 00e2 20E0      		ldi r18,lo8(0)
 134 00e4 30E0      		ldi r19,hi8(0)
 135 00e6 4801      		movw r8,r16
 136 00e8 00C0      		rjmp .L7
 137               	.L10:
 138 00ea D601      		movw r26,r12
 139 00ec 1B96      		adiw r26,11
 140 00ee 8C91      		ld r24,X
 141 00f0 1B97      		sbiw r26,11
 142 00f2 8330      		cpi r24,lo8(3)
 143 00f4 01F0      		breq .+2
 144 00f6 00C0      		rjmp .L8
 145 00f8 1F96      		adiw r26,15
 146 00fa 0D91      		ld r16,X+
 147 00fc 1C91      		ld r17,X
 148 00fe 5097      		sbiw r26,15+1
 149 0100 F801      		movw r30,r16
 150 0102 818D      		ldd r24,Z+25
 151 0104 928D      		ldd r25,Z+26
 152 0106 0196      		adiw r24,1
 153 0108 928F      		std Z+26,r25
 154 010a 818F      		std Z+25,r24
 155 010c 0197      		sbiw r24,1
 156               	/* #APP */
 157               	 ;  295 "../../nut/include/sys/types.h" 1
 158 010e 082E      		mov __tmp_reg__, r24
 159 0110 892F      		mov r24, r25
 160 0112 902D      		mov r25, __tmp_reg__
 161               		
 162               	 ;  0 "" 2
 163               	/* #NOAPP */
 164 0114 D701      		movw r26,r14
 165 0116 1596      		adiw r26,4+1
 166 0118 9C93      		st X,r25
 167 011a 8E93      		st -X,r24
 168 011c 1497      		sbiw r26,4
 169 011e 8385      		ldd r24,Z+11
 170 0120 9485      		ldd r25,Z+12
 171 0122 A585      		ldd r26,Z+13
GAS LISTING C:\Temp/ccyIr1PH.s 			page 4


 172 0124 B685      		ldd r27,Z+14
 173 0126 F701      		movw r30,r14
 174 0128 8487      		std Z+12,r24
 175 012a 9587      		std Z+13,r25
 176 012c A687      		std Z+14,r26
 177 012e B787      		std Z+15,r27
 178 0130 1386      		std Z+11,__zero_reg__
 179 0132 1286      		std Z+10,__zero_reg__
 180 0134 D501      		movw r26,r10
 181 0136 1996      		adiw r26,9
 182 0138 4D91      		ld r20,X+
 183 013a 5C91      		ld r21,X
 184 013c 1A97      		sbiw r26,9+1
 185 013e 1796      		adiw r26,7
 186 0140 6D91      		ld r22,X+
 187 0142 7C91      		ld r23,X
 188 0144 1897      		sbiw r26,7+1
 189 0146 80E0      		ldi r24,lo8(0)
 190 0148 90E0      		ldi r25,hi8(0)
 191 014a 0E94 0000 		call NutIpChkSum
 192 014e F701      		movw r30,r14
 193 0150 9387      		std Z+11,r25
 194 0152 8287      		std Z+10,r24
 195 0154 D801      		movw r26,r16
 196 0156 8C91      		ld r24,X
 197 0158 9396      		adiw r26,35
 198 015a ED91      		ld r30,X+
 199 015c FC91      		ld r31,X
 200 015e 9497      		sbiw r26,35+1
 201 0160 8630      		cpi r24,lo8(6)
 202 0162 01F4      		brne .L9
 203 0164 9501      		movw r18,r10
 204 0166 A401      		movw r20,r8
 205 0168 60E0      		ldi r22,lo8(2048)
 206 016a 78E0      		ldi r23,hi8(2048)
 207 016c 00C0      		rjmp .L18
 208               	.L9:
 209 016e 9501      		movw r18,r10
 210 0170 40E0      		ldi r20,lo8(0)
 211 0172 50E0      		ldi r21,hi8(0)
 212 0174 61E2      		ldi r22,lo8(33)
 213 0176 70E0      		ldi r23,hi8(33)
 214               	.L18:
 215 0178 C601      		movw r24,r12
 216 017a 0995      		icall
 217 017c 9C01      		movw r18,r24
 218               	.L8:
 219 017e F601      		movw r30,r12
 220 0180 C080      		ld r12,Z
 221 0182 D180      		ldd r13,Z+1
 222               	.L7:
 223 0184 C114      		cp r12,__zero_reg__
 224 0186 D104      		cpc r13,__zero_reg__
 225 0188 01F4      		brne .+2
 226 018a 00C0      		rjmp .L3
 227 018c 2115      		cp r18,__zero_reg__
 228 018e 3105      		cpc r19,__zero_reg__
GAS LISTING C:\Temp/ccyIr1PH.s 			page 5


 229 0190 01F4      		brne .+2
 230 0192 00C0      		rjmp .L10
 231 0194 00C0      		rjmp .L3
 232               	.L6:
 233 0196 AE01      		movw r20,r28
 234 0198 4F5F      		subi r20,lo8(-(1))
 235 019a 5F4F      		sbci r21,hi8(-(1))
 236 019c C401      		movw r24,r8
 237 019e B301      		movw r22,r6
 238 01a0 0E94 0000 		call NutIpRouteQuery
 239 01a4 6C01      		movw r12,r24
 240 01a6 0097      		sbiw r24,0
 241 01a8 01F4      		brne .+2
 242 01aa 00C0      		rjmp .L16
 243               	.L11:
 244 01ac DC01      		movw r26,r24
 245 01ae 1F96      		adiw r26,15
 246 01b0 0D91      		ld r16,X+
 247 01b2 1C91      		ld r17,X
 248 01b4 5097      		sbiw r26,15+1
 249 01b6 F801      		movw r30,r16
 250 01b8 818D      		ldd r24,Z+25
 251 01ba 928D      		ldd r25,Z+26
 252 01bc 0196      		adiw r24,1
 253 01be 928F      		std Z+26,r25
 254 01c0 818F      		std Z+25,r24
 255 01c2 0197      		sbiw r24,1
 256               	/* #APP */
 257               	 ;  295 "../../nut/include/sys/types.h" 1
 258 01c4 082E      		mov __tmp_reg__, r24
 259 01c6 892F      		mov r24, r25
 260 01c8 902D      		mov r25, __tmp_reg__
 261               		
 262               	 ;  0 "" 2
 263               	/* #NOAPP */
 264 01ca D701      		movw r26,r14
 265 01cc 1596      		adiw r26,4+1
 266 01ce 9C93      		st X,r25
 267 01d0 8E93      		st -X,r24
 268 01d2 1497      		sbiw r26,4
 269 01d4 8385      		ldd r24,Z+11
 270 01d6 9485      		ldd r25,Z+12
 271 01d8 A585      		ldd r26,Z+13
 272 01da B685      		ldd r27,Z+14
 273 01dc F701      		movw r30,r14
 274 01de 8487      		std Z+12,r24
 275 01e0 9587      		std Z+13,r25
 276 01e2 A687      		std Z+14,r26
 277 01e4 B787      		std Z+15,r27
 278 01e6 1386      		std Z+11,__zero_reg__
 279 01e8 1286      		std Z+10,__zero_reg__
 280 01ea D501      		movw r26,r10
 281 01ec 1996      		adiw r26,9
 282 01ee 4D91      		ld r20,X+
 283 01f0 5C91      		ld r21,X
 284 01f2 1A97      		sbiw r26,9+1
 285 01f4 1796      		adiw r26,7
GAS LISTING C:\Temp/ccyIr1PH.s 			page 6


 286 01f6 6D91      		ld r22,X+
 287 01f8 7C91      		ld r23,X
 288 01fa 1897      		sbiw r26,7+1
 289 01fc 80E0      		ldi r24,lo8(0)
 290 01fe 90E0      		ldi r25,hi8(0)
 291 0200 0E94 0000 		call NutIpChkSum
 292 0204 F701      		movw r30,r14
 293 0206 9387      		std Z+11,r25
 294 0208 8287      		std Z+10,r24
 295 020a D801      		movw r26,r16
 296 020c 8C91      		ld r24,X
 297 020e 8630      		cpi r24,lo8(6)
 298 0210 01F4      		brne .L12
 299 0212 8981      		ldd r24,Y+1
 300 0214 9A81      		ldd r25,Y+2
 301 0216 AB81      		ldd r26,Y+3
 302 0218 BC81      		ldd r27,Y+4
 303 021a 0097      		sbiw r24,0
 304 021c A105      		cpc r26,__zero_reg__
 305 021e B105      		cpc r27,__zero_reg__
 306 0220 01F4      		brne .L13
 307 0222 F801      		movw r30,r16
 308 0224 8389      		ldd r24,Z+19
 309 0226 9489      		ldd r25,Z+20
 310 0228 A589      		ldd r26,Z+21
 311 022a B689      		ldd r27,Z+22
 312 022c 8629      		or r24,r6
 313 022e 9729      		or r25,r7
 314 0230 A829      		or r26,r8
 315 0232 B929      		or r27,r9
 316 0234 8F5F      		subi r24,lo8(-1)
 317 0236 9F4F      		sbci r25,hi8(-1)
 318 0238 AF4F      		sbci r26,hlo8(-1)
 319 023a BF4F      		sbci r27,hhi8(-1)
 320 023c 01F4      		brne .L14
 321 023e 46E0      		ldi r20,lo8(6)
 322 0240 50E0      		ldi r21,hi8(6)
 323 0242 6FEF      		ldi r22,lo8(255)
 324 0244 70E0      		ldi r23,hi8(255)
 325 0246 CE01      		movw r24,r28
 326 0248 0596      		adiw r24,5
 327 024a 0E94 0000 		call memset
 328 024e 00C0      		rjmp .L15
 329               	.L13:
 330 0250 3C01      		movw r6,r24
 331 0252 4D01      		movw r8,r26
 332               	.L14:
 333 0254 9E01      		movw r18,r28
 334 0256 2B5F      		subi r18,lo8(-(5))
 335 0258 3F4F      		sbci r19,hi8(-(5))
 336 025a B401      		movw r22,r8
 337 025c A301      		movw r20,r6
 338 025e C601      		movw r24,r12
 339 0260 0E94 0000 		call NutArpCacheQuery
 340 0264 892B      		or r24,r25
 341 0266 01F0      		breq .L15
 342 0268 20E0      		ldi r18,lo8(0)
GAS LISTING C:\Temp/ccyIr1PH.s 			page 7


 343 026a 30E0      		ldi r19,hi8(0)
 344 026c 00C0      		rjmp .L3
 345               	.L15:
 346 026e D801      		movw r26,r16
 347 0270 9396      		adiw r26,35
 348 0272 ED91      		ld r30,X+
 349 0274 FC91      		ld r31,X
 350 0276 9497      		sbiw r26,35+1
 351 0278 9501      		movw r18,r10
 352 027a AE01      		movw r20,r28
 353 027c 4B5F      		subi r20,lo8(-(5))
 354 027e 5F4F      		sbci r21,hi8(-(5))
 355 0280 60E0      		ldi r22,lo8(2048)
 356 0282 78E0      		ldi r23,hi8(2048)
 357 0284 00C0      		rjmp .L20
 358               	.L12:
 359 0286 8731      		cpi r24,lo8(23)
 360 0288 01F4      		brne .L16
 361 028a D801      		movw r26,r16
 362 028c 9396      		adiw r26,35
 363 028e ED91      		ld r30,X+
 364 0290 FC91      		ld r31,X
 365 0292 9497      		sbiw r26,35+1
 366 0294 9501      		movw r18,r10
 367 0296 40E0      		ldi r20,lo8(0)
 368 0298 50E0      		ldi r21,hi8(0)
 369 029a 61E2      		ldi r22,lo8(33)
 370 029c 70E0      		ldi r23,hi8(33)
 371               	.L20:
 372 029e C601      		movw r24,r12
 373 02a0 0995      		icall
 374 02a2 9C01      		movw r18,r24
 375 02a4 00C0      		rjmp .L3
 376               	.L16:
 377 02a6 C501      		movw r24,r10
 378 02a8 0E94 0000 		call NutNetBufFree
 379               	.L19:
 380 02ac 2FEF      		ldi r18,lo8(-1)
 381 02ae 3FEF      		ldi r19,hi8(-1)
 382               	.L3:
 383 02b0 C901      		movw r24,r18
 384               	/* epilogue start */
 385 02b2 2A96      		adiw r28,10
 386 02b4 0FB6      		in __tmp_reg__,__SREG__
 387 02b6 F894      		cli
 388 02b8 DEBF      		out __SP_H__,r29
 389 02ba 0FBE      		out __SREG__,__tmp_reg__
 390 02bc CDBF      		out __SP_L__,r28
 391 02be CF91      		pop r28
 392 02c0 DF91      		pop r29
 393 02c2 1F91      		pop r17
 394 02c4 0F91      		pop r16
 395 02c6 FF90      		pop r15
 396 02c8 EF90      		pop r14
 397 02ca DF90      		pop r13
 398 02cc CF90      		pop r12
 399 02ce BF90      		pop r11
GAS LISTING C:\Temp/ccyIr1PH.s 			page 8


 400 02d0 AF90      		pop r10
 401 02d2 9F90      		pop r9
 402 02d4 8F90      		pop r8
 403 02d6 7F90      		pop r7
 404 02d8 6F90      		pop r6
 405 02da 0895      		ret
 406               		.size	NutIpOutput, .-NutIpOutput
GAS LISTING C:\Temp/ccyIr1PH.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 ipout.c
  C:\Temp/ccyIr1PH.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccyIr1PH.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccyIr1PH.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccyIr1PH.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccyIr1PH.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccyIr1PH.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccyIr1PH.s:13     .text:00000000 NutIpOutput

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutNetBufAlloc
memset
nutDeviceList
NutIpChkSum
NutIpRouteQuery
NutArpCacheQuery
NutNetBufFree
