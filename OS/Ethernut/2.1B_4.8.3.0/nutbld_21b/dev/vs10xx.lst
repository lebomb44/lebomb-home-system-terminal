GAS LISTING C:\Temp/ccUwxOwf.s 			page 1


   1               		.file	"vs10xx.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	VsGetStatus
  12               		.type	VsGetStatus, @function
  13               	VsGetStatus:
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0000 8091 0000 		lds r24,vs_status
  17 0004 90E0      		ldi r25,lo8(0)
  18               	/* epilogue start */
  19 0006 0895      		ret
  20               		.size	VsGetStatus, .-VsGetStatus
  21               		.type	VsSdiWrite_P, @function
  22               	VsSdiWrite_P:
  23 0008 0F93      		push r16
  24 000a 1F93      		push r17
  25 000c CF93      		push r28
  26 000e DF93      		push r29
  27               	/* prologue: function */
  28               	/* frame size = 0 */
  29 0010 8C01      		movw r16,r24
  30 0012 EB01      		movw r28,r22
  31 0014 00C0      		rjmp .L4
  32               	.L8:
  33 0016 8099      		sbic 48-32,0
  34 0018 00C0      		rjmp .L5
  35 001a 80E0      		ldi r24,lo8(0)
  36 001c 90E0      		ldi r25,hi8(0)
  37               	.L6:
  38 001e 8099      		sbic 48-32,0
  39 0020 00C0      		rjmp .L5
  40 0022 0196      		adiw r24,1
  41 0024 23E1      		ldi r18,hi8(5000)
  42 0026 8838      		cpi r24,lo8(5000)
  43 0028 9207      		cpc r25,r18
  44 002a 01F4      		brne .L6
  45 002c 2FEF      		ldi r18,lo8(-1)
  46 002e 3FEF      		ldi r19,hi8(-1)
  47 0030 00C0      		rjmp .L7
  48               	.L5:
  49 0032 F801      		movw r30,r16
  50               	/* #APP */
  51               	 ;  936 "../../nut/dev/vs10xx.c" 1
  52 0034 8491      		lpm r24, Z
  53               		
  54               	 ;  0 "" 2
  55               	/* #NOAPP */
  56 0036 0E94 0000 		call Sppi0Byte
  57 003a 0F5F      		subi r16,lo8(-(1))
GAS LISTING C:\Temp/ccUwxOwf.s 			page 2


  58 003c 1F4F      		sbci r17,hi8(-(1))
  59 003e 2197      		sbiw r28,1
  60               	.L4:
  61 0040 2097      		sbiw r28,0
  62 0042 01F4      		brne .L8
  63 0044 20E0      		ldi r18,lo8(0)
  64 0046 30E0      		ldi r19,hi8(0)
  65               	.L7:
  66 0048 C901      		movw r24,r18
  67               	/* epilogue start */
  68 004a DF91      		pop r29
  69 004c CF91      		pop r28
  70 004e 1F91      		pop r17
  71 0050 0F91      		pop r16
  72 0052 0895      		ret
  73               		.size	VsSdiWrite_P, .-VsSdiWrite_P
  74               		.type	VsSciSelect, @function
  75               	VsSciSelect:
  76               	/* prologue: function */
  77               	/* frame size = 0 */
  78 0054 8823      		tst r24
  79 0056 01F0      		breq .L12
  80 0058 81E0      		ldi r24,lo8(1)
  81 005a 0E94 0000 		call Sppi0NegDeselectDevice
  82 005e C59A      		sbi 56-32,5
  83 0060 9698      		cbi 50-32,6
  84 0062 00C0      		rjmp .L15
  85               	.L12:
  86 0064 81E0      		ldi r24,lo8(1)
  87 0066 0E94 0000 		call Sppi0NegDeselectDevice
  88 006a 969A      		sbi 50-32,6
  89 006c C598      		cbi 56-32,5
  90               	.L15:
  91 006e 81E0      		ldi r24,lo8(1)
  92 0070 0E94 0000 		call Sppi0NegSelectDevice
  93 0074 0895      		ret
  94               		.size	VsSciSelect, .-VsSciSelect
  95               		.type	VsRegWrite, @function
  96               	VsRegWrite:
  97 0076 FF92      		push r15
  98 0078 0F93      		push r16
  99 007a 1F93      		push r17
 100               	/* prologue: function */
 101               	/* frame size = 0 */
 102 007c 182F      		mov r17,r24
 103 007e F62E      		mov r15,r22
 104 0080 072F      		mov r16,r23
 105 0082 80E0      		ldi r24,lo8(0)
 106 0084 90E0      		ldi r25,hi8(0)
 107               	.L18:
 108 0086 8099      		sbic 48-32,0
 109 0088 00C0      		rjmp .L17
 110 008a 0196      		adiw r24,1
 111 008c 23E1      		ldi r18,hi8(5000)
 112 008e 8838      		cpi r24,lo8(5000)
 113 0090 9207      		cpc r25,r18
 114 0092 01F4      		brne .L18
GAS LISTING C:\Temp/ccUwxOwf.s 			page 3


 115               	.L17:
 116 0094 81E0      		ldi r24,lo8(1)
 117 0096 0E94 0000 		call VsSciSelect
 118 009a 82E0      		ldi r24,lo8(2)
 119 009c 0E94 0000 		call Sppi0Byte
 120 00a0 812F      		mov r24,r17
 121 00a2 0E94 0000 		call Sppi0Byte
 122 00a6 802F      		mov r24,r16
 123 00a8 0E94 0000 		call Sppi0Byte
 124 00ac 8F2D      		mov r24,r15
 125 00ae 0E94 0000 		call Sppi0Byte
 126 00b2 80E0      		ldi r24,lo8(0)
 127 00b4 0E94 0000 		call VsSciSelect
 128               	/* epilogue start */
 129 00b8 1F91      		pop r17
 130 00ba 0F91      		pop r16
 131 00bc FF90      		pop r15
 132 00be 0895      		ret
 133               		.size	VsRegWrite, .-VsRegWrite
 134               		.type	VsRegRead, @function
 135               	VsRegRead:
 136 00c0 EF92      		push r14
 137 00c2 FF92      		push r15
 138 00c4 0F93      		push r16
 139 00c6 1F93      		push r17
 140               	/* prologue: function */
 141               	/* frame size = 0 */
 142 00c8 082F      		mov r16,r24
 143 00ca 80E0      		ldi r24,lo8(0)
 144 00cc 90E0      		ldi r25,hi8(0)
 145               	.L23:
 146 00ce 8099      		sbic 48-32,0
 147 00d0 00C0      		rjmp .L22
 148 00d2 0196      		adiw r24,1
 149 00d4 23E1      		ldi r18,hi8(5000)
 150 00d6 8838      		cpi r24,lo8(5000)
 151 00d8 9207      		cpc r25,r18
 152 00da 01F4      		brne .L23
 153               	.L22:
 154 00dc 81E0      		ldi r24,lo8(1)
 155 00de 0E94 0000 		call VsSciSelect
 156 00e2 83E0      		ldi r24,lo8(3)
 157 00e4 0E94 0000 		call Sppi0Byte
 158 00e8 802F      		mov r24,r16
 159 00ea 0E94 0000 		call Sppi0Byte
 160 00ee 80E0      		ldi r24,lo8(0)
 161 00f0 0E94 0000 		call Sppi0Byte
 162 00f4 F82E      		mov r15,r24
 163 00f6 EE24      		clr r14
 164 00f8 80E0      		ldi r24,lo8(0)
 165 00fa 0E94 0000 		call Sppi0Byte
 166 00fe 082F      		mov r16,r24
 167 0100 80E0      		ldi r24,lo8(0)
 168 0102 0E94 0000 		call VsSciSelect
 169 0106 10E0      		ldi r17,lo8(0)
 170 0108 0E29      		or r16,r14
 171 010a 1F29      		or r17,r15
GAS LISTING C:\Temp/ccUwxOwf.s 			page 4


 172 010c C801      		movw r24,r16
 173               	/* epilogue start */
 174 010e 1F91      		pop r17
 175 0110 0F91      		pop r16
 176 0112 FF90      		pop r15
 177 0114 EF90      		pop r14
 178 0116 0895      		ret
 179               		.size	VsRegRead, .-VsRegRead
 180               	.global	VsPlayerThrottle
 181               		.type	VsPlayerThrottle, @function
 182               	VsPlayerThrottle:
 183 0118 0F93      		push r16
 184 011a 1F93      		push r17
 185               	/* prologue: function */
 186               	/* frame size = 0 */
 187 011c 182F      		mov r17,r24
 188 011e 0091 0000 		lds r16,is_throttled.1947
 189 0122 8823      		tst r24
 190 0124 01F0      		breq .L27
 191 0126 C59A      		sbi 56-32,5
 192 0128 81E0      		ldi r24,lo8(1)
 193 012a 0E94 0000 		call Sppi0NegDeselectDevice
 194 012e 00C0      		rjmp .L28
 195               	.L27:
 196 0130 C598      		cbi 56-32,5
 197 0132 81E0      		ldi r24,lo8(1)
 198 0134 0E94 0000 		call Sppi0NegSelectDevice
 199               	.L28:
 200 0138 1093 0000 		sts is_throttled.1947,r17
 201 013c 802F      		mov r24,r16
 202               	/* epilogue start */
 203 013e 1F91      		pop r17
 204 0140 0F91      		pop r16
 205 0142 0895      		ret
 206               		.size	VsPlayerThrottle, .-VsPlayerThrottle
 207               		.type	VsPlayerFeed, @function
 208               	VsPlayerFeed:
 209 0144 8F92      		push r8
 210 0146 9F92      		push r9
 211 0148 AF92      		push r10
 212 014a BF92      		push r11
 213 014c DF92      		push r13
 214 014e EF92      		push r14
 215 0150 FF92      		push r15
 216 0152 0F93      		push r16
 217 0154 1F93      		push r17
 218 0156 DF93      		push r29
 219 0158 CF93      		push r28
 220 015a 00D0      		rcall .
 221 015c CDB7      		in r28,__SP_L__
 222 015e DEB7      		in r29,__SP_H__
 223               	/* prologue: function */
 224               	/* frame size = 2 */
 225 0160 809B      		sbis 48-32,0
 226 0162 00C0      		rjmp .L46
 227 0164 8091 0000 		lds r24,vs_status
 228 0168 8130      		cpi r24,lo8(1)
GAS LISTING C:\Temp/ccUwxOwf.s 			page 5


 229 016a 01F0      		breq .L32
 230 016c 30E2      		ldi r19,lo8(32)
 231 016e D32E      		mov r13,r19
 232 0170 00C0      		rjmp .L33
 233               	.L32:
 234 0172 1A82      		std Y+2,__zero_reg__
 235 0174 1982      		std Y+1,__zero_reg__
 236 0176 20E2      		ldi r18,lo8(32)
 237 0178 D22E      		mov r13,r18
 238 017a AA24      		clr r10
 239 017c BB24      		clr r11
 240 017e EE24      		clr r14
 241 0180 FF24      		clr r15
 242 0182 00E0      		ldi r16,lo8(0)
 243 0184 10E0      		ldi r17,hi8(0)
 244 0186 4E01      		movw r8,r28
 245 0188 0894      		sec
 246 018a 811C      		adc r8,__zero_reg__
 247 018c 911C      		adc r9,__zero_reg__
 248               	.L41:
 249 018e 8981      		ldd r24,Y+1
 250 0190 9A81      		ldd r25,Y+2
 251 0192 0817      		cp r16,r24
 252 0194 1907      		cpc r17,r25
 253 0196 00F0      		brlo .L34
 254 0198 0115      		cp r16,__zero_reg__
 255 019a 1105      		cpc r17,__zero_reg__
 256 019c 01F0      		breq .L35
 257 019e C801      		movw r24,r16
 258 01a0 0E94 0000 		call NutSegBufReadCommit
 259               	.L35:
 260 01a4 C401      		movw r24,r8
 261 01a6 0E94 0000 		call NutSegBufReadRequest
 262 01aa 7C01      		movw r14,r24
 263 01ac 8981      		ldd r24,Y+1
 264 01ae 9A81      		ldd r25,Y+2
 265 01b0 892B      		or r24,r25
 266 01b2 01F4      		brne .L36
 267 01b4 82E0      		ldi r24,lo8(2)
 268 01b6 8093 0000 		sts vs_status,r24
 269 01ba 00E0      		ldi r16,lo8(0)
 270 01bc 10E0      		ldi r17,hi8(0)
 271 01be 00C0      		rjmp .L37
 272               	.L36:
 273 01c0 00E0      		ldi r16,lo8(0)
 274 01c2 10E0      		ldi r17,hi8(0)
 275               	.L34:
 276 01c4 F701      		movw r30,r14
 277 01c6 8081      		ld r24,Z
 278 01c8 0E94 0000 		call Sppi0Byte
 279 01cc 0F5F      		subi r16,lo8(-(1))
 280 01ce 1F4F      		sbci r17,hi8(-(1))
 281 01d0 0894      		sec
 282 01d2 A11C      		adc r10,__zero_reg__
 283 01d4 B11C      		adc r11,__zero_reg__
 284 01d6 F1E0      		ldi r31,lo8(4097)
 285 01d8 AF16      		cp r10,r31
GAS LISTING C:\Temp/ccUwxOwf.s 			page 6


 286 01da F0E1      		ldi r31,hi8(4097)
 287 01dc BF06      		cpc r11,r31
 288 01de 01F4      		brne .L38
 289 01e0 82E0      		ldi r24,lo8(2)
 290 01e2 8093 0000 		sts vs_status,r24
 291 01e6 00C0      		rjmp .L37
 292               	.L38:
 293 01e8 809B      		sbis 48-32,0
 294 01ea 00C0      		rjmp .L39
 295 01ec 90E2      		ldi r25,lo8(32)
 296 01ee D92E      		mov r13,r25
 297               	.L39:
 298 01f0 8D2D      		mov r24,r13
 299 01f2 8150      		subi r24,lo8(-(-1))
 300 01f4 DD20      		tst r13
 301 01f6 01F0      		breq .L40
 302 01f8 0894      		sec
 303 01fa E11C      		adc r14,__zero_reg__
 304 01fc F11C      		adc r15,__zero_reg__
 305 01fe D82E      		mov r13,r24
 306 0200 00C0      		rjmp .L41
 307               	.L40:
 308 0202 D82E      		mov r13,r24
 309               	.L37:
 310 0204 C801      		movw r24,r16
 311 0206 0E94 0000 		call NutSegBufReadLast
 312               	.L33:
 313 020a 8091 0000 		lds r24,vs_status
 314 020e 8130      		cpi r24,lo8(1)
 315 0210 01F0      		breq .L46
 316 0212 8091 0000 		lds r24,vs_flush
 317 0216 9091 0000 		lds r25,(vs_flush)+1
 318 021a 892B      		or r24,r25
 319 021c 01F0      		breq .L46
 320               	.L47:
 321 021e 80E0      		ldi r24,lo8(0)
 322 0220 0E94 0000 		call Sppi0Byte
 323 0224 8091 0000 		lds r24,vs_flush
 324 0228 9091 0000 		lds r25,(vs_flush)+1
 325 022c 0197      		sbiw r24,1
 326 022e 9093 0000 		sts (vs_flush)+1,r25
 327 0232 8093 0000 		sts vs_flush,r24
 328 0236 8091 0000 		lds r24,vs_flush
 329 023a 9091 0000 		lds r25,(vs_flush)+1
 330 023e 892B      		or r24,r25
 331 0240 01F4      		brne .L42
 332 0242 84E0      		ldi r24,lo8(4)
 333 0244 8093 0000 		sts vs_status,r24
 334 0248 00C0      		rjmp .L46
 335               	.L42:
 336 024a 809B      		sbis 48-32,0
 337 024c 00C0      		rjmp .L43
 338 024e 80E2      		ldi r24,lo8(32)
 339 0250 D82E      		mov r13,r24
 340 0252 00C0      		rjmp .L44
 341               	.L43:
 342 0254 DD20      		tst r13
GAS LISTING C:\Temp/ccUwxOwf.s 			page 7


 343 0256 01F0      		breq .L46
 344               	.L44:
 345 0258 DA94      		dec r13
 346 025a 00C0      		rjmp .L47
 347               	.L46:
 348               	/* epilogue start */
 349 025c 0F90      		pop __tmp_reg__
 350 025e 0F90      		pop __tmp_reg__
 351 0260 CF91      		pop r28
 352 0262 DF91      		pop r29
 353 0264 1F91      		pop r17
 354 0266 0F91      		pop r16
 355 0268 FF90      		pop r15
 356 026a EF90      		pop r14
 357 026c DF90      		pop r13
 358 026e BF90      		pop r11
 359 0270 AF90      		pop r10
 360 0272 9F90      		pop r9
 361 0274 8F90      		pop r8
 362 0276 0895      		ret
 363               		.size	VsPlayerFeed, .-VsPlayerFeed
 364               	.global	VsPlayerInterrupts
 365               		.type	VsPlayerInterrupts, @function
 366               	VsPlayerInterrupts:
 367 0278 0F93      		push r16
 368 027a 1F93      		push r17
 369               	/* prologue: function */
 370               	/* frame size = 0 */
 371 027c 182F      		mov r17,r24
 372 027e 0091 0000 		lds r16,is_enabled.1935
 373 0282 8823      		tst r24
 374 0284 01F0      		breq .L49
 375 0286 8898      		cbi 49-32,0
 376 0288 909A      		sbi 50-32,0
 377 028a 80E0      		ldi r24,lo8(sig_INTERRUPT0)
 378 028c 90E0      		ldi r25,hi8(sig_INTERRUPT0)
 379 028e 0E94 0000 		call NutIrqEnable
 380 0292 00C0      		rjmp .L50
 381               	.L49:
 382 0294 80E0      		ldi r24,lo8(sig_INTERRUPT0)
 383 0296 90E0      		ldi r25,hi8(sig_INTERRUPT0)
 384 0298 0E94 0000 		call NutIrqDisable
 385               	.L50:
 386 029c 1093 0000 		sts is_enabled.1935,r17
 387 02a0 802F      		mov r24,r16
 388               	/* epilogue start */
 389 02a2 1F91      		pop r17
 390 02a4 0F91      		pop r16
 391 02a6 0895      		ret
 392               		.size	VsPlayerInterrupts, .-VsPlayerInterrupts
 393               	.global	VsBeep
 394               		.type	VsBeep, @function
 395               	VsBeep:
 396 02a8 CF92      		push r12
 397 02aa DF92      		push r13
 398 02ac EF92      		push r14
 399 02ae FF92      		push r15
GAS LISTING C:\Temp/ccUwxOwf.s 			page 8


 400 02b0 0F93      		push r16
 401 02b2 1F93      		push r17
 402 02b4 DF93      		push r29
 403 02b6 CF93      		push r28
 404 02b8 0F92      		push __tmp_reg__
 405 02ba CDB7      		in r28,__SP_L__
 406 02bc DEB7      		in r29,__SP_H__
 407               	/* prologue: function */
 408               	/* frame size = 1 */
 409 02be 8983      		std Y+1,r24
 410 02c0 D62E      		mov r13,r22
 411 02c2 80E0      		ldi r24,lo8(0)
 412 02c4 0E94 0000 		call VsPlayerInterrupts
 413 02c8 C82E      		mov r12,r24
 414 02ca 60E2      		ldi r22,lo8(2080)
 415 02cc 78E0      		ldi r23,hi8(2080)
 416 02ce 80E0      		ldi r24,lo8(0)
 417 02d0 0E94 0000 		call VsRegWrite
 418 02d4 2981      		ldd r18,Y+1
 419 02d6 30E0      		ldi r19,lo8(0)
 420 02d8 2770      		andi r18,lo8(7)
 421 02da 3070      		andi r19,hi8(7)
 422 02dc C901      		movw r24,r18
 423 02de 53E0      		ldi r21,3
 424 02e0 880F      	1:	lsl r24
 425 02e2 991F      		rol r25
 426 02e4 5A95      		dec r21
 427 02e6 01F4      		brne 1b
 428 02e8 820F      		add r24,r18
 429 02ea 931F      		adc r25,r19
 430 02ec 885C      		subi r24,lo8(-(56))
 431 02ee 8983      		std Y+1,r24
 432 02f0 63E0      		ldi r22,lo8(3)
 433 02f2 70E0      		ldi r23,hi8(3)
 434 02f4 80E0      		ldi r24,lo8(on.2184)
 435 02f6 90E0      		ldi r25,hi8(on.2184)
 436 02f8 0E94 0000 		call VsSdiWrite_P
 437 02fc 8E01      		movw r16,r28
 438 02fe 0F5F      		subi r16,lo8(-(1))
 439 0300 1F4F      		sbci r17,hi8(-(1))
 440 0302 42E0      		ldi r20,lo8(2)
 441 0304 E42E      		mov r14,r20
 442 0306 F12C      		mov r15,__zero_reg__
 443 0308 EC0E      		add r14,r28
 444 030a FD1E      		adc r15,r29
 445 030c 00C0      		rjmp .L53
 446               	.L57:
 447 030e 8099      		sbic 48-32,0
 448 0310 00C0      		rjmp .L54
 449 0312 80E0      		ldi r24,lo8(0)
 450 0314 90E0      		ldi r25,hi8(0)
 451               	.L55:
 452 0316 8099      		sbic 48-32,0
 453 0318 00C0      		rjmp .L54
 454 031a 0196      		adiw r24,1
 455 031c 23E1      		ldi r18,hi8(5000)
 456 031e 8838      		cpi r24,lo8(5000)
GAS LISTING C:\Temp/ccUwxOwf.s 			page 9


 457 0320 9207      		cpc r25,r18
 458 0322 01F4      		brne .L55
 459 0324 00C0      		rjmp .L56
 460               	.L54:
 461 0326 F801      		movw r30,r16
 462 0328 8191      		ld r24,Z+
 463 032a 8F01      		movw r16,r30
 464 032c 0E94 0000 		call Sppi0Byte
 465               	.L53:
 466 0330 0E15      		cp r16,r14
 467 0332 1F05      		cpc r17,r15
 468 0334 01F4      		brne .L57
 469               	.L56:
 470 0336 64E0      		ldi r22,lo8(4)
 471 0338 70E0      		ldi r23,hi8(4)
 472 033a 80E0      		ldi r24,lo8(end.2186)
 473 033c 90E0      		ldi r25,hi8(end.2186)
 474 033e 0E94 0000 		call VsSdiWrite_P
 475 0342 8D2D      		mov r24,r13
 476 0344 0E94 0000 		call NutDelay
 477 0348 64E0      		ldi r22,lo8(4)
 478 034a 70E0      		ldi r23,hi8(4)
 479 034c 80E0      		ldi r24,lo8(off.2185)
 480 034e 90E0      		ldi r25,hi8(off.2185)
 481 0350 0E94 0000 		call VsSdiWrite_P
 482 0354 64E0      		ldi r22,lo8(4)
 483 0356 70E0      		ldi r23,hi8(4)
 484 0358 80E0      		ldi r24,lo8(end.2186)
 485 035a 90E0      		ldi r25,hi8(end.2186)
 486 035c 0E94 0000 		call VsSdiWrite_P
 487 0360 60E0      		ldi r22,lo8(2048)
 488 0362 78E0      		ldi r23,hi8(2048)
 489 0364 80E0      		ldi r24,lo8(0)
 490 0366 0E94 0000 		call VsRegWrite
 491 036a 8C2D      		mov r24,r12
 492 036c 0E94 0000 		call VsPlayerInterrupts
 493 0370 80E0      		ldi r24,lo8(0)
 494 0372 90E0      		ldi r25,hi8(0)
 495               	/* epilogue start */
 496 0374 0F90      		pop __tmp_reg__
 497 0376 CF91      		pop r28
 498 0378 DF91      		pop r29
 499 037a 1F91      		pop r17
 500 037c 0F91      		pop r16
 501 037e FF90      		pop r15
 502 0380 EF90      		pop r14
 503 0382 DF90      		pop r13
 504 0384 CF90      		pop r12
 505 0386 0895      		ret
 506               		.size	VsBeep, .-VsBeep
 507               	.global	VsSetVolume
 508               		.type	VsSetVolume, @function
 509               	VsSetVolume:
 510 0388 EF92      		push r14
 511 038a FF92      		push r15
 512 038c 0F93      		push r16
 513 038e 1F93      		push r17
GAS LISTING C:\Temp/ccUwxOwf.s 			page 10


 514               	/* prologue: function */
 515               	/* frame size = 0 */
 516 0390 F82E      		mov r15,r24
 517 0392 062F      		mov r16,r22
 518 0394 80E0      		ldi r24,lo8(0)
 519 0396 0E94 0000 		call VsPlayerInterrupts
 520 039a E82E      		mov r14,r24
 521 039c 10E0      		ldi r17,lo8(0)
 522 039e 9F2D      		mov r25,r15
 523 03a0 80E0      		ldi r24,lo8(0)
 524 03a2 082B      		or r16,r24
 525 03a4 192B      		or r17,r25
 526 03a6 B801      		movw r22,r16
 527 03a8 8BE0      		ldi r24,lo8(11)
 528 03aa 0E94 0000 		call VsRegWrite
 529 03ae 8E2D      		mov r24,r14
 530 03b0 0E94 0000 		call VsPlayerInterrupts
 531 03b4 80E0      		ldi r24,lo8(0)
 532 03b6 90E0      		ldi r25,hi8(0)
 533               	/* epilogue start */
 534 03b8 1F91      		pop r17
 535 03ba 0F91      		pop r16
 536 03bc FF90      		pop r15
 537 03be EF90      		pop r14
 538 03c0 0895      		ret
 539               		.size	VsSetVolume, .-VsSetVolume
 540               	.global	VsMemoryTest
 541               		.type	VsMemoryTest, @function
 542               	VsMemoryTest:
 543 03c2 1F93      		push r17
 544 03c4 CF93      		push r28
 545 03c6 DF93      		push r29
 546               	/* prologue: function */
 547               	/* frame size = 0 */
 548 03c8 80E0      		ldi r24,lo8(0)
 549 03ca 0E94 0000 		call VsPlayerInterrupts
 550 03ce 182F      		mov r17,r24
 551 03d0 60E2      		ldi r22,lo8(2080)
 552 03d2 78E0      		ldi r23,hi8(2080)
 553 03d4 80E0      		ldi r24,lo8(0)
 554 03d6 0E94 0000 		call VsRegWrite
 555 03da 68E0      		ldi r22,lo8(8)
 556 03dc 70E0      		ldi r23,hi8(8)
 557 03de 80E0      		ldi r24,lo8(mtcmd.2160)
 558 03e0 90E0      		ldi r25,hi8(mtcmd.2160)
 559 03e2 0E94 0000 		call VsSdiWrite_P
 560 03e6 00C0      		rjmp .L63
 561               	.L64:
 562 03e8 81E0      		ldi r24,lo8(1)
 563 03ea 0E94 0000 		call NutDelay
 564               	.L63:
 565 03ee 88E0      		ldi r24,lo8(8)
 566 03f0 0E94 0000 		call VsRegRead
 567 03f4 EC01      		movw r28,r24
 568 03f6 97FF      		sbrs r25,7
 569 03f8 00C0      		rjmp .L64
 570 03fa 60E0      		ldi r22,lo8(2048)
GAS LISTING C:\Temp/ccUwxOwf.s 			page 11


 571 03fc 78E0      		ldi r23,hi8(2048)
 572 03fe 80E0      		ldi r24,lo8(0)
 573 0400 0E94 0000 		call VsRegWrite
 574 0404 812F      		mov r24,r17
 575 0406 0E94 0000 		call VsPlayerInterrupts
 576 040a CE01      		movw r24,r28
 577               	/* epilogue start */
 578 040c DF91      		pop r29
 579 040e CF91      		pop r28
 580 0410 1F91      		pop r17
 581 0412 0895      		ret
 582               		.size	VsMemoryTest, .-VsMemoryTest
 583               	.global	VsGetHeaderInfo
 584               		.type	VsGetHeaderInfo, @function
 585               	VsGetHeaderInfo:
 586 0414 FF92      		push r15
 587 0416 0F93      		push r16
 588 0418 1F93      		push r17
 589               	/* prologue: function */
 590               	/* frame size = 0 */
 591 041a 8C01      		movw r16,r24
 592 041c 80E0      		ldi r24,lo8(0)
 593 041e 0E94 0000 		call VsPlayerInterrupts
 594 0422 F82E      		mov r15,r24
 595 0424 89E0      		ldi r24,lo8(9)
 596 0426 0E94 0000 		call VsRegRead
 597 042a F801      		movw r30,r16
 598 042c 9183      		std Z+1,r25
 599 042e 8083      		st Z,r24
 600 0430 88E0      		ldi r24,lo8(8)
 601 0432 0E94 0000 		call VsRegRead
 602 0436 F801      		movw r30,r16
 603 0438 9383      		std Z+3,r25
 604 043a 8283      		std Z+2,r24
 605 043c 8F2D      		mov r24,r15
 606 043e 0E94 0000 		call VsPlayerInterrupts
 607 0442 80E0      		ldi r24,lo8(0)
 608 0444 90E0      		ldi r25,hi8(0)
 609               	/* epilogue start */
 610 0446 1F91      		pop r17
 611 0448 0F91      		pop r16
 612 044a FF90      		pop r15
 613 044c 0895      		ret
 614               		.size	VsGetHeaderInfo, .-VsGetHeaderInfo
 615               	.global	VsPlayTime
 616               		.type	VsPlayTime, @function
 617               	VsPlayTime:
 618 044e FF92      		push r15
 619 0450 0F93      		push r16
 620 0452 1F93      		push r17
 621               	/* prologue: function */
 622               	/* frame size = 0 */
 623 0454 80E0      		ldi r24,lo8(0)
 624 0456 0E94 0000 		call VsPlayerInterrupts
 625 045a 182F      		mov r17,r24
 626 045c 84E0      		ldi r24,lo8(4)
 627 045e 0E94 0000 		call VsRegRead
GAS LISTING C:\Temp/ccUwxOwf.s 			page 12


 628 0462 082F      		mov r16,r24
 629 0464 F92E      		mov r15,r25
 630 0466 812F      		mov r24,r17
 631 0468 0E94 0000 		call VsPlayerInterrupts
 632 046c 802F      		mov r24,r16
 633 046e 9F2D      		mov r25,r15
 634               	/* epilogue start */
 635 0470 1F91      		pop r17
 636 0472 0F91      		pop r16
 637 0474 FF90      		pop r15
 638 0476 0895      		ret
 639               		.size	VsPlayTime, .-VsPlayTime
 640               	.global	VsPlayerSetMode
 641               		.type	VsPlayerSetMode, @function
 642               	VsPlayerSetMode:
 643 0478 FF92      		push r15
 644 047a 0F93      		push r16
 645 047c 1F93      		push r17
 646               	/* prologue: function */
 647               	/* frame size = 0 */
 648 047e 8C01      		movw r16,r24
 649 0480 80E0      		ldi r24,lo8(0)
 650 0482 0E94 0000 		call VsPlayerInterrupts
 651 0486 F82E      		mov r15,r24
 652 0488 1860      		ori r17,hi8(2048)
 653 048a B801      		movw r22,r16
 654 048c 80E0      		ldi r24,lo8(0)
 655 048e 0E94 0000 		call VsRegWrite
 656 0492 8F2D      		mov r24,r15
 657 0494 0E94 0000 		call VsPlayerInterrupts
 658 0498 80E0      		ldi r24,lo8(0)
 659 049a 90E0      		ldi r25,hi8(0)
 660               	/* epilogue start */
 661 049c 1F91      		pop r17
 662 049e 0F91      		pop r16
 663 04a0 FF90      		pop r15
 664 04a2 0895      		ret
 665               		.size	VsPlayerSetMode, .-VsPlayerSetMode
 666               	.global	VsPlayerReset
 667               		.type	VsPlayerReset, @function
 668               	VsPlayerReset:
 669 04a4 CF93      		push r28
 670 04a6 DF93      		push r29
 671               	/* prologue: function */
 672               	/* frame size = 0 */
 673 04a8 EC01      		movw r28,r24
 674 04aa 80E0      		ldi r24,lo8(0)
 675 04ac 0E94 0000 		call VsPlayerInterrupts
 676 04b0 1092 0000 		sts vs_status,__zero_reg__
 677 04b4 64E0      		ldi r22,lo8(4)
 678 04b6 70E0      		ldi r23,hi8(4)
 679 04b8 80E0      		ldi r24,lo8(0)
 680 04ba 0E94 0000 		call VsRegWrite
 681 04be 80E0      		ldi r24,lo8(0)
 682 04c0 0E94 0000 		call NutDelay
 683 04c4 C2FD      		sbrc r28,2
 684 04c6 00C0      		rjmp .L73
GAS LISTING C:\Temp/ccUwxOwf.s 			page 13


 685 04c8 8099      		sbic 48-32,0
 686 04ca 00C0      		rjmp .L74
 687               	.L73:
 688 04cc 60E0      		ldi r22,lo8(0)
 689 04ce 81E0      		ldi r24,lo8(1)
 690 04d0 0E94 0000 		call Sppi0ChipReset
 691 04d4 81E0      		ldi r24,lo8(1)
 692 04d6 0E94 0000 		call NutDelay
 693 04da 61E0      		ldi r22,lo8(1)
 694 04dc 81E0      		ldi r24,lo8(1)
 695 04de 0E94 0000 		call Sppi0ChipReset
 696 04e2 80E0      		ldi r24,lo8(0)
 697 04e4 0E94 0000 		call NutDelay
 698 04e8 8099      		sbic 48-32,0
 699 04ea 00C0      		rjmp .L74
 700 04ec 2FEF      		ldi r18,lo8(-1)
 701 04ee 3FEF      		ldi r19,hi8(-1)
 702 04f0 00C0      		rjmp .L75
 703               	.L74:
 704 04f2 D860      		ori r29,hi8(2048)
 705 04f4 BE01      		movw r22,r28
 706 04f6 80E0      		ldi r24,lo8(0)
 707 04f8 0E94 0000 		call VsRegWrite
 708 04fc 60E0      		ldi r22,lo8(-26624)
 709 04fe 78E9      		ldi r23,hi8(-26624)
 710 0500 83E0      		ldi r24,lo8(3)
 711 0502 0E94 0000 		call VsRegWrite
 712 0506 68E0      		ldi r22,lo8(-32760)
 713 0508 70E8      		ldi r23,hi8(-32760)
 714 050a 82E0      		ldi r24,lo8(2)
 715 050c 0E94 0000 		call VsRegWrite
 716 0510 81E0      		ldi r24,lo8(1)
 717 0512 0E94 0000 		call NutDelay
 718 0516 81E0      		ldi r24,lo8(1)
 719 0518 88BF      		out 88-32,r24
 720 051a 20E0      		ldi r18,lo8(0)
 721 051c 30E0      		ldi r19,hi8(0)
 722               	.L75:
 723 051e C901      		movw r24,r18
 724               	/* epilogue start */
 725 0520 DF91      		pop r29
 726 0522 CF91      		pop r28
 727 0524 0895      		ret
 728               		.size	VsPlayerReset, .-VsPlayerReset
 729               	.global	VsPlayerInit
 730               		.type	VsPlayerInit, @function
 731               	VsPlayerInit:
 732               	/* prologue: function */
 733               	/* frame size = 0 */
 734 0526 80E0      		ldi r24,lo8(0)
 735 0528 0E94 0000 		call VsPlayerInterrupts
 736 052c 60E0      		ldi r22,lo8(0)
 737 052e 81E0      		ldi r24,lo8(1)
 738 0530 0E94 0000 		call Sppi0ChipReset
 739 0534 60E0      		ldi r22,lo8(0)
 740 0536 81E0      		ldi r24,lo8(1)
 741 0538 0E94 0000 		call Sppi0SetMode
GAS LISTING C:\Temp/ccUwxOwf.s 			page 14


 742 053c 892B      		or r24,r25
 743 053e 01F4      		brne .L78
 744 0540 40E0      		ldi r20,lo8(3072000)
 745 0542 50EE      		ldi r21,hi8(3072000)
 746 0544 6EE2      		ldi r22,hlo8(3072000)
 747 0546 70E0      		ldi r23,hhi8(3072000)
 748 0548 81E0      		ldi r24,lo8(1)
 749 054a 0E94 0000 		call Sppi0SetSpeed
 750 054e 81E0      		ldi r24,lo8(1)
 751 0550 0E94 0000 		call Sppi0NegDeselectDevice
 752 0554 60E0      		ldi r22,lo8(0)
 753 0556 81E0      		ldi r24,lo8(1)
 754 0558 0E94 0000 		call Sppi0SetMode
 755 055c 892B      		or r24,r25
 756 055e 01F4      		brne .L78
 757 0560 40E0      		ldi r20,lo8(3072000)
 758 0562 50EE      		ldi r21,hi8(3072000)
 759 0564 6EE2      		ldi r22,hlo8(3072000)
 760 0566 70E0      		ldi r23,hhi8(3072000)
 761 0568 81E0      		ldi r24,lo8(1)
 762 056a 0E94 0000 		call Sppi0SetSpeed
 763 056e 81E0      		ldi r24,lo8(1)
 764 0570 0E94 0000 		call Sppi0NegDeselectDevice
 765 0574 C59A      		sbi 56-32,5
 766 0576 BD9A      		sbi 55-32,5
 767 0578 969A      		sbi 50-32,6
 768 057a 8E9A      		sbi 49-32,6
 769 057c 8898      		cbi 49-32,0
 770 057e 909A      		sbi 50-32,0
 771 0580 40E0      		ldi r20,lo8(0)
 772 0582 50E0      		ldi r21,hi8(0)
 773 0584 60E0      		ldi r22,lo8(gs(VsPlayerFeed))
 774 0586 70E0      		ldi r23,hi8(gs(VsPlayerFeed))
 775 0588 80E0      		ldi r24,lo8(sig_INTERRUPT0)
 776 058a 90E0      		ldi r25,hi8(sig_INTERRUPT0)
 777 058c 0E94 0000 		call NutRegisterIrqHandler
 778 0590 892B      		or r24,r25
 779 0592 01F4      		brne .L78
 780 0594 66E0      		ldi r22,lo8(6)
 781 0596 70E0      		ldi r23,hi8(6)
 782 0598 80E0      		ldi r24,lo8(sig_INTERRUPT0)
 783 059a 90E0      		ldi r25,hi8(sig_INTERRUPT0)
 784 059c 0E94 0000 		call NutIrqSetMode
 785 05a0 61E0      		ldi r22,lo8(1)
 786 05a2 81E0      		ldi r24,lo8(1)
 787 05a4 0E94 0000 		call Sppi0ChipReset
 788 05a8 80E0      		ldi r24,lo8(0)
 789 05aa 0E94 0000 		call NutDelay
 790 05ae 80E0      		ldi r24,lo8(0)
 791 05b0 90E0      		ldi r25,hi8(0)
 792 05b2 0E94 0000 		call VsPlayerReset
 793 05b6 9C01      		movw r18,r24
 794 05b8 00C0      		rjmp .L79
 795               	.L78:
 796 05ba 2FEF      		ldi r18,lo8(-1)
 797 05bc 3FEF      		ldi r19,hi8(-1)
 798               	.L79:
GAS LISTING C:\Temp/ccUwxOwf.s 			page 15


 799 05be C901      		movw r24,r18
 800               	/* epilogue start */
 801 05c0 0895      		ret
 802               		.size	VsPlayerInit, .-VsPlayerInit
 803               	.global	VsPlayerStop
 804               		.type	VsPlayerStop, @function
 805               	VsPlayerStop:
 806               	/* prologue: function */
 807               	/* frame size = 0 */
 808 05c2 80E0      		ldi r24,lo8(0)
 809 05c4 0E94 0000 		call VsPlayerInterrupts
 810 05c8 982F      		mov r25,r24
 811 05ca 8091 0000 		lds r24,vs_status
 812 05ce 8130      		cpi r24,lo8(1)
 813 05d0 01F4      		brne .L82
 814 05d2 1092 0000 		sts vs_status,__zero_reg__
 815               	.L82:
 816 05d6 892F      		mov r24,r25
 817 05d8 0E94 0000 		call VsPlayerInterrupts
 818 05dc 80E0      		ldi r24,lo8(0)
 819 05de 90E0      		ldi r25,hi8(0)
 820               	/* epilogue start */
 821 05e0 0895      		ret
 822               		.size	VsPlayerStop, .-VsPlayerStop
 823               	.global	VsPlayerKick
 824               		.type	VsPlayerKick, @function
 825               	VsPlayerKick:
 826               	/* prologue: function */
 827               	/* frame size = 0 */
 828 05e2 80E0      		ldi r24,lo8(0)
 829 05e4 0E94 0000 		call VsPlayerInterrupts
 830 05e8 81E0      		ldi r24,lo8(1)
 831 05ea 8093 0000 		sts vs_status,r24
 832 05ee 80E0      		ldi r24,lo8(0)
 833 05f0 90E0      		ldi r25,hi8(0)
 834 05f2 0E94 0000 		call VsPlayerFeed
 835 05f6 81E0      		ldi r24,lo8(1)
 836 05f8 0E94 0000 		call VsPlayerInterrupts
 837 05fc 80E0      		ldi r24,lo8(0)
 838 05fe 90E0      		ldi r25,hi8(0)
 839               	/* epilogue start */
 840 0600 0895      		ret
 841               		.size	VsPlayerKick, .-VsPlayerKick
 842               	.global	VsPlayerFlush
 843               		.type	VsPlayerFlush, @function
 844               	VsPlayerFlush:
 845               	/* prologue: function */
 846               	/* frame size = 0 */
 847 0602 80E0      		ldi r24,lo8(0)
 848 0604 0E94 0000 		call VsPlayerInterrupts
 849 0608 8091 0000 		lds r24,vs_status
 850 060c 8430      		cpi r24,lo8(4)
 851 060e 01F4      		brne .L87
 852 0610 0E94 0000 		call NutSegBufUsed
 853 0614 6115      		cp r22,__zero_reg__
 854 0616 7105      		cpc r23,__zero_reg__
 855 0618 8105      		cpc r24,__zero_reg__
GAS LISTING C:\Temp/ccUwxOwf.s 			page 16


 856 061a 9105      		cpc r25,__zero_reg__
 857 061c 01F0      		breq .L88
 858               	.L87:
 859 061e 8091 0000 		lds r24,vs_flush
 860 0622 9091 0000 		lds r25,(vs_flush)+1
 861 0626 892B      		or r24,r25
 862 0628 01F4      		brne .L89
 863 062a 80E0      		ldi r24,lo8(2048)
 864 062c 98E0      		ldi r25,hi8(2048)
 865 062e 9093 0000 		sts (vs_flush)+1,r25
 866 0632 8093 0000 		sts vs_flush,r24
 867               	.L89:
 868 0636 8091 0000 		lds r24,vs_status
 869 063a 8130      		cpi r24,lo8(1)
 870 063c 01F0      		breq .L88
 871 063e 0E94 0000 		call VsPlayerKick
 872               	.L88:
 873 0642 81E0      		ldi r24,lo8(1)
 874 0644 0E94 0000 		call VsPlayerInterrupts
 875 0648 80E0      		ldi r24,lo8(0)
 876 064a 90E0      		ldi r25,hi8(0)
 877               	/* epilogue start */
 878 064c 0895      		ret
 879               		.size	VsPlayerFlush, .-VsPlayerFlush
 880               		.section	.progmem.data,"a",@progbits
 881               		.type	end.2186, @object
 882               		.size	end.2186, 4
 883               	end.2186:
 884 0000 0000 0000 		.skip 4,0
 885               		.type	off.2185, @object
 886               		.size	off.2185, 4
 887               	off.2185:
 888 0004 45        		.byte	69
 889 0005 78        		.byte	120
 890 0006 69        		.byte	105
 891 0007 74        		.byte	116
 892               		.type	on.2184, @object
 893               		.size	on.2184, 3
 894               	on.2184:
 895 0008 53        		.byte	83
 896 0009 EF        		.byte	-17
 897 000a 6E        		.byte	110
 898               		.type	mtcmd.2160, @object
 899               		.size	mtcmd.2160, 8
 900               	mtcmd.2160:
 901 000b 4D        		.byte	77
 902 000c EA        		.byte	-22
 903 000d 6D        		.byte	109
 904 000e 54        		.byte	84
 905 000f 00        		.byte	0
 906 0010 00        		.byte	0
 907 0011 00        		.byte	0
 908 0012 00        		.byte	0
 909               		.lcomm vs_status,1
 910               		.lcomm is_throttled.1947,1
 911               		.lcomm is_enabled.1935,1
 912               		.lcomm vs_flush,2
GAS LISTING C:\Temp/ccUwxOwf.s 			page 17


GAS LISTING C:\Temp/ccUwxOwf.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 vs10xx.c
  C:\Temp/ccUwxOwf.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccUwxOwf.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccUwxOwf.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccUwxOwf.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccUwxOwf.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccUwxOwf.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccUwxOwf.s:13     .text:00000000 VsGetStatus
                             .bss:00000000 vs_status
  C:\Temp/ccUwxOwf.s:22     .text:00000008 VsSdiWrite_P
  C:\Temp/ccUwxOwf.s:75     .text:00000054 VsSciSelect
  C:\Temp/ccUwxOwf.s:96     .text:00000076 VsRegWrite
  C:\Temp/ccUwxOwf.s:135    .text:000000c0 VsRegRead
  C:\Temp/ccUwxOwf.s:182    .text:00000118 VsPlayerThrottle
  C:\Temp/ccUwxOwf.s:909    .bss:00000001 is_throttled.1947
  C:\Temp/ccUwxOwf.s:208    .text:00000144 VsPlayerFeed
  C:\Temp/ccUwxOwf.s:911    .bss:00000003 vs_flush
  C:\Temp/ccUwxOwf.s:366    .text:00000278 VsPlayerInterrupts
  C:\Temp/ccUwxOwf.s:910    .bss:00000002 is_enabled.1935
  C:\Temp/ccUwxOwf.s:395    .text:000002a8 VsBeep
  C:\Temp/ccUwxOwf.s:894    .progmem.data:00000008 on.2184
  C:\Temp/ccUwxOwf.s:883    .progmem.data:00000000 end.2186
  C:\Temp/ccUwxOwf.s:887    .progmem.data:00000004 off.2185
  C:\Temp/ccUwxOwf.s:509    .text:00000388 VsSetVolume
  C:\Temp/ccUwxOwf.s:542    .text:000003c2 VsMemoryTest
  C:\Temp/ccUwxOwf.s:900    .progmem.data:0000000b mtcmd.2160
  C:\Temp/ccUwxOwf.s:585    .text:00000414 VsGetHeaderInfo
  C:\Temp/ccUwxOwf.s:617    .text:0000044e VsPlayTime
  C:\Temp/ccUwxOwf.s:642    .text:00000478 VsPlayerSetMode
  C:\Temp/ccUwxOwf.s:668    .text:000004a4 VsPlayerReset
  C:\Temp/ccUwxOwf.s:731    .text:00000526 VsPlayerInit
  C:\Temp/ccUwxOwf.s:805    .text:000005c2 VsPlayerStop
  C:\Temp/ccUwxOwf.s:825    .text:000005e2 VsPlayerKick
  C:\Temp/ccUwxOwf.s:844    .text:00000602 VsPlayerFlush

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
Sppi0Byte
Sppi0NegDeselectDevice
Sppi0NegSelectDevice
NutSegBufReadCommit
NutSegBufReadRequest
NutSegBufReadLast
sig_INTERRUPT0
NutIrqEnable
NutIrqDisable
NutDelay
Sppi0ChipReset
Sppi0SetMode
Sppi0SetSpeed
NutRegisterIrqHandler
NutIrqSetMode
NutSegBufUsed
