GAS LISTING C:\Temp/ccE6x9lc.s 			page 1


   1               		.file	"spibus.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutSpiBusWait
  12               		.type	NutSpiBusWait, @function
  13               	NutSpiBusWait:
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0000 80E0      		ldi r24,lo8(0)
  17 0002 90E0      		ldi r25,hi8(0)
  18               	/* epilogue start */
  19 0004 0895      		ret
  20               		.size	NutSpiBusWait, .-NutSpiBusWait
  21               	.global	NutSpiBusSetMode
  22               		.type	NutSpiBusSetMode, @function
  23               	NutSpiBusSetMode:
  24               	/* prologue: function */
  25               	/* frame size = 0 */
  26 0006 FC01      		movw r30,r24
  27 0008 8085      		ldd r24,Z+8
  28 000a 9185      		ldd r25,Z+9
  29 000c 2FEF      		ldi r18,hi8(-1)
  30 000e 6F3F      		cpi r22,lo8(-1)
  31 0010 7207      		cpc r23,r18
  32 0012 01F0      		breq .L4
  33 0014 7068      		ori r23,hi8(-32768)
  34 0016 7187      		std Z+9,r23
  35 0018 6087      		std Z+8,r22
  36               	.L4:
  37 001a 0895      		ret
  38               		.size	NutSpiBusSetMode, .-NutSpiBusSetMode
  39               	.global	NutSpiBusSetRate
  40               		.type	NutSpiBusSetRate, @function
  41               	NutSpiBusSetRate:
  42               	/* prologue: function */
  43               	/* frame size = 0 */
  44 001c FC01      		movw r30,r24
  45 001e 2481      		ldd r18,Z+4
  46 0020 3581      		ldd r19,Z+5
  47 0022 A681      		ldd r26,Z+6
  48 0024 B781      		ldd r27,Z+7
  49 0026 4F3F      		cpi r20,lo8(-1)
  50 0028 8FEF      		ldi r24,hi8(-1)
  51 002a 5807      		cpc r21,r24
  52 002c 8FEF      		ldi r24,hlo8(-1)
  53 002e 6807      		cpc r22,r24
  54 0030 8FEF      		ldi r24,hhi8(-1)
  55 0032 7807      		cpc r23,r24
  56 0034 01F0      		breq .L7
  57 0036 4483      		std Z+4,r20
GAS LISTING C:\Temp/ccE6x9lc.s 			page 2


  58 0038 5583      		std Z+5,r21
  59 003a 6683      		std Z+6,r22
  60 003c 7783      		std Z+7,r23
  61 003e 8085      		ldd r24,Z+8
  62 0040 9185      		ldd r25,Z+9
  63 0042 9068      		ori r25,hi8(-32768)
  64 0044 9187      		std Z+9,r25
  65 0046 8087      		std Z+8,r24
  66               	.L7:
  67 0048 B901      		movw r22,r18
  68 004a CD01      		movw r24,r26
  69               	/* epilogue start */
  70 004c 0895      		ret
  71               		.size	NutSpiBusSetRate, .-NutSpiBusSetRate
  72               	.global	NutSpiBusSetBits
  73               		.type	NutSpiBusSetBits, @function
  74               	NutSpiBusSetBits:
  75               	/* prologue: function */
  76               	/* frame size = 0 */
  77 004e FC01      		movw r30,r24
  78 0050 2285      		ldd r18,Z+10
  79 0052 6F3F      		cpi r22,lo8(-1)
  80 0054 01F0      		breq .L10
  81 0056 6287      		std Z+10,r22
  82 0058 8085      		ldd r24,Z+8
  83 005a 9185      		ldd r25,Z+9
  84 005c 9068      		ori r25,hi8(-32768)
  85 005e 9187      		std Z+9,r25
  86 0060 8087      		std Z+8,r24
  87               	.L10:
  88 0062 822F      		mov r24,r18
  89               	/* epilogue start */
  90 0064 0895      		ret
  91               		.size	NutSpiBusSetBits, .-NutSpiBusSetBits
  92               	.global	NutRegisterSpiDevice
  93               		.type	NutRegisterSpiDevice, @function
  94               	NutRegisterSpiDevice:
  95 0066 0F93      		push r16
  96 0068 1F93      		push r17
  97 006a CF93      		push r28
  98 006c DF93      		push r29
  99               	/* prologue: function */
 100               	/* frame size = 0 */
 101 006e 8C01      		movw r16,r24
 102 0070 EB01      		movw r28,r22
 103 0072 DC01      		movw r26,r24
 104 0074 1F96      		adiw r26,15
 105 0076 ED91      		ld r30,X+
 106 0078 FC91      		ld r31,X
 107 007a 5097      		sbiw r26,15+1
 108 007c 7183      		std Z+1,r23
 109 007e 6083      		st Z,r22
 110 0080 4387      		std Z+11,r20
 111 0082 2885      		ldd r18,Y+8
 112 0084 3985      		ldd r19,Y+9
 113 0086 CF01      		movw r24,r30
 114 0088 F901      		movw r30,r18
GAS LISTING C:\Temp/ccE6x9lc.s 			page 3


 115 008a 0995      		icall
 116 008c 9C01      		movw r18,r24
 117 008e 0097      		sbiw r24,0
 118 0090 01F4      		brne .L13
 119 0092 CE01      		movw r24,r28
 120 0094 0E94 0000 		call NutEventPost
 121 0098 40E0      		ldi r20,lo8(0)
 122 009a 60E0      		ldi r22,lo8(0)
 123 009c 70E0      		ldi r23,hi8(0)
 124 009e C801      		movw r24,r16
 125 00a0 0E94 0000 		call NutRegisterDevice
 126 00a4 9C01      		movw r18,r24
 127               	.L13:
 128 00a6 C901      		movw r24,r18
 129               	/* epilogue start */
 130 00a8 DF91      		pop r29
 131 00aa CF91      		pop r28
 132 00ac 1F91      		pop r17
 133 00ae 0F91      		pop r16
 134 00b0 0895      		ret
 135               		.size	NutRegisterSpiDevice, .-NutRegisterSpiDevice
GAS LISTING C:\Temp/ccE6x9lc.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 spibus.c
  C:\Temp/ccE6x9lc.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccE6x9lc.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccE6x9lc.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccE6x9lc.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccE6x9lc.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccE6x9lc.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccE6x9lc.s:13     .text:00000000 NutSpiBusWait
  C:\Temp/ccE6x9lc.s:23     .text:00000006 NutSpiBusSetMode
  C:\Temp/ccE6x9lc.s:41     .text:0000001c NutSpiBusSetRate
  C:\Temp/ccE6x9lc.s:74     .text:0000004e NutSpiBusSetBits
  C:\Temp/ccE6x9lc.s:94     .text:00000066 NutRegisterSpiDevice

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutEventPost
NutRegisterDevice
