GAS LISTING C:\Temp/ccHjVlPh.s 			page 1


   1               		.file	"ppp.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	NutPppClose, @function
  12               	NutPppClose:
  13 0000 0F93      		push r16
  14 0002 1F93      		push r17
  15 0004 CF93      		push r28
  16 0006 DF93      		push r29
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19 0008 8C01      		movw r16,r24
  20 000a DC01      		movw r26,r24
  21 000c 1296      		adiw r26,2
  22 000e ED91      		ld r30,X+
  23 0010 FC91      		ld r31,X
  24 0012 1397      		sbiw r26,2+1
  25 0014 C189      		ldd r28,Z+17
  26 0016 D289      		ldd r29,Z+18
  27 0018 CF01      		movw r24,r30
  28 001a 0E94 0000 		call IpcpClose
  29 001e FE01      		movw r30,r28
  30 0020 FF96      		adiw r30,63
  31 0022 8081      		ld r24,Z
  32 0024 9181      		ldd r25,Z+1
  33 0026 0E94 0000 		call _close
  34 002a 6D8D      		ldd r22,Y+29
  35 002c 7E8D      		ldd r23,Y+30
  36 002e 6115      		cp r22,__zero_reg__
  37 0030 7105      		cpc r23,__zero_reg__
  38 0032 01F0      		breq .L2
  39 0034 80E0      		ldi r24,lo8(heapFreeList)
  40 0036 90E0      		ldi r25,hi8(heapFreeList)
  41 0038 0E94 0000 		call NutHeapRootFree
  42               	.L2:
  43 003c 6F8D      		ldd r22,Y+31
  44 003e 78A1      		ldd r23,Y+32
  45 0040 6115      		cp r22,__zero_reg__
  46 0042 7105      		cpc r23,__zero_reg__
  47 0044 01F0      		breq .L3
  48 0046 80E0      		ldi r24,lo8(heapFreeList)
  49 0048 90E0      		ldi r25,hi8(heapFreeList)
  50 004a 0E94 0000 		call NutHeapRootFree
  51               	.L3:
  52 004e B801      		movw r22,r16
  53 0050 80E0      		ldi r24,lo8(heapFreeList)
  54 0052 90E0      		ldi r25,hi8(heapFreeList)
  55 0054 0E94 0000 		call NutHeapRootFree
  56 0058 80E0      		ldi r24,lo8(0)
  57 005a 90E0      		ldi r25,hi8(0)
GAS LISTING C:\Temp/ccHjVlPh.s 			page 2


  58               	/* epilogue start */
  59 005c DF91      		pop r29
  60 005e CF91      		pop r28
  61 0060 1F91      		pop r17
  62 0062 0F91      		pop r16
  63 0064 0895      		ret
  64               		.size	NutPppClose, .-NutPppClose
  65               		.type	NutPppOpen, @function
  66               	NutPppOpen:
  67 0066 8F92      		push r8
  68 0068 9F92      		push r9
  69 006a AF92      		push r10
  70 006c BF92      		push r11
  71 006e CF92      		push r12
  72 0070 DF92      		push r13
  73 0072 EF92      		push r14
  74 0074 FF92      		push r15
  75 0076 0F93      		push r16
  76 0078 1F93      		push r17
  77 007a DF93      		push r29
  78 007c CF93      		push r28
  79 007e CDB7      		in r28,__SP_L__
  80 0080 DEB7      		in r29,__SP_H__
  81 0082 2997      		sbiw r28,9
  82 0084 0FB6      		in __tmp_reg__,__SREG__
  83 0086 F894      		cli
  84 0088 DEBF      		out __SP_H__,r29
  85 008a 0FBE      		out __SREG__,__tmp_reg__
  86 008c CDBF      		out __SP_L__,r28
  87               	/* prologue: function */
  88               	/* frame size = 9 */
  89 008e 4C01      		movw r8,r24
  90 0090 DC01      		movw r26,r24
  91 0092 5196      		adiw r26,17
  92 0094 CD90      		ld r12,X+
  93 0096 DC90      		ld r13,X
  94 0098 5297      		sbiw r26,17+1
  95 009a 81E4      		ldi r24,lo8(65)
  96 009c F601      		movw r30,r12
  97 009e 1192      		st Z+,__zero_reg__
  98 00a0 8A95      	        dec r24
  99 00a2 01F4      		brne .-6
 100 00a4 8B01      		movw r16,r22
 101 00a6 FE01      		movw r30,r28
 102 00a8 3196      		adiw r30,1
 103 00aa AE01      		movw r20,r28
 104 00ac 475F      		subi r20,lo8(-(9))
 105 00ae 5F4F      		sbci r21,hi8(-(9))
 106 00b0 00C0      		rjmp .L6
 107               	.L8:
 108 00b2 8193      		st Z+,r24
 109 00b4 0F5F      		subi r16,lo8(-(1))
 110 00b6 1F4F      		sbci r17,hi8(-(1))
 111               	.L6:
 112 00b8 202F      		mov r18,r16
 113 00ba 261B      		sub r18,r22
 114 00bc D801      		movw r26,r16
GAS LISTING C:\Temp/ccHjVlPh.s 			page 3


 115 00be 8C91      		ld r24,X
 116 00c0 8823      		tst r24
 117 00c2 01F0      		breq .L7
 118 00c4 8F32      		cpi r24,lo8(47)
 119 00c6 01F0      		breq .L7
 120 00c8 E417      		cp r30,r20
 121 00ca F507      		cpc r31,r21
 122 00cc 01F4      		brne .L8
 123               	.L7:
 124 00ce CE01      		movw r24,r28
 125 00d0 0196      		adiw r24,1
 126 00d2 FC01      		movw r30,r24
 127 00d4 E20F      		add r30,r18
 128 00d6 F11D      		adc r31,__zero_reg__
 129 00d8 1082      		st Z,__zero_reg__
 130 00da 62E0      		ldi r22,lo8(-32766)
 131 00dc 70E8      		ldi r23,hi8(-32766)
 132 00de 0E94 0000 		call _open
 133 00e2 EFE3      		ldi r30,lo8(63)
 134 00e4 F0E0      		ldi r31,hi8(63)
 135 00e6 CE0E      		add r12,r30
 136 00e8 DF1E      		adc r13,r31
 137 00ea D601      		movw r26,r12
 138 00ec 8D93      		st X+,r24
 139 00ee 9C93      		st X,r25
 140 00f0 E1EC      		ldi r30,lo8(-63)
 141 00f2 FFEF      		ldi r31,hi8(-63)
 142 00f4 CE0E      		add r12,r30
 143 00f6 DF1E      		adc r13,r31
 144 00f8 8F5F      		subi r24,lo8(-1)
 145 00fa 9F4F      		sbci r25,hi8(-1)
 146 00fc 01F4      		brne .+2
 147 00fe 00C0      		rjmp .L9
 148 0100 66E0      		ldi r22,lo8(6)
 149 0102 70E0      		ldi r23,hi8(6)
 150 0104 80E0      		ldi r24,lo8(heapFreeList)
 151 0106 90E0      		ldi r25,hi8(heapFreeList)
 152 0108 0E94 0000 		call NutHeapRootAlloc
 153 010c FC01      		movw r30,r24
 154 010e 5C01      		movw r10,r24
 155 0110 0097      		sbiw r24,0
 156 0112 01F4      		brne .+2
 157 0114 00C0      		rjmp .L9
 158 0116 1182      		std Z+1,__zero_reg__
 159 0118 1082      		st Z,__zero_reg__
 160 011a 9382      		std Z+3,r9
 161 011c 8282      		std Z+2,r8
 162 011e 1582      		std Z+5,__zero_reg__
 163 0120 1482      		std Z+4,__zero_reg__
 164 0122 D801      		movw r26,r16
 165 0124 8C91      		ld r24,X
 166 0126 8F32      		cpi r24,lo8(47)
 167 0128 01F0      		breq .+2
 168 012a 00C0      		rjmp .L10
 169 012c 7801      		movw r14,r16
 170 012e 0894      		sec
 171 0130 E11C      		adc r14,__zero_reg__
GAS LISTING C:\Temp/ccHjVlPh.s 			page 4


 172 0132 F11C      		adc r15,__zero_reg__
 173 0134 402F      		mov r20,r16
 174 0136 F801      		movw r30,r16
 175               	.L12:
 176 0138 6E2F      		mov r22,r30
 177 013a 641B      		sub r22,r20
 178 013c 8181      		ldd r24,Z+1
 179 013e 8823      		tst r24
 180 0140 01F0      		breq .L11
 181 0142 3196      		adiw r30,1
 182 0144 8F32      		cpi r24,lo8(47)
 183 0146 01F4      		brne .L12
 184               	.L11:
 185 0148 6623      		tst r22
 186 014a 01F0      		breq .L13
 187 014c 70E0      		ldi r23,lo8(0)
 188 014e 6F5F      		subi r22,lo8(-(1))
 189 0150 7F4F      		sbci r23,hi8(-(1))
 190 0152 80E0      		ldi r24,lo8(heapFreeList)
 191 0154 90E0      		ldi r25,hi8(heapFreeList)
 192 0156 0E94 0000 		call NutHeapRootAlloc
 193 015a F601      		movw r30,r12
 194 015c 858F      		std Z+29,r24
 195 015e 968F      		std Z+30,r25
 196 0160 FC01      		movw r30,r24
 197 0162 00C0      		rjmp .L14
 198               	.L16:
 199 0164 8193      		st Z+,r24
 200 0166 0894      		sec
 201 0168 E11C      		adc r14,__zero_reg__
 202 016a F11C      		adc r15,__zero_reg__
 203               	.L14:
 204 016c D701      		movw r26,r14
 205 016e 8C91      		ld r24,X
 206 0170 8823      		tst r24
 207 0172 01F0      		breq .L15
 208 0174 8F32      		cpi r24,lo8(47)
 209 0176 01F4      		brne .L16
 210               	.L15:
 211 0178 1082      		st Z,__zero_reg__
 212               	.L13:
 213 017a F701      		movw r30,r14
 214 017c 8081      		ld r24,Z
 215 017e 8F32      		cpi r24,lo8(47)
 216 0180 01F4      		brne .L10
 217 0182 8701      		movw r16,r14
 218               	.L18:
 219 0184 6E2F      		mov r22,r30
 220 0186 6E19      		sub r22,r14
 221 0188 8181      		ldd r24,Z+1
 222 018a 8823      		tst r24
 223 018c 01F0      		breq .L17
 224 018e 3196      		adiw r30,1
 225 0190 8F32      		cpi r24,lo8(47)
 226 0192 01F4      		brne .L18
 227               	.L17:
 228 0194 6623      		tst r22
GAS LISTING C:\Temp/ccHjVlPh.s 			page 5


 229 0196 01F0      		breq .L10
 230 0198 70E0      		ldi r23,lo8(0)
 231 019a 6F5F      		subi r22,lo8(-(1))
 232 019c 7F4F      		sbci r23,hi8(-(1))
 233 019e 80E0      		ldi r24,lo8(heapFreeList)
 234 01a0 90E0      		ldi r25,hi8(heapFreeList)
 235 01a2 0E94 0000 		call NutHeapRootAlloc
 236 01a6 D601      		movw r26,r12
 237 01a8 5F96      		adiw r26,31
 238 01aa 8C93      		st X,r24
 239 01ac 5F97      		sbiw r26,31
 240 01ae 9096      		adiw r26,32
 241 01b0 9C93      		st X,r25
 242 01b2 FC01      		movw r30,r24
 243 01b4 00C0      		rjmp .L19
 244               	.L21:
 245 01b6 8193      		st Z+,r24
 246               	.L19:
 247 01b8 D801      		movw r26,r16
 248 01ba 1196      		adiw r26,1
 249 01bc 8C91      		ld r24,X
 250 01be 8823      		tst r24
 251 01c0 01F0      		breq .L20
 252 01c2 0F5F      		subi r16,lo8(-(1))
 253 01c4 1F4F      		sbci r17,hi8(-(1))
 254 01c6 8F32      		cpi r24,lo8(47)
 255 01c8 01F4      		brne .L21
 256               	.L20:
 257 01ca 1082      		st Z,__zero_reg__
 258               	.L10:
 259 01cc C401      		movw r24,r8
 260 01ce 0E94 0000 		call IpcpOpen
 261 01d2 00C0      		rjmp .L22
 262               	.L9:
 263 01d4 AA24      		clr r10
 264 01d6 AA94      		dec r10
 265 01d8 BA2C      		mov r11,r10
 266               	.L22:
 267 01da C501      		movw r24,r10
 268               	/* epilogue start */
 269 01dc 2996      		adiw r28,9
 270 01de 0FB6      		in __tmp_reg__,__SREG__
 271 01e0 F894      		cli
 272 01e2 DEBF      		out __SP_H__,r29
 273 01e4 0FBE      		out __SREG__,__tmp_reg__
 274 01e6 CDBF      		out __SP_L__,r28
 275 01e8 CF91      		pop r28
 276 01ea DF91      		pop r29
 277 01ec 1F91      		pop r17
 278 01ee 0F91      		pop r16
 279 01f0 FF90      		pop r15
 280 01f2 EF90      		pop r14
 281 01f4 DF90      		pop r13
 282 01f6 CF90      		pop r12
 283 01f8 BF90      		pop r11
 284 01fa AF90      		pop r10
 285 01fc 9F90      		pop r9
GAS LISTING C:\Temp/ccHjVlPh.s 			page 6


 286 01fe 8F90      		pop r8
 287 0200 0895      		ret
 288               		.size	NutPppOpen, .-NutPppOpen
 289               		.type	NutPppWrite_P, @function
 290               	NutPppWrite_P:
 291               	/* prologue: function */
 292               	/* frame size = 0 */
 293 0202 DC01      		movw r26,r24
 294 0204 1296      		adiw r26,2
 295 0206 ED91      		ld r30,X+
 296 0208 FC91      		ld r31,X
 297 020a 1397      		sbiw r26,2+1
 298 020c 0188      		ldd __tmp_reg__,Z+17
 299 020e F289      		ldd r31,Z+18
 300 0210 E02D      		mov r30,__tmp_reg__
 301 0212 FF96      		adiw r30,63
 302 0214 8081      		ld r24,Z
 303 0216 9181      		ldd r25,Z+1
 304 0218 0E94 0000 		call _write_P
 305               	/* epilogue start */
 306 021c 0895      		ret
 307               		.size	NutPppWrite_P, .-NutPppWrite_P
 308               		.type	NutPppWrite, @function
 309               	NutPppWrite:
 310               	/* prologue: function */
 311               	/* frame size = 0 */
 312 021e DC01      		movw r26,r24
 313 0220 1296      		adiw r26,2
 314 0222 ED91      		ld r30,X+
 315 0224 FC91      		ld r31,X
 316 0226 1397      		sbiw r26,2+1
 317 0228 0188      		ldd __tmp_reg__,Z+17
 318 022a F289      		ldd r31,Z+18
 319 022c E02D      		mov r30,__tmp_reg__
 320 022e FF96      		adiw r30,63
 321 0230 8081      		ld r24,Z
 322 0232 9181      		ldd r25,Z+1
 323 0234 0E94 0000 		call _write
 324               	/* epilogue start */
 325 0238 0895      		ret
 326               		.size	NutPppWrite, .-NutPppWrite
 327               		.type	NutPppRead, @function
 328               	NutPppRead:
 329               	/* prologue: function */
 330               	/* frame size = 0 */
 331 023a DC01      		movw r26,r24
 332 023c 1296      		adiw r26,2
 333 023e ED91      		ld r30,X+
 334 0240 FC91      		ld r31,X
 335 0242 1397      		sbiw r26,2+1
 336 0244 0188      		ldd __tmp_reg__,Z+17
 337 0246 F289      		ldd r31,Z+18
 338 0248 E02D      		mov r30,__tmp_reg__
 339 024a FF96      		adiw r30,63
 340 024c 8081      		ld r24,Z
 341 024e 9181      		ldd r25,Z+1
 342 0250 0E94 0000 		call _read
GAS LISTING C:\Temp/ccHjVlPh.s 			page 7


 343               	/* epilogue start */
 344 0254 0895      		ret
 345               		.size	NutPppRead, .-NutPppRead
 346               		.type	NutPppIOCtl, @function
 347               	NutPppIOCtl:
 348               	/* prologue: function */
 349               	/* frame size = 0 */
 350 0256 FC01      		movw r30,r24
 351 0258 6230      		cpi r22,2
 352 025a 7105      		cpc r23,__zero_reg__
 353 025c 01F0      		breq .L35
 354 025e 6330      		cpi r22,3
 355 0260 7105      		cpc r23,__zero_reg__
 356 0262 04F4      		brge .L38
 357 0264 6130      		cpi r22,1
 358 0266 7105      		cpc r23,__zero_reg__
 359 0268 01F4      		brne .L33
 360 026a 00C0      		rjmp .L42
 361               	.L38:
 362 026c 6330      		cpi r22,3
 363 026e 7105      		cpc r23,__zero_reg__
 364 0270 01F0      		breq .L36
 365 0272 6430      		cpi r22,4
 366 0274 7105      		cpc r23,__zero_reg__
 367 0276 01F4      		brne .L33
 368 0278 00C0      		rjmp .L43
 369               	.L42:
 370 027a 0E94 0000 		call LcpOpen
 371 027e 00C0      		rjmp .L41
 372               	.L35:
 373 0280 0E94 0000 		call LcpClose
 374               	.L41:
 375 0284 20E0      		ldi r18,lo8(0)
 376 0286 30E0      		ldi r19,hi8(0)
 377 0288 00C0      		rjmp .L39
 378               	.L36:
 379 028a 0E94 0000 		call LcpLowerUp
 380 028e 00C0      		rjmp .L41
 381               	.L43:
 382 0290 0E94 0000 		call LcpLowerDown
 383 0294 00C0      		rjmp .L41
 384               	.L33:
 385 0296 0188      		ldd __tmp_reg__,Z+17
 386 0298 F289      		ldd r31,Z+18
 387 029a E02D      		mov r30,__tmp_reg__
 388 029c FF96      		adiw r30,63
 389 029e 8081      		ld r24,Z
 390 02a0 9181      		ldd r25,Z+1
 391 02a2 0E94 0000 		call _ioctl
 392 02a6 9C01      		movw r18,r24
 393               	.L39:
 394 02a8 C901      		movw r24,r18
 395               	/* epilogue start */
 396 02aa 0895      		ret
 397               		.size	NutPppIOCtl, .-NutPppIOCtl
 398               		.type	NutPppInit, @function
 399               	NutPppInit:
GAS LISTING C:\Temp/ccHjVlPh.s 			page 8


 400               	/* prologue: function */
 401               	/* frame size = 0 */
 402 02ac 0E94 0000 		call NutPppInitStateMachine
 403               	/* epilogue start */
 404 02b0 0895      		ret
 405               		.size	NutPppInit, .-NutPppInit
 406               	.global	ifn_ppp
 407               		.data
 408               		.type	ifn_ppp, @object
 409               		.size	ifn_ppp, 39
 410               	ifn_ppp:
 411 0000 17        		.byte	23
 412 0001 00        		.byte	0
 413 0002 00        		.byte	0
 414 0003 00        		.byte	0
 415 0004 00        		.byte	0
 416 0005 00        		.byte	0
 417 0006 00        		.byte	0
 418 0007 00        		.byte	0
 419 0008 00        		.byte	0
 420 0009 00        		.byte	0
 421 000a 00        		.byte	0
 422 000b 00        		.byte	0
 423 000c 00        		.byte	0
 424 000d 00        		.byte	0
 425 000e 00        		.byte	0
 426 000f 00        		.byte	0
 427 0010 00        		.byte	0
 428 0011 00        		.byte	0
 429 0012 00        		.byte	0
 430 0013 00        		.byte	0
 431 0014 00        		.byte	0
 432 0015 00        		.byte	0
 433 0016 00        		.byte	0
 434 0017 DC05      		.word	1500
 435 0019 0000      		.word	0
 436 001b 0000      		.word	0
 437 001d 0000      		.word	0
 438 001f 0000      		.word	gs(NutPppInput)
 439 0021 0000      		.word	0
 440 0023 0000      		.word	gs(NutPppOutput)
 441 0025 0000      		.skip 2,0
 442               	.global	devPpp
 443               		.type	devPpp, @object
 444               		.size	devPpp, 35
 445               	devPpp:
 446 0027 0000      		.word	0
 447 0029 70        		.byte	112
 448 002a 70        		.byte	112
 449 002b 70        		.byte	112
 450 002c 00        		.byte	0
 451 002d 00        		.byte	0
 452 002e 00        		.byte	0
 453 002f 00        		.byte	0
 454 0030 00        		.byte	0
 455 0031 00        		.byte	0
 456 0032 03        		.byte	3
GAS LISTING C:\Temp/ccHjVlPh.s 			page 9


 457 0033 0000      		.word	0
 458 0035 00        		.byte	0
 459 0036 0000      		.word	ifn_ppp
 460 0038 0000      		.word	dcb_ppp
 461 003a 0000      		.word	gs(NutPppInit)
 462 003c 0000      		.word	gs(NutPppIOCtl)
 463 003e 0000      		.word	gs(NutPppRead)
 464 0040 0000      		.word	gs(NutPppWrite)
 465 0042 0000      		.word	gs(NutPppWrite_P)
 466 0044 0000      		.word	gs(NutPppOpen)
 467 0046 0000      		.word	gs(NutPppClose)
 468 0048 0000      		.word	0
 469               		.lcomm dcb_ppp,65
GAS LISTING C:\Temp/ccHjVlPh.s 			page 10


DEFINED SYMBOLS
                            *ABS*:00000000 ppp.c
  C:\Temp/ccHjVlPh.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccHjVlPh.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccHjVlPh.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccHjVlPh.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccHjVlPh.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccHjVlPh.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccHjVlPh.s:12     .text:00000000 NutPppClose
  C:\Temp/ccHjVlPh.s:66     .text:00000066 NutPppOpen
  C:\Temp/ccHjVlPh.s:290    .text:00000202 NutPppWrite_P
  C:\Temp/ccHjVlPh.s:309    .text:0000021e NutPppWrite
  C:\Temp/ccHjVlPh.s:328    .text:0000023a NutPppRead
  C:\Temp/ccHjVlPh.s:347    .text:00000256 NutPppIOCtl
  C:\Temp/ccHjVlPh.s:399    .text:000002ac NutPppInit
  C:\Temp/ccHjVlPh.s:410    .data:00000000 ifn_ppp
  C:\Temp/ccHjVlPh.s:445    .data:00000027 devPpp
                             .bss:00000000 dcb_ppp

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
IpcpClose
_close
heapFreeList
NutHeapRootFree
_open
NutHeapRootAlloc
IpcpOpen
_write_P
_write
_read
LcpOpen
LcpClose
LcpLowerUp
LcpLowerDown
_ioctl
NutPppInitStateMachine
NutPppInput
NutPppOutput
