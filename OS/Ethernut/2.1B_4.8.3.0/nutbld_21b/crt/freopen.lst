GAS LISTING C:\Temp/ccvMwSHJ.s 			page 1


   1               		.file	"freopen.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	freopen
  12               		.type	freopen, @function
  13               	freopen:
  14 0000 9F92      		push r9
  15 0002 AF92      		push r10
  16 0004 BF92      		push r11
  17 0006 CF92      		push r12
  18 0008 DF92      		push r13
  19 000a EF92      		push r14
  20 000c FF92      		push r15
  21 000e 0F93      		push r16
  22 0010 1F93      		push r17
  23 0012 CF93      		push r28
  24 0014 DF93      		push r29
  25               	/* prologue: function */
  26               	/* frame size = 0 */
  27 0016 5C01      		movw r10,r24
  28 0018 CB01      		movw r24,r22
  29 001a EA01      		movw r28,r20
  30 001c 0E94 0000 		call _fmode
  31 0020 6C01      		movw r12,r24
  32 0022 2FEF      		ldi r18,hi8(-1)
  33 0024 8F3F      		cpi r24,lo8(-1)
  34 0026 9207      		cpc r25,r18
  35 0028 01F4      		brne .L11
  36 002a 00C0      		rjmp .L2
  37               	.L6:
  38 002c 0894      		sec
  39 002e E11C      		adc r14,__zero_reg__
  40 0030 F11C      		adc r15,__zero_reg__
  41 0032 3296      		adiw r30,2
  42 0034 88E0      		ldi r24,lo8(8)
  43 0036 E816      		cp r14,r24
  44 0038 F104      		cpc r15,__zero_reg__
  45 003a 01F4      		brne .L4
  46 003c 89E0      		ldi r24,lo8(9)
  47 003e 90E0      		ldi r25,hi8(9)
  48 0040 9093 0000 		sts (errno)+1,r25
  49 0044 8093 0000 		sts errno,r24
  50 0048 00C0      		rjmp .L2
  51               	.L11:
  52 004a E0E0      		ldi r30,lo8(__iob)
  53 004c F0E0      		ldi r31,hi8(__iob)
  54 004e EE24      		clr r14
  55 0050 FF24      		clr r15
  56               	.L4:
  57 0052 8081      		ld r24,Z
GAS LISTING C:\Temp/ccvMwSHJ.s 			page 2


  58 0054 9181      		ldd r25,Z+1
  59 0056 8C17      		cp r24,r28
  60 0058 9D07      		cpc r25,r29
  61 005a 01F4      		brne .L6
  62 005c 87E0      		ldi r24,lo8(7)
  63 005e 90E0      		ldi r25,hi8(7)
  64 0060 0E94 0000 		call malloc
  65 0064 EC01      		movw r28,r24
  66 0066 8701      		movw r16,r14
  67 0068 000F      		lsl r16
  68 006a 111F      		rol r17
  69 006c 0050      		subi r16,lo8(-(__iob))
  70 006e 1040      		sbci r17,hi8(-(__iob))
  71 0070 D801      		movw r26,r16
  72 0072 CD93      		st X+,r28
  73 0074 DC93      		st X,r29
  74 0076 2097      		sbiw r28,0
  75 0078 01F0      		breq .L2
  76 007a B601      		movw r22,r12
  77 007c C501      		movw r24,r10
  78 007e 0E94 0000 		call _open
  79 0082 9983      		std Y+1,r25
  80 0084 8883      		st Y,r24
  81 0086 D801      		movw r26,r16
  82 0088 ED91      		ld r30,X+
  83 008a FC91      		ld r31,X
  84 008c 8F5F      		subi r24,lo8(-1)
  85 008e 9F4F      		sbci r25,hi8(-1)
  86 0090 01F4      		brne .L7
  87 0092 CF01      		movw r24,r30
  88 0094 0E94 0000 		call free
  89 0098 E2E0      		ldi r30,lo8(2)
  90 009a EE15      		cp r30,r14
  91 009c 00F0      		brlo .L8
  92 009e 0894      		sec
  93 00a0 E11C      		adc r14,__zero_reg__
  94 00a2 F11C      		adc r15,__zero_reg__
  95 00a4 D801      		movw r26,r16
  96 00a6 ED92      		st X+,r14
  97 00a8 FC92      		st X,r15
  98 00aa 00C0      		rjmp .L2
  99               	.L8:
 100 00ac F801      		movw r30,r16
 101 00ae 1182      		std Z+1,__zero_reg__
 102 00b0 1082      		st Z,__zero_reg__
 103 00b2 00C0      		rjmp .L2
 104               	.L7:
 105 00b4 D382      		std Z+3,r13
 106 00b6 C282      		std Z+2,r12
 107 00b8 1482      		std Z+4,__zero_reg__
 108 00ba D801      		movw r26,r16
 109 00bc ED91      		ld r30,X+
 110 00be FC91      		ld r31,X
 111 00c0 1682      		std Z+6,__zero_reg__
 112 00c2 1582      		std Z+5,__zero_reg__
 113 00c4 00C0      		rjmp .L5
 114               	.L2:
GAS LISTING C:\Temp/ccvMwSHJ.s 			page 3


 115 00c6 E0E0      		ldi r30,lo8(0)
 116 00c8 F0E0      		ldi r31,hi8(0)
 117               	.L5:
 118 00ca CF01      		movw r24,r30
 119               	/* epilogue start */
 120 00cc DF91      		pop r29
 121 00ce CF91      		pop r28
 122 00d0 1F91      		pop r17
 123 00d2 0F91      		pop r16
 124 00d4 FF90      		pop r15
 125 00d6 EF90      		pop r14
 126 00d8 DF90      		pop r13
 127 00da CF90      		pop r12
 128 00dc BF90      		pop r11
 129 00de AF90      		pop r10
 130 00e0 9F90      		pop r9
 131 00e2 0895      		ret
 132               		.size	freopen, .-freopen
GAS LISTING C:\Temp/ccvMwSHJ.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 freopen.c
  C:\Temp/ccvMwSHJ.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccvMwSHJ.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccvMwSHJ.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccvMwSHJ.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccvMwSHJ.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccvMwSHJ.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccvMwSHJ.s:13     .text:00000000 freopen

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
_fmode
errno
__iob
malloc
_open
free
