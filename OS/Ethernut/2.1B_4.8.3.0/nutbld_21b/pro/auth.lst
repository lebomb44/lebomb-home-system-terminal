GAS LISTING C:\Temp/ccvEkIeF.s 			page 1


   1               		.file	"auth.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	NutHttpAuthLookup, @function
  12               	NutHttpAuthLookup:
  13 0000 EF92      		push r14
  14 0002 FF92      		push r15
  15 0004 0F93      		push r16
  16 0006 1F93      		push r17
  17 0008 CF93      		push r28
  18 000a DF93      		push r29
  19               	/* prologue: function */
  20               	/* frame size = 0 */
  21 000c 8C01      		movw r16,r24
  22 000e 7B01      		movw r14,r22
  23 0010 C091 0000 		lds r28,authList
  24 0014 D091 0000 		lds r29,(authList)+1
  25 0018 00C0      		rjmp .L2
  26               	.L6:
  27 001a 0115      		cp r16,__zero_reg__
  28 001c 1105      		cpc r17,__zero_reg__
  29 001e 01F0      		breq .L3
  30 0020 6A81      		ldd r22,Y+2
  31 0022 7B81      		ldd r23,Y+3
  32 0024 C801      		movw r24,r16
  33 0026 0E94 0000 		call strstr
  34 002a 8017      		cp r24,r16
  35 002c 9107      		cpc r25,r17
  36 002e 01F4      		brne .L4
  37               	.L3:
  38 0030 E114      		cp r14,__zero_reg__
  39 0032 F104      		cpc r15,__zero_reg__
  40 0034 01F0      		breq .L5
  41 0036 6C81      		ldd r22,Y+4
  42 0038 7D81      		ldd r23,Y+5
  43 003a C701      		movw r24,r14
  44 003c 0E94 0000 		call strcmp
  45 0040 0097      		sbiw r24,0
  46 0042 01F0      		breq .L5
  47               	.L4:
  48 0044 0990      		ld __tmp_reg__,Y+
  49 0046 D881      		ld r29,Y
  50 0048 C02D      		mov r28,__tmp_reg__
  51               	.L2:
  52 004a 2097      		sbiw r28,0
  53 004c 01F4      		brne .L6
  54               	.L5:
  55 004e CE01      		movw r24,r28
  56               	/* epilogue start */
  57 0050 DF91      		pop r29
GAS LISTING C:\Temp/ccvEkIeF.s 			page 2


  58 0052 CF91      		pop r28
  59 0054 1F91      		pop r17
  60 0056 0F91      		pop r16
  61 0058 FF90      		pop r15
  62 005a EF90      		pop r14
  63 005c 0895      		ret
  64               		.size	NutHttpAuthLookup, .-NutHttpAuthLookup
  65               		.data
  66               	.LC0:
  67 0000 2E00      		.string	"."
  68               	.LC1:
  69 0002 4261 7369 		.string	"Basic "
  69      6320 00
  70               		.text
  71               	.global	NutHttpAuthValidate
  72               		.type	NutHttpAuthValidate, @function
  73               	NutHttpAuthValidate:
  74 005e CF92      		push r12
  75 0060 DF92      		push r13
  76 0062 EF92      		push r14
  77 0064 FF92      		push r15
  78 0066 0F93      		push r16
  79 0068 1F93      		push r17
  80 006a CF93      		push r28
  81 006c DF93      		push r29
  82               	/* prologue: function */
  83               	/* frame size = 0 */
  84 006e 6C01      		movw r12,r24
  85 0070 FC01      		movw r30,r24
  86 0072 E084      		ldd r14,Z+8
  87 0074 F184      		ldd r15,Z+9
  88 0076 6FE2      		ldi r22,lo8(47)
  89 0078 70E0      		ldi r23,hi8(47)
  90 007a C701      		movw r24,r14
  91 007c 0E94 0000 		call strrchr
  92 0080 EC01      		movw r28,r24
  93 0082 0097      		sbiw r24,0
  94 0084 01F4      		brne .L9
  95 0086 80E0      		ldi r24,lo8(.LC0)
  96 0088 E82E      		mov r14,r24
  97 008a 80E0      		ldi r24,hi8(.LC0)
  98 008c F82E      		mov r15,r24
  99 008e 00C0      		rjmp .L10
 100               	.L9:
 101 0090 1882      		st Y,__zero_reg__
 102               	.L10:
 103 0092 60E0      		ldi r22,lo8(0)
 104 0094 70E0      		ldi r23,hi8(0)
 105 0096 C701      		movw r24,r14
 106 0098 0E94 0000 		call NutHttpAuthLookup
 107 009c 892B      		or r24,r25
 108 009e 01F0      		breq .L11
 109 00a0 F601      		movw r30,r12
 110 00a2 0089      		ldd r16,Z+16
 111 00a4 1189      		ldd r17,Z+17
 112 00a6 0115      		cp r16,__zero_reg__
 113 00a8 1105      		cpc r17,__zero_reg__
GAS LISTING C:\Temp/ccvEkIeF.s 			page 3


 114 00aa 01F0      		breq .L12
 115 00ac 46E0      		ldi r20,lo8(6)
 116 00ae 50E0      		ldi r21,hi8(6)
 117 00b0 60E0      		ldi r22,lo8(.LC1)
 118 00b2 70E0      		ldi r23,hi8(.LC1)
 119 00b4 C801      		movw r24,r16
 120 00b6 0E94 0000 		call strncmp
 121 00ba 0097      		sbiw r24,0
 122 00bc 01F4      		brne .L12
 123 00be C801      		movw r24,r16
 124 00c0 0696      		adiw r24,6
 125 00c2 0E94 0000 		call NutDecodeBase64
 126 00c6 F601      		movw r30,r12
 127 00c8 6089      		ldd r22,Z+16
 128 00ca 7189      		ldd r23,Z+17
 129 00cc 6A5F      		subi r22,lo8(-(6))
 130 00ce 7F4F      		sbci r23,hi8(-(6))
 131 00d0 C701      		movw r24,r14
 132 00d2 0E94 0000 		call NutHttpAuthLookup
 133 00d6 892B      		or r24,r25
 134 00d8 01F4      		brne .L11
 135               	.L12:
 136 00da 2FEF      		ldi r18,lo8(-1)
 137 00dc 3FEF      		ldi r19,hi8(-1)
 138 00de 00C0      		rjmp .L13
 139               	.L11:
 140 00e0 20E0      		ldi r18,lo8(0)
 141 00e2 30E0      		ldi r19,hi8(0)
 142               	.L13:
 143 00e4 2097      		sbiw r28,0
 144 00e6 01F0      		breq .L14
 145 00e8 8FE2      		ldi r24,lo8(47)
 146 00ea 8883      		st Y,r24
 147               	.L14:
 148 00ec C901      		movw r24,r18
 149               	/* epilogue start */
 150 00ee DF91      		pop r29
 151 00f0 CF91      		pop r28
 152 00f2 1F91      		pop r17
 153 00f4 0F91      		pop r16
 154 00f6 FF90      		pop r15
 155 00f8 EF90      		pop r14
 156 00fa DF90      		pop r13
 157 00fc CF90      		pop r12
 158 00fe 0895      		ret
 159               		.size	NutHttpAuthValidate, .-NutHttpAuthValidate
 160               	.global	NutClearAuth
 161               		.type	NutClearAuth, @function
 162               	NutClearAuth:
 163 0100 CF93      		push r28
 164 0102 DF93      		push r29
 165               	/* prologue: function */
 166               	/* frame size = 0 */
 167 0104 00C0      		rjmp .L17
 168               	.L18:
 169 0106 8881      		ld r24,Y
 170 0108 9981      		ldd r25,Y+1
GAS LISTING C:\Temp/ccvEkIeF.s 			page 4


 171 010a 9093 0000 		sts (authList)+1,r25
 172 010e 8093 0000 		sts authList,r24
 173 0112 8A81      		ldd r24,Y+2
 174 0114 9B81      		ldd r25,Y+3
 175 0116 0E94 0000 		call free
 176 011a 8C81      		ldd r24,Y+4
 177 011c 9D81      		ldd r25,Y+5
 178 011e 0E94 0000 		call free
 179 0122 CE01      		movw r24,r28
 180 0124 0E94 0000 		call free
 181               	.L17:
 182 0128 C091 0000 		lds r28,authList
 183 012c D091 0000 		lds r29,(authList)+1
 184 0130 2097      		sbiw r28,0
 185 0132 01F4      		brne .L18
 186               	/* epilogue start */
 187 0134 DF91      		pop r29
 188 0136 CF91      		pop r28
 189 0138 0895      		ret
 190               		.size	NutClearAuth, .-NutClearAuth
 191               	.global	NutRegisterAuth
 192               		.type	NutRegisterAuth, @function
 193               	NutRegisterAuth:
 194 013a EF92      		push r14
 195 013c FF92      		push r15
 196 013e 0F93      		push r16
 197 0140 1F93      		push r17
 198 0142 CF93      		push r28
 199 0144 DF93      		push r29
 200               	/* prologue: function */
 201               	/* frame size = 0 */
 202 0146 8C01      		movw r16,r24
 203 0148 7B01      		movw r14,r22
 204 014a 86E0      		ldi r24,lo8(6)
 205 014c 90E0      		ldi r25,hi8(6)
 206 014e 0E94 0000 		call malloc
 207 0152 EC01      		movw r28,r24
 208 0154 0097      		sbiw r24,0
 209 0156 01F0      		breq .L26
 210               	.L21:
 211 0158 8091 0000 		lds r24,authList
 212 015c 9091 0000 		lds r25,(authList)+1
 213 0160 9983      		std Y+1,r25
 214 0162 8883      		st Y,r24
 215 0164 C801      		movw r24,r16
 216 0166 0E94 0000 		call strdup
 217 016a 9B83      		std Y+3,r25
 218 016c 8A83      		std Y+2,r24
 219 016e 0097      		sbiw r24,0
 220 0170 01F0      		breq .L23
 221 0172 C701      		movw r24,r14
 222 0174 0E94 0000 		call strdup
 223 0178 9D83      		std Y+5,r25
 224 017a 8C83      		std Y+4,r24
 225 017c 0097      		sbiw r24,0
 226 017e 01F0      		breq .L24
 227 0180 D093 0000 		sts (authList)+1,r29
GAS LISTING C:\Temp/ccvEkIeF.s 			page 5


 228 0184 C093 0000 		sts authList,r28
 229 0188 20E0      		ldi r18,lo8(0)
 230 018a 30E0      		ldi r19,hi8(0)
 231 018c 00C0      		rjmp .L22
 232               	.L24:
 233 018e 8A81      		ldd r24,Y+2
 234 0190 9B81      		ldd r25,Y+3
 235 0192 0E94 0000 		call free
 236               	.L23:
 237 0196 CE01      		movw r24,r28
 238 0198 0E94 0000 		call free
 239               	.L26:
 240 019c 2FEF      		ldi r18,lo8(-1)
 241 019e 3FEF      		ldi r19,hi8(-1)
 242               	.L22:
 243 01a0 C901      		movw r24,r18
 244               	/* epilogue start */
 245 01a2 DF91      		pop r29
 246 01a4 CF91      		pop r28
 247 01a6 1F91      		pop r17
 248 01a8 0F91      		pop r16
 249 01aa FF90      		pop r15
 250 01ac EF90      		pop r14
 251 01ae 0895      		ret
 252               		.size	NutRegisterAuth, .-NutRegisterAuth
 253               	.global	authList
 254               	.global	authList
 255               		.section .bss
 256               		.type	authList, @object
 257               		.size	authList, 2
 258               	authList:
 259 0000 0000      		.skip 2,0
GAS LISTING C:\Temp/ccvEkIeF.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 auth.c
  C:\Temp/ccvEkIeF.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccvEkIeF.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccvEkIeF.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccvEkIeF.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccvEkIeF.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccvEkIeF.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccvEkIeF.s:12     .text:00000000 NutHttpAuthLookup
  C:\Temp/ccvEkIeF.s:258    .bss:00000000 authList
  C:\Temp/ccvEkIeF.s:73     .text:0000005e NutHttpAuthValidate
  C:\Temp/ccvEkIeF.s:162    .text:00000100 NutClearAuth
  C:\Temp/ccvEkIeF.s:193    .text:0000013a NutRegisterAuth

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
strstr
strcmp
strrchr
strncmp
NutDecodeBase64
free
malloc
strdup
