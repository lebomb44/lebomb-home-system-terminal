GAS LISTING C:\Temp/cc2L8Dlh.s 			page 1


   1               		.file	"ftpd.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutFtpRespondBad
  12               		.type	NutFtpRespondBad, @function
  13               	NutFtpRespondBad:
  14 0000 0F93      		push r16
  15 0002 1F93      		push r17
  16               	/* prologue: function */
  17               	/* frame size = 0 */
  18 0004 8C01      		movw r16,r24
  19 0006 7F93      		push r23
  20 0008 6F93      		push r22
  21 000a 80E0      		ldi r24,lo8(fmt_P.2350)
  22 000c 90E0      		ldi r25,hi8(fmt_P.2350)
  23 000e 9F93      		push r25
  24 0010 8F93      		push r24
  25 0012 F801      		movw r30,r16
  26 0014 8281      		ldd r24,Z+2
  27 0016 9381      		ldd r25,Z+3
  28 0018 9F93      		push r25
  29 001a 8F93      		push r24
  30 001c 0E94 0000 		call fprintf_P
  31 0020 F801      		movw r30,r16
  32 0022 8281      		ldd r24,Z+2
  33 0024 9381      		ldd r25,Z+3
  34 0026 0E94 0000 		call fflush
  35 002a 8DB7      		in r24,__SP_L__
  36 002c 9EB7      		in r25,__SP_H__
  37 002e 0696      		adiw r24,6
  38 0030 0FB6      		in __tmp_reg__,__SREG__
  39 0032 F894      		cli
  40 0034 9EBF      		out __SP_H__,r25
  41 0036 0FBE      		out __SREG__,__tmp_reg__
  42 0038 8DBF      		out __SP_L__,r24
  43 003a 80E0      		ldi r24,lo8(0)
  44 003c 90E0      		ldi r25,hi8(0)
  45               	/* epilogue start */
  46 003e 1F91      		pop r17
  47 0040 0F91      		pop r16
  48 0042 0895      		ret
  49               		.size	NutFtpRespondBad, .-NutFtpRespondBad
  50               	.global	NutFtpRespondOk
  51               		.type	NutFtpRespondOk, @function
  52               	NutFtpRespondOk:
  53 0044 0F93      		push r16
  54 0046 1F93      		push r17
  55               	/* prologue: function */
  56               	/* frame size = 0 */
  57 0048 8C01      		movw r16,r24
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 2


  58 004a 7F93      		push r23
  59 004c 6F93      		push r22
  60 004e 80E0      		ldi r24,lo8(fmt_P.2343)
  61 0050 90E0      		ldi r25,hi8(fmt_P.2343)
  62 0052 9F93      		push r25
  63 0054 8F93      		push r24
  64 0056 F801      		movw r30,r16
  65 0058 8281      		ldd r24,Z+2
  66 005a 9381      		ldd r25,Z+3
  67 005c 9F93      		push r25
  68 005e 8F93      		push r24
  69 0060 0E94 0000 		call fprintf_P
  70 0064 F801      		movw r30,r16
  71 0066 8281      		ldd r24,Z+2
  72 0068 9381      		ldd r25,Z+3
  73 006a 0E94 0000 		call fflush
  74 006e 8DB7      		in r24,__SP_L__
  75 0070 9EB7      		in r25,__SP_H__
  76 0072 0696      		adiw r24,6
  77 0074 0FB6      		in __tmp_reg__,__SREG__
  78 0076 F894      		cli
  79 0078 9EBF      		out __SP_H__,r25
  80 007a 0FBE      		out __SREG__,__tmp_reg__
  81 007c 8DBF      		out __SP_L__,r24
  82 007e 80E0      		ldi r24,lo8(0)
  83 0080 90E0      		ldi r25,hi8(0)
  84               	/* epilogue start */
  85 0082 1F91      		pop r17
  86 0084 0F91      		pop r16
  87 0086 0895      		ret
  88               		.size	NutFtpRespondOk, .-NutFtpRespondOk
  89               	.global	NutFtpProcessType
  90               		.type	NutFtpProcessType, @function
  91               	NutFtpProcessType:
  92               	/* prologue: function */
  93               	/* frame size = 0 */
  94 0088 DC01      		movw r26,r24
  95 008a FB01      		movw r30,r22
  96 008c E081      		ld r30,Z
  97 008e E134      		cpi r30,lo8(65)
  98 0090 01F4      		brne .L6
  99 0092 80E0      		ldi r24,lo8(0)
 100 0094 90E0      		ldi r25,hi8(0)
 101 0096 00C0      		rjmp .L7
 102               	.L6:
 103 0098 90E0      		ldi r25,lo8(0)
 104 009a E136      		cpi r30,lo8(97)
 105 009c 01F4      		brne .L8
 106 009e 91E0      		ldi r25,lo8(1)
 107               	.L8:
 108 00a0 81E0      		ldi r24,lo8(1)
 109 00a2 9827      		eor r25,r24
 110 00a4 892F      		mov r24,r25
 111               	.L7:
 112 00a6 1F96      		adiw r26,15
 113 00a8 8C93      		st X,r24
 114 00aa 1F97      		sbiw r26,15
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 3


 115 00ac 68EC      		ldi r22,lo8(200)
 116 00ae 70E0      		ldi r23,hi8(200)
 117 00b0 CD01      		movw r24,r26
 118 00b2 0E94 0000 		call NutFtpRespondOk
 119               	/* epilogue start */
 120 00b6 0895      		ret
 121               		.size	NutFtpProcessType, .-NutFtpProcessType
 122               	.global	NutFtpProcessUser
 123               		.type	NutFtpProcessUser, @function
 124               	NutFtpProcessUser:
 125 00b8 CF93      		push r28
 126 00ba DF93      		push r29
 127               	/* prologue: function */
 128               	/* frame size = 0 */
 129 00bc EC01      		movw r28,r24
 130 00be E091 0000 		lds r30,ftp_user
 131 00c2 F091 0000 		lds r31,(ftp_user)+1
 132 00c6 3097      		sbiw r30,0
 133 00c8 01F0      		breq .L11
 134 00ca 8081      		ld r24,Z
 135 00cc 8823      		tst r24
 136 00ce 01F0      		breq .L11
 137 00d0 8E85      		ldd r24,Y+14
 138 00d2 8823      		tst r24
 139 00d4 01F0      		breq .L11
 140 00d6 CF01      		movw r24,r30
 141 00d8 0E94 0000 		call strcmp
 142 00dc 0097      		sbiw r24,0
 143 00de 01F0      		breq .L11
 144 00e0 1E86      		std Y+14,__zero_reg__
 145 00e2 66E2      		ldi r22,lo8(550)
 146 00e4 72E0      		ldi r23,hi8(550)
 147 00e6 CE01      		movw r24,r28
 148 00e8 0E94 0000 		call NutFtpRespondBad
 149 00ec 00C0      		rjmp .L12
 150               	.L11:
 151 00ee E091 0000 		lds r30,ftp_pass
 152 00f2 F091 0000 		lds r31,(ftp_pass)+1
 153 00f6 3097      		sbiw r30,0
 154 00f8 01F0      		breq .L13
 155 00fa 8081      		ld r24,Z
 156 00fc 8823      		tst r24
 157 00fe 01F0      		breq .L13
 158 0100 81E0      		ldi r24,lo8(1)
 159 0102 8E87      		std Y+14,r24
 160 0104 6BE4      		ldi r22,lo8(331)
 161 0106 71E0      		ldi r23,hi8(331)
 162 0108 00C0      		rjmp .L15
 163               	.L13:
 164 010a 82E0      		ldi r24,lo8(2)
 165 010c 8E87      		std Y+14,r24
 166 010e 66EE      		ldi r22,lo8(230)
 167 0110 70E0      		ldi r23,hi8(230)
 168               	.L15:
 169 0112 CE01      		movw r24,r28
 170 0114 0E94 0000 		call NutFtpRespondOk
 171               	.L12:
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 4


 172               	/* epilogue start */
 173 0118 DF91      		pop r29
 174 011a CF91      		pop r28
 175 011c 0895      		ret
 176               		.size	NutFtpProcessUser, .-NutFtpProcessUser
 177               	.global	NutFtpProcessPass
 178               		.type	NutFtpProcessPass, @function
 179               	NutFtpProcessPass:
 180 011e CF93      		push r28
 181 0120 DF93      		push r29
 182               	/* prologue: function */
 183               	/* frame size = 0 */
 184 0122 EC01      		movw r28,r24
 185 0124 E091 0000 		lds r30,ftp_pass
 186 0128 F091 0000 		lds r31,(ftp_pass)+1
 187 012c 3097      		sbiw r30,0
 188 012e 01F0      		breq .L17
 189 0130 8081      		ld r24,Z
 190 0132 8823      		tst r24
 191 0134 01F0      		breq .L17
 192 0136 8E85      		ldd r24,Y+14
 193 0138 8130      		cpi r24,lo8(1)
 194 013a 01F4      		brne .L18
 195 013c CF01      		movw r24,r30
 196 013e 0E94 0000 		call strcmp
 197 0142 0097      		sbiw r24,0
 198 0144 01F0      		breq .L17
 199               	.L18:
 200 0146 1E86      		std Y+14,__zero_reg__
 201 0148 66E2      		ldi r22,lo8(550)
 202 014a 72E0      		ldi r23,hi8(550)
 203 014c CE01      		movw r24,r28
 204 014e 0E94 0000 		call NutFtpRespondBad
 205 0152 00C0      		rjmp .L19
 206               	.L17:
 207 0154 82E0      		ldi r24,lo8(2)
 208 0156 8E87      		std Y+14,r24
 209 0158 66EE      		ldi r22,lo8(230)
 210 015a 70E0      		ldi r23,hi8(230)
 211 015c CE01      		movw r24,r28
 212 015e 0E94 0000 		call NutFtpRespondOk
 213               	.L19:
 214               	/* epilogue start */
 215 0162 DF91      		pop r29
 216 0164 CF91      		pop r28
 217 0166 0895      		ret
 218               		.size	NutFtpProcessPass, .-NutFtpProcessPass
 219               		.data
 220               	.LC0:
 221 0000 3231 3520 		.string	"215 UNIX Type: L8\r\n"
 221      554E 4958 
 221      2054 7970 
 221      653A 204C 
 221      380D 0A00 
 222               		.text
 223               	.global	NutFtpProcessSystem
 224               		.type	NutFtpProcessSystem, @function
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 5


 225               	NutFtpProcessSystem:
 226               	/* prologue: function */
 227               	/* frame size = 0 */
 228 0168 FC01      		movw r30,r24
 229 016a 6281      		ldd r22,Z+2
 230 016c 7381      		ldd r23,Z+3
 231 016e 80E0      		ldi r24,lo8(.LC0)
 232 0170 90E0      		ldi r25,hi8(.LC0)
 233 0172 0E94 0000 		call fputs
 234 0176 80E0      		ldi r24,lo8(0)
 235 0178 90E0      		ldi r25,hi8(0)
 236               	/* epilogue start */
 237 017a 0895      		ret
 238               		.size	NutFtpProcessSystem, .-NutFtpProcessSystem
 239               	.global	NutFtpProcessRmd
 240               		.type	NutFtpProcessRmd, @function
 241               	NutFtpProcessRmd:
 242 017c CF93      		push r28
 243 017e DF93      		push r29
 244               	/* prologue: function */
 245               	/* frame size = 0 */
 246 0180 EC01      		movw r28,r24
 247 0182 CB01      		movw r24,r22
 248 0184 0E94 0000 		call rmdir
 249 0188 892B      		or r24,r25
 250 018a 01F0      		breq .L24
 251 018c 63EC      		ldi r22,lo8(451)
 252 018e 71E0      		ldi r23,hi8(451)
 253 0190 CE01      		movw r24,r28
 254 0192 0E94 0000 		call NutFtpRespondBad
 255 0196 00C0      		rjmp .L25
 256               	.L24:
 257 0198 61E0      		ldi r22,lo8(257)
 258 019a 71E0      		ldi r23,hi8(257)
 259 019c CE01      		movw r24,r28
 260 019e 0E94 0000 		call NutFtpRespondOk
 261               	.L25:
 262               	/* epilogue start */
 263 01a2 DF91      		pop r29
 264 01a4 CF91      		pop r28
 265 01a6 0895      		ret
 266               		.size	NutFtpProcessRmd, .-NutFtpProcessRmd
 267               		.data
 268               	.LC1:
 269 0014 3235 3720 		.string	"257 \"%s\"\r\n"
 269      2225 7322 
 269      0D0A 00
 270               		.text
 271               	.global	NutFtpProcessPwd
 272               		.type	NutFtpProcessPwd, @function
 273               	NutFtpProcessPwd:
 274               	/* prologue: function */
 275               	/* frame size = 0 */
 276 01a8 FC01      		movw r30,r24
 277 01aa 8481      		ldd r24,Z+4
 278 01ac 9581      		ldd r25,Z+5
 279 01ae 9F93      		push r25
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 6


 280 01b0 8F93      		push r24
 281 01b2 80E0      		ldi r24,lo8(.LC1)
 282 01b4 90E0      		ldi r25,hi8(.LC1)
 283 01b6 9F93      		push r25
 284 01b8 8F93      		push r24
 285 01ba 8281      		ldd r24,Z+2
 286 01bc 9381      		ldd r25,Z+3
 287 01be 9F93      		push r25
 288 01c0 8F93      		push r24
 289 01c2 0E94 0000 		call fprintf
 290 01c6 8DB7      		in r24,__SP_L__
 291 01c8 9EB7      		in r25,__SP_H__
 292 01ca 0696      		adiw r24,6
 293 01cc 0FB6      		in __tmp_reg__,__SREG__
 294 01ce F894      		cli
 295 01d0 9EBF      		out __SP_H__,r25
 296 01d2 0FBE      		out __SREG__,__tmp_reg__
 297 01d4 8DBF      		out __SP_L__,r24
 298 01d6 80E0      		ldi r24,lo8(0)
 299 01d8 90E0      		ldi r25,hi8(0)
 300               	/* epilogue start */
 301 01da 0895      		ret
 302               		.size	NutFtpProcessPwd, .-NutFtpProcessPwd
 303               		.data
 304               	.LC2:
 305 001f 3232 3720 		.string	"227 Passive (%u,%u,%u,%u,%u,%u).\r\n"
 305      5061 7373 
 305      6976 6520 
 305      2825 752C 
 305      2575 2C25 
 306               		.text
 307               	.global	NutFtpProcessPassiv
 308               		.type	NutFtpProcessPassiv, @function
 309               	NutFtpProcessPassiv:
 310 01dc 0F93      		push r16
 311 01de 1F93      		push r17
 312               	/* prologue: function */
 313               	/* frame size = 0 */
 314 01e0 8C01      		movw r16,r24
 315 01e2 DC01      		movw r26,r24
 316 01e4 ED91      		ld r30,X+
 317 01e6 FC91      		ld r31,X
 318 01e8 84E1      		ldi r24,lo8(20)
 319 01ea 90E0      		ldi r25,hi8(20)
 320 01ec 9F93      		push r25
 321 01ee 8F93      		push r24
 322 01f0 1F92      		push __zero_reg__
 323 01f2 1F92      		push __zero_reg__
 324 01f4 8789      		ldd r24,Z+23
 325 01f6 90E0      		ldi r25,lo8(0)
 326 01f8 9F93      		push r25
 327 01fa 8F93      		push r24
 328 01fc 2489      		ldd r18,Z+20
 329 01fe 3589      		ldd r19,Z+21
 330 0200 4689      		ldd r20,Z+22
 331 0202 5789      		ldd r21,Z+23
 332 0204 8689      		ldd r24,Z+22
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 7


 333 0206 90E0      		ldi r25,lo8(0)
 334 0208 9F93      		push r25
 335 020a 8F93      		push r24
 336 020c BB27      		clr r27
 337 020e A52F      		mov r26,r21
 338 0210 942F      		mov r25,r20
 339 0212 832F      		mov r24,r19
 340 0214 90E0      		ldi r25,lo8(0)
 341 0216 9F93      		push r25
 342 0218 8F93      		push r24
 343 021a 30E0      		ldi r19,lo8(0)
 344 021c 3F93      		push r19
 345 021e 2F93      		push r18
 346 0220 80E0      		ldi r24,lo8(.LC2)
 347 0222 90E0      		ldi r25,hi8(.LC2)
 348 0224 9F93      		push r25
 349 0226 8F93      		push r24
 350 0228 F801      		movw r30,r16
 351 022a 8281      		ldd r24,Z+2
 352 022c 9381      		ldd r25,Z+3
 353 022e 9F93      		push r25
 354 0230 8F93      		push r24
 355 0232 0E94 0000 		call fprintf
 356 0236 D801      		movw r26,r16
 357 0238 1296      		adiw r26,2
 358 023a 8D91      		ld r24,X+
 359 023c 9C91      		ld r25,X
 360 023e 1397      		sbiw r26,2+1
 361 0240 0E94 0000 		call fflush
 362 0244 81E0      		ldi r24,lo8(1)
 363 0246 F801      		movw r30,r16
 364 0248 808B      		std Z+16,r24
 365 024a 8DB7      		in r24,__SP_L__
 366 024c 9EB7      		in r25,__SP_H__
 367 024e 4096      		adiw r24,16
 368 0250 0FB6      		in __tmp_reg__,__SREG__
 369 0252 F894      		cli
 370 0254 9EBF      		out __SP_H__,r25
 371 0256 0FBE      		out __SREG__,__tmp_reg__
 372 0258 8DBF      		out __SP_L__,r24
 373 025a 80E0      		ldi r24,lo8(0)
 374 025c 90E0      		ldi r25,hi8(0)
 375               	/* epilogue start */
 376 025e 1F91      		pop r17
 377 0260 0F91      		pop r16
 378 0262 0895      		ret
 379               		.size	NutFtpProcessPassiv, .-NutFtpProcessPassiv
 380               	.global	NutFtpProcessPort
 381               		.type	NutFtpProcessPort, @function
 382               	NutFtpProcessPort:
 383 0264 8F92      		push r8
 384 0266 9F92      		push r9
 385 0268 AF92      		push r10
 386 026a BF92      		push r11
 387 026c CF92      		push r12
 388 026e DF92      		push r13
 389 0270 EF92      		push r14
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 8


 390 0272 FF92      		push r15
 391 0274 0F93      		push r16
 392 0276 1F93      		push r17
 393 0278 CF93      		push r28
 394 027a DF93      		push r29
 395               	/* prologue: function */
 396               	/* frame size = 0 */
 397 027c EC01      		movw r28,r24
 398 027e 1E82      		std Y+6,__zero_reg__
 399 0280 1F82      		std Y+7,__zero_reg__
 400 0282 1886      		std Y+8,__zero_reg__
 401 0284 1986      		std Y+9,__zero_reg__
 402 0286 1B86      		std Y+11,__zero_reg__
 403 0288 1A86      		std Y+10,__zero_reg__
 404 028a 6B01      		movw r12,r22
 405 028c 8824      		clr r8
 406 028e 9924      		clr r9
 407               	.L38:
 408 0290 F601      		movw r30,r12
 409 0292 8081      		ld r24,Z
 410 0294 8053      		subi r24,lo8(-(-48))
 411 0296 8A30      		cpi r24,lo8(10)
 412 0298 00F0      		brlo .+2
 413 029a 00C0      		rjmp .L32
 414 029c F4E0      		ldi r31,lo8(4)
 415 029e 8F16      		cp r8,r31
 416 02a0 9104      		cpc r9,__zero_reg__
 417 02a2 04F4      		brge .L33
 418 02a4 EE80      		ldd r14,Y+6
 419 02a6 FF80      		ldd r15,Y+7
 420 02a8 0885      		ldd r16,Y+8
 421 02aa 1985      		ldd r17,Y+9
 422 02ac EF2C      		mov r14,r15
 423 02ae F02E      		mov r15,r16
 424 02b0 012F      		mov r16,r17
 425 02b2 1127      		clr r17
 426 02b4 EE82      		std Y+6,r14
 427 02b6 FF82      		std Y+7,r15
 428 02b8 0887      		std Y+8,r16
 429 02ba 1987      		std Y+9,r17
 430 02bc C601      		movw r24,r12
 431 02be 0E94 0000 		call atol
 432 02c2 962F      		mov r25,r22
 433 02c4 8827      		clr r24
 434 02c6 7727      		clr r23
 435 02c8 6627      		clr r22
 436 02ca 6E0D      		add r22,r14
 437 02cc 7F1D      		adc r23,r15
 438 02ce 801F      		adc r24,r16
 439 02d0 911F      		adc r25,r17
 440 02d2 6E83      		std Y+6,r22
 441 02d4 7F83      		std Y+7,r23
 442 02d6 8887      		std Y+8,r24
 443 02d8 9987      		std Y+9,r25
 444 02da 00C0      		rjmp .L43
 445               	.L33:
 446 02dc BA84      		ldd r11,Y+10
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 9


 447 02de AA24      		clr r10
 448 02e0 BB86      		std Y+11,r11
 449 02e2 AA86      		std Y+10,r10
 450 02e4 C601      		movw r24,r12
 451 02e6 0E94 0000 		call atoi
 452 02ea 8A0D      		add r24,r10
 453 02ec 9B1D      		adc r25,r11
 454 02ee 9B87      		std Y+11,r25
 455 02f0 8A87      		std Y+10,r24
 456 02f2 00C0      		rjmp .L43
 457               	.L36:
 458 02f4 6C01      		movw r12,r24
 459               	.L43:
 460 02f6 F601      		movw r30,r12
 461 02f8 2081      		ld r18,Z
 462 02fa 2223      		tst r18
 463 02fc 01F0      		breq .L35
 464 02fe C601      		movw r24,r12
 465 0300 0196      		adiw r24,1
 466 0302 2C32      		cpi r18,lo8(44)
 467 0304 01F4      		brne .L36
 468 0306 00C0      		rjmp .L46
 469               	.L35:
 470 0308 0894      		sec
 471 030a 811C      		adc r8,__zero_reg__
 472 030c 911C      		adc r9,__zero_reg__
 473 030e F6E0      		ldi r31,lo8(6)
 474 0310 8F16      		cp r8,r31
 475 0312 9104      		cpc r9,__zero_reg__
 476 0314 01F0      		breq .+2
 477 0316 00C0      		rjmp .L38
 478 0318 E881      		ld r30,Y
 479 031a F981      		ldd r31,Y+1
 480 031c 228D      		ldd r18,Z+26
 481 031e 338D      		ldd r19,Z+27
 482 0320 448D      		ldd r20,Z+28
 483 0322 558D      		ldd r21,Z+29
 484 0324 8E81      		ldd r24,Y+6
 485 0326 9F81      		ldd r25,Y+7
 486 0328 A885      		ldd r26,Y+8
 487 032a B985      		ldd r27,Y+9
 488 032c 2817      		cp r18,r24
 489 032e 3907      		cpc r19,r25
 490 0330 4A07      		cpc r20,r26
 491 0332 5B07      		cpc r21,r27
 492 0334 01F4      		brne .L39
 493 0336 68EC      		ldi r22,lo8(200)
 494 0338 70E0      		ldi r23,hi8(200)
 495 033a CE01      		movw r24,r28
 496 033c 0E94 0000 		call NutFtpRespondOk
 497 0340 00C0      		rjmp .L40
 498               	.L39:
 499 0342 69EA      		ldi r22,lo8(425)
 500 0344 71E0      		ldi r23,hi8(425)
 501 0346 00C0      		rjmp .L45
 502               	.L32:
 503 0348 65EF      		ldi r22,lo8(501)
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 10


 504 034a 71E0      		ldi r23,hi8(501)
 505               	.L45:
 506 034c CE01      		movw r24,r28
 507 034e 0E94 0000 		call NutFtpRespondBad
 508               	.L40:
 509               	/* epilogue start */
 510 0352 DF91      		pop r29
 511 0354 CF91      		pop r28
 512 0356 1F91      		pop r17
 513 0358 0F91      		pop r16
 514 035a FF90      		pop r15
 515 035c EF90      		pop r14
 516 035e DF90      		pop r13
 517 0360 CF90      		pop r12
 518 0362 BF90      		pop r11
 519 0364 AF90      		pop r10
 520 0366 9F90      		pop r9
 521 0368 8F90      		pop r8
 522 036a 0895      		ret
 523               	.L46:
 524 036c 6C01      		movw r12,r24
 525 036e 00C0      		rjmp .L35
 526               		.size	NutFtpProcessPort, .-NutFtpProcessPort
 527               	.global	NutFtpProcessMkd
 528               		.type	NutFtpProcessMkd, @function
 529               	NutFtpProcessMkd:
 530 0370 CF93      		push r28
 531 0372 DF93      		push r29
 532               	/* prologue: function */
 533               	/* frame size = 0 */
 534 0374 EC01      		movw r28,r24
 535 0376 CB01      		movw r24,r22
 536 0378 6FEF      		ldi r22,lo8(511)
 537 037a 71E0      		ldi r23,hi8(511)
 538 037c 0E94 0000 		call mkdir
 539 0380 892B      		or r24,r25
 540 0382 01F0      		breq .L48
 541 0384 66E2      		ldi r22,lo8(550)
 542 0386 72E0      		ldi r23,hi8(550)
 543 0388 CE01      		movw r24,r28
 544 038a 0E94 0000 		call NutFtpRespondBad
 545 038e 00C0      		rjmp .L49
 546               	.L48:
 547 0390 61E0      		ldi r22,lo8(257)
 548 0392 71E0      		ldi r23,hi8(257)
 549 0394 CE01      		movw r24,r28
 550 0396 0E94 0000 		call NutFtpRespondOk
 551               	.L49:
 552               	/* epilogue start */
 553 039a DF91      		pop r29
 554 039c CF91      		pop r28
 555 039e 0895      		ret
 556               		.size	NutFtpProcessMkd, .-NutFtpProcessMkd
 557               	.global	NutFtpCloseSession
 558               		.type	NutFtpCloseSession, @function
 559               	NutFtpCloseSession:
 560 03a0 CF93      		push r28
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 11


 561 03a2 DF93      		push r29
 562               	/* prologue: function */
 563               	/* frame size = 0 */
 564 03a4 EC01      		movw r28,r24
 565 03a6 0097      		sbiw r24,0
 566 03a8 01F0      		breq .L54
 567 03aa 8A81      		ldd r24,Y+2
 568 03ac 9B81      		ldd r25,Y+3
 569 03ae 0E94 0000 		call fclose
 570 03b2 8C81      		ldd r24,Y+4
 571 03b4 9D81      		ldd r25,Y+5
 572 03b6 0097      		sbiw r24,0
 573 03b8 01F0      		breq .L53
 574 03ba 0E94 0000 		call free
 575               	.L53:
 576 03be CE01      		movw r24,r28
 577 03c0 0E94 0000 		call free
 578               	.L54:
 579               	/* epilogue start */
 580 03c4 DF91      		pop r29
 581 03c6 CF91      		pop r28
 582 03c8 0895      		ret
 583               		.size	NutFtpCloseSession, .-NutFtpCloseSession
 584               	.global	NutFtpProcessDelete
 585               		.type	NutFtpProcessDelete, @function
 586               	NutFtpProcessDelete:
 587 03ca CF93      		push r28
 588 03cc DF93      		push r29
 589               	/* prologue: function */
 590               	/* frame size = 0 */
 591 03ce EC01      		movw r28,r24
 592 03d0 CB01      		movw r24,r22
 593 03d2 0E94 0000 		call unlink
 594 03d6 892B      		or r24,r25
 595 03d8 01F0      		breq .L56
 596 03da 66E2      		ldi r22,lo8(550)
 597 03dc 72E0      		ldi r23,hi8(550)
 598 03de CE01      		movw r24,r28
 599 03e0 0E94 0000 		call NutFtpRespondBad
 600 03e4 00C0      		rjmp .L57
 601               	.L56:
 602 03e6 6AEF      		ldi r22,lo8(250)
 603 03e8 70E0      		ldi r23,hi8(250)
 604 03ea CE01      		movw r24,r28
 605 03ec 0E94 0000 		call NutFtpRespondOk
 606               	.L57:
 607               	/* epilogue start */
 608 03f0 DF91      		pop r29
 609 03f2 CF91      		pop r28
 610 03f4 0895      		ret
 611               		.size	NutFtpProcessDelete, .-NutFtpProcessDelete
 612               		.data
 613               	.LC3:
 614 0042 2F00      		.string	"/"
 615               		.text
 616               	.global	NutFtpProcessCwd
 617               		.type	NutFtpProcessCwd, @function
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 12


 618               	NutFtpProcessCwd:
 619 03f6 CF92      		push r12
 620 03f8 DF92      		push r13
 621 03fa EF92      		push r14
 622 03fc FF92      		push r15
 623 03fe 0F93      		push r16
 624 0400 1F93      		push r17
 625 0402 DF93      		push r29
 626 0404 CF93      		push r28
 627 0406 CDB7      		in r28,__SP_L__
 628 0408 DEB7      		in r29,__SP_H__
 629 040a 2D97      		sbiw r28,13
 630 040c 0FB6      		in __tmp_reg__,__SREG__
 631 040e F894      		cli
 632 0410 DEBF      		out __SP_H__,r29
 633 0412 0FBE      		out __SREG__,__tmp_reg__
 634 0414 CDBF      		out __SP_L__,r28
 635               	/* prologue: function */
 636               	/* frame size = 13 */
 637 0416 7C01      		movw r14,r24
 638 0418 6B01      		movw r12,r22
 639 041a E091 0000 		lds r30,ftp_root
 640 041e F091 0000 		lds r31,ftp_root+1
 641 0422 DF01      		movw r26,r30
 642 0424 0D90      		ld __tmp_reg__,X+
 643 0426 0020      		tst __tmp_reg__
 644 0428 01F4      		brne .-6
 645 042a 8D01      		movw r16,r26
 646 042c 0150      		subi r16,lo8(-(-1))
 647 042e 1040      		sbci r17,hi8(-(-1))
 648 0430 0E1B      		sub r16,r30
 649 0432 1F0B      		sbc r17,r31
 650 0434 060F      		add r16,r22
 651 0436 171F      		adc r17,r23
 652 0438 F801      		movw r30,r16
 653 043a 8081      		ld r24,Z
 654 043c 8823      		tst r24
 655 043e 01F0      		breq .L60
 656 0440 60E0      		ldi r22,lo8(.LC3)
 657 0442 70E0      		ldi r23,hi8(.LC3)
 658 0444 C801      		movw r24,r16
 659 0446 0E94 0000 		call strcmp
 660 044a 0097      		sbiw r24,0
 661 044c 01F0      		breq .L60
 662 044e BE01      		movw r22,r28
 663 0450 6F5F      		subi r22,lo8(-(1))
 664 0452 7F4F      		sbci r23,hi8(-(1))
 665 0454 C601      		movw r24,r12
 666 0456 0E94 0000 		call stat
 667 045a 892B      		or r24,r25
 668 045c 01F4      		brne .L67
 669 045e 8B81      		ldd r24,Y+3
 670 0460 8823      		tst r24
 671 0462 01F0      		breq .L67
 672               	.L60:
 673 0464 D801      		movw r26,r16
 674 0466 8C91      		ld r24,X
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 13


 675 0468 8823      		tst r24
 676 046a 01F4      		brne .L63
 677 046c 00E0      		ldi r16,lo8(.LC3)
 678 046e 10E0      		ldi r17,hi8(.LC3)
 679               	.L63:
 680 0470 F701      		movw r30,r14
 681 0472 8481      		ldd r24,Z+4
 682 0474 9581      		ldd r25,Z+5
 683 0476 0097      		sbiw r24,0
 684 0478 01F0      		breq .L64
 685 047a 0E94 0000 		call free
 686               	.L64:
 687 047e C801      		movw r24,r16
 688 0480 0E94 0000 		call strdup
 689 0484 D701      		movw r26,r14
 690 0486 1596      		adiw r26,4+1
 691 0488 9C93      		st X,r25
 692 048a 8E93      		st -X,r24
 693 048c 1497      		sbiw r26,4
 694 048e 0097      		sbiw r24,0
 695 0490 01F4      		brne .L65
 696               	.L67:
 697 0492 66E2      		ldi r22,lo8(550)
 698 0494 72E0      		ldi r23,hi8(550)
 699 0496 C701      		movw r24,r14
 700 0498 0E94 0000 		call NutFtpRespondBad
 701 049c 00C0      		rjmp .L62
 702               	.L65:
 703 049e 6AEF      		ldi r22,lo8(250)
 704 04a0 70E0      		ldi r23,hi8(250)
 705 04a2 C701      		movw r24,r14
 706 04a4 0E94 0000 		call NutFtpRespondOk
 707               	.L62:
 708               	/* epilogue start */
 709 04a8 2D96      		adiw r28,13
 710 04aa 0FB6      		in __tmp_reg__,__SREG__
 711 04ac F894      		cli
 712 04ae DEBF      		out __SP_H__,r29
 713 04b0 0FBE      		out __SREG__,__tmp_reg__
 714 04b2 CDBF      		out __SP_L__,r28
 715 04b4 CF91      		pop r28
 716 04b6 DF91      		pop r29
 717 04b8 1F91      		pop r17
 718 04ba 0F91      		pop r16
 719 04bc FF90      		pop r15
 720 04be EF90      		pop r14
 721 04c0 DF90      		pop r13
 722 04c2 CF90      		pop r12
 723 04c4 0895      		ret
 724               		.size	NutFtpProcessCwd, .-NutFtpProcessCwd
 725               	.global	NutRegisterFtpUser
 726               		.type	NutRegisterFtpUser, @function
 727               	NutRegisterFtpUser:
 728 04c6 0F93      		push r16
 729 04c8 1F93      		push r17
 730 04ca CF93      		push r28
 731 04cc DF93      		push r29
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 14


 732               	/* prologue: function */
 733               	/* frame size = 0 */
 734 04ce EC01      		movw r28,r24
 735 04d0 8B01      		movw r16,r22
 736 04d2 8091 0000 		lds r24,ftp_user
 737 04d6 9091 0000 		lds r25,(ftp_user)+1
 738 04da 0097      		sbiw r24,0
 739 04dc 01F0      		breq .L69
 740 04de 0E94 0000 		call free
 741 04e2 1092 0000 		sts (ftp_user)+1,__zero_reg__
 742 04e6 1092 0000 		sts ftp_user,__zero_reg__
 743               	.L69:
 744 04ea 2097      		sbiw r28,0
 745 04ec 01F0      		breq .L70
 746 04ee 8881      		ld r24,Y
 747 04f0 8823      		tst r24
 748 04f2 01F0      		breq .L70
 749 04f4 CE01      		movw r24,r28
 750 04f6 0E94 0000 		call strdup
 751 04fa 9093 0000 		sts (ftp_user)+1,r25
 752 04fe 8093 0000 		sts ftp_user,r24
 753 0502 0097      		sbiw r24,0
 754 0504 01F0      		breq .L71
 755               	.L70:
 756 0506 8091 0000 		lds r24,ftp_pass
 757 050a 9091 0000 		lds r25,(ftp_pass)+1
 758 050e 0097      		sbiw r24,0
 759 0510 01F0      		breq .L72
 760 0512 0E94 0000 		call free
 761 0516 1092 0000 		sts (ftp_pass)+1,__zero_reg__
 762 051a 1092 0000 		sts ftp_pass,__zero_reg__
 763               	.L72:
 764 051e 0115      		cp r16,__zero_reg__
 765 0520 1105      		cpc r17,__zero_reg__
 766 0522 01F0      		breq .L73
 767 0524 F801      		movw r30,r16
 768 0526 8081      		ld r24,Z
 769 0528 8823      		tst r24
 770 052a 01F0      		breq .L73
 771 052c C801      		movw r24,r16
 772 052e 0E94 0000 		call strdup
 773 0532 9093 0000 		sts (ftp_pass)+1,r25
 774 0536 8093 0000 		sts ftp_pass,r24
 775 053a 0097      		sbiw r24,0
 776 053c 01F4      		brne .L73
 777               	.L71:
 778 053e 2FEF      		ldi r18,lo8(-1)
 779 0540 3FEF      		ldi r19,hi8(-1)
 780 0542 00C0      		rjmp .L74
 781               	.L73:
 782 0544 20E0      		ldi r18,lo8(0)
 783 0546 30E0      		ldi r19,hi8(0)
 784               	.L74:
 785 0548 C901      		movw r24,r18
 786               	/* epilogue start */
 787 054a DF91      		pop r29
 788 054c CF91      		pop r28
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 15


 789 054e 1F91      		pop r17
 790 0550 0F91      		pop r16
 791 0552 0895      		ret
 792               		.size	NutRegisterFtpUser, .-NutRegisterFtpUser
 793               		.data
 794               	.LC4:
 795 0044 722B 6200 		.string	"r+b"
 796               		.text
 797               	.global	NutFtpOpenSession
 798               		.type	NutFtpOpenSession, @function
 799               	NutFtpOpenSession:
 800 0554 EF92      		push r14
 801 0556 FF92      		push r15
 802 0558 0F93      		push r16
 803 055a 1F93      		push r17
 804 055c CF93      		push r28
 805 055e DF93      		push r29
 806               	/* prologue: function */
 807               	/* frame size = 0 */
 808 0560 7C01      		movw r14,r24
 809 0562 81E1      		ldi r24,lo8(17)
 810 0564 90E0      		ldi r25,hi8(17)
 811 0566 0E94 0000 		call malloc
 812 056a EC01      		movw r28,r24
 813 056c 8C01      		movw r16,r24
 814 056e 0097      		sbiw r24,0
 815 0570 01F0      		breq .L77
 816 0572 81E1      		ldi r24,lo8(17)
 817 0574 FE01      		movw r30,r28
 818 0576 1192      		st Z+,__zero_reg__
 819 0578 8A95      	        dec r24
 820 057a 01F4      		brne .-6
 821 057c 84E1      		ldi r24,lo8(20)
 822 057e 90E0      		ldi r25,hi8(20)
 823 0580 9B87      		std Y+11,r25
 824 0582 8A87      		std Y+10,r24
 825 0584 22E5      		ldi r18,lo8(82)
 826 0586 30E0      		ldi r19,hi8(82)
 827 0588 E20E      		add r14,r18
 828 058a F31E      		adc r15,r19
 829 058c F701      		movw r30,r14
 830 058e 8081      		ld r24,Z
 831 0590 9181      		ldd r25,Z+1
 832 0592 2EEA      		ldi r18,lo8(-82)
 833 0594 3FEF      		ldi r19,hi8(-82)
 834 0596 E20E      		add r14,r18
 835 0598 F31E      		adc r15,r19
 836 059a 9D87      		std Y+13,r25
 837 059c 8C87      		std Y+12,r24
 838 059e F982      		std Y+1,r15
 839 05a0 E882      		st Y,r14
 840 05a2 82E0      		ldi r24,lo8(2)
 841 05a4 90E0      		ldi r25,hi8(2)
 842 05a6 0E94 0000 		call malloc
 843 05aa FC01      		movw r30,r24
 844 05ac 9D83      		std Y+5,r25
 845 05ae 8C83      		std Y+4,r24
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 16


 846 05b0 0097      		sbiw r24,0
 847 05b2 01F0      		breq .L80
 848               	.L78:
 849 05b4 8FE2      		ldi r24,lo8(47)
 850 05b6 8083      		st Z,r24
 851 05b8 1182      		std Z+1,__zero_reg__
 852 05ba 60E0      		ldi r22,lo8(.LC4)
 853 05bc 70E0      		ldi r23,hi8(.LC4)
 854 05be C701      		movw r24,r14
 855 05c0 0E94 0000 		call _fdopen
 856 05c4 9B83      		std Y+3,r25
 857 05c6 8A83      		std Y+2,r24
 858 05c8 892B      		or r24,r25
 859 05ca 01F4      		brne .L77
 860 05cc 8C81      		ldd r24,Y+4
 861 05ce 9D81      		ldd r25,Y+5
 862 05d0 0E94 0000 		call free
 863               	.L80:
 864 05d4 C801      		movw r24,r16
 865 05d6 0E94 0000 		call free
 866 05da 00E0      		ldi r16,lo8(0)
 867 05dc 10E0      		ldi r17,hi8(0)
 868               	.L77:
 869 05de C801      		movw r24,r16
 870               	/* epilogue start */
 871 05e0 DF91      		pop r29
 872 05e2 CF91      		pop r28
 873 05e4 1F91      		pop r17
 874 05e6 0F91      		pop r16
 875 05e8 FF90      		pop r15
 876 05ea EF90      		pop r14
 877 05ec 0895      		ret
 878               		.size	NutFtpOpenSession, .-NutFtpOpenSession
 879               	.global	CreateFullPathName
 880               		.type	CreateFullPathName, @function
 881               	CreateFullPathName:
 882 05ee 6F92      		push r6
 883 05f0 7F92      		push r7
 884 05f2 8F92      		push r8
 885 05f4 9F92      		push r9
 886 05f6 AF92      		push r10
 887 05f8 BF92      		push r11
 888 05fa CF92      		push r12
 889 05fc DF92      		push r13
 890 05fe EF92      		push r14
 891 0600 FF92      		push r15
 892 0602 0F93      		push r16
 893 0604 1F93      		push r17
 894 0606 CF93      		push r28
 895 0608 DF93      		push r29
 896               	/* prologue: function */
 897               	/* frame size = 0 */
 898 060a 4C01      		movw r8,r24
 899 060c 3B01      		movw r6,r22
 900 060e 8A01      		movw r16,r20
 901 0610 0097      		sbiw r24,0
 902 0612 01F4      		brne .L82
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 17


 903 0614 C0E0      		ldi r28,lo8(0)
 904 0616 D0E0      		ldi r29,hi8(0)
 905 0618 00C0      		rjmp .L83
 906               	.L82:
 907 061a EC01      		movw r28,r24
 908 061c 0990      		ld __tmp_reg__,Y+
 909 061e 0020      		tst __tmp_reg__
 910 0620 01F4      		brne .-6
 911 0622 2197      		sbiw r28,1
 912 0624 C81B      		sub r28,r24
 913 0626 D90B      		sbc r29,r25
 914               	.L83:
 915 0628 6114      		cp r6,__zero_reg__
 916 062a 7104      		cpc r7,__zero_reg__
 917 062c 01F4      		brne .L84
 918 062e EE24      		clr r14
 919 0630 FF24      		clr r15
 920 0632 00C0      		rjmp .L85
 921               	.L84:
 922 0634 D301      		movw r26,r6
 923 0636 0D90      		ld __tmp_reg__,X+
 924 0638 0020      		tst __tmp_reg__
 925 063a 01F4      		brne .-6
 926 063c 7D01      		movw r14,r26
 927 063e 0894      		sec
 928 0640 E108      		sbc r14,__zero_reg__
 929 0642 F108      		sbc r15,__zero_reg__
 930 0644 E618      		sub r14,r6
 931 0646 F708      		sbc r15,r7
 932               	.L85:
 933 0648 0115      		cp r16,__zero_reg__
 934 064a 1105      		cpc r17,__zero_reg__
 935 064c 01F4      		brne .L86
 936 064e CC24      		clr r12
 937 0650 DD24      		clr r13
 938 0652 00C0      		rjmp .L87
 939               	.L86:
 940 0654 D801      		movw r26,r16
 941 0656 0D90      		ld __tmp_reg__,X+
 942 0658 0020      		tst __tmp_reg__
 943 065a 01F4      		brne .-6
 944 065c 6D01      		movw r12,r26
 945 065e 0894      		sec
 946 0660 C108      		sbc r12,__zero_reg__
 947 0662 D108      		sbc r13,__zero_reg__
 948 0664 C01A      		sub r12,r16
 949 0666 D10A      		sbc r13,r17
 950               	.L87:
 951 0668 2097      		sbiw r28,0
 952 066a 01F0      		breq .L88
 953 066c F401      		movw r30,r8
 954 066e EC0F      		add r30,r28
 955 0670 FD1F      		adc r31,r29
 956 0672 3197      		sbiw r30,1
 957 0674 8081      		ld r24,Z
 958 0676 8F32      		cpi r24,lo8(47)
 959 0678 01F4      		brne .L88
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 18


 960 067a 2197      		sbiw r28,1
 961               	.L88:
 962 067c E114      		cp r14,__zero_reg__
 963 067e F104      		cpc r15,__zero_reg__
 964 0680 01F0      		breq .L89
 965 0682 F301      		movw r30,r6
 966 0684 EE0D      		add r30,r14
 967 0686 FF1D      		adc r31,r15
 968 0688 3197      		sbiw r30,1
 969 068a 8081      		ld r24,Z
 970 068c 8F32      		cpi r24,lo8(47)
 971 068e 01F4      		brne .L89
 972 0690 0894      		sec
 973 0692 E108      		sbc r14,__zero_reg__
 974 0694 F108      		sbc r15,__zero_reg__
 975               	.L89:
 976 0696 C601      		movw r24,r12
 977 0698 0396      		adiw r24,3
 978 069a 8C0F      		add r24,r28
 979 069c 9D1F      		adc r25,r29
 980 069e 8E0D      		add r24,r14
 981 06a0 9F1D      		adc r25,r15
 982 06a2 0E94 0000 		call malloc
 983 06a6 5C01      		movw r10,r24
 984 06a8 0097      		sbiw r24,0
 985 06aa 01F4      		brne .+2
 986 06ac 00C0      		rjmp .L90
 987 06ae 2097      		sbiw r28,0
 988 06b0 01F4      		brne .L91
 989 06b2 FC01      		movw r30,r24
 990 06b4 00C0      		rjmp .L92
 991               	.L91:
 992 06b6 B401      		movw r22,r8
 993 06b8 0E94 0000 		call strcpy
 994 06bc FC01      		movw r30,r24
 995 06be EC0F      		add r30,r28
 996 06c0 FD1F      		adc r31,r29
 997               	.L92:
 998 06c2 C114      		cp r12,__zero_reg__
 999 06c4 D104      		cpc r13,__zero_reg__
 1000 06c6 01F0      		breq .L93
 1001 06c8 D801      		movw r26,r16
 1002 06ca 8C91      		ld r24,X
 1003 06cc 8F32      		cpi r24,lo8(47)
 1004 06ce 01F0      		breq .L94
 1005               	.L93:
 1006 06d0 E114      		cp r14,__zero_reg__
 1007 06d2 F104      		cpc r15,__zero_reg__
 1008 06d4 01F0      		breq .L95
 1009 06d6 D301      		movw r26,r6
 1010 06d8 8C91      		ld r24,X
 1011 06da 8F32      		cpi r24,lo8(47)
 1012 06dc 01F0      		breq .L96
 1013 06de 8FE2      		ldi r24,lo8(47)
 1014 06e0 8193      		st Z+,r24
 1015               	.L96:
 1016 06e2 B301      		movw r22,r6
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 19


 1017 06e4 CF01      		movw r24,r30
 1018 06e6 0E94 0000 		call strcpy
 1019 06ea FC01      		movw r30,r24
 1020 06ec EE0D      		add r30,r14
 1021 06ee FF1D      		adc r31,r15
 1022               	.L95:
 1023 06f0 8FE2      		ldi r24,lo8(47)
 1024 06f2 8193      		st Z+,r24
 1025 06f4 CD28      		or r12,r13
 1026 06f6 01F4      		brne .+2
 1027 06f8 00C0      		rjmp .L97
 1028 06fa 2196      		adiw r28,1
 1029               	.L94:
 1030 06fc 1082      		st Z,__zero_reg__
 1031 06fe A501      		movw r20,r10
 1032 0700 4C0F      		add r20,r28
 1033 0702 5D1F      		adc r21,r29
 1034 0704 00C0      		rjmp .L115
 1035               	.L109:
 1036 0706 8F32      		cpi r24,lo8(47)
 1037 0708 01F4      		brne .L99
 1038 070a 8083      		st Z,r24
 1039               	.L101:
 1040 070c 0F5F      		subi r16,lo8(-(1))
 1041 070e 1F4F      		sbci r17,hi8(-(1))
 1042 0710 E801      		movw r28,r16
 1043 0712 8881      		ld r24,Y
 1044 0714 8F32      		cpi r24,lo8(47)
 1045 0716 01F0      		breq .L101
 1046 0718 3196      		adiw r30,1
 1047               	.L99:
 1048 071a D801      		movw r26,r16
 1049 071c 8C91      		ld r24,X
 1050 071e 8E32      		cpi r24,lo8(46)
 1051 0720 01F4      		brne .L113
 1052 0722 1196      		adiw r26,1
 1053 0724 E801      		movw r28,r16
 1054 0726 8981      		ldd r24,Y+1
 1055 0728 8F32      		cpi r24,lo8(47)
 1056 072a 01F4      		brne .L103
 1057 072c 8D01      		movw r16,r26
 1058 072e 0F5F      		subi r16,lo8(-(1))
 1059 0730 1F4F      		sbci r17,hi8(-(1))
 1060 0732 00C0      		rjmp .L115
 1061               	.L103:
 1062 0734 8823      		tst r24
 1063 0736 01F0      		breq .L97
 1064 0738 8E32      		cpi r24,lo8(46)
 1065 073a 01F4      		brne .L113
 1066 073c 9D01      		movw r18,r26
 1067 073e 2F5F      		subi r18,lo8(-(1))
 1068 0740 3F4F      		sbci r19,hi8(-(1))
 1069 0742 1196      		adiw r26,1
 1070 0744 8C91      		ld r24,X
 1071 0746 8F32      		cpi r24,lo8(47)
 1072 0748 01F0      		breq .L104
 1073 074a 8823      		tst r24
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 20


 1074 074c 01F4      		brne .L113
 1075               	.L104:
 1076 074e E417      		cp r30,r20
 1077 0750 F507      		cpc r31,r21
 1078 0752 01F0      		breq .L105
 1079 0754 3197      		sbiw r30,1
 1080 0756 00C0      		rjmp .L106
 1081               	.L107:
 1082 0758 8291      		ld r24,-Z
 1083 075a 8F32      		cpi r24,lo8(47)
 1084 075c 01F4      		brne .L106
 1085 075e 8901      		movw r16,r18
 1086 0760 00C0      		rjmp .L115
 1087               	.L106:
 1088 0762 E417      		cp r30,r20
 1089 0764 F507      		cpc r31,r21
 1090 0766 01F4      		brne .L107
 1091 0768 00C0      		rjmp .L105
 1092               	.L108:
 1093 076a 8193      		st Z+,r24
 1094 076c 0F5F      		subi r16,lo8(-(1))
 1095 076e 1F4F      		sbci r17,hi8(-(1))
 1096               	.L113:
 1097 0770 D801      		movw r26,r16
 1098 0772 8C91      		ld r24,X
 1099 0774 8823      		tst r24
 1100 0776 01F0      		breq .L115
 1101 0778 8F32      		cpi r24,lo8(47)
 1102 077a 01F4      		brne .L108
 1103 077c 00C0      		rjmp .L115
 1104               	.L105:
 1105 077e 8901      		movw r16,r18
 1106 0780 FA01      		movw r30,r20
 1107               	.L115:
 1108 0782 E801      		movw r28,r16
 1109 0784 8881      		ld r24,Y
 1110 0786 8823      		tst r24
 1111 0788 01F0      		breq .+2
 1112 078a 00C0      		rjmp .L109
 1113               	.L97:
 1114 078c 1082      		st Z,__zero_reg__
 1115               	.L90:
 1116 078e C501      		movw r24,r10
 1117               	/* epilogue start */
 1118 0790 DF91      		pop r29
 1119 0792 CF91      		pop r28
 1120 0794 1F91      		pop r17
 1121 0796 0F91      		pop r16
 1122 0798 FF90      		pop r15
 1123 079a EF90      		pop r14
 1124 079c DF90      		pop r13
 1125 079e CF90      		pop r12
 1126 07a0 BF90      		pop r11
 1127 07a2 AF90      		pop r10
 1128 07a4 9F90      		pop r9
 1129 07a6 8F90      		pop r8
 1130 07a8 7F90      		pop r7
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 21


 1131 07aa 6F90      		pop r6
 1132 07ac 0895      		ret
 1133               		.size	CreateFullPathName, .-CreateFullPathName
 1134               		.data
 1135               	.LC5:
 1136 0048 504E 5554 		.string	"PNUT:"
 1136      3A00 
 1137               		.text
 1138               	.global	NutRegisterFtpRoot
 1139               		.type	NutRegisterFtpRoot, @function
 1140               	NutRegisterFtpRoot:
 1141 07ae 0F93      		push r16
 1142 07b0 1F93      		push r17
 1143 07b2 CF93      		push r28
 1144 07b4 DF93      		push r29
 1145               	/* prologue: function */
 1146               	/* frame size = 0 */
 1147 07b6 8C01      		movw r16,r24
 1148 07b8 0097      		sbiw r24,0
 1149 07ba 01F0      		breq .L117
 1150 07bc FC01      		movw r30,r24
 1151 07be 8081      		ld r24,Z
 1152 07c0 8823      		tst r24
 1153 07c2 01F4      		brne .L118
 1154               	.L117:
 1155 07c4 8091 0000 		lds r24,ftp_root
 1156 07c8 9091 0000 		lds r25,(ftp_root)+1
 1157 07cc 0097      		sbiw r24,0
 1158 07ce 01F0      		breq .L119
 1159 07d0 0E94 0000 		call free
 1160               	.L119:
 1161 07d4 86E0      		ldi r24,lo8(6)
 1162 07d6 90E0      		ldi r25,hi8(6)
 1163 07d8 0E94 0000 		call malloc
 1164 07dc 9093 0000 		sts (ftp_root)+1,r25
 1165 07e0 8093 0000 		sts ftp_root,r24
 1166 07e4 0097      		sbiw r24,0
 1167 07e6 01F4      		brne .+2
 1168 07e8 00C0      		rjmp .L120
 1169 07ea 60E0      		ldi r22,lo8(.LC5)
 1170 07ec 70E0      		ldi r23,hi8(.LC5)
 1171 07ee 0E94 0000 		call strcpy
 1172 07f2 00C0      		rjmp .L127
 1173               	.L118:
 1174 07f4 6AE3      		ldi r22,lo8(58)
 1175 07f6 70E0      		ldi r23,hi8(58)
 1176 07f8 C801      		movw r24,r16
 1177 07fa 0E94 0000 		call strchr
 1178 07fe DC01      		movw r26,r24
 1179 0800 E801      		movw r28,r16
 1180 0802 0990      		ld __tmp_reg__,Y+
 1181 0804 0020      		tst __tmp_reg__
 1182 0806 01F4      		brne .-6
 1183 0808 2197      		sbiw r28,1
 1184 080a C01B      		sub r28,r16
 1185 080c D10B      		sbc r29,r17
 1186 080e C230      		cpi r28,2
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 22


 1187 0810 D105      		cpc r29,__zero_reg__
 1188 0812 04F0      		brlt .L120
 1189 0814 0097      		sbiw r24,0
 1190 0816 01F0      		breq .L120
 1191 0818 1196      		adiw r26,1
 1192 081a 8C91      		ld r24,X
 1193 081c 8823      		tst r24
 1194 081e 01F0      		breq .L122
 1195 0820 8F32      		cpi r24,lo8(47)
 1196 0822 01F4      		brne .L120
 1197               	.L122:
 1198 0824 CE01      		movw r24,r28
 1199 0826 0196      		adiw r24,1
 1200 0828 0E94 0000 		call malloc
 1201 082c EC01      		movw r28,r24
 1202 082e 0097      		sbiw r24,0
 1203 0830 01F0      		breq .L120
 1204 0832 B801      		movw r22,r16
 1205 0834 0E94 0000 		call strcpy
 1206 0838 8091 0000 		lds r24,ftp_root
 1207 083c 9091 0000 		lds r25,(ftp_root)+1
 1208 0840 0097      		sbiw r24,0
 1209 0842 01F0      		breq .L123
 1210 0844 0E94 0000 		call free
 1211               	.L123:
 1212 0848 D093 0000 		sts (ftp_root)+1,r29
 1213 084c C093 0000 		sts ftp_root,r28
 1214 0850 DE01      		movw r26,r28
 1215 0852 0D90      		ld __tmp_reg__,X+
 1216 0854 0020      		tst __tmp_reg__
 1217 0856 01F4      		brne .-6
 1218 0858 AC1B      		sub r26,r28
 1219 085a BD0B      		sbc r27,r29
 1220 085c 1297      		sbiw r26,2
 1221 085e AC0F      		add r26,r28
 1222 0860 BD1F      		adc r27,r29
 1223 0862 8C91      		ld r24,X
 1224 0864 8F32      		cpi r24,lo8(47)
 1225 0866 01F4      		brne .L127
 1226               	.L124:
 1227 0868 1C92      		st X,__zero_reg__
 1228               	.L127:
 1229 086a 20E0      		ldi r18,lo8(0)
 1230 086c 30E0      		ldi r19,hi8(0)
 1231 086e 00C0      		rjmp .L121
 1232               	.L120:
 1233 0870 2FEF      		ldi r18,lo8(-1)
 1234 0872 3FEF      		ldi r19,hi8(-1)
 1235               	.L121:
 1236 0874 C901      		movw r24,r18
 1237               	/* epilogue start */
 1238 0876 DF91      		pop r29
 1239 0878 CF91      		pop r28
 1240 087a 1F91      		pop r17
 1241 087c 0F91      		pop r16
 1242 087e 0895      		ret
 1243               		.size	NutRegisterFtpRoot, .-NutRegisterFtpRoot
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 23


 1244               	.global	NutFtpDataConnect
 1245               		.type	NutFtpDataConnect, @function
 1246               	NutFtpDataConnect:
 1247 0880 0F93      		push r16
 1248 0882 1F93      		push r17
 1249 0884 CF93      		push r28
 1250 0886 DF93      		push r29
 1251               	/* prologue: function */
 1252               	/* frame size = 0 */
 1253 0888 8C01      		movw r16,r24
 1254 088a 0E94 0000 		call NutTcpCreateSocket
 1255 088e EC01      		movw r28,r24
 1256 0890 0097      		sbiw r24,0
 1257 0892 01F0      		breq .L129
 1258 0894 F801      		movw r30,r16
 1259 0896 8485      		ldd r24,Z+12
 1260 0898 9585      		ldd r25,Z+13
 1261 089a 892B      		or r24,r25
 1262 089c 01F0      		breq .L130
 1263 089e A801      		movw r20,r16
 1264 08a0 445F      		subi r20,lo8(-(12))
 1265 08a2 5F4F      		sbci r21,hi8(-(12))
 1266 08a4 22E0      		ldi r18,lo8(2)
 1267 08a6 30E0      		ldi r19,hi8(2)
 1268 08a8 62E0      		ldi r22,lo8(2)
 1269 08aa 70E0      		ldi r23,hi8(2)
 1270 08ac CE01      		movw r24,r28
 1271 08ae 0E94 0000 		call NutTcpSetSockOpt
 1272               	.L130:
 1273 08b2 F801      		movw r30,r16
 1274 08b4 8089      		ldd r24,Z+16
 1275 08b6 2285      		ldd r18,Z+10
 1276 08b8 3385      		ldd r19,Z+11
 1277 08ba 8823      		tst r24
 1278 08bc 01F0      		breq .L131
 1279 08be B901      		movw r22,r18
 1280 08c0 CE01      		movw r24,r28
 1281 08c2 0E94 0000 		call NutTcpAccept
 1282 08c6 00C0      		rjmp .L132
 1283               	.L131:
 1284 08c8 F801      		movw r30,r16
 1285 08ca 4681      		ldd r20,Z+6
 1286 08cc 5781      		ldd r21,Z+7
 1287 08ce 6085      		ldd r22,Z+8
 1288 08d0 7185      		ldd r23,Z+9
 1289 08d2 CE01      		movw r24,r28
 1290 08d4 0E94 0000 		call NutTcpConnect
 1291               	.L132:
 1292 08d8 892B      		or r24,r25
 1293 08da 01F0      		breq .L129
 1294 08dc CE01      		movw r24,r28
 1295 08de 0E94 0000 		call NutTcpCloseSocket
 1296 08e2 C0E0      		ldi r28,lo8(0)
 1297 08e4 D0E0      		ldi r29,hi8(0)
 1298               	.L129:
 1299 08e6 CE01      		movw r24,r28
 1300               	/* epilogue start */
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 24


 1301 08e8 DF91      		pop r29
 1302 08ea CF91      		pop r28
 1303 08ec 1F91      		pop r17
 1304 08ee 0F91      		pop r16
 1305 08f0 0895      		ret
 1306               		.size	NutFtpDataConnect, .-NutFtpDataConnect
 1307               	.global	NutFtpSendMode
 1308               		.type	NutFtpSendMode, @function
 1309               	NutFtpSendMode:
 1310 08f2 0F93      		push r16
 1311 08f4 1F93      		push r17
 1312 08f6 CF93      		push r28
 1313 08f8 DF93      		push r29
 1314               	/* prologue: function */
 1315               	/* frame size = 0 */
 1316 08fa EC01      		movw r28,r24
 1317 08fc 8B01      		movw r16,r22
 1318 08fe 6A81      		ldd r22,Y+2
 1319 0900 7B81      		ldd r23,Y+3
 1320 0902 80E0      		ldi r24,lo8(intro_P.2357)
 1321 0904 90E0      		ldi r25,hi8(intro_P.2357)
 1322 0906 0E94 0000 		call fputs_P
 1323 090a 6A81      		ldd r22,Y+2
 1324 090c 7B81      		ldd r23,Y+3
 1325 090e 012B      		or r16,r17
 1326 0910 01F4      		brne .L135
 1327 0912 80E0      		ldi r24,lo8(amode_P.2358)
 1328 0914 90E0      		ldi r25,hi8(amode_P.2358)
 1329 0916 00C0      		rjmp .L136
 1330               	.L135:
 1331 0918 80E0      		ldi r24,lo8(bmode_P.2359)
 1332 091a 90E0      		ldi r25,hi8(bmode_P.2359)
 1333               	.L136:
 1334 091c 0E94 0000 		call fputs_P
 1335 0920 8A81      		ldd r24,Y+2
 1336 0922 9B81      		ldd r25,Y+3
 1337 0924 0E94 0000 		call fflush
 1338 0928 80E0      		ldi r24,lo8(0)
 1339 092a 90E0      		ldi r25,hi8(0)
 1340               	/* epilogue start */
 1341 092c DF91      		pop r29
 1342 092e CF91      		pop r28
 1343 0930 1F91      		pop r17
 1344 0932 0F91      		pop r16
 1345 0934 0895      		ret
 1346               		.size	NutFtpSendMode, .-NutFtpSendMode
 1347               		.data
 1348               	.LC6:
 1349 004e 2573 2F25 		.string	"%s/%s"
 1349      7300 
 1350               	.LC7:
 1351 0054 7277 2D72 		.string	"rw-rw-rw-  1 0 0 %6lu "
 1351      772D 7277 
 1351      2D20 2031 
 1351      2030 2030 
 1351      2025 366C 
 1352               	.LC8:
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 25


 1353 006b 252E 3373 		.string	"%.3s %u "
 1353      2025 7520 
 1353      00
 1354               	.LC9:
 1355 0074 2530 3275 		.string	"%02u:%02u "
 1355      3A25 3032 
 1355      7520 00
 1356               	.LC10:
 1357 007f 0D0A 00   		.string	"\r\n"
 1358               		.text
 1359               	.global	NutFtpTransferDirectory
 1360               		.type	NutFtpTransferDirectory, @function
 1361               	NutFtpTransferDirectory:
 1362 0936 2F92      		push r2
 1363 0938 3F92      		push r3
 1364 093a 4F92      		push r4
 1365 093c 5F92      		push r5
 1366 093e 6F92      		push r6
 1367 0940 7F92      		push r7
 1368 0942 8F92      		push r8
 1369 0944 9F92      		push r9
 1370 0946 AF92      		push r10
 1371 0948 BF92      		push r11
 1372 094a CF92      		push r12
 1373 094c DF92      		push r13
 1374 094e EF92      		push r14
 1375 0950 FF92      		push r15
 1376 0952 0F93      		push r16
 1377 0954 1F93      		push r17
 1378 0956 DF93      		push r29
 1379 0958 CF93      		push r28
 1380 095a CDB7      		in r28,__SP_L__
 1381 095c DEB7      		in r29,__SP_H__
 1382 095e 2F97      		sbiw r28,15
 1383 0960 0FB6      		in __tmp_reg__,__SREG__
 1384 0962 F894      		cli
 1385 0964 DEBF      		out __SP_H__,r29
 1386 0966 0FBE      		out __SREG__,__tmp_reg__
 1387 0968 CDBF      		out __SP_L__,r28
 1388               	/* prologue: function */
 1389               	/* frame size = 15 */
 1390 096a 3C01      		movw r6,r24
 1391 096c 4B01      		movw r8,r22
 1392 096e CB01      		movw r24,r22
 1393 0970 0E94 0000 		call opendir
 1394 0974 1C01      		movw r2,r24
 1395 0976 0097      		sbiw r24,0
 1396 0978 01F4      		brne .L139
 1397 097a 06E2      		ldi r16,lo8(550)
 1398 097c 12E0      		ldi r17,hi8(550)
 1399 097e 00C0      		rjmp .L140
 1400               	.L139:
 1401 0980 60E0      		ldi r22,lo8(0)
 1402 0982 70E0      		ldi r23,hi8(0)
 1403 0984 C301      		movw r24,r6
 1404 0986 0E94 0000 		call NutFtpSendMode
 1405 098a C301      		movw r24,r6
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 26


 1406 098c 0E94 0000 		call NutFtpDataConnect
 1407 0990 2C01      		movw r4,r24
 1408 0992 0097      		sbiw r24,0
 1409 0994 01F4      		brne .L141
 1410 0996 06E2      		ldi r16,lo8(550)
 1411 0998 12E0      		ldi r17,hi8(550)
 1412 099a 00C0      		rjmp .L142
 1413               	.L141:
 1414 099c 60E0      		ldi r22,lo8(.LC4)
 1415 099e 70E0      		ldi r23,hi8(.LC4)
 1416 09a0 0E94 0000 		call _fdopen
 1417 09a4 6C01      		movw r12,r24
 1418 09a6 0097      		sbiw r24,0
 1419 09a8 01F4      		brne .L143
 1420 09aa 06E2      		ldi r16,lo8(550)
 1421 09ac 12E0      		ldi r17,hi8(550)
 1422 09ae 00C0      		rjmp .L144
 1423               	.L143:
 1424 09b0 2091 0000 		lds r18,mon_name
 1425 09b4 3091 0000 		lds r19,(mon_name)+1
 1426 09b8 3F87      		std Y+15,r19
 1427 09ba 2E87      		std Y+14,r18
 1428 09bc 00C0      		rjmp .L155
 1429               	.L149:
 1430 09be D901      		movw r26,r18
 1431 09c0 1896      		adiw r26,8
 1432 09c2 8C91      		ld r24,X
 1433 09c4 8E32      		cpi r24,lo8(46)
 1434 09c6 01F4      		brne .+2
 1435 09c8 00C0      		rjmp .L155
 1436 09ca D401      		movw r26,r8
 1437 09cc 0D90      		ld __tmp_reg__,X+
 1438 09ce 0020      		tst __tmp_reg__
 1439 09d0 01F4      		brne .-6
 1440 09d2 CD01      		movw r24,r26
 1441 09d4 0197      		sbiw r24,1
 1442 09d6 8819      		sub r24,r8
 1443 09d8 9909      		sbc r25,r9
 1444 09da 58E0      		ldi r21,lo8(8)
 1445 09dc A52E      		mov r10,r21
 1446 09de B12C      		mov r11,__zero_reg__
 1447 09e0 A20E      		add r10,r18
 1448 09e2 B31E      		adc r11,r19
 1449 09e4 F501      		movw r30,r10
 1450 09e6 0190      		ld __tmp_reg__,Z+
 1451 09e8 0020      		tst __tmp_reg__
 1452 09ea 01F4      		brne .-6
 1453 09ec 3197      		sbiw r30,1
 1454 09ee EA19      		sub r30,r10
 1455 09f0 FB09      		sbc r31,r11
 1456 09f2 8E0F      		add r24,r30
 1457 09f4 9F1F      		adc r25,r31
 1458 09f6 0296      		adiw r24,2
 1459 09f8 0E94 0000 		call malloc
 1460 09fc 7C01      		movw r14,r24
 1461 09fe 0097      		sbiw r24,0
 1462 0a00 01F4      		brne .+2
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 27


 1463 0a02 00C0      		rjmp .L155
 1464 0a04 BF92      		push r11
 1465 0a06 AF92      		push r10
 1466 0a08 9F92      		push r9
 1467 0a0a 8F92      		push r8
 1468 0a0c E0E0      		ldi r30,lo8(.LC6)
 1469 0a0e F0E0      		ldi r31,hi8(.LC6)
 1470 0a10 FF93      		push r31
 1471 0a12 EF93      		push r30
 1472 0a14 9F93      		push r25
 1473 0a16 8F93      		push r24
 1474 0a18 0E94 0000 		call sprintf
 1475 0a1c BE01      		movw r22,r28
 1476 0a1e 6F5F      		subi r22,lo8(-(1))
 1477 0a20 7F4F      		sbci r23,hi8(-(1))
 1478 0a22 C701      		movw r24,r14
 1479 0a24 0E94 0000 		call stat
 1480 0a28 2DB7      		in r18,__SP_L__
 1481 0a2a 3EB7      		in r19,__SP_H__
 1482 0a2c 285F      		subi r18,lo8(-(8))
 1483 0a2e 3F4F      		sbci r19,hi8(-(8))
 1484 0a30 0FB6      		in __tmp_reg__,__SREG__
 1485 0a32 F894      		cli
 1486 0a34 3EBF      		out __SP_H__,r19
 1487 0a36 0FBE      		out __SREG__,__tmp_reg__
 1488 0a38 2DBF      		out __SP_L__,r18
 1489 0a3a 892B      		or r24,r25
 1490 0a3c 01F0      		breq .+2
 1491 0a3e 00C0      		rjmp .L146
 1492 0a40 8B81      		ldd r24,Y+3
 1493 0a42 8823      		tst r24
 1494 0a44 01F0      		breq .L147
 1495 0a46 B601      		movw r22,r12
 1496 0a48 84E6      		ldi r24,lo8(100)
 1497 0a4a 90E0      		ldi r25,hi8(100)
 1498 0a4c 0E94 0000 		call fputc
 1499 0a50 80E0      		ldi r24,lo8(0)
 1500 0a52 90E0      		ldi r25,hi8(0)
 1501 0a54 A0E0      		ldi r26,hlo8(0)
 1502 0a56 B0E0      		ldi r27,hhi8(0)
 1503 0a58 00C0      		rjmp .L148
 1504               	.L147:
 1505 0a5a B601      		movw r22,r12
 1506 0a5c 8DE2      		ldi r24,lo8(45)
 1507 0a5e 90E0      		ldi r25,hi8(45)
 1508 0a60 0E94 0000 		call fputc
 1509 0a64 8E81      		ldd r24,Y+6
 1510 0a66 9F81      		ldd r25,Y+7
 1511 0a68 A885      		ldd r26,Y+8
 1512 0a6a B985      		ldd r27,Y+9
 1513               	.L148:
 1514 0a6c BF93      		push r27
 1515 0a6e AF93      		push r26
 1516 0a70 9F93      		push r25
 1517 0a72 8F93      		push r24
 1518 0a74 80E0      		ldi r24,lo8(.LC7)
 1519 0a76 90E0      		ldi r25,hi8(.LC7)
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 28


 1520 0a78 9F93      		push r25
 1521 0a7a 8F93      		push r24
 1522 0a7c DF92      		push r13
 1523 0a7e CF92      		push r12
 1524 0a80 0E94 0000 		call fprintf
 1525 0a84 CE01      		movw r24,r28
 1526 0a86 0A96      		adiw r24,10
 1527 0a88 0E94 0000 		call gmtime
 1528 0a8c 8C01      		movw r16,r24
 1529 0a8e DC01      		movw r26,r24
 1530 0a90 1696      		adiw r26,6
 1531 0a92 8D91      		ld r24,X+
 1532 0a94 9C91      		ld r25,X
 1533 0a96 1797      		sbiw r26,6+1
 1534 0a98 9F93      		push r25
 1535 0a9a 8F93      		push r24
 1536 0a9c 1896      		adiw r26,8
 1537 0a9e 2D91      		ld r18,X+
 1538 0aa0 3C91      		ld r19,X
 1539 0aa2 1997      		sbiw r26,8+1
 1540 0aa4 C901      		movw r24,r18
 1541 0aa6 880F      		lsl r24
 1542 0aa8 991F      		rol r25
 1543 0aaa 820F      		add r24,r18
 1544 0aac 931F      		adc r25,r19
 1545 0aae EE85      		ldd r30,Y+14
 1546 0ab0 FF85      		ldd r31,Y+15
 1547 0ab2 8E0F      		add r24,r30
 1548 0ab4 9F1F      		adc r25,r31
 1549 0ab6 9F93      		push r25
 1550 0ab8 8F93      		push r24
 1551 0aba 20E0      		ldi r18,lo8(.LC8)
 1552 0abc 30E0      		ldi r19,hi8(.LC8)
 1553 0abe 3F93      		push r19
 1554 0ac0 2F93      		push r18
 1555 0ac2 DF92      		push r13
 1556 0ac4 CF92      		push r12
 1557 0ac6 0E94 0000 		call fprintf
 1558 0aca D801      		movw r26,r16
 1559 0acc 1296      		adiw r26,2
 1560 0ace 8D91      		ld r24,X+
 1561 0ad0 9C91      		ld r25,X
 1562 0ad2 1397      		sbiw r26,2+1
 1563 0ad4 9F93      		push r25
 1564 0ad6 8F93      		push r24
 1565 0ad8 1496      		adiw r26,4
 1566 0ada 8D91      		ld r24,X+
 1567 0adc 9C91      		ld r25,X
 1568 0ade 1597      		sbiw r26,4+1
 1569 0ae0 9F93      		push r25
 1570 0ae2 8F93      		push r24
 1571 0ae4 E0E0      		ldi r30,lo8(.LC9)
 1572 0ae6 F0E0      		ldi r31,hi8(.LC9)
 1573 0ae8 FF93      		push r31
 1574 0aea EF93      		push r30
 1575 0aec DF92      		push r13
 1576 0aee CF92      		push r12
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 29


 1577 0af0 0E94 0000 		call fprintf
 1578 0af4 B601      		movw r22,r12
 1579 0af6 C501      		movw r24,r10
 1580 0af8 0E94 0000 		call fputs
 1581 0afc B601      		movw r22,r12
 1582 0afe 80E0      		ldi r24,lo8(.LC10)
 1583 0b00 90E0      		ldi r25,hi8(.LC10)
 1584 0b02 0E94 0000 		call fputs
 1585 0b06 2DB7      		in r18,__SP_L__
 1586 0b08 3EB7      		in r19,__SP_H__
 1587 0b0a 285E      		subi r18,lo8(-(24))
 1588 0b0c 3F4F      		sbci r19,hi8(-(24))
 1589 0b0e 0FB6      		in __tmp_reg__,__SREG__
 1590 0b10 F894      		cli
 1591 0b12 3EBF      		out __SP_H__,r19
 1592 0b14 0FBE      		out __SREG__,__tmp_reg__
 1593 0b16 2DBF      		out __SP_L__,r18
 1594               	.L146:
 1595 0b18 C701      		movw r24,r14
 1596 0b1a 0E94 0000 		call free
 1597               	.L155:
 1598 0b1e C101      		movw r24,r2
 1599 0b20 0E94 0000 		call readdir
 1600 0b24 9C01      		movw r18,r24
 1601 0b26 0097      		sbiw r24,0
 1602 0b28 01F0      		breq .+2
 1603 0b2a 00C0      		rjmp .L149
 1604 0b2c C601      		movw r24,r12
 1605 0b2e 0E94 0000 		call fclose
 1606 0b32 00E0      		ldi r16,lo8(0)
 1607 0b34 10E0      		ldi r17,hi8(0)
 1608               	.L144:
 1609 0b36 C201      		movw r24,r4
 1610 0b38 0E94 0000 		call NutTcpCloseSocket
 1611               	.L142:
 1612 0b3c C101      		movw r24,r2
 1613 0b3e 0E94 0000 		call closedir
 1614 0b42 0115      		cp r16,__zero_reg__
 1615 0b44 1105      		cpc r17,__zero_reg__
 1616 0b46 01F0      		breq .L150
 1617               	.L140:
 1618 0b48 B801      		movw r22,r16
 1619 0b4a C301      		movw r24,r6
 1620 0b4c 0E94 0000 		call NutFtpRespondBad
 1621 0b50 00C0      		rjmp .L151
 1622               	.L150:
 1623 0b52 62EE      		ldi r22,lo8(226)
 1624 0b54 70E0      		ldi r23,hi8(226)
 1625 0b56 C301      		movw r24,r6
 1626 0b58 0E94 0000 		call NutFtpRespondOk
 1627               	.L151:
 1628               	/* epilogue start */
 1629 0b5c 2F96      		adiw r28,15
 1630 0b5e 0FB6      		in __tmp_reg__,__SREG__
 1631 0b60 F894      		cli
 1632 0b62 DEBF      		out __SP_H__,r29
 1633 0b64 0FBE      		out __SREG__,__tmp_reg__
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 30


 1634 0b66 CDBF      		out __SP_L__,r28
 1635 0b68 CF91      		pop r28
 1636 0b6a DF91      		pop r29
 1637 0b6c 1F91      		pop r17
 1638 0b6e 0F91      		pop r16
 1639 0b70 FF90      		pop r15
 1640 0b72 EF90      		pop r14
 1641 0b74 DF90      		pop r13
 1642 0b76 CF90      		pop r12
 1643 0b78 BF90      		pop r11
 1644 0b7a AF90      		pop r10
 1645 0b7c 9F90      		pop r9
 1646 0b7e 8F90      		pop r8
 1647 0b80 7F90      		pop r7
 1648 0b82 6F90      		pop r6
 1649 0b84 5F90      		pop r5
 1650 0b86 4F90      		pop r4
 1651 0b88 3F90      		pop r3
 1652 0b8a 2F90      		pop r2
 1653 0b8c 0895      		ret
 1654               		.size	NutFtpTransferDirectory, .-NutFtpTransferDirectory
 1655               	.global	NutFtpTransferFile
 1656               		.type	NutFtpTransferFile, @function
 1657               	NutFtpTransferFile:
 1658 0b8e 4F92      		push r4
 1659 0b90 5F92      		push r5
 1660 0b92 6F92      		push r6
 1661 0b94 7F92      		push r7
 1662 0b96 8F92      		push r8
 1663 0b98 9F92      		push r9
 1664 0b9a AF92      		push r10
 1665 0b9c BF92      		push r11
 1666 0b9e CF92      		push r12
 1667 0ba0 DF92      		push r13
 1668 0ba2 EF92      		push r14
 1669 0ba4 FF92      		push r15
 1670 0ba6 0F93      		push r16
 1671 0ba8 1F93      		push r17
 1672 0baa CF93      		push r28
 1673 0bac DF93      		push r29
 1674               	/* prologue: function */
 1675               	/* frame size = 0 */
 1676 0bae 4C01      		movw r8,r24
 1677 0bb0 2B01      		movw r4,r22
 1678 0bb2 3A01      		movw r6,r20
 1679 0bb4 4115      		cp r20,__zero_reg__
 1680 0bb6 5105      		cpc r21,__zero_reg__
 1681 0bb8 01F0      		breq .L157
 1682 0bba 60E0      		ldi r22,lo8(-32768)
 1683 0bbc 70E8      		ldi r23,hi8(-32768)
 1684 0bbe 00C0      		rjmp .L180
 1685               	.L157:
 1686 0bc0 60E0      		ldi r22,lo8(768)
 1687 0bc2 73E0      		ldi r23,hi8(768)
 1688               	.L180:
 1689 0bc4 C201      		movw r24,r4
 1690 0bc6 0E94 0000 		call _open
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 31


 1691 0bca 5C01      		movw r10,r24
 1692 0bcc 8FEF      		ldi r24,lo8(-1)
 1693 0bce A816      		cp r10,r24
 1694 0bd0 8FEF      		ldi r24,hi8(-1)
 1695 0bd2 B806      		cpc r11,r24
 1696 0bd4 01F4      		brne .L159
 1697 0bd6 C6E2      		ldi r28,lo8(550)
 1698 0bd8 D2E0      		ldi r29,hi8(550)
 1699 0bda 00C0      		rjmp .L160
 1700               	.L159:
 1701 0bdc F401      		movw r30,r8
 1702 0bde 6785      		ldd r22,Z+15
 1703 0be0 70E0      		ldi r23,lo8(0)
 1704 0be2 C401      		movw r24,r8
 1705 0be4 0E94 0000 		call NutFtpSendMode
 1706 0be8 C401      		movw r24,r8
 1707 0bea 0E94 0000 		call NutFtpDataConnect
 1708 0bee 7C01      		movw r14,r24
 1709 0bf0 0097      		sbiw r24,0
 1710 0bf2 01F4      		brne .L161
 1711 0bf4 C6E2      		ldi r28,lo8(550)
 1712 0bf6 D2E0      		ldi r29,hi8(550)
 1713 0bf8 00C0      		rjmp .L162
 1714               	.L161:
 1715 0bfa 82E5      		ldi r24,lo8(82)
 1716 0bfc 90E0      		ldi r25,hi8(82)
 1717 0bfe E80E      		add r14,r24
 1718 0c00 F91E      		adc r15,r25
 1719 0c02 F701      		movw r30,r14
 1720 0c04 C080      		ld r12,Z
 1721 0c06 D180      		ldd r13,Z+1
 1722 0c08 8EEA      		ldi r24,lo8(-82)
 1723 0c0a 9FEF      		ldi r25,hi8(-82)
 1724 0c0c E80E      		add r14,r24
 1725 0c0e F91E      		adc r15,r25
 1726 0c10 9FEF      		ldi r25,lo8(255)
 1727 0c12 C916      		cp r12,r25
 1728 0c14 D104      		cpc r13,__zero_reg__
 1729 0c16 01F0      		breq .+2
 1730 0c18 00F4      		brsh .L163
 1731 0c1a C12C      		mov r12,__zero_reg__
 1732 0c1c 61E0      		ldi r22,hi8(256)
 1733 0c1e D62E      		mov r13,r22
 1734               	.L163:
 1735 0c20 C601      		movw r24,r12
 1736 0c22 0E94 0000 		call malloc
 1737 0c26 8C01      		movw r16,r24
 1738 0c28 0097      		sbiw r24,0
 1739 0c2a 01F4      		brne .L164
 1740 0c2c C6E2      		ldi r28,lo8(550)
 1741 0c2e D2E0      		ldi r29,hi8(550)
 1742 0c30 00C0      		rjmp .L165
 1743               	.L164:
 1744 0c32 6114      		cp r6,__zero_reg__
 1745 0c34 7104      		cpc r7,__zero_reg__
 1746 0c36 01F4      		brne .L176
 1747 0c38 00C0      		rjmp .L177
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 32


 1748               	.L169:
 1749 0c3a AE01      		movw r20,r28
 1750 0c3c B801      		movw r22,r16
 1751 0c3e C701      		movw r24,r14
 1752 0c40 0E94 0000 		call NutTcpSend
 1753 0c44 8C17      		cp r24,r28
 1754 0c46 9D07      		cpc r25,r29
 1755 0c48 01F0      		breq .L176
 1756 0c4a C7E2      		ldi r28,lo8(551)
 1757 0c4c D2E0      		ldi r29,hi8(551)
 1758 0c4e 00C0      		rjmp .L168
 1759               	.L176:
 1760 0c50 A601      		movw r20,r12
 1761 0c52 B801      		movw r22,r16
 1762 0c54 C501      		movw r24,r10
 1763 0c56 0E94 0000 		call _read
 1764 0c5a EC01      		movw r28,r24
 1765 0c5c 1816      		cp __zero_reg__,r24
 1766 0c5e 1906      		cpc __zero_reg__,r25
 1767 0c60 04F0      		brlt .L169
 1768 0c62 00C0      		rjmp .L170
 1769               	.L171:
 1770 0c64 AE01      		movw r20,r28
 1771 0c66 B801      		movw r22,r16
 1772 0c68 C501      		movw r24,r10
 1773 0c6a 0E94 0000 		call _write
 1774 0c6e 8C17      		cp r24,r28
 1775 0c70 9D07      		cpc r25,r29
 1776 0c72 01F0      		breq .L177
 1777 0c74 C8E2      		ldi r28,lo8(552)
 1778 0c76 D2E0      		ldi r29,hi8(552)
 1779 0c78 00C0      		rjmp .L168
 1780               	.L177:
 1781 0c7a A601      		movw r20,r12
 1782 0c7c B801      		movw r22,r16
 1783 0c7e C701      		movw r24,r14
 1784 0c80 0E94 0000 		call NutTcpReceive
 1785 0c84 EC01      		movw r28,r24
 1786 0c86 1816      		cp __zero_reg__,r24
 1787 0c88 1906      		cpc __zero_reg__,r25
 1788 0c8a 04F0      		brlt .L171
 1789               	.L170:
 1790 0c8c C0E0      		ldi r28,lo8(0)
 1791 0c8e D0E0      		ldi r29,hi8(0)
 1792               	.L168:
 1793 0c90 C801      		movw r24,r16
 1794 0c92 0E94 0000 		call free
 1795               	.L165:
 1796 0c96 C701      		movw r24,r14
 1797 0c98 0E94 0000 		call NutTcpCloseSocket
 1798               	.L162:
 1799 0c9c C501      		movw r24,r10
 1800 0c9e 0E94 0000 		call _close
 1801 0ca2 6728      		or r6,r7
 1802 0ca4 01F4      		brne .L172
 1803 0ca6 2097      		sbiw r28,0
 1804 0ca8 01F0      		breq .L173
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 33


 1805 0caa C201      		movw r24,r4
 1806 0cac 0E94 0000 		call unlink
 1807 0cb0 00C0      		rjmp .L160
 1808               	.L172:
 1809 0cb2 2097      		sbiw r28,0
 1810 0cb4 01F0      		breq .L173
 1811               	.L160:
 1812 0cb6 BE01      		movw r22,r28
 1813 0cb8 C401      		movw r24,r8
 1814 0cba 0E94 0000 		call NutFtpRespondBad
 1815 0cbe 00C0      		rjmp .L174
 1816               	.L173:
 1817 0cc0 62EE      		ldi r22,lo8(226)
 1818 0cc2 70E0      		ldi r23,hi8(226)
 1819 0cc4 C401      		movw r24,r8
 1820 0cc6 0E94 0000 		call NutFtpRespondOk
 1821               	.L174:
 1822               	/* epilogue start */
 1823 0cca DF91      		pop r29
 1824 0ccc CF91      		pop r28
 1825 0cce 1F91      		pop r17
 1826 0cd0 0F91      		pop r16
 1827 0cd2 FF90      		pop r15
 1828 0cd4 EF90      		pop r14
 1829 0cd6 DF90      		pop r13
 1830 0cd8 CF90      		pop r12
 1831 0cda BF90      		pop r11
 1832 0cdc AF90      		pop r10
 1833 0cde 9F90      		pop r9
 1834 0ce0 8F90      		pop r8
 1835 0ce2 7F90      		pop r7
 1836 0ce4 6F90      		pop r6
 1837 0ce6 5F90      		pop r5
 1838 0ce8 4F90      		pop r4
 1839 0cea 0895      		ret
 1840               		.size	NutFtpTransferFile, .-NutFtpTransferFile
 1841               	.global	NutFtpProcessRequest
 1842               		.type	NutFtpProcessRequest, @function
 1843               	NutFtpProcessRequest:
 1844 0cec EF92      		push r14
 1845 0cee FF92      		push r15
 1846 0cf0 0F93      		push r16
 1847 0cf2 1F93      		push r17
 1848 0cf4 CF93      		push r28
 1849 0cf6 DF93      		push r29
 1850               	/* prologue: function */
 1851               	/* frame size = 0 */
 1852 0cf8 EC01      		movw r28,r24
 1853 0cfa FB01      		movw r30,r22
 1854 0cfc 00C0      		rjmp .L182
 1855               	.L185:
 1856 0cfe 3196      		adiw r30,1
 1857               	.L182:
 1858 0d00 8081      		ld r24,Z
 1859 0d02 8823      		tst r24
 1860 0d04 01F4      		brne .L183
 1861               	.L186:
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 34


 1862 0d06 FE2E      		mov r15,r30
 1863 0d08 EF2E      		mov r14,r31
 1864 0d0a 00C0      		rjmp .L184
 1865               	.L183:
 1866 0d0c 8132      		cpi r24,lo8(33)
 1867 0d0e 04F0      		brlt .L185
 1868 0d10 00C0      		rjmp .L186
 1869               	.L188:
 1870 0d12 892F      		mov r24,r25
 1871 0d14 8156      		subi r24,lo8(-(-97))
 1872 0d16 8A31      		cpi r24,lo8(26)
 1873 0d18 00F4      		brsh .L187
 1874 0d1a 9052      		subi r25,lo8(-(-32))
 1875 0d1c 9083      		st Z,r25
 1876               	.L187:
 1877 0d1e 3196      		adiw r30,1
 1878               	.L184:
 1879 0d20 9081      		ld r25,Z
 1880 0d22 9132      		cpi r25,lo8(33)
 1881 0d24 04F4      		brge .L188
 1882 0d26 9923      		tst r25
 1883 0d28 01F0      		breq .L221
 1884 0d2a 1192      		st Z+,__zero_reg__
 1885 0d2c 00C0      		rjmp .L221
 1886               	.L192:
 1887 0d2e 3196      		adiw r30,1
 1888               	.L221:
 1889 0d30 8081      		ld r24,Z
 1890 0d32 8823      		tst r24
 1891 0d34 01F4      		brne .L190
 1892               	.L193:
 1893 0d36 1E2F      		mov r17,r30
 1894 0d38 0F2F      		mov r16,r31
 1895 0d3a 00C0      		rjmp .L191
 1896               	.L190:
 1897 0d3c 8132      		cpi r24,lo8(33)
 1898 0d3e 04F0      		brlt .L192
 1899 0d40 00C0      		rjmp .L193
 1900               	.L195:
 1901 0d42 3196      		adiw r30,1
 1902               	.L191:
 1903 0d44 8081      		ld r24,Z
 1904 0d46 8823      		tst r24
 1905 0d48 01F0      		breq .L194
 1906 0d4a 8D30      		cpi r24,lo8(13)
 1907 0d4c 01F0      		breq .L194
 1908 0d4e 8A30      		cpi r24,lo8(10)
 1909 0d50 01F4      		brne .L195
 1910               	.L194:
 1911 0d52 1082      		st Z,__zero_reg__
 1912 0d54 60E0      		ldi r22,lo8(cmd_quit_P)
 1913 0d56 70E0      		ldi r23,hi8(cmd_quit_P)
 1914 0d58 8F2D      		mov r24,r15
 1915 0d5a 9E2D      		mov r25,r14
 1916 0d5c 0E94 0000 		call strcmp_P
 1917 0d60 892B      		or r24,r25
 1918 0d62 01F4      		brne .L196
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 35


 1919 0d64 6DED      		ldi r22,lo8(221)
 1920 0d66 70E0      		ldi r23,hi8(221)
 1921 0d68 CE01      		movw r24,r28
 1922 0d6a 0E94 0000 		call NutFtpRespondOk
 1923 0d6e CFEF      		ldi r28,lo8(-1)
 1924 0d70 DFEF      		ldi r29,hi8(-1)
 1925 0d72 00C0      		rjmp .L197
 1926               	.L196:
 1927 0d74 60E0      		ldi r22,lo8(cmd_user_P)
 1928 0d76 70E0      		ldi r23,hi8(cmd_user_P)
 1929 0d78 8F2D      		mov r24,r15
 1930 0d7a 9E2D      		mov r25,r14
 1931 0d7c 0E94 0000 		call strcmp_P
 1932 0d80 892B      		or r24,r25
 1933 0d82 01F4      		brne .L198
 1934 0d84 612F      		mov r22,r17
 1935 0d86 702F      		mov r23,r16
 1936 0d88 CE01      		movw r24,r28
 1937 0d8a 0E94 0000 		call NutFtpProcessUser
 1938 0d8e 00C0      		rjmp .L222
 1939               	.L198:
 1940 0d90 60E0      		ldi r22,lo8(cmd_pass_P)
 1941 0d92 70E0      		ldi r23,hi8(cmd_pass_P)
 1942 0d94 8F2D      		mov r24,r15
 1943 0d96 9E2D      		mov r25,r14
 1944 0d98 0E94 0000 		call strcmp_P
 1945 0d9c 892B      		or r24,r25
 1946 0d9e 01F4      		brne .L199
 1947 0da0 612F      		mov r22,r17
 1948 0da2 702F      		mov r23,r16
 1949 0da4 CE01      		movw r24,r28
 1950 0da6 0E94 0000 		call NutFtpProcessPass
 1951 0daa 00C0      		rjmp .L222
 1952               	.L199:
 1953 0dac 60E0      		ldi r22,lo8(cmd_noop_P)
 1954 0dae 70E0      		ldi r23,hi8(cmd_noop_P)
 1955 0db0 8F2D      		mov r24,r15
 1956 0db2 9E2D      		mov r25,r14
 1957 0db4 0E94 0000 		call strcmp_P
 1958 0db8 892B      		or r24,r25
 1959 0dba 01F4      		brne .L200
 1960 0dbc 68EC      		ldi r22,lo8(200)
 1961 0dbe 70E0      		ldi r23,hi8(200)
 1962 0dc0 CE01      		movw r24,r28
 1963 0dc2 0E94 0000 		call NutFtpRespondOk
 1964 0dc6 00C0      		rjmp .L223
 1965               	.L200:
 1966 0dc8 8E85      		ldd r24,Y+14
 1967 0dca 8230      		cpi r24,lo8(2)
 1968 0dcc 00F4      		brsh .L201
 1969 0dce 62E1      		ldi r22,lo8(530)
 1970 0dd0 72E0      		ldi r23,hi8(530)
 1971 0dd2 00C0      		rjmp .L225
 1972               	.L201:
 1973 0dd4 60E0      		ldi r22,lo8(cmd_pasv_P)
 1974 0dd6 70E0      		ldi r23,hi8(cmd_pasv_P)
 1975 0dd8 8F2D      		mov r24,r15
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 36


 1976 0dda 9E2D      		mov r25,r14
 1977 0ddc 0E94 0000 		call strcmp_P
 1978 0de0 892B      		or r24,r25
 1979 0de2 01F4      		brne .L202
 1980 0de4 CE01      		movw r24,r28
 1981 0de6 0E94 0000 		call NutFtpProcessPassiv
 1982 0dea 00C0      		rjmp .L222
 1983               	.L202:
 1984 0dec 60E0      		ldi r22,lo8(cmd_port_P)
 1985 0dee 70E0      		ldi r23,hi8(cmd_port_P)
 1986 0df0 8F2D      		mov r24,r15
 1987 0df2 9E2D      		mov r25,r14
 1988 0df4 0E94 0000 		call strcmp_P
 1989 0df8 892B      		or r24,r25
 1990 0dfa 01F4      		brne .L203
 1991 0dfc 612F      		mov r22,r17
 1992 0dfe 702F      		mov r23,r16
 1993 0e00 CE01      		movw r24,r28
 1994 0e02 0E94 0000 		call NutFtpProcessPort
 1995 0e06 00C0      		rjmp .L222
 1996               	.L203:
 1997 0e08 60E0      		ldi r22,lo8(cmd_pwd_P)
 1998 0e0a 70E0      		ldi r23,hi8(cmd_pwd_P)
 1999 0e0c 8F2D      		mov r24,r15
 2000 0e0e 9E2D      		mov r25,r14
 2001 0e10 0E94 0000 		call strcmp_P
 2002 0e14 892B      		or r24,r25
 2003 0e16 01F0      		breq .L204
 2004 0e18 60E0      		ldi r22,lo8(cmd_xpwd_P)
 2005 0e1a 70E0      		ldi r23,hi8(cmd_xpwd_P)
 2006 0e1c 8F2D      		mov r24,r15
 2007 0e1e 9E2D      		mov r25,r14
 2008 0e20 0E94 0000 		call strcmp_P
 2009 0e24 892B      		or r24,r25
 2010 0e26 01F4      		brne .L205
 2011               	.L204:
 2012 0e28 8C81      		ldd r24,Y+4
 2013 0e2a 9D81      		ldd r25,Y+5
 2014 0e2c 9F93      		push r25
 2015 0e2e 8F93      		push r24
 2016 0e30 80E0      		ldi r24,lo8(.LC1)
 2017 0e32 90E0      		ldi r25,hi8(.LC1)
 2018 0e34 9F93      		push r25
 2019 0e36 8F93      		push r24
 2020 0e38 8A81      		ldd r24,Y+2
 2021 0e3a 9B81      		ldd r25,Y+3
 2022 0e3c 9F93      		push r25
 2023 0e3e 8F93      		push r24
 2024 0e40 0E94 0000 		call fprintf
 2025 0e44 C0E0      		ldi r28,lo8(0)
 2026 0e46 D0E0      		ldi r29,hi8(0)
 2027 0e48 8DB7      		in r24,__SP_L__
 2028 0e4a 9EB7      		in r25,__SP_H__
 2029 0e4c 0696      		adiw r24,6
 2030 0e4e 0FB6      		in __tmp_reg__,__SREG__
 2031 0e50 F894      		cli
 2032 0e52 9EBF      		out __SP_H__,r25
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 37


 2033 0e54 0FBE      		out __SREG__,__tmp_reg__
 2034 0e56 8DBF      		out __SP_L__,r24
 2035 0e58 00C0      		rjmp .L197
 2036               	.L205:
 2037 0e5a 60E0      		ldi r22,lo8(cmd_syst_P)
 2038 0e5c 70E0      		ldi r23,hi8(cmd_syst_P)
 2039 0e5e 8F2D      		mov r24,r15
 2040 0e60 9E2D      		mov r25,r14
 2041 0e62 0E94 0000 		call strcmp_P
 2042 0e66 892B      		or r24,r25
 2043 0e68 01F4      		brne .L206
 2044 0e6a 6A81      		ldd r22,Y+2
 2045 0e6c 7B81      		ldd r23,Y+3
 2046 0e6e 80E0      		ldi r24,lo8(.LC0)
 2047 0e70 90E0      		ldi r25,hi8(.LC0)
 2048 0e72 0E94 0000 		call fputs
 2049               	.L223:
 2050 0e76 C0E0      		ldi r28,lo8(0)
 2051 0e78 D0E0      		ldi r29,hi8(0)
 2052 0e7a 00C0      		rjmp .L197
 2053               	.L206:
 2054 0e7c 60E0      		ldi r22,lo8(cmd_type_P)
 2055 0e7e 70E0      		ldi r23,hi8(cmd_type_P)
 2056 0e80 8F2D      		mov r24,r15
 2057 0e82 9E2D      		mov r25,r14
 2058 0e84 0E94 0000 		call strcmp_P
 2059 0e88 892B      		or r24,r25
 2060 0e8a 01F4      		brne .L207
 2061 0e8c 612F      		mov r22,r17
 2062 0e8e 702F      		mov r23,r16
 2063 0e90 CE01      		movw r24,r28
 2064 0e92 0E94 0000 		call NutFtpProcessType
 2065 0e96 00C0      		rjmp .L222
 2066               	.L207:
 2067 0e98 6C81      		ldd r22,Y+4
 2068 0e9a 7D81      		ldd r23,Y+5
 2069 0e9c 412F      		mov r20,r17
 2070 0e9e 502F      		mov r21,r16
 2071 0ea0 8091 0000 		lds r24,ftp_root
 2072 0ea4 9091 0000 		lds r25,(ftp_root)+1
 2073 0ea8 0E94 0000 		call CreateFullPathName
 2074 0eac 8C01      		movw r16,r24
 2075 0eae 0097      		sbiw r24,0
 2076 0eb0 01F4      		brne .L208
 2077 0eb2 63EC      		ldi r22,lo8(451)
 2078 0eb4 71E0      		ldi r23,hi8(451)
 2079               	.L225:
 2080 0eb6 CE01      		movw r24,r28
 2081 0eb8 0E94 0000 		call NutFtpRespondBad
 2082               	.L222:
 2083 0ebc EC01      		movw r28,r24
 2084 0ebe 00C0      		rjmp .L197
 2085               	.L208:
 2086 0ec0 60E0      		ldi r22,lo8(cmd_cwd_P)
 2087 0ec2 70E0      		ldi r23,hi8(cmd_cwd_P)
 2088 0ec4 8F2D      		mov r24,r15
 2089 0ec6 9E2D      		mov r25,r14
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 38


 2090 0ec8 0E94 0000 		call strcmp_P
 2091 0ecc 892B      		or r24,r25
 2092 0ece 01F4      		brne .L209
 2093 0ed0 B801      		movw r22,r16
 2094 0ed2 CE01      		movw r24,r28
 2095 0ed4 0E94 0000 		call NutFtpProcessCwd
 2096 0ed8 00C0      		rjmp .L224
 2097               	.L209:
 2098 0eda 60E0      		ldi r22,lo8(cmd_dele_P)
 2099 0edc 70E0      		ldi r23,hi8(cmd_dele_P)
 2100 0ede 8F2D      		mov r24,r15
 2101 0ee0 9E2D      		mov r25,r14
 2102 0ee2 0E94 0000 		call strcmp_P
 2103 0ee6 892B      		or r24,r25
 2104 0ee8 01F4      		brne .L211
 2105 0eea B801      		movw r22,r16
 2106 0eec CE01      		movw r24,r28
 2107 0eee 0E94 0000 		call NutFtpProcessDelete
 2108 0ef2 00C0      		rjmp .L224
 2109               	.L211:
 2110 0ef4 60E0      		ldi r22,lo8(cmd_list_P)
 2111 0ef6 70E0      		ldi r23,hi8(cmd_list_P)
 2112 0ef8 8F2D      		mov r24,r15
 2113 0efa 9E2D      		mov r25,r14
 2114 0efc 0E94 0000 		call strcmp_P
 2115 0f00 892B      		or r24,r25
 2116 0f02 01F0      		breq .L212
 2117 0f04 60E0      		ldi r22,lo8(cmd_nlst_P)
 2118 0f06 70E0      		ldi r23,hi8(cmd_nlst_P)
 2119 0f08 8F2D      		mov r24,r15
 2120 0f0a 9E2D      		mov r25,r14
 2121 0f0c 0E94 0000 		call strcmp_P
 2122 0f10 892B      		or r24,r25
 2123 0f12 01F4      		brne .L213
 2124               	.L212:
 2125 0f14 B801      		movw r22,r16
 2126 0f16 CE01      		movw r24,r28
 2127 0f18 0E94 0000 		call NutFtpTransferDirectory
 2128 0f1c 00C0      		rjmp .L224
 2129               	.L213:
 2130 0f1e 60E0      		ldi r22,lo8(cmd_mkd_P)
 2131 0f20 70E0      		ldi r23,hi8(cmd_mkd_P)
 2132 0f22 8F2D      		mov r24,r15
 2133 0f24 9E2D      		mov r25,r14
 2134 0f26 0E94 0000 		call strcmp_P
 2135 0f2a 892B      		or r24,r25
 2136 0f2c 01F0      		breq .L214
 2137 0f2e 60E0      		ldi r22,lo8(cmd_xmkd_P)
 2138 0f30 70E0      		ldi r23,hi8(cmd_xmkd_P)
 2139 0f32 8F2D      		mov r24,r15
 2140 0f34 9E2D      		mov r25,r14
 2141 0f36 0E94 0000 		call strcmp_P
 2142 0f3a 892B      		or r24,r25
 2143 0f3c 01F4      		brne .L215
 2144               	.L214:
 2145 0f3e B801      		movw r22,r16
 2146 0f40 CE01      		movw r24,r28
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 39


 2147 0f42 0E94 0000 		call NutFtpProcessMkd
 2148 0f46 00C0      		rjmp .L224
 2149               	.L215:
 2150 0f48 60E0      		ldi r22,lo8(cmd_retr_P)
 2151 0f4a 70E0      		ldi r23,hi8(cmd_retr_P)
 2152 0f4c 8F2D      		mov r24,r15
 2153 0f4e 9E2D      		mov r25,r14
 2154 0f50 0E94 0000 		call strcmp_P
 2155 0f54 892B      		or r24,r25
 2156 0f56 01F4      		brne .L216
 2157 0f58 41E0      		ldi r20,lo8(1)
 2158 0f5a 50E0      		ldi r21,hi8(1)
 2159 0f5c 00C0      		rjmp .L226
 2160               	.L216:
 2161 0f5e 60E0      		ldi r22,lo8(cmd_rmd_P)
 2162 0f60 70E0      		ldi r23,hi8(cmd_rmd_P)
 2163 0f62 8F2D      		mov r24,r15
 2164 0f64 9E2D      		mov r25,r14
 2165 0f66 0E94 0000 		call strcmp_P
 2166 0f6a 892B      		or r24,r25
 2167 0f6c 01F0      		breq .L217
 2168 0f6e 60E0      		ldi r22,lo8(cmd_xrmd_P)
 2169 0f70 70E0      		ldi r23,hi8(cmd_xrmd_P)
 2170 0f72 8F2D      		mov r24,r15
 2171 0f74 9E2D      		mov r25,r14
 2172 0f76 0E94 0000 		call strcmp_P
 2173 0f7a 892B      		or r24,r25
 2174 0f7c 01F4      		brne .L218
 2175               	.L217:
 2176 0f7e B801      		movw r22,r16
 2177 0f80 CE01      		movw r24,r28
 2178 0f82 0E94 0000 		call NutFtpProcessRmd
 2179 0f86 00C0      		rjmp .L224
 2180               	.L218:
 2181 0f88 60E0      		ldi r22,lo8(cmd_stor_P)
 2182 0f8a 70E0      		ldi r23,hi8(cmd_stor_P)
 2183 0f8c 8F2D      		mov r24,r15
 2184 0f8e 9E2D      		mov r25,r14
 2185 0f90 0E94 0000 		call strcmp_P
 2186 0f94 892B      		or r24,r25
 2187 0f96 01F4      		brne .L219
 2188 0f98 40E0      		ldi r20,lo8(0)
 2189 0f9a 50E0      		ldi r21,hi8(0)
 2190               	.L226:
 2191 0f9c B801      		movw r22,r16
 2192 0f9e CE01      		movw r24,r28
 2193 0fa0 0E94 0000 		call NutFtpTransferFile
 2194 0fa4 00C0      		rjmp .L224
 2195               	.L219:
 2196 0fa6 66EF      		ldi r22,lo8(502)
 2197 0fa8 71E0      		ldi r23,hi8(502)
 2198 0faa CE01      		movw r24,r28
 2199 0fac 0E94 0000 		call NutFtpRespondBad
 2200               	.L224:
 2201 0fb0 EC01      		movw r28,r24
 2202 0fb2 C801      		movw r24,r16
 2203 0fb4 0E94 0000 		call free
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 40


 2204               	.L197:
 2205 0fb8 CE01      		movw r24,r28
 2206               	/* epilogue start */
 2207 0fba DF91      		pop r29
 2208 0fbc CF91      		pop r28
 2209 0fbe 1F91      		pop r17
 2210 0fc0 0F91      		pop r16
 2211 0fc2 FF90      		pop r15
 2212 0fc4 EF90      		pop r14
 2213 0fc6 0895      		ret
 2214               		.size	NutFtpProcessRequest, .-NutFtpProcessRequest
 2215               	.global	NutFtpServerSession
 2216               		.type	NutFtpServerSession, @function
 2217               	NutFtpServerSession:
 2218 0fc8 4F92      		push r4
 2219 0fca 5F92      		push r5
 2220 0fcc 6F92      		push r6
 2221 0fce 7F92      		push r7
 2222 0fd0 8F92      		push r8
 2223 0fd2 9F92      		push r9
 2224 0fd4 AF92      		push r10
 2225 0fd6 BF92      		push r11
 2226 0fd8 CF92      		push r12
 2227 0fda DF92      		push r13
 2228 0fdc EF92      		push r14
 2229 0fde FF92      		push r15
 2230 0fe0 0F93      		push r16
 2231 0fe2 1F93      		push r17
 2232 0fe4 DF93      		push r29
 2233 0fe6 CF93      		push r28
 2234 0fe8 00D0      		rcall .
 2235 0fea 00D0      		rcall .
 2236 0fec CDB7      		in r28,__SP_L__
 2237 0fee DEB7      		in r29,__SP_H__
 2238               	/* prologue: function */
 2239               	/* frame size = 4 */
 2240 0ff0 8C01      		movw r16,r24
 2241 0ff2 8091 0000 		lds r24,ftp_root
 2242 0ff6 9091 0000 		lds r25,(ftp_root)+1
 2243 0ffa 0E94 0000 		call NutRegisterFtpRoot
 2244 0ffe 892B      		or r24,r25
 2245 1000 01F0      		breq .+2
 2246 1002 00C0      		rjmp .L228
 2247 1004 80E8      		ldi r24,lo8(128)
 2248 1006 90E0      		ldi r25,hi8(128)
 2249 1008 0E94 0000 		call malloc
 2250 100c 3C01      		movw r6,r24
 2251 100e 0097      		sbiw r24,0
 2252 1010 01F4      		brne .+2
 2253 1012 00C0      		rjmp .L228
 2254 1014 C801      		movw r24,r16
 2255 1016 0E94 0000 		call NutFtpOpenSession
 2256 101a 2C01      		movw r4,r24
 2257 101c 0097      		sbiw r24,0
 2258 101e 01F4      		brne .L229
 2259 1020 C301      		movw r24,r6
 2260 1022 0E94 0000 		call free
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 41


 2261 1026 00C0      		rjmp .L228
 2262               	.L229:
 2263 1028 8E01      		movw r16,r28
 2264 102a 0F5F      		subi r16,lo8(-(1))
 2265 102c 1F4F      		sbci r17,hi8(-(1))
 2266 102e C801      		movw r24,r16
 2267 1030 0E94 0000 		call time
 2268 1034 C801      		movw r24,r16
 2269 1036 0E94 0000 		call localtime
 2270 103a FC01      		movw r30,r24
 2271 103c E080      		ld r14,Z
 2272 103e F180      		ldd r15,Z+1
 2273 1040 C280      		ldd r12,Z+2
 2274 1042 D380      		ldd r13,Z+3
 2275 1044 A480      		ldd r10,Z+4
 2276 1046 B580      		ldd r11,Z+5
 2277 1048 8680      		ldd r8,Z+6
 2278 104a 9780      		ldd r9,Z+7
 2279 104c 2085      		ldd r18,Z+8
 2280 104e 3185      		ldd r19,Z+9
 2281 1050 C901      		movw r24,r18
 2282 1052 880F      		lsl r24
 2283 1054 991F      		rol r25
 2284 1056 820F      		add r24,r18
 2285 1058 931F      		adc r25,r19
 2286 105a 0091 0000 		lds r16,mon_name
 2287 105e 1091 0000 		lds r17,(mon_name)+1
 2288 1062 080F      		add r16,r24
 2289 1064 191F      		adc r17,r25
 2290 1066 0E94 0000 		call NutVersionString
 2291 106a FF92      		push r15
 2292 106c EF92      		push r14
 2293 106e DF92      		push r13
 2294 1070 CF92      		push r12
 2295 1072 BF92      		push r11
 2296 1074 AF92      		push r10
 2297 1076 9F92      		push r9
 2298 1078 8F92      		push r8
 2299 107a 1F93      		push r17
 2300 107c 0F93      		push r16
 2301 107e 9F93      		push r25
 2302 1080 8F93      		push r24
 2303 1082 80E0      		ldi r24,lo8(rep_banner)
 2304 1084 90E0      		ldi r25,hi8(rep_banner)
 2305 1086 9F93      		push r25
 2306 1088 8F93      		push r24
 2307 108a F201      		movw r30,r4
 2308 108c 8281      		ldd r24,Z+2
 2309 108e 9381      		ldd r25,Z+3
 2310 1090 9F93      		push r25
 2311 1092 8F93      		push r24
 2312 1094 0E94 0000 		call fprintf_P
 2313 1098 8DB7      		in r24,__SP_L__
 2314 109a 9EB7      		in r25,__SP_H__
 2315 109c 4096      		adiw r24,16
 2316 109e 0FB6      		in __tmp_reg__,__SREG__
 2317 10a0 F894      		cli
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 42


 2318 10a2 9EBF      		out __SP_H__,r25
 2319 10a4 0FBE      		out __SREG__,__tmp_reg__
 2320 10a6 8DBF      		out __SP_L__,r24
 2321               	.L235:
 2322 10a8 F201      		movw r30,r4
 2323 10aa 8281      		ldd r24,Z+2
 2324 10ac 9381      		ldd r25,Z+3
 2325 10ae 0E94 0000 		call fflush
 2326 10b2 F201      		movw r30,r4
 2327 10b4 4281      		ldd r20,Z+2
 2328 10b6 5381      		ldd r21,Z+3
 2329 10b8 60E8      		ldi r22,lo8(128)
 2330 10ba 70E0      		ldi r23,hi8(128)
 2331 10bc C301      		movw r24,r6
 2332 10be 0E94 0000 		call fgets
 2333 10c2 892B      		or r24,r25
 2334 10c4 01F0      		breq .L231
 2335 10c6 F301      		movw r30,r6
 2336 10c8 0190      		ld __tmp_reg__,Z+
 2337 10ca 0020      		tst __tmp_reg__
 2338 10cc 01F4      		brne .-6
 2339 10ce 3197      		sbiw r30,1
 2340 10d0 E619      		sub r30,r6
 2341 10d2 F709      		sbc r31,r7
 2342 10d4 E60D      		add r30,r6
 2343 10d6 F71D      		adc r31,r7
 2344 10d8 3197      		sbiw r30,1
 2345 10da E081      		ld r30,Z
 2346 10dc EA30      		cpi r30,lo8(10)
 2347 10de 01F0      		breq .L232
 2348 10e0 ED30      		cpi r30,lo8(13)
 2349 10e2 01F0      		breq .L232
 2350               	.L239:
 2351 10e4 F201      		movw r30,r4
 2352 10e6 4281      		ldd r20,Z+2
 2353 10e8 5381      		ldd r21,Z+3
 2354 10ea 60E8      		ldi r22,lo8(128)
 2355 10ec 70E0      		ldi r23,hi8(128)
 2356 10ee C301      		movw r24,r6
 2357 10f0 0E94 0000 		call fgets
 2358 10f4 892B      		or r24,r25
 2359 10f6 01F0      		breq .L231
 2360 10f8 F301      		movw r30,r6
 2361 10fa 0190      		ld __tmp_reg__,Z+
 2362 10fc 0020      		tst __tmp_reg__
 2363 10fe 01F4      		brne .-6
 2364 1100 3197      		sbiw r30,1
 2365 1102 E619      		sub r30,r6
 2366 1104 F709      		sbc r31,r7
 2367 1106 E60D      		add r30,r6
 2368 1108 F71D      		adc r31,r7
 2369 110a 3197      		sbiw r30,1
 2370 110c E081      		ld r30,Z
 2371 110e EA30      		cpi r30,lo8(10)
 2372 1110 01F0      		breq .L233
 2373 1112 ED30      		cpi r30,lo8(13)
 2374 1114 01F4      		brne .L239
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 43


 2375 1116 00C0      		rjmp .L233
 2376               	.L232:
 2377 1118 B301      		movw r22,r6
 2378 111a C201      		movw r24,r4
 2379 111c 0E94 0000 		call NutFtpProcessRequest
 2380               	.L242:
 2381 1120 8C01      		movw r16,r24
 2382 1122 0097      		sbiw r24,0
 2383 1124 01F0      		breq .L235
 2384 1126 00C0      		rjmp .L236
 2385               	.L231:
 2386 1128 0FEF      		ldi r16,lo8(-1)
 2387 112a 1FEF      		ldi r17,hi8(-1)
 2388               	.L236:
 2389 112c C201      		movw r24,r4
 2390 112e 0E94 0000 		call NutFtpCloseSession
 2391 1132 C301      		movw r24,r6
 2392 1134 0E94 0000 		call free
 2393 1138 00C0      		rjmp .L230
 2394               	.L228:
 2395 113a 0FEF      		ldi r16,lo8(-1)
 2396 113c 1FEF      		ldi r17,hi8(-1)
 2397               	.L230:
 2398 113e C801      		movw r24,r16
 2399               	/* epilogue start */
 2400 1140 0F90      		pop __tmp_reg__
 2401 1142 0F90      		pop __tmp_reg__
 2402 1144 0F90      		pop __tmp_reg__
 2403 1146 0F90      		pop __tmp_reg__
 2404 1148 CF91      		pop r28
 2405 114a DF91      		pop r29
 2406 114c 1F91      		pop r17
 2407 114e 0F91      		pop r16
 2408 1150 FF90      		pop r15
 2409 1152 EF90      		pop r14
 2410 1154 DF90      		pop r13
 2411 1156 CF90      		pop r12
 2412 1158 BF90      		pop r11
 2413 115a AF90      		pop r10
 2414 115c 9F90      		pop r9
 2415 115e 8F90      		pop r8
 2416 1160 7F90      		pop r7
 2417 1162 6F90      		pop r6
 2418 1164 5F90      		pop r5
 2419 1166 4F90      		pop r4
 2420 1168 0895      		ret
 2421               	.L233:
 2422 116a 64EF      		ldi r22,lo8(500)
 2423 116c 71E0      		ldi r23,hi8(500)
 2424 116e C201      		movw r24,r4
 2425 1170 0E94 0000 		call NutFtpRespondBad
 2426 1174 00C0      		rjmp .L242
 2427               		.size	NutFtpServerSession, .-NutFtpServerSession
 2428               		.data
 2429               	.LC11:
 2430 0082 4A61 6E46 		.string	"JanFebMarAprMayJunJulAugSepOctNovDec"
 2430      6562 4D61 
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 44


 2430      7241 7072 
 2430      4D61 794A 
 2430      756E 4A75 
 2431               		.type	mon_name, @object
 2432               		.size	mon_name, 2
 2433               	mon_name:
 2434 00a7 0000      		.word	.LC11
 2435               		.section	.progmem.data,"a",@progbits
 2436               		.type	rep_banner, @object
 2437               		.size	rep_banner, 52
 2438               	rep_banner:
 2439 0000 3232 3020 		.string	"220 Nut/OS FTP %s ready at %.3s%3d %02d:%02d:%02d\r\n"
 2439      4E75 742F 
 2439      4F53 2046 
 2439      5450 2025 
 2439      7320 7265 
 2440               		.type	cmd_quit_P, @object
 2441               		.size	cmd_quit_P, 5
 2442               	cmd_quit_P:
 2443 0034 5155 4954 		.string	"QUIT"
 2443      00
 2444               		.type	cmd_user_P, @object
 2445               		.size	cmd_user_P, 5
 2446               	cmd_user_P:
 2447 0039 5553 4552 		.string	"USER"
 2447      00
 2448               		.type	cmd_pass_P, @object
 2449               		.size	cmd_pass_P, 5
 2450               	cmd_pass_P:
 2451 003e 5041 5353 		.string	"PASS"
 2451      00
 2452               		.type	cmd_noop_P, @object
 2453               		.size	cmd_noop_P, 5
 2454               	cmd_noop_P:
 2455 0043 4E4F 4F50 		.string	"NOOP"
 2455      00
 2456               		.type	cmd_pasv_P, @object
 2457               		.size	cmd_pasv_P, 5
 2458               	cmd_pasv_P:
 2459 0048 5041 5356 		.string	"PASV"
 2459      00
 2460               		.type	cmd_port_P, @object
 2461               		.size	cmd_port_P, 5
 2462               	cmd_port_P:
 2463 004d 504F 5254 		.string	"PORT"
 2463      00
 2464               		.type	cmd_pwd_P, @object
 2465               		.size	cmd_pwd_P, 4
 2466               	cmd_pwd_P:
 2467 0052 5057 4400 		.string	"PWD"
 2468               		.type	cmd_xpwd_P, @object
 2469               		.size	cmd_xpwd_P, 5
 2470               	cmd_xpwd_P:
 2471 0056 5850 5744 		.string	"XPWD"
 2471      00
 2472               		.type	cmd_syst_P, @object
 2473               		.size	cmd_syst_P, 5
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 45


 2474               	cmd_syst_P:
 2475 005b 5359 5354 		.string	"SYST"
 2475      00
 2476               		.type	cmd_type_P, @object
 2477               		.size	cmd_type_P, 5
 2478               	cmd_type_P:
 2479 0060 5459 5045 		.string	"TYPE"
 2479      00
 2480               		.type	cmd_cwd_P, @object
 2481               		.size	cmd_cwd_P, 4
 2482               	cmd_cwd_P:
 2483 0065 4357 4400 		.string	"CWD"
 2484               		.type	cmd_dele_P, @object
 2485               		.size	cmd_dele_P, 5
 2486               	cmd_dele_P:
 2487 0069 4445 4C45 		.string	"DELE"
 2487      00
 2488               		.type	cmd_list_P, @object
 2489               		.size	cmd_list_P, 5
 2490               	cmd_list_P:
 2491 006e 4C49 5354 		.string	"LIST"
 2491      00
 2492               		.type	cmd_nlst_P, @object
 2493               		.size	cmd_nlst_P, 5
 2494               	cmd_nlst_P:
 2495 0073 4E4C 5354 		.string	"NLST"
 2495      00
 2496               		.type	cmd_mkd_P, @object
 2497               		.size	cmd_mkd_P, 4
 2498               	cmd_mkd_P:
 2499 0078 4D4B 4400 		.string	"MKD"
 2500               		.type	cmd_xmkd_P, @object
 2501               		.size	cmd_xmkd_P, 5
 2502               	cmd_xmkd_P:
 2503 007c 584D 4B44 		.string	"XMKD"
 2503      00
 2504               		.type	cmd_retr_P, @object
 2505               		.size	cmd_retr_P, 5
 2506               	cmd_retr_P:
 2507 0081 5245 5452 		.string	"RETR"
 2507      00
 2508               		.type	cmd_rmd_P, @object
 2509               		.size	cmd_rmd_P, 4
 2510               	cmd_rmd_P:
 2511 0086 524D 4400 		.string	"RMD"
 2512               		.type	cmd_xrmd_P, @object
 2513               		.size	cmd_xrmd_P, 5
 2514               	cmd_xrmd_P:
 2515 008a 5852 4D44 		.string	"XRMD"
 2515      00
 2516               		.type	cmd_stor_P, @object
 2517               		.size	cmd_stor_P, 5
 2518               	cmd_stor_P:
 2519 008f 5354 4F52 		.string	"STOR"
 2519      00
 2520               		.type	bmode_P.2359, @object
 2521               		.size	bmode_P.2359, 10
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 46


 2522               	bmode_P.2359:
 2523 0094 4249 4E41 		.string	"BINARY.\r\n"
 2523      5259 2E0D 
 2523      0A00 
 2524               		.type	amode_P.2358, @object
 2525               		.size	amode_P.2358, 9
 2526               	amode_P.2358:
 2527 009e 4153 4349 		.string	"ASCII.\r\n"
 2527      492E 0D0A 
 2527      00
 2528               		.type	intro_P.2357, @object
 2529               		.size	intro_P.2357, 13
 2530               	intro_P.2357:
 2531 00a7 3135 3020 		.string	"150 Opening "
 2531      4F70 656E 
 2531      696E 6720 
 2531      00
 2532               		.type	fmt_P.2350, @object
 2533               		.size	fmt_P.2350, 12
 2534               	fmt_P.2350:
 2535 00b4 2564 2046 		.string	"%d Failed\r\n"
 2535      6169 6C65 
 2535      640D 0A00 
 2536               		.type	fmt_P.2343, @object
 2537               		.size	fmt_P.2343, 8
 2538               	fmt_P.2343:
 2539 00c0 2564 204F 		.string	"%d OK\r\n"
 2539      4B0D 0A00 
 2540               		.lcomm ftp_root,2
 2541               		.lcomm ftp_user,2
 2542               		.lcomm ftp_pass,2
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 47


DEFINED SYMBOLS
                            *ABS*:00000000 ftpd.c
  C:\Temp/cc2L8Dlh.s:2      *ABS*:0000003f __SREG__
  C:\Temp/cc2L8Dlh.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/cc2L8Dlh.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/cc2L8Dlh.s:5      *ABS*:00000034 __CCP__
  C:\Temp/cc2L8Dlh.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/cc2L8Dlh.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/cc2L8Dlh.s:13     .text:00000000 NutFtpRespondBad
  C:\Temp/cc2L8Dlh.s:2534   .progmem.data:000000b4 fmt_P.2350
  C:\Temp/cc2L8Dlh.s:52     .text:00000044 NutFtpRespondOk
  C:\Temp/cc2L8Dlh.s:2538   .progmem.data:000000c0 fmt_P.2343
  C:\Temp/cc2L8Dlh.s:91     .text:00000088 NutFtpProcessType
  C:\Temp/cc2L8Dlh.s:124    .text:000000b8 NutFtpProcessUser
  C:\Temp/cc2L8Dlh.s:2540   .bss:00000002 ftp_user
  C:\Temp/cc2L8Dlh.s:2541   .bss:00000004 ftp_pass
  C:\Temp/cc2L8Dlh.s:179    .text:0000011e NutFtpProcessPass
  C:\Temp/cc2L8Dlh.s:225    .text:00000168 NutFtpProcessSystem
  C:\Temp/cc2L8Dlh.s:241    .text:0000017c NutFtpProcessRmd
  C:\Temp/cc2L8Dlh.s:273    .text:000001a8 NutFtpProcessPwd
  C:\Temp/cc2L8Dlh.s:309    .text:000001dc NutFtpProcessPassiv
  C:\Temp/cc2L8Dlh.s:382    .text:00000264 NutFtpProcessPort
  C:\Temp/cc2L8Dlh.s:529    .text:00000370 NutFtpProcessMkd
  C:\Temp/cc2L8Dlh.s:559    .text:000003a0 NutFtpCloseSession
  C:\Temp/cc2L8Dlh.s:586    .text:000003ca NutFtpProcessDelete
  C:\Temp/cc2L8Dlh.s:618    .text:000003f6 NutFtpProcessCwd
                             .bss:00000000 ftp_root
  C:\Temp/cc2L8Dlh.s:727    .text:000004c6 NutRegisterFtpUser
  C:\Temp/cc2L8Dlh.s:799    .text:00000554 NutFtpOpenSession
  C:\Temp/cc2L8Dlh.s:881    .text:000005ee CreateFullPathName
  C:\Temp/cc2L8Dlh.s:1140   .text:000007ae NutRegisterFtpRoot
  C:\Temp/cc2L8Dlh.s:1246   .text:00000880 NutFtpDataConnect
  C:\Temp/cc2L8Dlh.s:1309   .text:000008f2 NutFtpSendMode
  C:\Temp/cc2L8Dlh.s:2530   .progmem.data:000000a7 intro_P.2357
  C:\Temp/cc2L8Dlh.s:2526   .progmem.data:0000009e amode_P.2358
  C:\Temp/cc2L8Dlh.s:2522   .progmem.data:00000094 bmode_P.2359
  C:\Temp/cc2L8Dlh.s:1361   .text:00000936 NutFtpTransferDirectory
  C:\Temp/cc2L8Dlh.s:2433   .data:000000a7 mon_name
  C:\Temp/cc2L8Dlh.s:1657   .text:00000b8e NutFtpTransferFile
  C:\Temp/cc2L8Dlh.s:1843   .text:00000cec NutFtpProcessRequest
  C:\Temp/cc2L8Dlh.s:2442   .progmem.data:00000034 cmd_quit_P
  C:\Temp/cc2L8Dlh.s:2446   .progmem.data:00000039 cmd_user_P
  C:\Temp/cc2L8Dlh.s:2450   .progmem.data:0000003e cmd_pass_P
  C:\Temp/cc2L8Dlh.s:2454   .progmem.data:00000043 cmd_noop_P
  C:\Temp/cc2L8Dlh.s:2458   .progmem.data:00000048 cmd_pasv_P
  C:\Temp/cc2L8Dlh.s:2462   .progmem.data:0000004d cmd_port_P
  C:\Temp/cc2L8Dlh.s:2466   .progmem.data:00000052 cmd_pwd_P
  C:\Temp/cc2L8Dlh.s:2470   .progmem.data:00000056 cmd_xpwd_P
  C:\Temp/cc2L8Dlh.s:2474   .progmem.data:0000005b cmd_syst_P
  C:\Temp/cc2L8Dlh.s:2478   .progmem.data:00000060 cmd_type_P
  C:\Temp/cc2L8Dlh.s:2482   .progmem.data:00000065 cmd_cwd_P
  C:\Temp/cc2L8Dlh.s:2486   .progmem.data:00000069 cmd_dele_P
  C:\Temp/cc2L8Dlh.s:2490   .progmem.data:0000006e cmd_list_P
  C:\Temp/cc2L8Dlh.s:2494   .progmem.data:00000073 cmd_nlst_P
  C:\Temp/cc2L8Dlh.s:2498   .progmem.data:00000078 cmd_mkd_P
  C:\Temp/cc2L8Dlh.s:2502   .progmem.data:0000007c cmd_xmkd_P
  C:\Temp/cc2L8Dlh.s:2506   .progmem.data:00000081 cmd_retr_P
GAS LISTING C:\Temp/cc2L8Dlh.s 			page 48


  C:\Temp/cc2L8Dlh.s:2510   .progmem.data:00000086 cmd_rmd_P
  C:\Temp/cc2L8Dlh.s:2514   .progmem.data:0000008a cmd_xrmd_P
  C:\Temp/cc2L8Dlh.s:2518   .progmem.data:0000008f cmd_stor_P
  C:\Temp/cc2L8Dlh.s:2217   .text:00000fc8 NutFtpServerSession
  C:\Temp/cc2L8Dlh.s:2438   .progmem.data:00000000 rep_banner

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
fprintf_P
fflush
strcmp
fputs
rmdir
fprintf
atol
atoi
mkdir
fclose
free
unlink
stat
strdup
malloc
_fdopen
strcpy
strchr
NutTcpCreateSocket
NutTcpSetSockOpt
NutTcpAccept
NutTcpConnect
NutTcpCloseSocket
fputs_P
opendir
sprintf
fputc
gmtime
readdir
closedir
_open
NutTcpSend
_read
_write
NutTcpReceive
_close
strcmp_P
time
localtime
NutVersionString
fgets
