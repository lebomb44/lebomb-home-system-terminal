GAS LISTING C:\Temp/ccPoRhLP.s 			page 1


   1               		.file	"cgi.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutCgiProcessRequest
  12               		.type	NutCgiProcessRequest, @function
  13               	NutCgiProcessRequest:
  14 0000 CF92      		push r12
  15 0002 DF92      		push r13
  16 0004 EF92      		push r14
  17 0006 FF92      		push r15
  18 0008 0F93      		push r16
  19 000a 1F93      		push r17
  20 000c CF93      		push r28
  21 000e DF93      		push r29
  22               	/* prologue: function */
  23               	/* frame size = 0 */
  24 0010 7C01      		movw r14,r24
  25 0012 8B01      		movw r16,r22
  26 0014 6A01      		movw r12,r20
  27 0016 FB01      		movw r30,r22
  28 0018 8081      		ld r24,Z
  29 001a 9181      		ldd r25,Z+1
  30 001c 0197      		sbiw r24,1
  31 001e 0297      		sbiw r24,2
  32 0020 00F0      		brlo .L2
  33 0022 45EF      		ldi r20,lo8(501)
  34 0024 51E0      		ldi r21,hi8(501)
  35 0026 00C0      		rjmp .L10
  36               	.L2:
  37 0028 C091 0000 		lds r28,cgiFunctionList
  38 002c D091 0000 		lds r29,(cgiFunctionList)+1
  39 0030 00C0      		rjmp .L4
  40               	.L6:
  41 0032 F801      		movw r30,r16
  42 0034 6085      		ldd r22,Z+8
  43 0036 7185      		ldd r23,Z+9
  44 0038 6C0D      		add r22,r12
  45 003a 7D1D      		adc r23,r13
  46 003c 8A81      		ldd r24,Y+2
  47 003e 9B81      		ldd r25,Y+3
  48 0040 0E94 0000 		call strcasecmp
  49 0044 892B      		or r24,r25
  50 0046 01F0      		breq .L5
  51 0048 0990      		ld __tmp_reg__,Y+
  52 004a D881      		ld r29,Y
  53 004c C02D      		mov r28,__tmp_reg__
  54               	.L4:
  55 004e 2097      		sbiw r28,0
  56 0050 01F4      		brne .L6
  57 0052 00C0      		rjmp .L11
GAS LISTING C:\Temp/ccPoRhLP.s 			page 2


  58               	.L5:
  59 0054 EC81      		ldd r30,Y+4
  60 0056 FD81      		ldd r31,Y+5
  61 0058 B801      		movw r22,r16
  62 005a C701      		movw r24,r14
  63 005c 0995      		icall
  64 005e 892B      		or r24,r25
  65 0060 01F0      		breq .L8
  66 0062 44EF      		ldi r20,lo8(500)
  67 0064 51E0      		ldi r21,hi8(500)
  68 0066 00C0      		rjmp .L10
  69               	.L11:
  70 0068 44E9      		ldi r20,lo8(404)
  71 006a 51E0      		ldi r21,hi8(404)
  72               	.L10:
  73 006c B801      		movw r22,r16
  74 006e C701      		movw r24,r14
  75 0070 0E94 0000 		call NutHttpSendError
  76               	.L8:
  77               	/* epilogue start */
  78 0074 DF91      		pop r29
  79 0076 CF91      		pop r28
  80 0078 1F91      		pop r17
  81 007a 0F91      		pop r16
  82 007c FF90      		pop r15
  83 007e EF90      		pop r14
  84 0080 DF90      		pop r13
  85 0082 CF90      		pop r12
  86 0084 0895      		ret
  87               		.size	NutCgiProcessRequest, .-NutCgiProcessRequest
  88               	.global	NutRegisterCgi
  89               		.type	NutRegisterCgi, @function
  90               	NutRegisterCgi:
  91 0086 EF92      		push r14
  92 0088 FF92      		push r15
  93 008a 0F93      		push r16
  94 008c 1F93      		push r17
  95 008e CF93      		push r28
  96 0090 DF93      		push r29
  97               	/* prologue: function */
  98               	/* frame size = 0 */
  99 0092 8C01      		movw r16,r24
 100 0094 7B01      		movw r14,r22
 101 0096 C091 0000 		lds r28,cgiFunctionList
 102 009a D091 0000 		lds r29,(cgiFunctionList)+1
 103 009e 00C0      		rjmp .L13
 104               	.L15:
 105 00a0 6A81      		ldd r22,Y+2
 106 00a2 7B81      		ldd r23,Y+3
 107 00a4 C801      		movw r24,r16
 108 00a6 0E94 0000 		call strcmp
 109 00aa 0097      		sbiw r24,0
 110 00ac 01F0      		breq .L14
 111 00ae 0990      		ld __tmp_reg__,Y+
 112 00b0 D881      		ld r29,Y
 113 00b2 C02D      		mov r28,__tmp_reg__
 114               	.L13:
GAS LISTING C:\Temp/ccPoRhLP.s 			page 3


 115 00b4 2097      		sbiw r28,0
 116 00b6 01F4      		brne .L15
 117 00b8 00C0      		rjmp .L22
 118               	.L21:
 119 00ba 8091 0000 		lds r24,cgiFunctionList
 120 00be 9091 0000 		lds r25,(cgiFunctionList)+1
 121 00c2 9983      		std Y+1,r25
 122 00c4 8883      		st Y,r24
 123 00c6 C801      		movw r24,r16
 124 00c8 0E94 0000 		call strdup
 125 00cc 8A83      		std Y+2,r24
 126 00ce 9B83      		std Y+3,r25
 127 00d0 FD82      		std Y+5,r15
 128 00d2 EC82      		std Y+4,r14
 129 00d4 D093 0000 		sts (cgiFunctionList)+1,r29
 130 00d8 C093 0000 		sts cgiFunctionList,r28
 131 00dc 20E0      		ldi r18,lo8(0)
 132 00de 30E0      		ldi r19,hi8(0)
 133 00e0 00C0      		rjmp .L17
 134               	.L14:
 135 00e2 2FEF      		ldi r18,lo8(-1)
 136 00e4 3FEF      		ldi r19,hi8(-1)
 137               	.L17:
 138 00e6 C901      		movw r24,r18
 139               	/* epilogue start */
 140 00e8 DF91      		pop r29
 141 00ea CF91      		pop r28
 142 00ec 1F91      		pop r17
 143 00ee 0F91      		pop r16
 144 00f0 FF90      		pop r15
 145 00f2 EF90      		pop r14
 146 00f4 0895      		ret
 147               	.L22:
 148 00f6 86E0      		ldi r24,lo8(6)
 149 00f8 90E0      		ldi r25,hi8(6)
 150 00fa 0E94 0000 		call malloc
 151 00fe EC01      		movw r28,r24
 152 0100 0097      		sbiw r24,0
 153 0102 01F4      		brne .L21
 154 0104 00C0      		rjmp .L14
 155               		.size	NutRegisterCgi, .-NutRegisterCgi
 156               		.data
 157               	.LC0:
 158 0000 6367 692D 		.string	"cgi-bin/"
 158      6269 6E2F 
 158      00
 159               		.text
 160               	.global	NutCgiCheckRequest
 161               		.type	NutCgiCheckRequest, @function
 162               	NutCgiCheckRequest:
 163 0106 CF92      		push r12
 164 0108 DF92      		push r13
 165 010a EF92      		push r14
 166 010c FF92      		push r15
 167 010e 0F93      		push r16
 168 0110 1F93      		push r17
 169 0112 CF93      		push r28
GAS LISTING C:\Temp/ccPoRhLP.s 			page 4


 170 0114 DF93      		push r29
 171               	/* prologue: function */
 172               	/* frame size = 0 */
 173 0116 6C01      		movw r12,r24
 174 0118 7B01      		movw r14,r22
 175 011a 6091 0000 		lds r22,cgiBinPath
 176 011e 7091 0000 		lds r23,(cgiBinPath)+1
 177 0122 6115      		cp r22,__zero_reg__
 178 0124 7105      		cpc r23,__zero_reg__
 179 0126 01F4      		brne .L24
 180 0128 C0E0      		ldi r28,lo8(.LC0)
 181 012a D0E0      		ldi r29,hi8(.LC0)
 182 012c 00C0      		rjmp .L37
 183               	.L24:
 184 012e EB01      		movw r28,r22
 185 0130 00C0      		rjmp .L37
 186               	.L26:
 187 0132 2196      		adiw r28,1
 188               	.L36:
 189 0134 8881      		ld r24,Y
 190 0136 8B33      		cpi r24,lo8(59)
 191 0138 01F0      		breq .L26
 192 013a FE01      		movw r30,r28
 193 013c 00E0      		ldi r16,lo8(0)
 194 013e 10E0      		ldi r17,hi8(0)
 195 0140 00C0      		rjmp .L27
 196               	.L29:
 197 0142 0F5F      		subi r16,lo8(-(1))
 198 0144 1F4F      		sbci r17,hi8(-(1))
 199 0146 3196      		adiw r30,1
 200               	.L27:
 201 0148 8081      		ld r24,Z
 202 014a 8823      		tst r24
 203 014c 01F0      		breq .L28
 204 014e 8B33      		cpi r24,lo8(59)
 205 0150 01F4      		brne .L29
 206               	.L28:
 207 0152 0115      		cp r16,__zero_reg__
 208 0154 1105      		cpc r17,__zero_reg__
 209 0156 01F0      		breq .L37
 210 0158 A801      		movw r20,r16
 211 015a BE01      		movw r22,r28
 212 015c F701      		movw r30,r14
 213 015e 8085      		ldd r24,Z+8
 214 0160 9185      		ldd r25,Z+9
 215 0162 0E94 0000 		call strncasecmp
 216 0166 892B      		or r24,r25
 217 0168 01F4      		brne .L30
 218 016a A801      		movw r20,r16
 219 016c B701      		movw r22,r14
 220 016e C601      		movw r24,r12
 221 0170 0E94 0000 		call NutCgiProcessRequest
 222 0174 21E0      		ldi r18,lo8(1)
 223 0176 30E0      		ldi r19,hi8(1)
 224 0178 00C0      		rjmp .L31
 225               	.L30:
 226 017a C00F      		add r28,r16
GAS LISTING C:\Temp/ccPoRhLP.s 			page 5


 227 017c D11F      		adc r29,r17
 228               	.L37:
 229 017e 8881      		ld r24,Y
 230 0180 8823      		tst r24
 231 0182 01F4      		brne .L36
 232 0184 20E0      		ldi r18,lo8(0)
 233 0186 30E0      		ldi r19,hi8(0)
 234               	.L31:
 235 0188 C901      		movw r24,r18
 236               	/* epilogue start */
 237 018a DF91      		pop r29
 238 018c CF91      		pop r28
 239 018e 1F91      		pop r17
 240 0190 0F91      		pop r16
 241 0192 FF90      		pop r15
 242 0194 EF90      		pop r14
 243 0196 DF90      		pop r13
 244 0198 CF90      		pop r12
 245 019a 0895      		ret
 246               		.size	NutCgiCheckRequest, .-NutCgiCheckRequest
 247               	.global	NutRegisterCgiBinPath
 248               		.type	NutRegisterCgiBinPath, @function
 249               	NutRegisterCgiBinPath:
 250 019c CF93      		push r28
 251 019e DF93      		push r29
 252               	/* prologue: function */
 253               	/* frame size = 0 */
 254 01a0 EC01      		movw r28,r24
 255 01a2 8091 0000 		lds r24,cgiBinPath
 256 01a6 9091 0000 		lds r25,(cgiBinPath)+1
 257 01aa 0097      		sbiw r24,0
 258 01ac 01F0      		breq .L39
 259 01ae 0E94 0000 		call free
 260               	.L39:
 261 01b2 CE01      		movw r24,r28
 262 01b4 0E94 0000 		call strdup
 263 01b8 8093 0000 		sts cgiBinPath,r24
 264 01bc 9093 0000 		sts cgiBinPath+1,r25
 265               	/* epilogue start */
 266 01c0 DF91      		pop r29
 267 01c2 CF91      		pop r28
 268 01c4 0895      		ret
 269               		.size	NutRegisterCgiBinPath, .-NutRegisterCgiBinPath
 270               	.global	cgiFunctionList
 271               	.global	cgiFunctionList
 272               		.section .bss
 273               		.type	cgiFunctionList, @object
 274               		.size	cgiFunctionList, 2
 275               	cgiFunctionList:
 276 0000 0000      		.skip 2,0
 277               	.global	cgiBinPath
 278               	.global	cgiBinPath
 279               		.type	cgiBinPath, @object
 280               		.size	cgiBinPath, 2
 281               	cgiBinPath:
 282 0002 0000      		.skip 2,0
GAS LISTING C:\Temp/ccPoRhLP.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 cgi.c
  C:\Temp/ccPoRhLP.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccPoRhLP.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccPoRhLP.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccPoRhLP.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccPoRhLP.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccPoRhLP.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccPoRhLP.s:13     .text:00000000 NutCgiProcessRequest
  C:\Temp/ccPoRhLP.s:275    .bss:00000000 cgiFunctionList
  C:\Temp/ccPoRhLP.s:90     .text:00000086 NutRegisterCgi
  C:\Temp/ccPoRhLP.s:162    .text:00000106 NutCgiCheckRequest
  C:\Temp/ccPoRhLP.s:281    .bss:00000002 cgiBinPath
  C:\Temp/ccPoRhLP.s:249    .text:0000019c NutRegisterCgiBinPath

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
strcasecmp
NutHttpSendError
strcmp
strdup
malloc
strncasecmp
free
