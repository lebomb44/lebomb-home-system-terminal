GAS LISTING C:\Temp/ccCmj10L.s 			page 1


   1               		.file	"syslog.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	setlogmask
  12               		.type	setlogmask, @function
  13               	setlogmask:
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0000 2091 0000 		lds r18,syslog_mask
  17 0004 3091 0000 		lds r19,syslog_mask+1
  18 0008 0097      		sbiw r24,0
  19 000a 01F0      		breq .L2
  20 000c 9093 0000 		sts (syslog_mask)+1,r25
  21 0010 8093 0000 		sts syslog_mask,r24
  22               	.L2:
  23 0014 C901      		movw r24,r18
  24               	/* epilogue start */
  25 0016 0895      		ret
  26               		.size	setlogmask, .-setlogmask
  27               	.global	setlogserver
  28               		.type	setlogserver, @function
  29               	setlogserver:
  30               	/* prologue: function */
  31               	/* frame size = 0 */
  32 0018 2091 0000 		lds r18,syslog_server
  33 001c 3091 0000 		lds r19,syslog_server+1
  34 0020 E091 0000 		lds r30,syslog_server+2
  35 0024 F091 0000 		lds r31,syslog_server+3
  36 0028 6093 0000 		sts syslog_server,r22
  37 002c 7093 0000 		sts (syslog_server)+1,r23
  38 0030 8093 0000 		sts (syslog_server)+2,r24
  39 0034 9093 0000 		sts (syslog_server)+3,r25
  40 0038 4115      		cp r20,__zero_reg__
  41 003a 5105      		cpc r21,__zero_reg__
  42 003c 01F0      		breq .L5
  43 003e 5093 0000 		sts (syslog_port)+1,r21
  44 0042 4093 0000 		sts syslog_port,r20
  45               	.L5:
  46 0046 B901      		movw r22,r18
  47 0048 CF01      		movw r24,r30
  48               	/* epilogue start */
  49 004a 0895      		ret
  50               		.size	setlogserver, .-setlogserver
  51               	.global	closelog
  52               		.type	closelog, @function
  53               	closelog:
  54               	/* prologue: function */
  55               	/* frame size = 0 */
  56 004c 8091 0000 		lds r24,syslog_buf
  57 0050 9091 0000 		lds r25,(syslog_buf)+1
GAS LISTING C:\Temp/ccCmj10L.s 			page 2


  58 0054 0097      		sbiw r24,0
  59 0056 01F0      		breq .L8
  60 0058 0E94 0000 		call free
  61 005c 1092 0000 		sts (syslog_buf)+1,__zero_reg__
  62 0060 1092 0000 		sts syslog_buf,__zero_reg__
  63               	.L8:
  64 0064 8091 0000 		lds r24,syslog_taglen
  65 0068 9091 0000 		lds r25,(syslog_taglen)+1
  66 006c 892B      		or r24,r25
  67 006e 01F0      		breq .L9
  68 0070 8091 0000 		lds r24,syslog_tag
  69 0074 9091 0000 		lds r25,(syslog_tag)+1
  70 0078 0E94 0000 		call free
  71 007c 1092 0000 		sts (syslog_taglen)+1,__zero_reg__
  72 0080 1092 0000 		sts syslog_taglen,__zero_reg__
  73               	.L9:
  74 0084 8091 0000 		lds r24,syslog_sock
  75 0088 9091 0000 		lds r25,(syslog_sock)+1
  76 008c 0097      		sbiw r24,0
  77 008e 01F0      		breq .L11
  78 0090 0E94 0000 		call NutUdpDestroySocket
  79 0094 1092 0000 		sts (syslog_sock)+1,__zero_reg__
  80 0098 1092 0000 		sts syslog_sock,__zero_reg__
  81               	.L11:
  82 009c 0895      		ret
  83               		.size	closelog, .-closelog
  84               	.global	openlog
  85               		.type	openlog, @function
  86               	openlog:
  87 009e EF92      		push r14
  88 00a0 FF92      		push r15
  89 00a2 0F93      		push r16
  90 00a4 1F93      		push r17
  91 00a6 CF93      		push r28
  92 00a8 DF93      		push r29
  93               	/* prologue: function */
  94               	/* frame size = 0 */
  95 00aa EC01      		movw r28,r24
  96 00ac 8B01      		movw r16,r22
  97 00ae 7A01      		movw r14,r20
  98 00b0 0097      		sbiw r24,0
  99 00b2 01F4      		brne .L13
 100 00b4 C091 0000 		lds r28,syslog_tag
 101 00b8 D091 0000 		lds r29,(syslog_tag)+1
 102 00bc 1092 0000 		sts (syslog_taglen)+1,__zero_reg__
 103 00c0 1092 0000 		sts syslog_taglen,__zero_reg__
 104               	.L13:
 105 00c4 0E94 0000 		call closelog
 106 00c8 1093 0000 		sts (syslog_stat)+1,r17
 107 00cc 0093 0000 		sts syslog_stat,r16
 108 00d0 F092 0000 		sts (syslog_fac)+1,r15
 109 00d4 E092 0000 		sts syslog_fac,r14
 110 00d8 2097      		sbiw r28,0
 111 00da 01F0      		breq .L14
 112 00dc 8881      		ld r24,Y
 113 00de 8823      		tst r24
 114 00e0 01F0      		breq .L14
GAS LISTING C:\Temp/ccCmj10L.s 			page 3


 115 00e2 FE01      		movw r30,r28
 116 00e4 0190      		ld __tmp_reg__,Z+
 117 00e6 0020      		tst __tmp_reg__
 118 00e8 01F4      		brne .-6
 119 00ea 3197      		sbiw r30,1
 120 00ec EC1B      		sub r30,r28
 121 00ee FD0B      		sbc r31,r29
 122 00f0 F093 0000 		sts (syslog_taglen)+1,r31
 123 00f4 E093 0000 		sts syslog_taglen,r30
 124 00f8 CF01      		movw r24,r30
 125 00fa 0196      		adiw r24,1
 126 00fc 0E94 0000 		call malloc
 127 0100 8093 0000 		sts syslog_tag,r24
 128 0104 9093 0000 		sts syslog_tag+1,r25
 129 0108 BE01      		movw r22,r28
 130 010a 0E94 0000 		call strcpy
 131               	.L14:
 132 010e 8091 0000 		lds r24,syslog_stat
 133 0112 83FF      		sbrs r24,3
 134 0114 00C0      		rjmp .L17
 135 0116 8091 0000 		lds r24,syslog_buf
 136 011a 9091 0000 		lds r25,(syslog_buf)+1
 137 011e 892B      		or r24,r25
 138 0120 01F4      		brne .L16
 139 0122 80E0      		ldi r24,lo8(256)
 140 0124 91E0      		ldi r25,hi8(256)
 141 0126 0E94 0000 		call malloc
 142 012a 8093 0000 		sts syslog_buf,r24
 143 012e 9093 0000 		sts syslog_buf+1,r25
 144               	.L16:
 145 0132 8091 0000 		lds r24,syslog_sock
 146 0136 9091 0000 		lds r25,(syslog_sock)+1
 147 013a 892B      		or r24,r25
 148 013c 01F4      		brne .L17
 149 013e 82E0      		ldi r24,lo8(514)
 150 0140 92E0      		ldi r25,hi8(514)
 151 0142 0E94 0000 		call NutUdpCreateSocket
 152 0146 9093 0000 		sts (syslog_sock)+1,r25
 153 014a 8093 0000 		sts syslog_sock,r24
 154               	.L17:
 155               	/* epilogue start */
 156 014e DF91      		pop r29
 157 0150 CF91      		pop r28
 158 0152 1F91      		pop r17
 159 0154 0F91      		pop r16
 160 0156 FF90      		pop r15
 161 0158 EF90      		pop r14
 162 015a 0895      		ret
 163               		.size	openlog, .-openlog
 164               		.data
 165               	.LC0:
 166 0000 3C25 643E 		.string	"<%d>%.3s%3d %02d:%02d:%02d %s "
 166      252E 3373 
 166      2533 6420 
 166      2530 3264 
 166      3A25 3032 
 167               	.LC1:
GAS LISTING C:\Temp/ccCmj10L.s 			page 4


 168 001f 3A20 00   		.string	": "
 169               	.LC2:
 170 0022 0A00      		.string	"\n"
 171               		.text
 172               	.global	vsyslog_P
 173               		.type	vsyslog_P, @function
 174               	vsyslog_P:
 175 015c AF92      		push r10
 176 015e BF92      		push r11
 177 0160 CF92      		push r12
 178 0162 DF92      		push r13
 179 0164 EF92      		push r14
 180 0166 FF92      		push r15
 181 0168 0F93      		push r16
 182 016a 1F93      		push r17
 183 016c DF93      		push r29
 184 016e CF93      		push r28
 185 0170 00D0      		rcall .
 186 0172 00D0      		rcall .
 187 0174 CDB7      		in r28,__SP_L__
 188 0176 DEB7      		in r29,__SP_H__
 189               	/* prologue: function */
 190               	/* frame size = 4 */
 191 0178 6B01      		movw r12,r22
 192 017a 5A01      		movw r10,r20
 193 017c 5FEF      		ldi r21,lo8(1023)
 194 017e E52E      		mov r14,r21
 195 0180 53E0      		ldi r21,hi8(1023)
 196 0182 F52E      		mov r15,r21
 197 0184 E822      		and r14,r24
 198 0186 F922      		and r15,r25
 199 0188 8770      		andi r24,lo8(7)
 200 018a 9070      		andi r25,hi8(7)
 201 018c 2091 0000 		lds r18,syslog_mask
 202 0190 3091 0000 		lds r19,(syslog_mask)+1
 203 0194 00C0      		rjmp 2f
 204 0196 3595      	1:	asr r19
 205 0198 2795      		ror r18
 206 019a 8A95      	2:	dec r24
 207 019c 02F4      		brpl 1b
 208 019e 20FF      		sbrs r18,0
 209 01a0 00C0      		rjmp .L24
 210 01a2 8091 0000 		lds r24,syslog_buf
 211 01a6 9091 0000 		lds r25,(syslog_buf)+1
 212 01aa 892B      		or r24,r25
 213 01ac 01F4      		brne .L20
 214 01ae 4091 0000 		lds r20,syslog_fac
 215 01b2 5091 0000 		lds r21,(syslog_fac)+1
 216 01b6 6091 0000 		lds r22,syslog_stat
 217 01ba 7091 0000 		lds r23,(syslog_stat)+1
 218 01be 6860      		ori r22,lo8(8)
 219 01c0 80E0      		ldi r24,lo8(0)
 220 01c2 90E0      		ldi r25,hi8(0)
 221 01c4 0E94 0000 		call openlog
 222               	.L20:
 223 01c8 C701      		movw r24,r14
 224 01ca 887F      		andi r24,lo8(1016)
GAS LISTING C:\Temp/ccCmj10L.s 			page 5


 225 01cc 9370      		andi r25,hi8(1016)
 226 01ce 892B      		or r24,r25
 227 01d0 01F4      		brne .L21
 228 01d2 8091 0000 		lds r24,syslog_fac
 229 01d6 9091 0000 		lds r25,(syslog_fac)+1
 230 01da E82A      		or r14,r24
 231 01dc F92A      		or r15,r25
 232               	.L21:
 233 01de 8E01      		movw r16,r28
 234 01e0 0F5F      		subi r16,lo8(-(1))
 235 01e2 1F4F      		sbci r17,hi8(-(1))
 236 01e4 C801      		movw r24,r16
 237 01e6 0E94 0000 		call time
 238 01ea C801      		movw r24,r16
 239 01ec 0E94 0000 		call localtime
 240 01f0 FC01      		movw r30,r24
 241 01f2 80E0      		ldi r24,lo8(confos+3)
 242 01f4 90E0      		ldi r25,hi8(confos+3)
 243 01f6 9F93      		push r25
 244 01f8 8F93      		push r24
 245 01fa 8081      		ld r24,Z
 246 01fc 9181      		ldd r25,Z+1
 247 01fe 9F93      		push r25
 248 0200 8F93      		push r24
 249 0202 8281      		ldd r24,Z+2
 250 0204 9381      		ldd r25,Z+3
 251 0206 9F93      		push r25
 252 0208 8F93      		push r24
 253 020a 8481      		ldd r24,Z+4
 254 020c 9581      		ldd r25,Z+5
 255 020e 9F93      		push r25
 256 0210 8F93      		push r24
 257 0212 8681      		ldd r24,Z+6
 258 0214 9781      		ldd r25,Z+7
 259 0216 9F93      		push r25
 260 0218 8F93      		push r24
 261 021a 2085      		ldd r18,Z+8
 262 021c 3185      		ldd r19,Z+9
 263 021e C901      		movw r24,r18
 264 0220 880F      		lsl r24
 265 0222 991F      		rol r25
 266 0224 820F      		add r24,r18
 267 0226 931F      		adc r25,r19
 268 0228 8050      		subi r24,lo8(-(mon_name))
 269 022a 9040      		sbci r25,hi8(-(mon_name))
 270 022c 9F93      		push r25
 271 022e 8F93      		push r24
 272 0230 FF92      		push r15
 273 0232 EF92      		push r14
 274 0234 80E0      		ldi r24,lo8(.LC0)
 275 0236 90E0      		ldi r25,hi8(.LC0)
 276 0238 9F93      		push r25
 277 023a 8F93      		push r24
 278 023c 8091 0000 		lds r24,syslog_buf
 279 0240 9091 0000 		lds r25,(syslog_buf)+1
 280 0244 9F93      		push r25
 281 0246 8F93      		push r24
GAS LISTING C:\Temp/ccCmj10L.s 			page 6


 282 0248 0E94 0000 		call sprintf
 283 024c 8091 0000 		lds r24,syslog_buf
 284 0250 9091 0000 		lds r25,syslog_buf+1
 285 0254 FC01      		movw r30,r24
 286 0256 DF01      		movw r26,r30
 287 0258 0D90      		ld __tmp_reg__,X+
 288 025a 0020      		tst __tmp_reg__
 289 025c 01F4      		brne .-6
 290 025e 8D01      		movw r16,r26
 291 0260 0150      		subi r16,lo8(-(-1))
 292 0262 1040      		sbci r17,hi8(-(-1))
 293 0264 0E1B      		sub r16,r30
 294 0266 1F0B      		sbc r17,r31
 295 0268 2091 0000 		lds r18,syslog_taglen
 296 026c 3091 0000 		lds r19,(syslog_taglen)+1
 297 0270 4DB7      		in r20,__SP_L__
 298 0272 5EB7      		in r21,__SP_H__
 299 0274 4E5E      		subi r20,lo8(-(18))
 300 0276 5F4F      		sbci r21,hi8(-(18))
 301 0278 0FB6      		in __tmp_reg__,__SREG__
 302 027a F894      		cli
 303 027c 5EBF      		out __SP_H__,r21
 304 027e 0FBE      		out __SREG__,__tmp_reg__
 305 0280 4DBF      		out __SP_L__,r20
 306 0282 2115      		cp r18,__zero_reg__
 307 0284 3105      		cpc r19,__zero_reg__
 308 0286 01F0      		breq .L22
 309 0288 020F      		add r16,r18
 310 028a 131F      		adc r17,r19
 311 028c 0E5F      		subi r16,lo8(-(2))
 312 028e 1F4F      		sbci r17,hi8(-(2))
 313 0290 0F3F      		cpi r16,255
 314 0292 1105      		cpc r17,__zero_reg__
 315 0294 01F0      		breq .+4
 316 0296 00F0      		brlo .+2
 317 0298 00C0      		rjmp .L24
 318 029a 6091 0000 		lds r22,syslog_tag
 319 029e 7091 0000 		lds r23,(syslog_tag)+1
 320 02a2 0E94 0000 		call strcat
 321 02a6 60E0      		ldi r22,lo8(.LC1)
 322 02a8 70E0      		ldi r23,hi8(.LC1)
 323 02aa 8091 0000 		lds r24,syslog_buf
 324 02ae 9091 0000 		lds r25,(syslog_buf)+1
 325 02b2 0E94 0000 		call strcat
 326               	.L22:
 327 02b6 C601      		movw r24,r12
 328 02b8 0E94 0000 		call strlen_P
 329 02bc 800F      		add r24,r16
 330 02be 911F      		adc r25,r17
 331 02c0 8F3F      		cpi r24,255
 332 02c2 9105      		cpc r25,__zero_reg__
 333 02c4 01F0      		breq .+4
 334 02c6 00F0      		brlo .+2
 335 02c8 00C0      		rjmp .L24
 336 02ca 8091 0000 		lds r24,syslog_buf
 337 02ce 9091 0000 		lds r25,(syslog_buf)+1
 338 02d2 A501      		movw r20,r10
GAS LISTING C:\Temp/ccCmj10L.s 			page 7


 339 02d4 B601      		movw r22,r12
 340 02d6 800F      		add r24,r16
 341 02d8 911F      		adc r25,r17
 342 02da 0E94 0000 		call vsprintf_P
 343 02de 1091 0000 		lds r17,syslog_buf
 344 02e2 0091 0000 		lds r16,syslog_buf+1
 345 02e6 E12F      		mov r30,r17
 346 02e8 F02F      		mov r31,r16
 347 02ea DF01      		movw r26,r30
 348 02ec 0D90      		ld __tmp_reg__,X+
 349 02ee 0020      		tst __tmp_reg__
 350 02f0 01F4      		brne .-6
 351 02f2 7D01      		movw r14,r26
 352 02f4 0894      		sec
 353 02f6 E108      		sbc r14,__zero_reg__
 354 02f8 F108      		sbc r15,__zero_reg__
 355 02fa EE1A      		sub r14,r30
 356 02fc FF0A      		sbc r15,r31
 357 02fe 8091 0000 		lds r24,syslog_stat
 358 0302 85FF      		sbrs r24,5
 359 0304 00C0      		rjmp .L23
 360 0306 8091 0000 		lds r24,__iob+4
 361 030a 9091 0000 		lds r25,(__iob+4)+1
 362 030e 0E94 0000 		call _fileno
 363 0312 A701      		movw r20,r14
 364 0314 612F      		mov r22,r17
 365 0316 702F      		mov r23,r16
 366 0318 0E94 0000 		call _write
 367 031c 8091 0000 		lds r24,__iob+4
 368 0320 9091 0000 		lds r25,(__iob+4)+1
 369 0324 0E94 0000 		call _fileno
 370 0328 41E0      		ldi r20,lo8(1)
 371 032a 50E0      		ldi r21,hi8(1)
 372 032c 60E0      		ldi r22,lo8(.LC2)
 373 032e 70E0      		ldi r23,hi8(.LC2)
 374 0330 0E94 0000 		call _write
 375               	.L23:
 376 0334 4091 0000 		lds r20,syslog_server
 377 0338 5091 0000 		lds r21,(syslog_server)+1
 378 033c 6091 0000 		lds r22,(syslog_server)+2
 379 0340 7091 0000 		lds r23,(syslog_server)+3
 380 0344 4115      		cp r20,__zero_reg__
 381 0346 5105      		cpc r21,__zero_reg__
 382 0348 6105      		cpc r22,__zero_reg__
 383 034a 7105      		cpc r23,__zero_reg__
 384 034c 01F0      		breq .L24
 385 034e 0091 0000 		lds r16,syslog_buf
 386 0352 1091 0000 		lds r17,(syslog_buf)+1
 387 0356 2091 0000 		lds r18,syslog_port
 388 035a 3091 0000 		lds r19,(syslog_port)+1
 389 035e 8091 0000 		lds r24,syslog_sock
 390 0362 9091 0000 		lds r25,(syslog_sock)+1
 391 0366 0E94 0000 		call NutUdpSendTo
 392               	.L24:
 393               	/* epilogue start */
 394 036a 0F90      		pop __tmp_reg__
 395 036c 0F90      		pop __tmp_reg__
GAS LISTING C:\Temp/ccCmj10L.s 			page 8


 396 036e 0F90      		pop __tmp_reg__
 397 0370 0F90      		pop __tmp_reg__
 398 0372 CF91      		pop r28
 399 0374 DF91      		pop r29
 400 0376 1F91      		pop r17
 401 0378 0F91      		pop r16
 402 037a FF90      		pop r15
 403 037c EF90      		pop r14
 404 037e DF90      		pop r13
 405 0380 CF90      		pop r12
 406 0382 BF90      		pop r11
 407 0384 AF90      		pop r10
 408 0386 0895      		ret
 409               		.size	vsyslog_P, .-vsyslog_P
 410               	.global	syslog_P
 411               		.type	syslog_P, @function
 412               	syslog_P:
 413 0388 DF93      		push r29
 414 038a CF93      		push r28
 415 038c CDB7      		in r28,__SP_L__
 416 038e DEB7      		in r29,__SP_H__
 417               	/* prologue: function */
 418               	/* frame size = 0 */
 419 0390 CE01      		movw r24,r28
 420 0392 0996      		adiw r24,9
 421 0394 AC01      		movw r20,r24
 422 0396 6F81      		ldd r22,Y+7
 423 0398 7885      		ldd r23,Y+8
 424 039a 8D81      		ldd r24,Y+5
 425 039c 9E81      		ldd r25,Y+6
 426 039e 0E94 0000 		call vsyslog_P
 427               	/* epilogue start */
 428 03a2 CF91      		pop r28
 429 03a4 DF91      		pop r29
 430 03a6 0895      		ret
 431               		.size	syslog_P, .-syslog_P
 432               	.global	vsyslog
 433               		.type	vsyslog, @function
 434               	vsyslog:
 435 03a8 AF92      		push r10
 436 03aa BF92      		push r11
 437 03ac CF92      		push r12
 438 03ae DF92      		push r13
 439 03b0 EF92      		push r14
 440 03b2 FF92      		push r15
 441 03b4 0F93      		push r16
 442 03b6 1F93      		push r17
 443 03b8 DF93      		push r29
 444 03ba CF93      		push r28
 445 03bc 00D0      		rcall .
 446 03be 00D0      		rcall .
 447 03c0 CDB7      		in r28,__SP_L__
 448 03c2 DEB7      		in r29,__SP_H__
 449               	/* prologue: function */
 450               	/* frame size = 4 */
 451 03c4 B62E      		mov r11,r22
 452 03c6 A72E      		mov r10,r23
GAS LISTING C:\Temp/ccCmj10L.s 			page 9


 453 03c8 6A01      		movw r12,r20
 454 03ca 7FEF      		ldi r23,lo8(1023)
 455 03cc E72E      		mov r14,r23
 456 03ce 73E0      		ldi r23,hi8(1023)
 457 03d0 F72E      		mov r15,r23
 458 03d2 E822      		and r14,r24
 459 03d4 F922      		and r15,r25
 460 03d6 8770      		andi r24,lo8(7)
 461 03d8 9070      		andi r25,hi8(7)
 462 03da 2091 0000 		lds r18,syslog_mask
 463 03de 3091 0000 		lds r19,(syslog_mask)+1
 464 03e2 00C0      		rjmp 2f
 465 03e4 3595      	1:	asr r19
 466 03e6 2795      		ror r18
 467 03e8 8A95      	2:	dec r24
 468 03ea 02F4      		brpl 1b
 469 03ec 20FF      		sbrs r18,0
 470 03ee 00C0      		rjmp .L33
 471 03f0 8091 0000 		lds r24,syslog_buf
 472 03f4 9091 0000 		lds r25,(syslog_buf)+1
 473 03f8 892B      		or r24,r25
 474 03fa 01F4      		brne .L29
 475 03fc 4091 0000 		lds r20,syslog_fac
 476 0400 5091 0000 		lds r21,(syslog_fac)+1
 477 0404 6091 0000 		lds r22,syslog_stat
 478 0408 7091 0000 		lds r23,(syslog_stat)+1
 479 040c 6860      		ori r22,lo8(8)
 480 040e 80E0      		ldi r24,lo8(0)
 481 0410 90E0      		ldi r25,hi8(0)
 482 0412 0E94 0000 		call openlog
 483               	.L29:
 484 0416 C701      		movw r24,r14
 485 0418 887F      		andi r24,lo8(1016)
 486 041a 9370      		andi r25,hi8(1016)
 487 041c 892B      		or r24,r25
 488 041e 01F4      		brne .L30
 489 0420 8091 0000 		lds r24,syslog_fac
 490 0424 9091 0000 		lds r25,(syslog_fac)+1
 491 0428 E82A      		or r14,r24
 492 042a F92A      		or r15,r25
 493               	.L30:
 494 042c 8E01      		movw r16,r28
 495 042e 0F5F      		subi r16,lo8(-(1))
 496 0430 1F4F      		sbci r17,hi8(-(1))
 497 0432 C801      		movw r24,r16
 498 0434 0E94 0000 		call time
 499 0438 C801      		movw r24,r16
 500 043a 0E94 0000 		call localtime
 501 043e FC01      		movw r30,r24
 502 0440 80E0      		ldi r24,lo8(confos+3)
 503 0442 90E0      		ldi r25,hi8(confos+3)
 504 0444 9F93      		push r25
 505 0446 8F93      		push r24
 506 0448 8081      		ld r24,Z
 507 044a 9181      		ldd r25,Z+1
 508 044c 9F93      		push r25
 509 044e 8F93      		push r24
GAS LISTING C:\Temp/ccCmj10L.s 			page 10


 510 0450 8281      		ldd r24,Z+2
 511 0452 9381      		ldd r25,Z+3
 512 0454 9F93      		push r25
 513 0456 8F93      		push r24
 514 0458 8481      		ldd r24,Z+4
 515 045a 9581      		ldd r25,Z+5
 516 045c 9F93      		push r25
 517 045e 8F93      		push r24
 518 0460 8681      		ldd r24,Z+6
 519 0462 9781      		ldd r25,Z+7
 520 0464 9F93      		push r25
 521 0466 8F93      		push r24
 522 0468 2085      		ldd r18,Z+8
 523 046a 3185      		ldd r19,Z+9
 524 046c C901      		movw r24,r18
 525 046e 880F      		lsl r24
 526 0470 991F      		rol r25
 527 0472 820F      		add r24,r18
 528 0474 931F      		adc r25,r19
 529 0476 8050      		subi r24,lo8(-(mon_name))
 530 0478 9040      		sbci r25,hi8(-(mon_name))
 531 047a 9F93      		push r25
 532 047c 8F93      		push r24
 533 047e FF92      		push r15
 534 0480 EF92      		push r14
 535 0482 80E0      		ldi r24,lo8(.LC0)
 536 0484 90E0      		ldi r25,hi8(.LC0)
 537 0486 9F93      		push r25
 538 0488 8F93      		push r24
 539 048a 8091 0000 		lds r24,syslog_buf
 540 048e 9091 0000 		lds r25,(syslog_buf)+1
 541 0492 9F93      		push r25
 542 0494 8F93      		push r24
 543 0496 0E94 0000 		call sprintf
 544 049a 8091 0000 		lds r24,syslog_buf
 545 049e 9091 0000 		lds r25,syslog_buf+1
 546 04a2 FC01      		movw r30,r24
 547 04a4 DF01      		movw r26,r30
 548 04a6 0D90      		ld __tmp_reg__,X+
 549 04a8 0020      		tst __tmp_reg__
 550 04aa 01F4      		brne .-6
 551 04ac 8D01      		movw r16,r26
 552 04ae 0150      		subi r16,lo8(-(-1))
 553 04b0 1040      		sbci r17,hi8(-(-1))
 554 04b2 0E1B      		sub r16,r30
 555 04b4 1F0B      		sbc r17,r31
 556 04b6 2091 0000 		lds r18,syslog_taglen
 557 04ba 3091 0000 		lds r19,(syslog_taglen)+1
 558 04be 4DB7      		in r20,__SP_L__
 559 04c0 5EB7      		in r21,__SP_H__
 560 04c2 4E5E      		subi r20,lo8(-(18))
 561 04c4 5F4F      		sbci r21,hi8(-(18))
 562 04c6 0FB6      		in __tmp_reg__,__SREG__
 563 04c8 F894      		cli
 564 04ca 5EBF      		out __SP_H__,r21
 565 04cc 0FBE      		out __SREG__,__tmp_reg__
 566 04ce 4DBF      		out __SP_L__,r20
GAS LISTING C:\Temp/ccCmj10L.s 			page 11


 567 04d0 2115      		cp r18,__zero_reg__
 568 04d2 3105      		cpc r19,__zero_reg__
 569 04d4 01F0      		breq .L31
 570 04d6 020F      		add r16,r18
 571 04d8 131F      		adc r17,r19
 572 04da 0E5F      		subi r16,lo8(-(2))
 573 04dc 1F4F      		sbci r17,hi8(-(2))
 574 04de 0F3F      		cpi r16,255
 575 04e0 1105      		cpc r17,__zero_reg__
 576 04e2 01F0      		breq .+4
 577 04e4 00F0      		brlo .+2
 578 04e6 00C0      		rjmp .L33
 579 04e8 6091 0000 		lds r22,syslog_tag
 580 04ec 7091 0000 		lds r23,(syslog_tag)+1
 581 04f0 0E94 0000 		call strcat
 582 04f4 60E0      		ldi r22,lo8(.LC1)
 583 04f6 70E0      		ldi r23,hi8(.LC1)
 584 04f8 8091 0000 		lds r24,syslog_buf
 585 04fc 9091 0000 		lds r25,(syslog_buf)+1
 586 0500 0E94 0000 		call strcat
 587               	.L31:
 588 0504 AB2D      		mov r26,r11
 589 0506 BA2D      		mov r27,r10
 590 0508 FD01      		movw r30,r26
 591 050a 0190      		ld __tmp_reg__,Z+
 592 050c 0020      		tst __tmp_reg__
 593 050e 01F4      		brne .-6
 594 0510 3197      		sbiw r30,1
 595 0512 EA1B      		sub r30,r26
 596 0514 FB0B      		sbc r31,r27
 597 0516 E00F      		add r30,r16
 598 0518 F11F      		adc r31,r17
 599 051a EF3F      		cpi r30,255
 600 051c F105      		cpc r31,__zero_reg__
 601 051e 01F0      		breq .+4
 602 0520 00F0      		brlo .+2
 603 0522 00C0      		rjmp .L33
 604 0524 8091 0000 		lds r24,syslog_buf
 605 0528 9091 0000 		lds r25,(syslog_buf)+1
 606 052c A601      		movw r20,r12
 607 052e 6B2D      		mov r22,r11
 608 0530 7A2D      		mov r23,r10
 609 0532 800F      		add r24,r16
 610 0534 911F      		adc r25,r17
 611 0536 0E94 0000 		call vsprintf
 612 053a 1091 0000 		lds r17,syslog_buf
 613 053e 0091 0000 		lds r16,syslog_buf+1
 614 0542 E12F      		mov r30,r17
 615 0544 F02F      		mov r31,r16
 616 0546 DF01      		movw r26,r30
 617 0548 0D90      		ld __tmp_reg__,X+
 618 054a 0020      		tst __tmp_reg__
 619 054c 01F4      		brne .-6
 620 054e 7D01      		movw r14,r26
 621 0550 0894      		sec
 622 0552 E108      		sbc r14,__zero_reg__
 623 0554 F108      		sbc r15,__zero_reg__
GAS LISTING C:\Temp/ccCmj10L.s 			page 12


 624 0556 EE1A      		sub r14,r30
 625 0558 FF0A      		sbc r15,r31
 626 055a 8091 0000 		lds r24,syslog_stat
 627 055e 85FF      		sbrs r24,5
 628 0560 00C0      		rjmp .L32
 629 0562 8091 0000 		lds r24,__iob+4
 630 0566 9091 0000 		lds r25,(__iob+4)+1
 631 056a 0E94 0000 		call _fileno
 632 056e A701      		movw r20,r14
 633 0570 612F      		mov r22,r17
 634 0572 702F      		mov r23,r16
 635 0574 0E94 0000 		call _write
 636 0578 8091 0000 		lds r24,__iob+4
 637 057c 9091 0000 		lds r25,(__iob+4)+1
 638 0580 0E94 0000 		call _fileno
 639 0584 41E0      		ldi r20,lo8(1)
 640 0586 50E0      		ldi r21,hi8(1)
 641 0588 60E0      		ldi r22,lo8(.LC2)
 642 058a 70E0      		ldi r23,hi8(.LC2)
 643 058c 0E94 0000 		call _write
 644               	.L32:
 645 0590 4091 0000 		lds r20,syslog_server
 646 0594 5091 0000 		lds r21,(syslog_server)+1
 647 0598 6091 0000 		lds r22,(syslog_server)+2
 648 059c 7091 0000 		lds r23,(syslog_server)+3
 649 05a0 4115      		cp r20,__zero_reg__
 650 05a2 5105      		cpc r21,__zero_reg__
 651 05a4 6105      		cpc r22,__zero_reg__
 652 05a6 7105      		cpc r23,__zero_reg__
 653 05a8 01F0      		breq .L33
 654 05aa 0091 0000 		lds r16,syslog_buf
 655 05ae 1091 0000 		lds r17,(syslog_buf)+1
 656 05b2 2091 0000 		lds r18,syslog_port
 657 05b6 3091 0000 		lds r19,(syslog_port)+1
 658 05ba 8091 0000 		lds r24,syslog_sock
 659 05be 9091 0000 		lds r25,(syslog_sock)+1
 660 05c2 0E94 0000 		call NutUdpSendTo
 661               	.L33:
 662               	/* epilogue start */
 663 05c6 0F90      		pop __tmp_reg__
 664 05c8 0F90      		pop __tmp_reg__
 665 05ca 0F90      		pop __tmp_reg__
 666 05cc 0F90      		pop __tmp_reg__
 667 05ce CF91      		pop r28
 668 05d0 DF91      		pop r29
 669 05d2 1F91      		pop r17
 670 05d4 0F91      		pop r16
 671 05d6 FF90      		pop r15
 672 05d8 EF90      		pop r14
 673 05da DF90      		pop r13
 674 05dc CF90      		pop r12
 675 05de BF90      		pop r11
 676 05e0 AF90      		pop r10
 677 05e2 0895      		ret
 678               		.size	vsyslog, .-vsyslog
 679               	.global	syslog
 680               		.type	syslog, @function
GAS LISTING C:\Temp/ccCmj10L.s 			page 13


 681               	syslog:
 682 05e4 DF93      		push r29
 683 05e6 CF93      		push r28
 684 05e8 CDB7      		in r28,__SP_L__
 685 05ea DEB7      		in r29,__SP_H__
 686               	/* prologue: function */
 687               	/* frame size = 0 */
 688 05ec CE01      		movw r24,r28
 689 05ee 0996      		adiw r24,9
 690 05f0 AC01      		movw r20,r24
 691 05f2 6F81      		ldd r22,Y+7
 692 05f4 7885      		ldd r23,Y+8
 693 05f6 8D81      		ldd r24,Y+5
 694 05f8 9E81      		ldd r25,Y+6
 695 05fa 0E94 0000 		call vsyslog
 696               	/* epilogue start */
 697 05fe CF91      		pop r28
 698 0600 DF91      		pop r29
 699 0602 0895      		ret
 700               		.size	syslog, .-syslog
 701               		.data
 702               		.type	syslog_fac, @object
 703               		.size	syslog_fac, 2
 704               	syslog_fac:
 705 0024 0800      		.word	8
 706               		.type	syslog_port, @object
 707               		.size	syslog_port, 2
 708               	syslog_port:
 709 0026 0202      		.word	514
 710               		.type	syslog_mask, @object
 711               		.size	syslog_mask, 2
 712               	syslog_mask:
 713 0028 FF00      		.word	255
 714               		.type	mon_name, @object
 715               		.size	mon_name, 37
 716               	mon_name:
 717 002a 4A61 6E46 		.string	"JanFebMarAprMayJunJulAugSepOctNovDec"
 717      6562 4D61 
 717      7241 7072 
 717      4D61 794A 
 717      756E 4A75 
 718               		.lcomm syslog_sock,2
 719               		.lcomm syslog_server,4
 720               		.lcomm syslog_stat,2
 721               		.lcomm syslog_taglen,2
 722               		.lcomm syslog_tag,2
 723               		.lcomm syslog_buf,2
GAS LISTING C:\Temp/ccCmj10L.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 syslog.c
  C:\Temp/ccCmj10L.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccCmj10L.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccCmj10L.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccCmj10L.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccCmj10L.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccCmj10L.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccCmj10L.s:13     .text:00000000 setlogmask
  C:\Temp/ccCmj10L.s:712    .data:00000028 syslog_mask
  C:\Temp/ccCmj10L.s:29     .text:00000018 setlogserver
  C:\Temp/ccCmj10L.s:718    .bss:00000002 syslog_server
  C:\Temp/ccCmj10L.s:708    .data:00000026 syslog_port
  C:\Temp/ccCmj10L.s:53     .text:0000004c closelog
  C:\Temp/ccCmj10L.s:722    .bss:0000000c syslog_buf
  C:\Temp/ccCmj10L.s:720    .bss:00000008 syslog_taglen
  C:\Temp/ccCmj10L.s:721    .bss:0000000a syslog_tag
                             .bss:00000000 syslog_sock
  C:\Temp/ccCmj10L.s:86     .text:0000009e openlog
  C:\Temp/ccCmj10L.s:719    .bss:00000006 syslog_stat
  C:\Temp/ccCmj10L.s:704    .data:00000024 syslog_fac
  C:\Temp/ccCmj10L.s:174    .text:0000015c vsyslog_P
  C:\Temp/ccCmj10L.s:716    .data:0000002a mon_name
  C:\Temp/ccCmj10L.s:412    .text:00000388 syslog_P
  C:\Temp/ccCmj10L.s:434    .text:000003a8 vsyslog
  C:\Temp/ccCmj10L.s:681    .text:000005e4 syslog

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
free
NutUdpDestroySocket
malloc
strcpy
NutUdpCreateSocket
time
localtime
confos
sprintf
strcat
strlen_P
vsprintf_P
__iob
_fileno
_write
NutUdpSendTo
vsprintf
