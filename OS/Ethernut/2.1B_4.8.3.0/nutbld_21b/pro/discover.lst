GAS LISTING C:\Temp/ccT5q50b.s 			page 1


   1               		.file	"discover.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutRegisterDiscoveryCallback
  12               		.type	NutRegisterDiscoveryCallback, @function
  13               	NutRegisterDiscoveryCallback:
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0000 2091 0000 		lds r18,discovery_callback
  17 0004 3091 0000 		lds r19,discovery_callback+1
  18 0008 9093 0000 		sts (discovery_callback)+1,r25
  19 000c 8093 0000 		sts discovery_callback,r24
  20 0010 C901      		movw r24,r18
  21               	/* epilogue start */
  22 0012 0895      		ret
  23               		.size	NutRegisterDiscoveryCallback, .-NutRegisterDiscoveryCallback
  24               		.data
  25               	.LC0:
  26 0000 7564 6973 		.string	"udisc"
  26      6300 
  27               		.text
  28               	.global	NutRegisterDiscovery
  29               		.type	NutRegisterDiscovery, @function
  30               	NutRegisterDiscovery:
  31 0014 EF92      		push r14
  32 0016 FF92      		push r15
  33 0018 0F93      		push r16
  34 001a 1F93      		push r17
  35               	/* prologue: function */
  36               	/* frame size = 0 */
  37 001c 7B01      		movw r14,r22
  38 001e 8C01      		movw r16,r24
  39 0020 8091 0000 		lds r24,tid.2296
  40 0024 9091 0000 		lds r25,(tid.2296)+1
  41 0028 892B      		or r24,r25
  42 002a 01F4      		brne .L4
  43 002c E092 0000 		sts disopt,r14
  44 0030 F092 0000 		sts (disopt)+1,r15
  45 0034 0093 0000 		sts (disopt)+2,r16
  46 0038 1093 0000 		sts (disopt)+3,r17
  47 003c 4115      		cp r20,__zero_reg__
  48 003e 5105      		cpc r21,__zero_reg__
  49 0040 01F4      		brne .L5
  50 0042 4EE4      		ldi r20,lo8(9806)
  51 0044 56E2      		ldi r21,hi8(9806)
  52               	.L5:
  53 0046 5093 0000 		sts (disopt+4)+1,r21
  54 004a 4093 0000 		sts disopt+4,r20
  55 004e 3093 0000 		sts (disopt+6)+1,r19
  56 0052 2093 0000 		sts disopt+6,r18
GAS LISTING C:\Temp/ccT5q50b.s 			page 2


  57 0056 20EE      		ldi r18,lo8(224)
  58 0058 30E0      		ldi r19,hi8(224)
  59 005a 40E0      		ldi r20,lo8(0)
  60 005c 50E0      		ldi r21,hi8(0)
  61 005e 60E0      		ldi r22,lo8(gs(DiscoveryResponder))
  62 0060 70E0      		ldi r23,hi8(gs(DiscoveryResponder))
  63 0062 80E0      		ldi r24,lo8(.LC0)
  64 0064 90E0      		ldi r25,hi8(.LC0)
  65 0066 0E94 0000 		call NutThreadCreate
  66 006a 9093 0000 		sts (tid.2296)+1,r25
  67 006e 8093 0000 		sts tid.2296,r24
  68 0072 892B      		or r24,r25
  69 0074 01F0      		breq .L4
  70 0076 20E0      		ldi r18,lo8(0)
  71 0078 30E0      		ldi r19,hi8(0)
  72 007a 00C0      		rjmp .L6
  73               	.L4:
  74 007c 2FEF      		ldi r18,lo8(-1)
  75 007e 3FEF      		ldi r19,hi8(-1)
  76               	.L6:
  77 0080 C901      		movw r24,r18
  78               	/* epilogue start */
  79 0082 1F91      		pop r17
  80 0084 0F91      		pop r16
  81 0086 FF90      		pop r15
  82 0088 EF90      		pop r14
  83 008a 0895      		ret
  84               		.size	NutRegisterDiscovery, .-NutRegisterDiscovery
  85               	.global	NutDiscoveryAnnTele
  86               		.type	NutDiscoveryAnnTele, @function
  87               	NutDiscoveryAnnTele:
  88 008c CF93      		push r28
  89 008e DF93      		push r29
  90               	/* prologue: function */
  91               	/* frame size = 0 */
  92 0090 FC01      		movw r30,r24
  93 0092 80E8      		ldi r24,lo8(-128)
  94 0094 DF01      		movw r26,r30
  95 0096 1D92      		st X+,__zero_reg__
  96 0098 8A95      	        dec r24
  97 009a 01F4      		brne .-6
  98 009c 8091 0000 		lds r24,xid
  99 00a0 9091 0000 		lds r25,(xid)+1
 100 00a4 A091 0000 		lds r26,(xid)+2
 101 00a8 B091 0000 		lds r27,(xid)+3
 102 00ac 8083      		st Z,r24
 103 00ae 9183      		std Z+1,r25
 104 00b0 A283      		std Z+2,r26
 105 00b2 B383      		std Z+3,r27
 106 00b4 81E0      		ldi r24,lo8(1)
 107 00b6 8483      		std Z+4,r24
 108 00b8 80E1      		ldi r24,lo8(16)
 109 00ba 8583      		std Z+5,r24
 110 00bc EF01      		movw r28,r30
 111 00be 2696      		adiw r28,6
 112 00c0 A0E0      		ldi r26,lo8(confnet+10)
 113 00c2 B0E0      		ldi r27,hi8(confnet+10)
GAS LISTING C:\Temp/ccT5q50b.s 			page 3


 114 00c4 86E0      		ldi r24,lo8(6)
 115               	.L9:
 116 00c6 0D90      		ld r0,X+
 117 00c8 0992      		st Y+,r0
 118 00ca 8150      		subi r24,lo8(-(-1))
 119 00cc 01F4      		brne .L9
 120 00ce 8091 0000 		lds r24,confnet+16
 121 00d2 9091 0000 		lds r25,(confnet+16)+1
 122 00d6 A091 0000 		lds r26,(confnet+16)+2
 123 00da B091 0000 		lds r27,(confnet+16)+3
 124 00de 8487      		std Z+12,r24
 125 00e0 9587      		std Z+13,r25
 126 00e2 A687      		std Z+14,r26
 127 00e4 B787      		std Z+15,r27
 128 00e6 8091 0000 		lds r24,confnet+20
 129 00ea 9091 0000 		lds r25,(confnet+20)+1
 130 00ee A091 0000 		lds r26,(confnet+20)+2
 131 00f2 B091 0000 		lds r27,(confnet+20)+3
 132 00f6 808B      		std Z+16,r24
 133 00f8 918B      		std Z+17,r25
 134 00fa A28B      		std Z+18,r26
 135 00fc B38B      		std Z+19,r27
 136 00fe 8091 0000 		lds r24,confnet+24
 137 0102 9091 0000 		lds r25,(confnet+24)+1
 138 0106 A091 0000 		lds r26,(confnet+24)+2
 139 010a B091 0000 		lds r27,(confnet+24)+3
 140 010e 848B      		std Z+20,r24
 141 0110 958B      		std Z+21,r25
 142 0112 A68B      		std Z+22,r26
 143 0114 B78B      		std Z+23,r27
 144 0116 8091 0000 		lds r24,confnet+28
 145 011a 9091 0000 		lds r25,(confnet+28)+1
 146 011e A091 0000 		lds r26,(confnet+28)+2
 147 0122 B091 0000 		lds r27,(confnet+28)+3
 148 0126 808F      		std Z+24,r24
 149 0128 918F      		std Z+25,r25
 150 012a A28F      		std Z+26,r26
 151 012c B38F      		std Z+27,r27
 152 012e DF01      		movw r26,r30
 153 0130 5C96      		adiw r26,28
 154 0132 E0E0      		ldi r30,lo8(confos+3)
 155 0134 F0E0      		ldi r31,hi8(confos+3)
 156 0136 88E0      		ldi r24,lo8(8)
 157               	.L10:
 158 0138 0190      		ld r0,Z+
 159 013a 0D92      		st X+,r0
 160 013c 8150      		subi r24,lo8(-(-1))
 161 013e 01F4      		brne .L10
 162 0140 84E2      		ldi r24,lo8(36)
 163 0142 90E0      		ldi r25,hi8(36)
 164               	/* epilogue start */
 165 0144 DF91      		pop r29
 166 0146 CF91      		pop r28
 167 0148 0895      		ret
 168               		.size	NutDiscoveryAnnTele, .-NutDiscoveryAnnTele
 169               	.global	DiscoveryResponder
 170               		.type	DiscoveryResponder, @function
GAS LISTING C:\Temp/ccT5q50b.s 			page 4


 171               	DiscoveryResponder:
 172 014a DF93      		push r29
 173 014c CF93      		push r28
 174 014e CDB7      		in r28,__SP_L__
 175 0150 DEB7      		in r29,__SP_H__
 176 0152 2897      		sbiw r28,8
 177 0154 0FB6      		in __tmp_reg__,__SREG__
 178 0156 F894      		cli
 179 0158 DEBF      		out __SP_H__,r29
 180 015a 0FBE      		out __SREG__,__tmp_reg__
 181 015c CDBF      		out __SP_L__,r28
 182               	/* prologue: function */
 183               	/* frame size = 8 */
 184 015e 00C0      		rjmp .L15
 185               	.L16:
 186 0160 68EE      		ldi r22,lo8(1000)
 187 0162 73E0      		ldi r23,hi8(1000)
 188 0164 80E0      		ldi r24,hlo8(1000)
 189 0166 90E0      		ldi r25,hhi8(1000)
 190 0168 0E94 0000 		call NutSleep
 191               	.L15:
 192 016c 80E8      		ldi r24,lo8(128)
 193 016e 90E0      		ldi r25,hi8(128)
 194 0170 0E94 0000 		call malloc
 195 0174 5C01      		movw r10,r24
 196 0176 0097      		sbiw r24,0
 197 0178 01F0      		breq .L16
 198 017a 00C0      		rjmp .L23
 199               	.L18:
 200 017c 68EE      		ldi r22,lo8(1000)
 201 017e 73E0      		ldi r23,hi8(1000)
 202 0180 80E0      		ldi r24,hlo8(1000)
 203 0182 90E0      		ldi r25,hhi8(1000)
 204 0184 0E94 0000 		call NutSleep
 205               	.L23:
 206 0188 8091 0000 		lds r24,disopt+4
 207 018c 9091 0000 		lds r25,(disopt+4)+1
 208 0190 0E94 0000 		call NutUdpCreateSocket
 209 0194 4C01      		movw r8,r24
 210 0196 0097      		sbiw r24,0
 211 0198 01F0      		breq .L18
 212 019a 80E8      		ldi r24,lo8(384)
 213 019c 91E0      		ldi r25,hi8(384)
 214 019e 9C83      		std Y+4,r25
 215 01a0 8B83      		std Y+3,r24
 216 01a2 22E0      		ldi r18,lo8(2)
 217 01a4 30E0      		ldi r19,hi8(2)
 218 01a6 AE01      		movw r20,r28
 219 01a8 4D5F      		subi r20,lo8(-(3))
 220 01aa 5F4F      		sbci r21,hi8(-(3))
 221 01ac 62E0      		ldi r22,lo8(4098)
 222 01ae 70E1      		ldi r23,hi8(4098)
 223 01b0 C401      		movw r24,r8
 224 01b2 0E94 0000 		call NutUdpSetSockOpt
 225 01b6 E090 0000 		lds r14,confnet+12
 226 01ba F090 0000 		lds r15,(confnet+12)+1
 227 01be 0091 0000 		lds r16,(confnet+12)+2
GAS LISTING C:\Temp/ccT5q50b.s 			page 5


 228 01c2 1091 0000 		lds r17,(confnet+12)+3
 229 01c6 E092 0000 		sts xid,r14
 230 01ca F092 0000 		sts (xid)+1,r15
 231 01ce 0093 0000 		sts (xid)+2,r16
 232 01d2 1093 0000 		sts (xid)+3,r17
 233 01d6 0E94 0000 		call NutGetTickCount
 234 01da 9B01      		movw r18,r22
 235 01dc AC01      		movw r20,r24
 236 01de 2E0D      		add r18,r14
 237 01e0 3F1D      		adc r19,r15
 238 01e2 401F      		adc r20,r16
 239 01e4 511F      		adc r21,r17
 240 01e6 2093 0000 		sts xid,r18
 241 01ea 3093 0000 		sts (xid)+1,r19
 242 01ee 4093 0000 		sts (xid)+2,r20
 243 01f2 5093 0000 		sts (xid)+3,r21
 244 01f6 8091 0000 		lds r24,disopt+6
 245 01fa 80FF      		sbrs r24,0
 246 01fc 00C0      		rjmp .L19
 247 01fe 3770      		andi r19,hi8(2047)
 248 0200 4070      		andi r20,hlo8(2047)
 249 0202 5070      		andi r21,hhi8(2047)
 250 0204 2C50      		subi r18,lo8(-(500))
 251 0206 3E4F      		sbci r19,hi8(-(500))
 252 0208 4F4F      		sbci r20,hlo8(-(500))
 253 020a 5F4F      		sbci r21,hhi8(-(500))
 254 020c CA01      		movw r24,r20
 255 020e B901      		movw r22,r18
 256 0210 0E94 0000 		call NutSleep
 257 0214 C501      		movw r24,r10
 258 0216 0E94 0000 		call NutDiscoveryAnnTele
 259 021a 7C01      		movw r14,r24
 260 021c 1816      		cp __zero_reg__,r24
 261 021e 1906      		cpc __zero_reg__,r25
 262 0220 04F4      		brge .L19
 263 0222 2091 0000 		lds r18,disopt+4
 264 0226 3091 0000 		lds r19,(disopt+4)+1
 265 022a 8501      		movw r16,r10
 266 022c 4FEF      		ldi r20,lo8(-1)
 267 022e 5FEF      		ldi r21,hi8(-1)
 268 0230 6FEF      		ldi r22,hlo8(-1)
 269 0232 7FEF      		ldi r23,hhi8(-1)
 270 0234 C401      		movw r24,r8
 271 0236 0E94 0000 		call NutUdpSendTo
 272               	.L19:
 273 023a 1E01      		movw r2,r28
 274 023c 0894      		sec
 275 023e 211C      		adc r2,__zero_reg__
 276 0240 311C      		adc r3,__zero_reg__
 277 0242 4424      		clr r4
 278 0244 4A94      		dec r4
 279 0246 542C      		mov r5,r4
 280 0248 3201      		movw r6,r4
 281               	.L24:
 282 024a CC24      		clr r12
 283 024c DD24      		clr r13
 284 024e 7601      		movw r14,r12
GAS LISTING C:\Temp/ccT5q50b.s 			page 6


 285 0250 00E8      		ldi r16,lo8(128)
 286 0252 10E0      		ldi r17,hi8(128)
 287 0254 9501      		movw r18,r10
 288 0256 A101      		movw r20,r2
 289 0258 BE01      		movw r22,r28
 290 025a 6B5F      		subi r22,lo8(-(5))
 291 025c 7F4F      		sbci r23,hi8(-(5))
 292 025e C401      		movw r24,r8
 293 0260 0E94 0000 		call NutUdpReceiveFrom
 294 0264 8C01      		movw r16,r24
 295 0266 8D81      		ldd r24,Y+5
 296 0268 9E81      		ldd r25,Y+6
 297 026a AF81      		ldd r26,Y+7
 298 026c B885      		ldd r27,Y+8
 299 026e C090 0000 		lds r12,disopt
 300 0272 D090 0000 		lds r13,(disopt)+1
 301 0276 E090 0000 		lds r14,(disopt)+2
 302 027a F090 0000 		lds r15,(disopt)+3
 303 027e C822      		and r12,r24
 304 0280 D922      		and r13,r25
 305 0282 EA22      		and r14,r26
 306 0284 FB22      		and r15,r27
 307 0286 C816      		cp r12,r24
 308 0288 D906      		cpc r13,r25
 309 028a EA06      		cpc r14,r26
 310 028c FB06      		cpc r15,r27
 311 028e 01F0      		breq .+2
 312 0290 00C0      		rjmp .L20
 313 0292 1016      		cp __zero_reg__,r16
 314 0294 1106      		cpc __zero_reg__,r17
 315 0296 04F0      		brlt .+2
 316 0298 00C0      		rjmp .L20
 317 029a E091 0000 		lds r30,discovery_callback
 318 029e F091 0000 		lds r31,(discovery_callback)+1
 319 02a2 3097      		sbiw r30,0
 320 02a4 01F0      		breq .L20
 321 02a6 4981      		ldd r20,Y+1
 322 02a8 5A81      		ldd r21,Y+2
 323 02aa 9501      		movw r18,r10
 324 02ac C701      		movw r24,r14
 325 02ae B601      		movw r22,r12
 326 02b0 0995      		icall
 327 02b2 7C01      		movw r14,r24
 328 02b4 1816      		cp __zero_reg__,r24
 329 02b6 1906      		cpc __zero_reg__,r25
 330 02b8 04F4      		brge .L20
 331 02ba 8091 0000 		lds r24,confnet+16
 332 02be 9091 0000 		lds r25,(confnet+16)+1
 333 02c2 A091 0000 		lds r26,(confnet+16)+2
 334 02c6 B091 0000 		lds r27,(confnet+16)+3
 335 02ca 2D81      		ldd r18,Y+5
 336 02cc 3E81      		ldd r19,Y+6
 337 02ce 4F81      		ldd r20,Y+7
 338 02d0 5885      		ldd r21,Y+8
 339 02d2 8227      		eor r24,r18
 340 02d4 9327      		eor r25,r19
 341 02d6 A427      		eor r26,r20
GAS LISTING C:\Temp/ccT5q50b.s 			page 7


 342 02d8 B527      		eor r27,r21
 343 02da 2091 0000 		lds r18,confnet+20
 344 02de 3091 0000 		lds r19,(confnet+20)+1
 345 02e2 4091 0000 		lds r20,(confnet+20)+2
 346 02e6 5091 0000 		lds r21,(confnet+20)+3
 347 02ea 8223      		and r24,r18
 348 02ec 9323      		and r25,r19
 349 02ee A423      		and r26,r20
 350 02f0 B523      		and r27,r21
 351 02f2 0097      		sbiw r24,0
 352 02f4 A105      		cpc r26,__zero_reg__
 353 02f6 B105      		cpc r27,__zero_reg__
 354 02f8 01F0      		breq .L21
 355 02fa 4D82      		std Y+5,r4
 356 02fc 5E82      		std Y+6,r5
 357 02fe 6F82      		std Y+7,r6
 358 0300 7886      		std Y+8,r7
 359               	.L21:
 360 0302 2091 0000 		lds r18,disopt+4
 361 0306 3091 0000 		lds r19,(disopt+4)+1
 362 030a 4D81      		ldd r20,Y+5
 363 030c 5E81      		ldd r21,Y+6
 364 030e 6F81      		ldd r22,Y+7
 365 0310 7885      		ldd r23,Y+8
 366 0312 8501      		movw r16,r10
 367 0314 C401      		movw r24,r8
 368 0316 0E94 0000 		call NutUdpSendTo
 369               	.L20:
 370 031a 64E6      		ldi r22,lo8(100)
 371 031c 70E0      		ldi r23,hi8(100)
 372 031e 80E0      		ldi r24,hlo8(100)
 373 0320 90E0      		ldi r25,hhi8(100)
 374 0322 0E94 0000 		call NutSleep
 375 0326 00C0      		rjmp .L24
 376               		.size	DiscoveryResponder, .-DiscoveryResponder
 377               	.global	NutDiscoveryAppConf
 378               		.type	NutDiscoveryAppConf, @function
 379               	NutDiscoveryAppConf:
 380 0328 CF93      		push r28
 381 032a DF93      		push r29
 382               	/* prologue: function */
 383               	/* frame size = 0 */
 384 032c EC01      		movw r28,r24
 385 032e E0E0      		ldi r30,lo8(confos+3)
 386 0330 F0E0      		ldi r31,hi8(confos+3)
 387 0332 80E1      		ldi r24,lo8(16)
 388 0334 DF01      		movw r26,r30
 389 0336 1D92      		st X+,__zero_reg__
 390 0338 8A95      	        dec r24
 391 033a 01F4      		brne .-6
 392 033c BE01      		movw r22,r28
 393 033e 645E      		subi r22,lo8(-(28))
 394 0340 7F4F      		sbci r23,hi8(-(28))
 395 0342 4FE0      		ldi r20,lo8(15)
 396 0344 50E0      		ldi r21,hi8(15)
 397 0346 CF01      		movw r24,r30
 398 0348 0E94 0000 		call strncpy
GAS LISTING C:\Temp/ccT5q50b.s 			page 8


 399 034c 0E94 0000 		call NutSaveConfig
 400 0350 A0E0      		ldi r26,lo8(confnet+10)
 401 0352 B0E0      		ldi r27,hi8(confnet+10)
 402 0354 FE01      		movw r30,r28
 403 0356 3696      		adiw r30,6
 404 0358 86E0      		ldi r24,lo8(6)
 405               	.L26:
 406 035a 0190      		ld r0,Z+
 407 035c 0D92      		st X+,r0
 408 035e 8150      		subi r24,lo8(-(-1))
 409 0360 01F4      		brne .L26
 410 0362 8C85      		ldd r24,Y+12
 411 0364 9D85      		ldd r25,Y+13
 412 0366 AE85      		ldd r26,Y+14
 413 0368 BF85      		ldd r27,Y+15
 414 036a 8093 0000 		sts confnet+16,r24
 415 036e 9093 0000 		sts (confnet+16)+1,r25
 416 0372 A093 0000 		sts (confnet+16)+2,r26
 417 0376 B093 0000 		sts (confnet+16)+3,r27
 418 037a 8889      		ldd r24,Y+16
 419 037c 9989      		ldd r25,Y+17
 420 037e AA89      		ldd r26,Y+18
 421 0380 BB89      		ldd r27,Y+19
 422 0382 8093 0000 		sts confnet+20,r24
 423 0386 9093 0000 		sts (confnet+20)+1,r25
 424 038a A093 0000 		sts (confnet+20)+2,r26
 425 038e B093 0000 		sts (confnet+20)+3,r27
 426 0392 8C89      		ldd r24,Y+20
 427 0394 9D89      		ldd r25,Y+21
 428 0396 AE89      		ldd r26,Y+22
 429 0398 BF89      		ldd r27,Y+23
 430 039a 8093 0000 		sts confnet+24,r24
 431 039e 9093 0000 		sts (confnet+24)+1,r25
 432 03a2 A093 0000 		sts (confnet+24)+2,r26
 433 03a6 B093 0000 		sts (confnet+24)+3,r27
 434 03aa 888D      		ldd r24,Y+24
 435 03ac 998D      		ldd r25,Y+25
 436 03ae AA8D      		ldd r26,Y+26
 437 03b0 BB8D      		ldd r27,Y+27
 438 03b2 8093 0000 		sts confnet+28,r24
 439 03b6 9093 0000 		sts (confnet+28)+1,r25
 440 03ba A093 0000 		sts (confnet+28)+2,r26
 441 03be B093 0000 		sts (confnet+28)+3,r27
 442 03c2 0E94 0000 		call NutNetSaveConfig
 443               	/* epilogue start */
 444 03c6 DF91      		pop r29
 445 03c8 CF91      		pop r28
 446 03ca 0895      		ret
 447               		.size	NutDiscoveryAppConf, .-NutDiscoveryAppConf
 448               		.type	NutDiscoveryHandler, @function
 449               	NutDiscoveryHandler:
 450 03cc EF92      		push r14
 451 03ce FF92      		push r15
 452 03d0 0F93      		push r16
 453 03d2 1F93      		push r17
 454 03d4 CF93      		push r28
 455 03d6 DF93      		push r29
GAS LISTING C:\Temp/ccT5q50b.s 			page 9


 456               	/* prologue: function */
 457               	/* frame size = 0 */
 458 03d8 E901      		movw r28,r18
 459 03da 0432      		cpi r16,36
 460 03dc 1105      		cpc r17,__zero_reg__
 461 03de 00F0      		brlo .L30
 462 03e0 8C81      		ldd r24,Y+4
 463 03e2 8823      		tst r24
 464 03e4 01F4      		brne .L31
 465 03e6 C901      		movw r24,r18
 466 03e8 0E94 0000 		call NutDiscoveryAnnTele
 467 03ec 00C0      		rjmp .L34
 468               	.L31:
 469 03ee 8230      		cpi r24,lo8(2)
 470 03f0 01F4      		brne .L30
 471 03f2 E880      		ld r14,Y
 472 03f4 F980      		ldd r15,Y+1
 473 03f6 0A81      		ldd r16,Y+2
 474 03f8 1B81      		ldd r17,Y+3
 475 03fa 8091 0000 		lds r24,xid
 476 03fe 9091 0000 		lds r25,(xid)+1
 477 0402 A091 0000 		lds r26,(xid)+2
 478 0406 B091 0000 		lds r27,(xid)+3
 479 040a E816      		cp r14,r24
 480 040c F906      		cpc r15,r25
 481 040e 0A07      		cpc r16,r26
 482 0410 1B07      		cpc r17,r27
 483 0412 01F4      		brne .L30
 484 0414 8D81      		ldd r24,Y+5
 485 0416 8031      		cpi r24,lo8(16)
 486 0418 01F4      		brne .L30
 487 041a 0E94 0000 		call NutGetTickCount
 488 041e E60E      		add r14,r22
 489 0420 F71E      		adc r15,r23
 490 0422 081F      		adc r16,r24
 491 0424 191F      		adc r17,r25
 492 0426 E092 0000 		sts xid,r14
 493 042a F092 0000 		sts (xid)+1,r15
 494 042e 0093 0000 		sts (xid)+2,r16
 495 0432 1093 0000 		sts (xid)+3,r17
 496 0436 CE01      		movw r24,r28
 497 0438 0E94 0000 		call NutDiscoveryAppConf
 498               	.L34:
 499 043c 9C01      		movw r18,r24
 500 043e 00C0      		rjmp .L32
 501               	.L30:
 502 0440 2FEF      		ldi r18,lo8(-1)
 503 0442 3FEF      		ldi r19,hi8(-1)
 504               	.L32:
 505 0444 C901      		movw r24,r18
 506               	/* epilogue start */
 507 0446 DF91      		pop r29
 508 0448 CF91      		pop r28
 509 044a 1F91      		pop r17
 510 044c 0F91      		pop r16
 511 044e FF90      		pop r15
 512 0450 EF90      		pop r14
GAS LISTING C:\Temp/ccT5q50b.s 			page 10


 513 0452 0895      		ret
 514               		.size	NutDiscoveryHandler, .-NutDiscoveryHandler
 515               		.lcomm tid.2296,2
 516               		.data
 517               		.type	discovery_callback, @object
 518               		.size	discovery_callback, 2
 519               	discovery_callback:
 520 0006 0000      		.word	gs(NutDiscoveryHandler)
 521               		.lcomm disopt,8
 522               		.lcomm xid,4
GAS LISTING C:\Temp/ccT5q50b.s 			page 11


DEFINED SYMBOLS
                            *ABS*:00000000 discover.c
  C:\Temp/ccT5q50b.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccT5q50b.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccT5q50b.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccT5q50b.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccT5q50b.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccT5q50b.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccT5q50b.s:13     .text:00000000 NutRegisterDiscoveryCallback
  C:\Temp/ccT5q50b.s:519    .data:00000006 discovery_callback
  C:\Temp/ccT5q50b.s:30     .text:00000014 NutRegisterDiscovery
                             .bss:00000000 tid.2296
  C:\Temp/ccT5q50b.s:515    .bss:00000002 disopt
  C:\Temp/ccT5q50b.s:171    .text:0000014a DiscoveryResponder
  C:\Temp/ccT5q50b.s:87     .text:0000008c NutDiscoveryAnnTele
  C:\Temp/ccT5q50b.s:521    .bss:0000000a xid
  C:\Temp/ccT5q50b.s:379    .text:00000328 NutDiscoveryAppConf
  C:\Temp/ccT5q50b.s:449    .text:000003cc NutDiscoveryHandler

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutThreadCreate
confnet
confos
NutSleep
malloc
NutUdpCreateSocket
NutUdpSetSockOpt
NutGetTickCount
NutUdpSendTo
NutUdpReceiveFrom
strncpy
NutSaveConfig
NutNetSaveConfig
