GAS LISTING C:\Temp/cc4BFvoW.s 			page 1


   1               		.file	"context_gcc.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	NutThreadEntry, @function
  12               	NutThreadEntry:
  13               	/* prologue: naked */
  14               	/* frame size = 0 */
  15               	/* #APP */
  16               	 ;  209 "../../nut/arch/avr/os/context_gcc.c" 1
  17 0000 9F91      		pop r25
  18 0002 8F91      		pop r24
  19 0004 0F90      		pop __tmp_reg__
  20 0006 0BBE      		out 59, __tmp_reg__
  21 0008 0F90      		pop __tmp_reg__
  22 000a 0FBE      		out 63, __tmp_reg__
  23 000c 1F90      		pop __zero_reg__
  24 000e 1895      		reti
  25               		
  26               	 ;  0 "" 2
  27               	/* epilogue start */
  28               	/* #NOAPP */
  29               		.size	NutThreadEntry, .-NutThreadEntry
  30               	.global	NutThreadSwitch
  31               		.type	NutThreadSwitch, @function
  32               	NutThreadSwitch:
  33               	/* prologue: naked */
  34               	/* frame size = 0 */
  35               	/* #APP */
  36               	 ;  239 "../../nut/arch/avr/os/context_gcc.c" 1
  37 0010 2F92      		push r2
  38 0012 3F92      		push r3
  39 0014 4F92      		push r4
  40 0016 5F92      		push r5
  41 0018 6F92      		push r6
  42 001a 7F92      		push r7
  43 001c 8F92      		push r8
  44 001e 9F92      		push r9
  45 0020 AF92      		push r10
  46 0022 BF92      		push r11
  47 0024 CF92      		push r12
  48 0026 DF92      		push r13
  49 0028 EF92      		push r14
  50 002a FF92      		push r15
  51 002c 0F93      		push r16
  52 002e 1F93      		push r17
  53 0030 CF93      		push r28
  54 0032 DF93      		push r29
  55 0034 8DB7      		in r24, 61
  56 0036 9EB7      		in r25, 62
  57               		
GAS LISTING C:\Temp/cc4BFvoW.s 			page 2


  58               	 ;  0 "" 2
  59               	/* #NOAPP */
  60 0038 E091 0000 		lds r30,runningThread
  61 003c F091 0000 		lds r31,(runningThread)+1
  62 0040 918B      		std Z+17,r25
  63 0042 808B      		std Z+16,r24
  64               	/* #APP */
  65               	 ;  268 "../../nut/arch/avr/os/context_gcc.c" 1
  66               		.global thread_start
  67               	thread_start:
  68               		
  69               	 ;  0 "" 2
  70               	/* #NOAPP */
  71 0044 E091 0000 		lds r30,runQueue
  72 0048 F091 0000 		lds r31,(runQueue)+1
  73 004c F093 0000 		sts (runningThread)+1,r31
  74 0050 E093 0000 		sts runningThread,r30
  75 0054 81E0      		ldi r24,lo8(1)
  76 0056 8787      		std Z+15,r24
  77 0058 8089      		ldd r24,Z+16
  78 005a 9189      		ldd r25,Z+17
  79               	/* #APP */
  80               	 ;  276 "../../nut/arch/avr/os/context_gcc.c" 1
  81 005c 8DBF      		out 61, r24
  82 005e 9EBF      		out 62, r25
  83 0060 DF91      		pop r29
  84 0062 CF91      		pop r28
  85 0064 1F91      		pop r17
  86 0066 0F91      		pop r16
  87 0068 FF90      		pop r15
  88 006a EF90      		pop r14
  89 006c DF90      		pop r13
  90 006e CF90      		pop r12
  91 0070 BF90      		pop r11
  92 0072 AF90      		pop r10
  93 0074 9F90      		pop r9
  94 0076 8F90      		pop r8
  95 0078 7F90      		pop r7
  96 007a 6F90      		pop r6
  97 007c 5F90      		pop r5
  98 007e 4F90      		pop r4
  99 0080 3F90      		pop r3
 100 0082 2F90      		pop r2
 101 0084 0895      		ret
 102               		
 103               	 ;  0 "" 2
 104               	/* epilogue start */
 105               	/* #NOAPP */
 106               		.size	NutThreadSwitch, .-NutThreadSwitch
 107               	.global	NutThreadCreate
 108               		.type	NutThreadCreate, @function
 109               	NutThreadCreate:
 110 0086 AF92      		push r10
 111 0088 BF92      		push r11
 112 008a CF92      		push r12
 113 008c DF92      		push r13
 114 008e EF92      		push r14
GAS LISTING C:\Temp/cc4BFvoW.s 			page 3


 115 0090 FF92      		push r15
 116 0092 0F93      		push r16
 117 0094 1F93      		push r17
 118 0096 CF93      		push r28
 119 0098 DF93      		push r29
 120               	/* prologue: function */
 121               	/* frame size = 0 */
 122 009a F82E      		mov r15,r24
 123 009c E92E      		mov r14,r25
 124 009e 6B01      		movw r12,r22
 125 00a0 B42E      		mov r11,r20
 126 00a2 A52E      		mov r10,r21
 127 00a4 E901      		movw r28,r18
 128 00a6 B901      		movw r22,r18
 129 00a8 675E      		subi r22,lo8(-(25))
 130 00aa 7F4F      		sbci r23,hi8(-(25))
 131 00ac 80E0      		ldi r24,lo8(heapFreeList)
 132 00ae 90E0      		ldi r25,hi8(heapFreeList)
 133 00b0 0E94 0000 		call NutHeapRootAlloc
 134 00b4 FC01      		movw r30,r24
 135 00b6 0097      		sbiw r24,0
 136 00b8 01F4      		brne .L6
 137 00ba 20E0      		ldi r18,lo8(0)
 138 00bc 30E0      		ldi r19,hi8(0)
 139 00be 00C0      		rjmp .L7
 140               	.L6:
 141 00c0 C80F      		add r28,r24
 142 00c2 D91F      		adc r29,r25
 143 00c4 AE01      		movw r20,r28
 144 00c6 4750      		subi r20,lo8(-(-7))
 145 00c8 5040      		sbci r21,hi8(-(-7))
 146 00ca BE01      		movw r22,r28
 147 00cc 6B51      		subi r22,lo8(-(-27))
 148 00ce 7040      		sbci r23,hi8(-(-27))
 149 00d0 8E01      		movw r16,r28
 150 00d2 0A5F      		subi r16,lo8(-(6))
 151 00d4 1F4F      		sbci r17,hi8(-(6))
 152 00d6 8F2D      		mov r24,r15
 153 00d8 9E2D      		mov r25,r14
 154 00da 9C01      		movw r18,r24
 155 00dc 88E0      		ldi r24,lo8(8)
 156               	.L8:
 157 00de D901      		movw r26,r18
 158 00e0 0D90      		ld r0,X+
 159 00e2 9D01      		movw r18,r26
 160 00e4 D801      		movw r26,r16
 161 00e6 0D92      		st X+,r0
 162 00e8 8D01      		movw r16,r26
 163 00ea 8150      		subi r24,lo8(-(-1))
 164 00ec 01F4      		brne .L8
 165 00ee 1E86      		std Y+14,__zero_reg__
 166 00f0 6150      		subi r22,lo8(-(-1))
 167 00f2 7040      		sbci r23,hi8(-(-1))
 168 00f4 798B      		std Y+17,r23
 169 00f6 688B      		std Y+16,r22
 170 00f8 6F5F      		subi r22,lo8(-(1))
 171 00fa 7F4F      		sbci r23,hi8(-(1))
GAS LISTING C:\Temp/cc4BFvoW.s 			page 4


 172 00fc FC8B      		std Y+20,r31
 173 00fe EB8B      		std Y+19,r30
 174 0100 8FEE      		ldi r24,lo8(-559038737)
 175 0102 9EEB      		ldi r25,hi8(-559038737)
 176 0104 ADEA      		ldi r26,hlo8(-559038737)
 177 0106 BEED      		ldi r27,hhi8(-559038737)
 178 0108 8083      		st Z,r24
 179 010a 9183      		std Z+1,r25
 180 010c A283      		std Z+2,r26
 181 010e B383      		std Z+3,r27
 182 0110 8483      		std Z+4,r24
 183 0112 9583      		std Z+5,r25
 184 0114 A683      		std Z+6,r26
 185 0116 B783      		std Z+7,r27
 186 0118 8087      		std Z+8,r24
 187 011a 9187      		std Z+9,r25
 188 011c A287      		std Z+10,r26
 189 011e B387      		std Z+11,r27
 190 0120 8487      		std Z+12,r24
 191 0122 9587      		std Z+13,r25
 192 0124 A687      		std Z+14,r26
 193 0126 B787      		std Z+15,r27
 194 0128 80E4      		ldi r24,lo8(64)
 195 012a 8A8B      		std Y+18,r24
 196 012c FA01      		movw r30,r20
 197 012e D582      		std Z+5,r13
 198 0130 C682      		std Z+6,r12
 199 0132 80E8      		ldi r24,lo8(-128)
 200 0134 8383      		std Z+3,r24
 201 0136 1282      		std Z+2,__zero_reg__
 202 0138 1482      		std Z+4,__zero_reg__
 203 013a B182      		std Z+1,r11
 204 013c A082      		st Z,r10
 205 013e 80E0      		ldi r24,lo8(gs(NutThreadEntry))
 206 0140 90E0      		ldi r25,hi8(gs(NutThreadEntry))
 207 0142 DB01      		movw r26,r22
 208 0144 5296      		adiw r26,18
 209 0146 9C93      		st X,r25
 210 0148 5297      		sbiw r26,18
 211 014a 5396      		adiw r26,19
 212 014c 8C93      		st X,r24
 213 014e 8091 0000 		lds r24,nutThreadList
 214 0152 9091 0000 		lds r25,(nutThreadList)+1
 215 0156 9983      		std Y+1,r25
 216 0158 8883      		st Y,r24
 217 015a D093 0000 		sts (nutThreadList)+1,r29
 218 015e C093 0000 		sts nutThreadList,r28
 219 0162 82E0      		ldi r24,lo8(2)
 220 0164 8F87      		std Y+15,r24
 221 0166 1E8A      		std Y+22,__zero_reg__
 222 0168 1D8A      		std Y+21,__zero_reg__
 223 016a 188E      		std Y+24,__zero_reg__
 224 016c 1F8A      		std Y+23,__zero_reg__
 225 016e 60E0      		ldi r22,lo8(runQueue)
 226 0170 70E0      		ldi r23,hi8(runQueue)
 227 0172 CE01      		movw r24,r28
 228 0174 0E94 0000 		call NutThreadAddPriQueue
GAS LISTING C:\Temp/cc4BFvoW.s 			page 5


 229 0178 E091 0000 		lds r30,runningThread
 230 017c F091 0000 		lds r31,(runningThread)+1
 231 0180 3097      		sbiw r30,0
 232 0182 01F4      		brne .L9
 233               	/* #APP */
 234               	 ;  415 "../../nut/arch/avr/os/context_gcc.c" 1
 235 0184 0FB6      		in  __tmp_reg__, __SREG__
 236 0186 F894      		cli
 237 0188 0F92      		push __tmp_reg__
 238               		
 239               	 ;  0 "" 2
 240               	 ;  416 "../../nut/arch/avr/os/context_gcc.c" 1
 241 018a 00C0      		rjmp thread_start
 242               		
 243               	 ;  0 "" 2
 244               	/* #NOAPP */
 245               	.L9:
 246 018c 8091 0000 		lds r24,runQueue
 247 0190 9091 0000 		lds r25,(runQueue)+1
 248 0194 E817      		cp r30,r24
 249 0196 F907      		cpc r31,r25
 250 0198 01F0      		breq .L10
 251 019a 82E0      		ldi r24,lo8(2)
 252 019c 8787      		std Z+15,r24
 253               	/* #APP */
 254               	 ;  431 "../../nut/arch/avr/os/context_gcc.c" 1
 255 019e 0FB6      		in  __tmp_reg__, __SREG__
 256 01a0 F894      		cli
 257 01a2 0F92      		push __tmp_reg__
 258               		
 259               	 ;  0 "" 2
 260               	/* #NOAPP */
 261 01a4 0E94 0000 		call NutThreadSwitch
 262               	/* #APP */
 263               	 ;  433 "../../nut/arch/avr/os/context_gcc.c" 1
 264 01a8 0F90      		pop __tmp_reg__
 265 01aa 0FBE      		out __SREG__, __tmp_reg__
 266               		
 267               	 ;  0 "" 2
 268               	/* #NOAPP */
 269               	.L10:
 270 01ac 9E01      		movw r18,r28
 271               	.L7:
 272 01ae C901      		movw r24,r18
 273               	/* epilogue start */
 274 01b0 DF91      		pop r29
 275 01b2 CF91      		pop r28
 276 01b4 1F91      		pop r17
 277 01b6 0F91      		pop r16
 278 01b8 FF90      		pop r15
 279 01ba EF90      		pop r14
 280 01bc DF90      		pop r13
 281 01be CF90      		pop r12
 282 01c0 BF90      		pop r11
 283 01c2 AF90      		pop r10
 284 01c4 0895      		ret
 285               		.size	NutThreadCreate, .-NutThreadCreate
GAS LISTING C:\Temp/cc4BFvoW.s 			page 6


GAS LISTING C:\Temp/cc4BFvoW.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 context_gcc.c
  C:\Temp/cc4BFvoW.s:2      *ABS*:0000003f __SREG__
  C:\Temp/cc4BFvoW.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/cc4BFvoW.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/cc4BFvoW.s:5      *ABS*:00000034 __CCP__
  C:\Temp/cc4BFvoW.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/cc4BFvoW.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/cc4BFvoW.s:12     .text:00000000 NutThreadEntry
  C:\Temp/cc4BFvoW.s:32     .text:00000010 NutThreadSwitch
  C:\Temp/cc4BFvoW.s:67     .text:00000044 thread_start
  C:\Temp/cc4BFvoW.s:109    .text:00000086 NutThreadCreate

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
runningThread
runQueue
heapFreeList
NutHeapRootAlloc
nutThreadList
NutThreadAddPriQueue
