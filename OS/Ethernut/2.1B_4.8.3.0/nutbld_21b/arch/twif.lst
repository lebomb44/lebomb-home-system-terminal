GAS LISTING C:\Temp/ccJWJ8uy.s 			page 1


   1               		.file	"twif.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	TwInterrupt, @function
  12               	TwInterrupt:
  13               	/* prologue: function */
  14               	/* frame size = 0 */
  15 0000 5091 7400 		lds r21,116
  16 0004 4091 7100 		lds r20,113
  17 0008 487F      		andi r20,lo8(-8)
  18 000a 4036      		cpi r20,lo8(96)
  19 000c 01F4      		brne .+2
  20 000e 00C0      		rjmp .L11
  21 0010 4136      		cpi r20,lo8(97)
  22 0012 00F4      		brsh .L18
  23 0014 4832      		cpi r20,lo8(40)
  24 0016 01F4      		brne .+2
  25 0018 00C0      		rjmp .L5
  26 001a 4932      		cpi r20,lo8(41)
  27 001c 00F4      		brsh .L19
  28 001e 4031      		cpi r20,lo8(16)
  29 0020 01F4      		brne .+2
  30 0022 00C0      		rjmp .L4
  31 0024 4131      		cpi r20,lo8(17)
  32 0026 00F4      		brsh .L20
  33 0028 4423      		tst r20
  34 002a 01F4      		brne .+2
  35 002c 00C0      		rjmp .L3
  36 002e 4830      		cpi r20,lo8(8)
  37 0030 01F0      		breq .+2
  38 0032 00C0      		rjmp .L62
  39 0034 00C0      		rjmp .L4
  40               	.L20:
  41 0036 4831      		cpi r20,lo8(24)
  42 0038 01F4      		brne .+2
  43 003a 00C0      		rjmp .L5
  44 003c 4032      		cpi r20,lo8(32)
  45 003e 01F0      		breq .+2
  46 0040 00C0      		rjmp .L62
  47 0042 00C0      		rjmp .L6
  48               	.L19:
  49 0044 4034      		cpi r20,lo8(64)
  50 0046 01F4      		brne .+2
  51 0048 00C0      		rjmp .L8
  52 004a 4134      		cpi r20,lo8(65)
  53 004c 00F4      		brsh .L21
  54 004e 4033      		cpi r20,lo8(48)
  55 0050 01F4      		brne .+2
  56 0052 00C0      		rjmp .L6
  57 0054 4833      		cpi r20,lo8(56)
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 2


  58 0056 01F0      		breq .+2
  59 0058 00C0      		rjmp .L62
  60 005a 00C0      		rjmp .L83
  61               	.L21:
  62 005c 4035      		cpi r20,lo8(80)
  63 005e 01F4      		brne .+2
  64 0060 00C0      		rjmp .L9
  65 0062 4835      		cpi r20,lo8(88)
  66 0064 01F4      		brne .+2
  67 0066 00C0      		rjmp .L10
  68 0068 4834      		cpi r20,lo8(72)
  69 006a 01F0      		breq .+2
  70 006c 00C0      		rjmp .L62
  71 006e 00C0      		rjmp .L6
  72               	.L18:
  73 0070 4839      		cpi r20,lo8(-104)
  74 0072 01F4      		brne .+2
  75 0074 00C0      		rjmp .L13
  76 0076 4939      		cpi r20,lo8(-103)
  77 0078 00F4      		brsh .L22
  78 007a 4837      		cpi r20,lo8(120)
  79 007c 01F4      		brne .+2
  80 007e 00C0      		rjmp .L11
  81 0080 4937      		cpi r20,lo8(121)
  82 0082 00F4      		brsh .L23
  83 0084 4836      		cpi r20,lo8(104)
  84 0086 01F4      		brne .+2
  85 0088 00C0      		rjmp .L11
  86 008a 4037      		cpi r20,lo8(112)
  87 008c 01F0      		breq .+2
  88 008e 00C0      		rjmp .L62
  89 0090 00C0      		rjmp .L11
  90               	.L23:
  91 0092 4838      		cpi r20,lo8(-120)
  92 0094 01F4      		brne .+2
  93 0096 00C0      		rjmp .L13
  94 0098 4039      		cpi r20,lo8(-112)
  95 009a 01F4      		brne .+2
  96 009c 00C0      		rjmp .L12
  97 009e 4038      		cpi r20,lo8(-128)
  98 00a0 01F0      		breq .+2
  99 00a2 00C0      		rjmp .L62
 100 00a4 00C0      		rjmp .L12
 101               	.L22:
 102 00a6 403B      		cpi r20,lo8(-80)
 103 00a8 01F4      		brne .+2
 104 00aa 00C0      		rjmp .L15
 105 00ac 413B      		cpi r20,lo8(-79)
 106 00ae 00F4      		brsh .L24
 107 00b0 403A      		cpi r20,lo8(-96)
 108 00b2 01F4      		brne .+2
 109 00b4 00C0      		rjmp .L14
 110 00b6 483A      		cpi r20,lo8(-88)
 111 00b8 01F0      		breq .+2
 112 00ba 00C0      		rjmp .L62
 113 00bc 00C0      		rjmp .L15
 114               	.L24:
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 3


 115 00be 403C      		cpi r20,lo8(-64)
 116 00c0 01F4      		brne .+2
 117 00c2 00C0      		rjmp .L17
 118 00c4 483C      		cpi r20,lo8(-56)
 119 00c6 01F4      		brne .+2
 120 00c8 00C0      		rjmp .L17
 121 00ca 483B      		cpi r20,lo8(-72)
 122 00cc 01F0      		breq .+2
 123 00ce 00C0      		rjmp .L62
 124 00d0 00C0      		rjmp .L16
 125               	.L4:
 126 00d2 81E0      		ldi r24,lo8(1)
 127 00d4 8093 0000 		sts tw_if_bsy,r24
 128 00d8 1092 0000 		sts (tw_mt_idx)+1,__zero_reg__
 129 00dc 1092 0000 		sts tw_mt_idx,__zero_reg__
 130 00e0 1092 0000 		sts (tw_mr_idx)+1,__zero_reg__
 131 00e4 1092 0000 		sts tw_mr_idx,__zero_reg__
 132 00e8 8091 0000 		lds r24,tw_mt_len
 133 00ec 9091 0000 		lds r25,(tw_mt_len)+1
 134 00f0 2091 0000 		lds r18,tw_mm_sla
 135 00f4 892B      		or r24,r25
 136 00f6 01F4      		brne .L63
 137               	.L25:
 138 00f8 2160      		ori r18,lo8(1)
 139               	.L63:
 140 00fa 2093 7300 		sts 115,r18
 141               	.L71:
 142 00fe 5074      		andi r21,lo8(64)
 143 0100 5568      		ori r21,lo8(-123)
 144 0102 00C0      		rjmp .L68
 145               	.L5:
 146 0104 2091 0000 		lds r18,tw_mt_idx
 147 0108 3091 0000 		lds r19,(tw_mt_idx)+1
 148 010c 8091 0000 		lds r24,tw_mt_len
 149 0110 9091 0000 		lds r25,(tw_mt_len)+1
 150 0114 2817      		cp r18,r24
 151 0116 3907      		cpc r19,r25
 152 0118 00F4      		brsh .L27
 153 011a 8091 0000 		lds r24,tw_mt_idx
 154 011e 9091 0000 		lds r25,(tw_mt_idx)+1
 155 0122 E091 0000 		lds r30,tw_mt_buf
 156 0126 F091 0000 		lds r31,(tw_mt_buf)+1
 157 012a E80F      		add r30,r24
 158 012c F91F      		adc r31,r25
 159 012e 8081      		ld r24,Z
 160 0130 8093 7300 		sts 115,r24
 161 0134 8091 0000 		lds r24,tw_mt_idx
 162 0138 9091 0000 		lds r25,(tw_mt_idx)+1
 163 013c 0196      		adiw r24,1
 164 013e 9093 0000 		sts (tw_mt_idx)+1,r25
 165 0142 8093 0000 		sts tw_mt_idx,r24
 166 0146 00C0      		rjmp .L71
 167               	.L27:
 168 0148 1092 0000 		sts (tw_mt_len)+1,__zero_reg__
 169 014c 1092 0000 		sts tw_mt_len,__zero_reg__
 170 0150 8091 0000 		lds r24,tw_mr_siz
 171 0154 9091 0000 		lds r25,(tw_mr_siz)+1
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 4


 172 0158 892B      		or r24,r25
 173 015a 01F0      		breq .L6
 174 015c 5074      		andi r21,lo8(64)
 175 015e 556A      		ori r21,lo8(-91)
 176 0160 00C0      		rjmp .L68
 177               	.L6:
 178 0162 4032      		cpi r20,lo8(32)
 179 0164 01F0      		breq .L28
 180 0166 4834      		cpi r20,lo8(72)
 181 0168 01F0      		breq .+2
 182 016a 00C0      		rjmp .L81
 183               	.L28:
 184 016c 84E0      		ldi r24,lo8(4)
 185 016e 8093 0000 		sts tw_mm_err,r24
 186 0172 1092 0000 		sts (tw_mt_len)+1,__zero_reg__
 187 0176 1092 0000 		sts tw_mt_len,__zero_reg__
 188 017a 00C0      		rjmp .L82
 189               	.L83:
 190 017c 8091 7400 		lds r24,116
 191 0180 8062      		ori r24,lo8(32)
 192 0182 00C0      		rjmp .L67
 193               	.L9:
 194 0184 8091 0000 		lds r24,tw_mr_idx
 195 0188 9091 0000 		lds r25,(tw_mr_idx)+1
 196 018c 2091 7300 		lds r18,115
 197 0190 E091 0000 		lds r30,tw_mr_buf
 198 0194 F091 0000 		lds r31,(tw_mr_buf)+1
 199 0198 E80F      		add r30,r24
 200 019a F91F      		adc r31,r25
 201 019c 2083      		st Z,r18
 202 019e 8091 0000 		lds r24,tw_mr_idx
 203 01a2 9091 0000 		lds r25,(tw_mr_idx)+1
 204 01a6 0196      		adiw r24,1
 205 01a8 9093 0000 		sts (tw_mr_idx)+1,r25
 206 01ac 8093 0000 		sts tw_mr_idx,r24
 207               	.L8:
 208 01b0 8091 0000 		lds r24,tw_mr_idx
 209 01b4 9091 0000 		lds r25,(tw_mr_idx)+1
 210 01b8 2091 0000 		lds r18,tw_mr_siz
 211 01bc 3091 0000 		lds r19,(tw_mr_siz)+1
 212 01c0 0196      		adiw r24,1
 213 01c2 8217      		cp r24,r18
 214 01c4 9307      		cpc r25,r19
 215 01c6 00F0      		brlo .+2
 216 01c8 00C0      		rjmp .L73
 217 01ca 00C0      		rjmp .L74
 218               	.L10:
 219 01cc 8091 0000 		lds r24,tw_mr_idx
 220 01d0 9091 0000 		lds r25,(tw_mr_idx)+1
 221 01d4 2091 7300 		lds r18,115
 222 01d8 E091 0000 		lds r30,tw_mr_buf
 223 01dc F091 0000 		lds r31,(tw_mr_buf)+1
 224 01e0 E80F      		add r30,r24
 225 01e2 F91F      		adc r31,r25
 226 01e4 2083      		st Z,r18
 227 01e6 8091 0000 		lds r24,tw_mr_idx
 228 01ea 9091 0000 		lds r25,(tw_mr_idx)+1
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 5


 229 01ee 0196      		adiw r24,1
 230 01f0 9093 0000 		sts (tw_mr_idx)+1,r25
 231 01f4 8093 0000 		sts tw_mr_idx,r24
 232               	.L82:
 233 01f8 1092 0000 		sts (tw_mr_siz)+1,__zero_reg__
 234 01fc 1092 0000 		sts tw_mr_siz,__zero_reg__
 235               	.L81:
 236 0200 E091 0000 		lds r30,tw_mm_que
 237 0204 F091 0000 		lds r31,(tw_mm_que)+1
 238 0208 3097      		sbiw r30,0
 239 020a 01F4      		brne .L35
 240 020c 8FEF      		ldi r24,lo8(-1)
 241 020e 9FEF      		ldi r25,hi8(-1)
 242 0210 9093 0000 		sts (tw_mm_que)+1,r25
 243 0214 8093 0000 		sts tw_mm_que,r24
 244 0218 00C0      		rjmp .L36
 245               	.L35:
 246 021a 8FEF      		ldi r24,hi8(-1)
 247 021c EF3F      		cpi r30,lo8(-1)
 248 021e F807      		cpc r31,r24
 249 0220 01F0      		breq .L36
 250 0222 8481      		ldd r24,Z+4
 251 0224 9581      		ldd r25,Z+5
 252 0226 0196      		adiw r24,1
 253 0228 9583      		std Z+5,r25
 254 022a 8483      		std Z+4,r24
 255               	.L36:
 256 022c 8091 0000 		lds r24,tw_sr_siz
 257 0230 9091 0000 		lds r25,(tw_sr_siz)+1
 258 0234 892B      		or r24,r25
 259 0236 01F0      		breq .L37
 260 0238 85ED      		ldi r24,lo8(-43)
 261 023a 00C0      		rjmp .L67
 262               	.L37:
 263 023c 85E9      		ldi r24,lo8(-107)
 264 023e 00C0      		rjmp .L67
 265               	.L11:
 266 0240 8091 0000 		lds r24,tw_sr_siz
 267 0244 9091 0000 		lds r25,(tw_sr_siz)+1
 268 0248 892B      		or r24,r25
 269 024a 01F4      		brne .+2
 270 024c 00C0      		rjmp .L73
 271 024e 81E0      		ldi r24,lo8(1)
 272 0250 8093 0000 		sts tw_if_bsy,r24
 273 0254 8091 7300 		lds r24,115
 274 0258 8093 0000 		sts tw_sm_sla,r24
 275 025c 85EC      		ldi r24,lo8(-59)
 276 025e 8093 7400 		sts 116,r24
 277 0262 1092 0000 		sts (tw_sr_idx)+1,__zero_reg__
 278 0266 1092 0000 		sts tw_sr_idx,__zero_reg__
 279 026a 0895      		ret
 280               	.L12:
 281 026c 2091 0000 		lds r18,tw_sr_idx
 282 0270 3091 0000 		lds r19,(tw_sr_idx)+1
 283 0274 8091 0000 		lds r24,tw_sr_siz
 284 0278 9091 0000 		lds r25,(tw_sr_siz)+1
 285 027c 2817      		cp r18,r24
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 6


 286 027e 3907      		cpc r19,r25
 287 0280 00F4      		brsh .L40
 288 0282 8091 0000 		lds r24,tw_sr_idx
 289 0286 9091 0000 		lds r25,(tw_sr_idx)+1
 290 028a 2091 7300 		lds r18,115
 291 028e E091 0000 		lds r30,tw_sr_buf
 292 0292 F091 0000 		lds r31,(tw_sr_buf)+1
 293 0296 E80F      		add r30,r24
 294 0298 F91F      		adc r31,r25
 295 029a 2083      		st Z,r18
 296 029c 8091 0000 		lds r24,tw_sr_idx
 297 02a0 9091 0000 		lds r25,(tw_sr_idx)+1
 298 02a4 0196      		adiw r24,1
 299 02a6 9093 0000 		sts (tw_sr_idx)+1,r25
 300 02aa 8093 0000 		sts tw_sr_idx,r24
 301 02ae 00C0      		rjmp .L41
 302               	.L40:
 303 02b0 1092 0000 		sts (tw_sr_siz)+1,__zero_reg__
 304 02b4 1092 0000 		sts tw_sr_siz,__zero_reg__
 305               	.L41:
 306 02b8 8091 0000 		lds r24,tw_sr_siz
 307 02bc 9091 0000 		lds r25,(tw_sr_siz)+1
 308 02c0 892B      		or r24,r25
 309 02c2 01F0      		breq .+2
 310 02c4 00C0      		rjmp .L74
 311               	.L13:
 312 02c6 8091 0000 		lds r24,tw_mt_len
 313 02ca 9091 0000 		lds r25,(tw_mt_len)+1
 314 02ce 892B      		or r24,r25
 315 02d0 01F4      		brne .L42
 316 02d2 8091 0000 		lds r24,tw_mr_siz
 317 02d6 9091 0000 		lds r25,(tw_mr_siz)+1
 318 02da 892B      		or r24,r25
 319 02dc 01F0      		breq .L43
 320               	.L42:
 321 02de 8091 7400 		lds r24,116
 322 02e2 8066      		ori r24,lo8(96)
 323 02e4 00C0      		rjmp .L70
 324               	.L43:
 325 02e6 8091 7400 		lds r24,116
 326 02ea 8064      		ori r24,lo8(64)
 327 02ec 00C0      		rjmp .L70
 328               	.L14:
 329 02ee E091 0000 		lds r30,tw_sr_que
 330 02f2 F091 0000 		lds r31,(tw_sr_que)+1
 331 02f6 3097      		sbiw r30,0
 332 02f8 01F0      		breq .L44
 333 02fa 8091 0000 		lds r24,tw_sm_err
 334 02fe 8823      		tst r24
 335 0300 01F0      		breq .L45
 336               	.L44:
 337 0302 8091 0000 		lds r24,tw_mt_len
 338 0306 9091 0000 		lds r25,(tw_mt_len)+1
 339 030a 892B      		or r24,r25
 340 030c 01F4      		brne .L46
 341 030e 8091 0000 		lds r24,tw_mr_siz
 342 0312 9091 0000 		lds r25,(tw_mr_siz)+1
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 7


 343 0316 892B      		or r24,r25
 344 0318 01F0      		breq .L47
 345               	.L46:
 346 031a 85EA      		ldi r24,lo8(-91)
 347 031c 00C0      		rjmp .L67
 348               	.L47:
 349 031e 85E8      		ldi r24,lo8(-123)
 350 0320 00C0      		rjmp .L67
 351               	.L45:
 352 0322 8FEF      		ldi r24,hi8(-1)
 353 0324 EF3F      		cpi r30,lo8(-1)
 354 0326 F807      		cpc r31,r24
 355 0328 01F0      		breq .L49
 356 032a 8481      		ldd r24,Z+4
 357 032c 9581      		ldd r25,Z+5
 358 032e 0196      		adiw r24,1
 359 0330 9583      		std Z+5,r25
 360 0332 8483      		std Z+4,r24
 361               	.L49:
 362 0334 1092 0000 		sts (tw_sr_siz)+1,__zero_reg__
 363 0338 1092 0000 		sts tw_sr_siz,__zero_reg__
 364 033c 5E77      		andi r21,lo8(126)
 365               	.L68:
 366 033e 5093 7400 		sts 116,r21
 367 0342 0895      		ret
 368               	.L15:
 369 0344 81E0      		ldi r24,lo8(1)
 370 0346 8093 0000 		sts tw_if_bsy,r24
 371 034a 1092 0000 		sts (tw_st_idx)+1,__zero_reg__
 372 034e 1092 0000 		sts tw_st_idx,__zero_reg__
 373               	.L16:
 374 0352 2091 0000 		lds r18,tw_st_idx
 375 0356 3091 0000 		lds r19,(tw_st_idx)+1
 376 035a 8091 0000 		lds r24,tw_st_len
 377 035e 9091 0000 		lds r25,(tw_st_len)+1
 378 0362 2817      		cp r18,r24
 379 0364 3907      		cpc r19,r25
 380 0366 00F4      		brsh .L50
 381 0368 8091 0000 		lds r24,tw_st_idx
 382 036c 9091 0000 		lds r25,(tw_st_idx)+1
 383 0370 E091 0000 		lds r30,tw_st_buf
 384 0374 F091 0000 		lds r31,(tw_st_buf)+1
 385 0378 E80F      		add r30,r24
 386 037a F91F      		adc r31,r25
 387 037c 8081      		ld r24,Z
 388 037e 8093 7300 		sts 115,r24
 389 0382 8091 0000 		lds r24,tw_st_idx
 390 0386 9091 0000 		lds r25,(tw_st_idx)+1
 391 038a 0196      		adiw r24,1
 392 038c 9093 0000 		sts (tw_st_idx)+1,r25
 393 0390 8093 0000 		sts tw_st_idx,r24
 394 0394 2091 0000 		lds r18,tw_st_idx
 395 0398 3091 0000 		lds r19,(tw_st_idx)+1
 396 039c 8091 0000 		lds r24,tw_st_len
 397 03a0 9091 0000 		lds r25,(tw_st_len)+1
 398 03a4 2817      		cp r18,r24
 399 03a6 3907      		cpc r19,r25
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 8


 400 03a8 00F4      		brsh .L51
 401               	.L74:
 402 03aa 85EC      		ldi r24,lo8(-59)
 403 03ac 00C0      		rjmp .L70
 404               	.L51:
 405 03ae 1092 0000 		sts (tw_st_len)+1,__zero_reg__
 406 03b2 1092 0000 		sts tw_st_len,__zero_reg__
 407 03b6 00C0      		rjmp .L73
 408               	.L50:
 409 03b8 1092 7300 		sts 115,__zero_reg__
 410               	.L73:
 411 03bc 85E8      		ldi r24,lo8(-123)
 412               	.L70:
 413 03be 8093 7400 		sts 116,r24
 414 03c2 0895      		ret
 415               	.L17:
 416 03c4 E091 0000 		lds r30,tw_st_que
 417 03c8 F091 0000 		lds r31,(tw_st_que)+1
 418 03cc 3097      		sbiw r30,0
 419 03ce 01F4      		brne .L52
 420 03d0 8FEF      		ldi r24,lo8(-1)
 421 03d2 9FEF      		ldi r25,hi8(-1)
 422 03d4 9093 0000 		sts (tw_st_que)+1,r25
 423 03d8 8093 0000 		sts tw_st_que,r24
 424 03dc 00C0      		rjmp .L53
 425               	.L52:
 426 03de 8FEF      		ldi r24,hi8(-1)
 427 03e0 EF3F      		cpi r30,lo8(-1)
 428 03e2 F807      		cpc r31,r24
 429 03e4 01F0      		breq .L53
 430 03e6 8481      		ldd r24,Z+4
 431 03e8 9581      		ldd r25,Z+5
 432 03ea 0196      		adiw r24,1
 433 03ec 9583      		std Z+5,r25
 434 03ee 8483      		std Z+4,r24
 435               	.L53:
 436 03f0 8091 0000 		lds r24,tw_mt_len
 437 03f4 9091 0000 		lds r25,(tw_mt_len)+1
 438 03f8 892B      		or r24,r25
 439 03fa 01F4      		brne .L54
 440 03fc 8091 0000 		lds r24,tw_mr_siz
 441 0400 9091 0000 		lds r25,(tw_mr_siz)+1
 442 0404 892B      		or r24,r25
 443 0406 01F0      		breq .L55
 444               	.L54:
 445 0408 85EE      		ldi r24,lo8(-27)
 446 040a 00C0      		rjmp .L67
 447               	.L55:
 448 040c 85EC      		ldi r24,lo8(-59)
 449               	.L67:
 450 040e 8093 7400 		sts 116,r24
 451 0412 1092 0000 		sts tw_if_bsy,__zero_reg__
 452 0416 0895      		ret
 453               	.L3:
 454 0418 8091 7400 		lds r24,116
 455 041c 8061      		ori r24,lo8(16)
 456 041e 8093 7400 		sts 116,r24
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 9


 457 0422 1092 0000 		sts tw_if_bsy,__zero_reg__
 458 0426 82E0      		ldi r24,lo8(2)
 459 0428 8093 0000 		sts tw_mm_err,r24
 460 042c 8093 0000 		sts tw_sm_err,r24
 461 0430 E091 0000 		lds r30,tw_sr_que
 462 0434 F091 0000 		lds r31,(tw_sr_que)+1
 463 0438 3097      		sbiw r30,0
 464 043a 01F4      		brne .L57
 465 043c 8FEF      		ldi r24,lo8(-1)
 466 043e 9FEF      		ldi r25,hi8(-1)
 467 0440 9093 0000 		sts (tw_sr_que)+1,r25
 468 0444 8093 0000 		sts tw_sr_que,r24
 469 0448 00C0      		rjmp .L58
 470               	.L57:
 471 044a 8FEF      		ldi r24,hi8(-1)
 472 044c EF3F      		cpi r30,lo8(-1)
 473 044e F807      		cpc r31,r24
 474 0450 01F0      		breq .L58
 475 0452 8481      		ldd r24,Z+4
 476 0454 9581      		ldd r25,Z+5
 477 0456 0196      		adiw r24,1
 478 0458 9583      		std Z+5,r25
 479 045a 8483      		std Z+4,r24
 480               	.L58:
 481 045c E091 0000 		lds r30,tw_st_que
 482 0460 F091 0000 		lds r31,(tw_st_que)+1
 483 0464 3097      		sbiw r30,0
 484 0466 01F4      		brne .L59
 485 0468 8FEF      		ldi r24,lo8(-1)
 486 046a 9FEF      		ldi r25,hi8(-1)
 487 046c 9093 0000 		sts (tw_st_que)+1,r25
 488 0470 8093 0000 		sts tw_st_que,r24
 489 0474 00C0      		rjmp .L60
 490               	.L59:
 491 0476 8FEF      		ldi r24,hi8(-1)
 492 0478 EF3F      		cpi r30,lo8(-1)
 493 047a F807      		cpc r31,r24
 494 047c 01F0      		breq .L60
 495 047e 8481      		ldd r24,Z+4
 496 0480 9581      		ldd r25,Z+5
 497 0482 0196      		adiw r24,1
 498 0484 9583      		std Z+5,r25
 499 0486 8483      		std Z+4,r24
 500               	.L60:
 501 0488 E091 0000 		lds r30,tw_mm_que
 502 048c F091 0000 		lds r31,(tw_mm_que)+1
 503 0490 3097      		sbiw r30,0
 504 0492 01F4      		brne .L61
 505 0494 8FEF      		ldi r24,lo8(-1)
 506 0496 9FEF      		ldi r25,hi8(-1)
 507 0498 9093 0000 		sts (tw_mm_que)+1,r25
 508 049c 8093 0000 		sts tw_mm_que,r24
 509 04a0 0895      		ret
 510               	.L61:
 511 04a2 8FEF      		ldi r24,hi8(-1)
 512 04a4 EF3F      		cpi r30,lo8(-1)
 513 04a6 F807      		cpc r31,r24
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 10


 514 04a8 01F0      		breq .L62
 515 04aa 8481      		ldd r24,Z+4
 516 04ac 9581      		ldd r25,Z+5
 517 04ae 0196      		adiw r24,1
 518 04b0 9583      		std Z+5,r25
 519 04b2 8483      		std Z+4,r24
 520               	.L62:
 521 04b4 0895      		ret
 522               		.size	TwInterrupt, .-TwInterrupt
 523               	.global	TwMasterError
 524               		.type	TwMasterError, @function
 525               	TwMasterError:
 526               	/* prologue: function */
 527               	/* frame size = 0 */
 528 04b6 8091 0000 		lds r24,tw_mm_error
 529 04ba 1092 0000 		sts tw_mm_error,__zero_reg__
 530 04be 90E0      		ldi r25,lo8(0)
 531               	/* epilogue start */
 532 04c0 0895      		ret
 533               		.size	TwMasterError, .-TwMasterError
 534               	.global	TwSlaveError
 535               		.type	TwSlaveError, @function
 536               	TwSlaveError:
 537               	/* prologue: function */
 538               	/* frame size = 0 */
 539 04c2 8091 0000 		lds r24,tw_sm_error
 540 04c6 1092 0000 		sts tw_sm_error,__zero_reg__
 541 04ca 90E0      		ldi r25,lo8(0)
 542               	/* epilogue start */
 543 04cc 0895      		ret
 544               		.size	TwSlaveError, .-TwSlaveError
 545               	.global	TwIOCtl
 546               		.type	TwIOCtl, @function
 547               	TwIOCtl:
 548 04ce AF92      		push r10
 549 04d0 BF92      		push r11
 550 04d2 CF92      		push r12
 551 04d4 DF92      		push r13
 552 04d6 EF92      		push r14
 553 04d8 FF92      		push r15
 554 04da 0F93      		push r16
 555 04dc 1F93      		push r17
 556 04de CF93      		push r28
 557 04e0 DF93      		push r29
 558               	/* prologue: function */
 559               	/* frame size = 0 */
 560 04e2 EB01      		movw r28,r22
 561 04e4 24E0      		ldi r18,hi8(1027)
 562 04e6 8330      		cpi r24,lo8(1027)
 563 04e8 9207      		cpc r25,r18
 564 04ea 01F0      		breq .L92
 565 04ec 24E0      		ldi r18,hi8(1028)
 566 04ee 8430      		cpi r24,lo8(1028)
 567 04f0 9207      		cpc r25,r18
 568 04f2 04F4      		brge .L95
 569 04f4 24E0      		ldi r18,hi8(1025)
 570 04f6 8130      		cpi r24,lo8(1025)
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 11


 571 04f8 9207      		cpc r25,r18
 572 04fa 01F0      		breq .L90
 573 04fc 8250      		subi r24,lo8(1026)
 574 04fe 9440      		sbci r25,hi8(1026)
 575 0500 01F0      		breq .+2
 576 0502 00C0      		rjmp .L89
 577 0504 00C0      		rjmp .L108
 578               	.L95:
 579 0506 24E0      		ldi r18,hi8(1028)
 580 0508 8430      		cpi r24,lo8(1028)
 581 050a 9207      		cpc r25,r18
 582 050c 01F0      		breq .L93
 583 050e 8950      		subi r24,lo8(-(-1033))
 584 0510 9440      		sbci r25,hi8(-(-1033))
 585 0512 0297      		sbiw r24,2
 586 0514 00F0      		brlo .+2
 587 0516 00C0      		rjmp .L89
 588 0518 00C0      		rjmp .L107
 589               	.L92:
 590 051a 8881      		ld r24,Y
 591 051c 880F      		lsl r24
 592 051e 8160      		ori r24,lo8(1)
 593 0520 8093 7200 		sts 114,r24
 594               	.L107:
 595 0524 20E0      		ldi r18,lo8(0)
 596 0526 30E0      		ldi r19,hi8(0)
 597 0528 00C0      		rjmp .L96
 598               	.L93:
 599 052a 8091 7200 		lds r24,114
 600 052e 8883      		st Y,r24
 601 0530 00C0      		rjmp .L107
 602               	.L90:
 603 0532 0E94 0000 		call NutGetCpuClock
 604 0536 660F      		lsl r22
 605 0538 771F      		rol r23
 606 053a 881F      		rol r24
 607 053c 991F      		rol r25
 608 053e 2881      		ld r18,Y
 609 0540 3981      		ldd r19,Y+1
 610 0542 4A81      		ldd r20,Y+2
 611 0544 5B81      		ldd r21,Y+3
 612 0546 0E94 0000 		call __udivmodsi4
 613 054a 2F5F      		subi r18,lo8(-(1))
 614 054c 3F4F      		sbci r19,hi8(-(1))
 615 054e 4F4F      		sbci r20,hlo8(-(1))
 616 0550 5F4F      		sbci r21,hhi8(-(1))
 617 0552 5695      		lsr r21
 618 0554 4795      		ror r20
 619 0556 3795      		ror r19
 620 0558 2795      		ror r18
 621 055a 2051      		subi r18,lo8(-(-16))
 622 055c 3040      		sbci r19,hi8(-(-16))
 623 055e 4040      		sbci r20,hlo8(-(-16))
 624 0560 5040      		sbci r21,hhi8(-(-16))
 625 0562 7901      		movw r14,r18
 626 0564 8A01      		movw r16,r20
 627 0566 1695      		lsr r17
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 12


 628 0568 0795      		ror r16
 629 056a F794      		ror r15
 630 056c E794      		ror r14
 631 056e 8DEF      		ldi r24,lo8(1021)
 632 0570 E816      		cp r14,r24
 633 0572 83E0      		ldi r24,hi8(1021)
 634 0574 F806      		cpc r15,r24
 635 0576 80E0      		ldi r24,hlo8(1021)
 636 0578 0807      		cpc r16,r24
 637 057a 80E0      		ldi r24,hhi8(1021)
 638 057c 1807      		cpc r17,r24
 639 057e 00F0      		brlo .L97
 640 0580 7901      		movw r14,r18
 641 0582 8A01      		movw r16,r20
 642 0584 45E0      		ldi r20,5
 643 0586 1695      	1:	lsr r17
 644 0588 0795      		ror r16
 645 058a F794      		ror r15
 646 058c E794      		ror r14
 647 058e 4A95      		dec r20
 648 0590 01F4      		brne 1b
 649 0592 8091 7100 		lds r24,113
 650 0596 8260      		ori r24,lo8(2)
 651 0598 00C0      		rjmp .L105
 652               	.L97:
 653 059a 8091 7100 		lds r24,113
 654 059e 8D7F      		andi r24,lo8(-3)
 655               	.L105:
 656 05a0 8093 7100 		sts 113,r24
 657 05a4 2FEF      		ldi r18,lo8(255)
 658 05a6 E216      		cp r14,r18
 659 05a8 F104      		cpc r15,__zero_reg__
 660 05aa 0105      		cpc r16,__zero_reg__
 661 05ac 1105      		cpc r17,__zero_reg__
 662 05ae 01F0      		breq .L99
 663 05b0 00F0      		brlo .L99
 664 05b2 32E0      		ldi r19,2
 665 05b4 1695      	1:	lsr r17
 666 05b6 0795      		ror r16
 667 05b8 F794      		ror r15
 668 05ba E794      		ror r14
 669 05bc 3A95      		dec r19
 670 05be 01F4      		brne 1b
 671 05c0 8091 7100 		lds r24,113
 672 05c4 8160      		ori r24,lo8(1)
 673 05c6 00C0      		rjmp .L106
 674               	.L99:
 675 05c8 8091 7100 		lds r24,113
 676 05cc 8E7F      		andi r24,lo8(-2)
 677               	.L106:
 678 05ce 8093 7100 		sts 113,r24
 679 05d2 D801      		movw r26,r16
 680 05d4 C701      		movw r24,r14
 681 05d6 0A97      		sbiw r24,10
 682 05d8 A109      		sbc r26,__zero_reg__
 683 05da B109      		sbc r27,__zero_reg__
 684 05dc 863F      		cpi r24,lo8(246)
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 13


 685 05de 9105      		cpc r25,__zero_reg__
 686 05e0 A105      		cpc r26,__zero_reg__
 687 05e2 B105      		cpc r27,__zero_reg__
 688 05e4 00F4      		brsh .L89
 689 05e6 E092 7000 		sts 112,r14
 690 05ea 00C0      		rjmp .L107
 691               	.L108:
 692 05ec 8091 7100 		lds r24,113
 693 05f0 80FF      		sbrs r24,0
 694 05f2 00C0      		rjmp .L101
 695 05f4 28E0      		ldi r18,lo8(8)
 696 05f6 A22E      		mov r10,r18
 697 05f8 B12C      		mov r11,__zero_reg__
 698 05fa C12C      		mov r12,__zero_reg__
 699 05fc D12C      		mov r13,__zero_reg__
 700 05fe 00C0      		rjmp .L102
 701               	.L101:
 702 0600 92E0      		ldi r25,lo8(2)
 703 0602 A92E      		mov r10,r25
 704 0604 B12C      		mov r11,__zero_reg__
 705 0606 C12C      		mov r12,__zero_reg__
 706 0608 D12C      		mov r13,__zero_reg__
 707               	.L102:
 708 060a 8091 7100 		lds r24,113
 709 060e 81FF      		sbrs r24,1
 710 0610 00C0      		rjmp .L103
 711 0612 84E0      		ldi r24,4
 712 0614 AA0C      	1:	lsl r10
 713 0616 BB1C      		rol r11
 714 0618 CC1C      		rol r12
 715 061a DD1C      		rol r13
 716 061c 8A95      		dec r24
 717 061e 01F4      		brne 1b
 718               	.L103:
 719 0620 0E94 0000 		call NutGetCpuClock
 720 0624 7B01      		movw r14,r22
 721 0626 8C01      		movw r16,r24
 722 0628 2091 7000 		lds r18,112
 723 062c 30E0      		ldi r19,lo8(0)
 724 062e 40E0      		ldi r20,lo8(0)
 725 0630 50E0      		ldi r21,hi8(0)
 726 0632 C601      		movw r24,r12
 727 0634 B501      		movw r22,r10
 728 0636 0E94 0000 		call __mulsi3
 729 063a 9B01      		movw r18,r22
 730 063c AC01      		movw r20,r24
 731 063e 205F      		subi r18,lo8(-(16))
 732 0640 3F4F      		sbci r19,hi8(-(16))
 733 0642 4F4F      		sbci r20,hlo8(-(16))
 734 0644 5F4F      		sbci r21,hhi8(-(16))
 735 0646 C801      		movw r24,r16
 736 0648 B701      		movw r22,r14
 737 064a 0E94 0000 		call __udivmodsi4
 738 064e 2883      		st Y,r18
 739 0650 3983      		std Y+1,r19
 740 0652 4A83      		std Y+2,r20
 741 0654 5B83      		std Y+3,r21
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 14


 742 0656 00C0      		rjmp .L107
 743               	.L89:
 744 0658 2FEF      		ldi r18,lo8(-1)
 745 065a 3FEF      		ldi r19,hi8(-1)
 746               	.L96:
 747 065c C901      		movw r24,r18
 748               	/* epilogue start */
 749 065e DF91      		pop r29
 750 0660 CF91      		pop r28
 751 0662 1F91      		pop r17
 752 0664 0F91      		pop r16
 753 0666 FF90      		pop r15
 754 0668 EF90      		pop r14
 755 066a DF90      		pop r13
 756 066c CF90      		pop r12
 757 066e BF90      		pop r11
 758 0670 AF90      		pop r10
 759 0672 0895      		ret
 760               		.size	TwIOCtl, .-TwIOCtl
 761               	.global	TwInit
 762               		.type	TwInit, @function
 763               	TwInit:
 764 0674 1F93      		push r17
 765 0676 DF93      		push r29
 766 0678 CF93      		push r28
 767 067a 00D0      		rcall .
 768 067c 00D0      		rcall .
 769 067e CDB7      		in r28,__SP_L__
 770 0680 DEB7      		in r29,__SP_H__
 771               	/* prologue: function */
 772               	/* frame size = 4 */
 773 0682 182F      		mov r17,r24
 774 0684 80E6      		ldi r24,lo8(2400)
 775 0686 99E0      		ldi r25,hi8(2400)
 776 0688 A0E0      		ldi r26,hlo8(2400)
 777 068a B0E0      		ldi r27,hhi8(2400)
 778 068c 8983      		std Y+1,r24
 779 068e 9A83      		std Y+2,r25
 780 0690 AB83      		std Y+3,r26
 781 0692 BC83      		std Y+4,r27
 782 0694 40E0      		ldi r20,lo8(0)
 783 0696 50E0      		ldi r21,hi8(0)
 784 0698 60E0      		ldi r22,lo8(gs(TwInterrupt))
 785 069a 70E0      		ldi r23,hi8(gs(TwInterrupt))
 786 069c 80E0      		ldi r24,lo8(sig_2WIRE_SERIAL)
 787 069e 90E0      		ldi r25,hi8(sig_2WIRE_SERIAL)
 788 06a0 0E94 0000 		call NutRegisterIrqHandler
 789 06a4 892B      		or r24,r25
 790 06a6 01F0      		breq .L110
 791 06a8 2FEF      		ldi r18,lo8(-1)
 792 06aa 3FEF      		ldi r19,hi8(-1)
 793 06ac 00C0      		rjmp .L111
 794               	.L110:
 795 06ae 110F      		lsl r17
 796 06b0 1160      		ori r17,lo8(1)
 797 06b2 1093 7200 		sts 114,r17
 798 06b6 BE01      		movw r22,r28
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 15


 799 06b8 6F5F      		subi r22,lo8(-(1))
 800 06ba 7F4F      		sbci r23,hi8(-(1))
 801 06bc 81E0      		ldi r24,lo8(1025)
 802 06be 94E0      		ldi r25,hi8(1025)
 803 06c0 0E94 0000 		call TwIOCtl
 804 06c4 80E8      		ldi r24,lo8(-128)
 805 06c6 8093 7400 		sts 116,r24
 806 06ca 85E0      		ldi r24,lo8(5)
 807 06cc 8093 7400 		sts 116,r24
 808 06d0 80E0      		ldi r24,lo8(tw_mm_mutex)
 809 06d2 90E0      		ldi r25,hi8(tw_mm_mutex)
 810 06d4 0E94 0000 		call NutEventPost
 811 06d8 20E0      		ldi r18,lo8(0)
 812 06da 30E0      		ldi r19,hi8(0)
 813               	.L111:
 814 06dc C901      		movw r24,r18
 815               	/* epilogue start */
 816 06de 0F90      		pop __tmp_reg__
 817 06e0 0F90      		pop __tmp_reg__
 818 06e2 0F90      		pop __tmp_reg__
 819 06e4 0F90      		pop __tmp_reg__
 820 06e6 CF91      		pop r28
 821 06e8 DF91      		pop r29
 822 06ea 1F91      		pop r17
 823 06ec 0895      		ret
 824               		.size	TwInit, .-TwInit
 825               	.global	TwSlaveRespond
 826               		.type	TwSlaveRespond, @function
 827               	TwSlaveRespond:
 828               	/* prologue: function */
 829               	/* frame size = 0 */
 830 06ee 9093 0000 		sts (tw_st_buf)+1,r25
 831 06f2 8093 0000 		sts tw_st_buf,r24
 832 06f6 7093 0000 		sts (tw_st_len)+1,r23
 833 06fa 6093 0000 		sts tw_st_len,r22
 834 06fe 672B      		or r22,r23
 835 0700 01F4      		brne .+2
 836 0702 00C0      		rjmp .L114
 837               	/* #APP */
 838               	 ;  740 "../../nut/arch/avr/dev/twif.c" 1
 839 0704 0FB6      		in  __tmp_reg__, __SREG__
 840 0706 F894      		cli
 841 0708 0F92      		push __tmp_reg__
 842               		
 843               	 ;  0 "" 2
 844               	/* #NOAPP */
 845 070a 8091 0000 		lds r24,tw_st_que
 846 070e 9091 0000 		lds r25,(tw_st_que)+1
 847 0712 8F5F      		subi r24,lo8(-1)
 848 0714 9F4F      		sbci r25,hi8(-1)
 849 0716 01F4      		brne .L115
 850 0718 1092 0000 		sts (tw_st_que)+1,__zero_reg__
 851 071c 1092 0000 		sts tw_st_que,__zero_reg__
 852               	.L115:
 853 0720 85EC      		ldi r24,lo8(-59)
 854 0722 8093 7400 		sts 116,r24
 855               	/* #APP */
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 16


 856               	 ;  750 "../../nut/arch/avr/dev/twif.c" 1
 857 0726 0F90      		pop __tmp_reg__
 858 0728 0FBE      		out __SREG__, __tmp_reg__
 859               		
 860               	 ;  0 "" 2
 861               	/* #NOAPP */
 862 072a BA01      		movw r22,r20
 863 072c A901      		movw r20,r18
 864 072e 80E0      		ldi r24,lo8(tw_st_que)
 865 0730 90E0      		ldi r25,hi8(tw_st_que)
 866 0732 0E94 0000 		call NutEventWait
 867 0736 892B      		or r24,r25
 868 0738 01F0      		breq .L116
 869 073a 81E0      		ldi r24,lo8(1)
 870 073c 8093 0000 		sts tw_sm_err,r24
 871               	.L116:
 872               	/* #APP */
 873               	 ;  755 "../../nut/arch/avr/dev/twif.c" 1
 874 0740 0FB6      		in  __tmp_reg__, __SREG__
 875 0742 F894      		cli
 876 0744 0F92      		push __tmp_reg__
 877               		
 878               	 ;  0 "" 2
 879               	/* #NOAPP */
 880 0746 1092 0000 		sts (tw_st_len)+1,__zero_reg__
 881 074a 1092 0000 		sts tw_st_len,__zero_reg__
 882 074e 8091 0000 		lds r24,tw_sm_err
 883 0752 8823      		tst r24
 884 0754 01F0      		breq .L117
 885 0756 8091 0000 		lds r24,tw_sm_err
 886 075a 8093 0000 		sts tw_sm_error,r24
 887 075e 2FEF      		ldi r18,lo8(-1)
 888 0760 3FEF      		ldi r19,hi8(-1)
 889 0762 00C0      		rjmp .L118
 890               	.L117:
 891 0764 2091 0000 		lds r18,tw_st_idx
 892 0768 3091 0000 		lds r19,(tw_st_idx)+1
 893               	.L118:
 894               	/* #APP */
 895               	 ;  762 "../../nut/arch/avr/dev/twif.c" 1
 896 076c 0F90      		pop __tmp_reg__
 897 076e 0FBE      		out __SREG__, __tmp_reg__
 898               		
 899               	 ;  0 "" 2
 900               	/* #NOAPP */
 901 0770 00C0      		rjmp .L119
 902               	.L114:
 903               	/* #APP */
 904               	 ;  774 "../../nut/arch/avr/dev/twif.c" 1
 905 0772 0FB6      		in  __tmp_reg__, __SREG__
 906 0774 F894      		cli
 907 0776 0F92      		push __tmp_reg__
 908               		
 909               	 ;  0 "" 2
 910               	/* #NOAPP */
 911 0778 8091 7400 		lds r24,116
 912 077c 8091 7100 		lds r24,113
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 17


 913 0780 8091 0000 		lds r24,tw_mt_len
 914 0784 9091 0000 		lds r25,(tw_mt_len)+1
 915 0788 892B      		or r24,r25
 916 078a 01F4      		brne .L120
 917 078c 8091 0000 		lds r24,tw_mr_siz
 918 0790 9091 0000 		lds r25,(tw_mr_siz)+1
 919 0794 892B      		or r24,r25
 920 0796 01F0      		breq .L121
 921               	.L120:
 922 0798 85EA      		ldi r24,lo8(-91)
 923 079a 00C0      		rjmp .L124
 924               	.L121:
 925 079c 1092 0000 		sts tw_if_bsy,__zero_reg__
 926 07a0 85E8      		ldi r24,lo8(-123)
 927               	.L124:
 928 07a2 8093 7400 		sts 116,r24
 929               	/* #APP */
 930               	 ;  787 "../../nut/arch/avr/dev/twif.c" 1
 931 07a6 0F90      		pop __tmp_reg__
 932 07a8 0FBE      		out __SREG__, __tmp_reg__
 933               		
 934               	 ;  0 "" 2
 935               	/* #NOAPP */
 936 07aa 20E0      		ldi r18,lo8(0)
 937 07ac 30E0      		ldi r19,hi8(0)
 938               	.L119:
 939 07ae C901      		movw r24,r18
 940               	/* epilogue start */
 941 07b0 0895      		ret
 942               		.size	TwSlaveRespond, .-TwSlaveRespond
 943               	.global	TwSlaveListen
 944               		.type	TwSlaveListen, @function
 945               	TwSlaveListen:
 946 07b2 0F93      		push r16
 947 07b4 1F93      		push r17
 948 07b6 CF93      		push r28
 949 07b8 DF93      		push r29
 950               	/* prologue: function */
 951               	/* frame size = 0 */
 952 07ba EC01      		movw r28,r24
 953               	/* #APP */
 954               	 ;  660 "../../nut/arch/avr/dev/twif.c" 1
 955 07bc 0FB6      		in  __tmp_reg__, __SREG__
 956 07be F894      		cli
 957 07c0 0F92      		push __tmp_reg__
 958               		
 959               	 ;  0 "" 2
 960               	/* #NOAPP */
 961 07c2 1092 0000 		sts tw_sm_err,__zero_reg__
 962 07c6 5093 0000 		sts (tw_sr_siz)+1,r21
 963 07ca 4093 0000 		sts tw_sr_siz,r20
 964 07ce 7093 0000 		sts (tw_sr_buf)+1,r23
 965 07d2 6093 0000 		sts tw_sr_buf,r22
 966 07d6 8091 0000 		lds r24,tw_if_bsy
 967 07da 8823      		tst r24
 968 07dc 01F4      		brne .L126
 969 07de 8091 7100 		lds r24,113
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 18


 970 07e2 887F      		andi r24,lo8(-8)
 971 07e4 883F      		cpi r24,lo8(-8)
 972 07e6 01F4      		brne .L126
 973 07e8 8091 0000 		lds r24,tw_mt_len
 974 07ec 9091 0000 		lds r25,(tw_mt_len)+1
 975 07f0 892B      		or r24,r25
 976 07f2 01F4      		brne .L127
 977 07f4 8091 0000 		lds r24,tw_mr_siz
 978 07f8 9091 0000 		lds r25,(tw_mr_siz)+1
 979 07fc 892B      		or r24,r25
 980 07fe 01F0      		breq .L128
 981               	.L127:
 982 0800 85E6      		ldi r24,lo8(101)
 983 0802 00C0      		rjmp .L134
 984               	.L128:
 985 0804 85E4      		ldi r24,lo8(69)
 986               	.L134:
 987 0806 8093 7400 		sts 116,r24
 988               	.L126:
 989 080a 8091 0000 		lds r24,tw_sr_que
 990 080e 9091 0000 		lds r25,(tw_sr_que)+1
 991 0812 8F5F      		subi r24,lo8(-1)
 992 0814 9F4F      		sbci r25,hi8(-1)
 993 0816 01F4      		brne .L129
 994 0818 1092 0000 		sts (tw_sr_que)+1,__zero_reg__
 995 081c 1092 0000 		sts tw_sr_que,__zero_reg__
 996               	.L129:
 997               	/* #APP */
 998               	 ;  687 "../../nut/arch/avr/dev/twif.c" 1
 999 0820 0F90      		pop __tmp_reg__
 1000 0822 0FBE      		out __SREG__, __tmp_reg__
 1001               		
 1002               	 ;  0 "" 2
 1003               	/* #NOAPP */
 1004 0824 B901      		movw r22,r18
 1005 0826 A801      		movw r20,r16
 1006 0828 80E0      		ldi r24,lo8(tw_sr_que)
 1007 082a 90E0      		ldi r25,hi8(tw_sr_que)
 1008 082c 0E94 0000 		call NutEventWait
 1009 0830 892B      		or r24,r25
 1010 0832 01F0      		breq .L130
 1011               	/* #APP */
 1012               	 ;  691 "../../nut/arch/avr/dev/twif.c" 1
 1013 0834 0FB6      		in  __tmp_reg__, __SREG__
 1014 0836 F894      		cli
 1015 0838 0F92      		push __tmp_reg__
 1016               		
 1017               	 ;  0 "" 2
 1018               	/* #NOAPP */
 1019 083a 81E0      		ldi r24,lo8(1)
 1020 083c 8093 0000 		sts tw_sm_err,r24
 1021 0840 1092 0000 		sts (tw_sr_siz)+1,__zero_reg__
 1022 0844 1092 0000 		sts tw_sr_siz,__zero_reg__
 1023               	/* #APP */
 1024               	 ;  694 "../../nut/arch/avr/dev/twif.c" 1
 1025 0848 0F90      		pop __tmp_reg__
 1026 084a 0FBE      		out __SREG__, __tmp_reg__
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 19


 1027               		
 1028               	 ;  0 "" 2
 1029               	/* #NOAPP */
 1030               	.L130:
 1031 084c 8091 0000 		lds r24,tw_sm_err
 1032 0850 8823      		tst r24
 1033 0852 01F0      		breq .L131
 1034 0854 2FEF      		ldi r18,lo8(-1)
 1035 0856 3FEF      		ldi r19,hi8(-1)
 1036 0858 00C0      		rjmp .L132
 1037               	.L131:
 1038 085a 2091 0000 		lds r18,tw_sr_idx
 1039 085e 3091 0000 		lds r19,(tw_sr_idx)+1
 1040 0862 8091 0000 		lds r24,tw_sm_sla
 1041 0866 8883      		st Y,r24
 1042               	.L132:
 1043 0868 C901      		movw r24,r18
 1044               	/* epilogue start */
 1045 086a DF91      		pop r29
 1046 086c CF91      		pop r28
 1047 086e 1F91      		pop r17
 1048 0870 0F91      		pop r16
 1049 0872 0895      		ret
 1050               		.size	TwSlaveListen, .-TwSlaveListen
 1051               	.global	TwMasterTransact
 1052               		.type	TwMasterTransact, @function
 1053               	TwMasterTransact:
 1054 0874 6F92      		push r6
 1055 0876 7F92      		push r7
 1056 0878 8F92      		push r8
 1057 087a 9F92      		push r9
 1058 087c BF92      		push r11
 1059 087e CF92      		push r12
 1060 0880 DF92      		push r13
 1061 0882 EF92      		push r14
 1062 0884 FF92      		push r15
 1063 0886 0F93      		push r16
 1064 0888 1F93      		push r17
 1065 088a CF93      		push r28
 1066 088c DF93      		push r29
 1067               	/* prologue: function */
 1068               	/* frame size = 0 */
 1069 088e B82E      		mov r11,r24
 1070 0890 4B01      		movw r8,r22
 1071 0892 EA01      		movw r28,r20
 1072 0894 3901      		movw r6,r18
 1073 0896 44EF      		ldi r20,lo8(500)
 1074 0898 51E0      		ldi r21,hi8(500)
 1075 089a 60E0      		ldi r22,hlo8(500)
 1076 089c 70E0      		ldi r23,hhi8(500)
 1077 089e 80E0      		ldi r24,lo8(tw_mm_mutex)
 1078 08a0 90E0      		ldi r25,hi8(tw_mm_mutex)
 1079 08a2 0E94 0000 		call NutEventWait
 1080 08a6 892B      		or r24,r25
 1081 08a8 01F0      		breq .L147
 1082 08aa 83E0      		ldi r24,lo8(3)
 1083 08ac 8093 0000 		sts tw_mm_err,r24
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 20


 1084 08b0 80E0      		ldi r24,lo8(tw_mm_mutex)
 1085 08b2 90E0      		ldi r25,hi8(tw_mm_mutex)
 1086 08b4 0E94 0000 		call NutEventPost
 1087 08b8 0FEF      		ldi r16,lo8(-1)
 1088 08ba 1FEF      		ldi r17,hi8(-1)
 1089 08bc 00C0      		rjmp .L137
 1090               	.L138:
 1091 08be 6FE3      		ldi r22,lo8(63)
 1092 08c0 70E0      		ldi r23,hi8(63)
 1093 08c2 80E0      		ldi r24,hlo8(63)
 1094 08c4 90E0      		ldi r25,hhi8(63)
 1095 08c6 0E94 0000 		call NutSleep
 1096               	.L147:
 1097 08ca 8091 0000 		lds r24,tw_if_bsy
 1098 08ce 8823      		tst r24
 1099 08d0 01F4      		brne .L138
 1100               	/* #APP */
 1101               	 ;  550 "../../nut/arch/avr/dev/twif.c" 1
 1102 08d2 0FB6      		in  __tmp_reg__, __SREG__
 1103 08d4 F894      		cli
 1104 08d6 0F92      		push __tmp_reg__
 1105               		
 1106               	 ;  0 "" 2
 1107               	/* #NOAPP */
 1108 08d8 BB0C      		lsl r11
 1109 08da B092 0000 		sts tw_mm_sla,r11
 1110 08de 1092 0000 		sts tw_mm_err,__zero_reg__
 1111 08e2 D093 0000 		sts (tw_mt_len)+1,r29
 1112 08e6 C093 0000 		sts tw_mt_len,r28
 1113 08ea 9092 0000 		sts (tw_mt_buf)+1,r9
 1114 08ee 8092 0000 		sts tw_mt_buf,r8
 1115 08f2 1093 0000 		sts (tw_mr_siz)+1,r17
 1116 08f6 0093 0000 		sts tw_mr_siz,r16
 1117 08fa 7092 0000 		sts (tw_mr_buf)+1,r7
 1118 08fe 6092 0000 		sts tw_mr_buf,r6
 1119 0902 8091 0000 		lds r24,tw_if_bsy
 1120 0906 8823      		tst r24
 1121 0908 01F4      		brne .L139
 1122 090a 2091 7400 		lds r18,116
 1123 090e 8091 7100 		lds r24,113
 1124 0912 887F      		andi r24,lo8(-8)
 1125 0914 883F      		cpi r24,lo8(-8)
 1126 0916 01F4      		brne .L139
 1127 0918 8091 0000 		lds r24,tw_sr_siz
 1128 091c 9091 0000 		lds r25,(tw_sr_siz)+1
 1129 0920 2071      		andi r18,lo8(16)
 1130 0922 892B      		or r24,r25
 1131 0924 01F0      		breq .L140
 1132 0926 2566      		ori r18,lo8(101)
 1133 0928 00C0      		rjmp .L148
 1134               	.L140:
 1135 092a 2562      		ori r18,lo8(37)
 1136               	.L148:
 1137 092c 2093 7400 		sts 116,r18
 1138               	.L139:
 1139 0930 8091 0000 		lds r24,tw_mm_que
 1140 0934 9091 0000 		lds r25,(tw_mm_que)+1
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 21


 1141 0938 8F5F      		subi r24,lo8(-1)
 1142 093a 9F4F      		sbci r25,hi8(-1)
 1143 093c 01F4      		brne .L141
 1144 093e 1092 0000 		sts (tw_mm_que)+1,__zero_reg__
 1145 0942 1092 0000 		sts tw_mm_que,__zero_reg__
 1146               	.L141:
 1147               	/* #APP */
 1148               	 ;  584 "../../nut/arch/avr/dev/twif.c" 1
 1149 0946 0F90      		pop __tmp_reg__
 1150 0948 0FBE      		out __SREG__, __tmp_reg__
 1151               		
 1152               	 ;  0 "" 2
 1153               	/* #NOAPP */
 1154 094a B701      		movw r22,r14
 1155 094c A601      		movw r20,r12
 1156 094e 80E0      		ldi r24,lo8(tw_mm_que)
 1157 0950 90E0      		ldi r25,hi8(tw_mm_que)
 1158 0952 0E94 0000 		call NutEventWait
 1159 0956 892B      		or r24,r25
 1160 0958 01F0      		breq .L142
 1161 095a 81E0      		ldi r24,lo8(1)
 1162 095c 8093 0000 		sts tw_mm_error,r24
 1163 0960 0FEF      		ldi r16,lo8(-1)
 1164 0962 1FEF      		ldi r17,hi8(-1)
 1165 0964 00C0      		rjmp .L143
 1166               	.L142:
 1167               	/* #APP */
 1168               	 ;  593 "../../nut/arch/avr/dev/twif.c" 1
 1169 0966 0FB6      		in  __tmp_reg__, __SREG__
 1170 0968 F894      		cli
 1171 096a 0F92      		push __tmp_reg__
 1172               		
 1173               	 ;  0 "" 2
 1174               	/* #NOAPP */
 1175 096c 8091 0000 		lds r24,tw_mm_err
 1176 0970 8823      		tst r24
 1177 0972 01F0      		breq .L144
 1178 0974 8091 0000 		lds r24,tw_mm_err
 1179 0978 8093 0000 		sts tw_mm_error,r24
 1180 097c 0FEF      		ldi r16,lo8(-1)
 1181 097e 1FEF      		ldi r17,hi8(-1)
 1182 0980 00C0      		rjmp .L145
 1183               	.L144:
 1184 0982 0091 0000 		lds r16,tw_mr_idx
 1185 0986 1091 0000 		lds r17,(tw_mr_idx)+1
 1186               	.L145:
 1187               	/* #APP */
 1188               	 ;  599 "../../nut/arch/avr/dev/twif.c" 1
 1189 098a 0F90      		pop __tmp_reg__
 1190 098c 0FBE      		out __SREG__, __tmp_reg__
 1191               		
 1192               	 ;  0 "" 2
 1193               	/* #NOAPP */
 1194               	.L143:
 1195 098e 80E0      		ldi r24,lo8(tw_mm_mutex)
 1196 0990 90E0      		ldi r25,hi8(tw_mm_mutex)
 1197 0992 0E94 0000 		call NutEventPost
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 22


 1198               	.L137:
 1199 0996 C801      		movw r24,r16
 1200               	/* epilogue start */
 1201 0998 DF91      		pop r29
 1202 099a CF91      		pop r28
 1203 099c 1F91      		pop r17
 1204 099e 0F91      		pop r16
 1205 09a0 FF90      		pop r15
 1206 09a2 EF90      		pop r14
 1207 09a4 DF90      		pop r13
 1208 09a6 CF90      		pop r12
 1209 09a8 BF90      		pop r11
 1210 09aa 9F90      		pop r9
 1211 09ac 8F90      		pop r8
 1212 09ae 7F90      		pop r7
 1213 09b0 6F90      		pop r6
 1214 09b2 0895      		ret
 1215               		.size	TwMasterTransact, .-TwMasterTransact
 1216               		.lcomm tw_if_bsy,1
 1217               		.lcomm tw_mm_sla,1
 1218               		.lcomm tw_mm_err,1
 1219               		.lcomm tw_mm_error,1
 1220               		.lcomm tw_mt_buf,2
 1221               		.lcomm tw_mt_len,2
 1222               		.lcomm tw_mt_idx,2
 1223               		.lcomm tw_mr_buf,2
 1224               		.lcomm tw_mr_siz,2
 1225               		.lcomm tw_mr_idx,2
 1226               		.lcomm tw_sm_sla,1
 1227               		.lcomm tw_sm_err,1
 1228               		.lcomm tw_sm_error,1
 1229               		.lcomm tw_st_buf,2
 1230               		.lcomm tw_st_len,2
 1231               		.lcomm tw_st_idx,2
 1232               		.lcomm tw_sr_buf,2
 1233               		.lcomm tw_sr_siz,2
 1234               		.lcomm tw_sr_idx,2
 1235               		.comm tw_mm_mutex,2,1
 1236               		.comm tw_mm_que,2,1
 1237               		.comm tw_sr_que,2,1
 1238               		.comm tw_st_que,2,1
GAS LISTING C:\Temp/ccJWJ8uy.s 			page 23


DEFINED SYMBOLS
                            *ABS*:00000000 twif.c
  C:\Temp/ccJWJ8uy.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccJWJ8uy.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccJWJ8uy.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccJWJ8uy.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccJWJ8uy.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccJWJ8uy.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccJWJ8uy.s:12     .text:00000000 TwInterrupt
                             .bss:00000000 tw_if_bsy
  C:\Temp/ccJWJ8uy.s:1221   .bss:00000008 tw_mt_idx
  C:\Temp/ccJWJ8uy.s:1224   .bss:0000000e tw_mr_idx
  C:\Temp/ccJWJ8uy.s:1220   .bss:00000006 tw_mt_len
  C:\Temp/ccJWJ8uy.s:1216   .bss:00000001 tw_mm_sla
  C:\Temp/ccJWJ8uy.s:1219   .bss:00000004 tw_mt_buf
  C:\Temp/ccJWJ8uy.s:1223   .bss:0000000c tw_mr_siz
  C:\Temp/ccJWJ8uy.s:1217   .bss:00000002 tw_mm_err
  C:\Temp/ccJWJ8uy.s:1222   .bss:0000000a tw_mr_buf
                            *COM*:00000002 tw_mm_que
  C:\Temp/ccJWJ8uy.s:1232   .bss:0000001b tw_sr_siz
  C:\Temp/ccJWJ8uy.s:1225   .bss:00000010 tw_sm_sla
  C:\Temp/ccJWJ8uy.s:1233   .bss:0000001d tw_sr_idx
  C:\Temp/ccJWJ8uy.s:1231   .bss:00000019 tw_sr_buf
                            *COM*:00000002 tw_sr_que
  C:\Temp/ccJWJ8uy.s:1226   .bss:00000011 tw_sm_err
  C:\Temp/ccJWJ8uy.s:1230   .bss:00000017 tw_st_idx
  C:\Temp/ccJWJ8uy.s:1229   .bss:00000015 tw_st_len
  C:\Temp/ccJWJ8uy.s:1228   .bss:00000013 tw_st_buf
                            *COM*:00000002 tw_st_que
  C:\Temp/ccJWJ8uy.s:525    .text:000004b6 TwMasterError
  C:\Temp/ccJWJ8uy.s:1218   .bss:00000003 tw_mm_error
  C:\Temp/ccJWJ8uy.s:536    .text:000004c2 TwSlaveError
  C:\Temp/ccJWJ8uy.s:1227   .bss:00000012 tw_sm_error
  C:\Temp/ccJWJ8uy.s:547    .text:000004ce TwIOCtl
  C:\Temp/ccJWJ8uy.s:763    .text:00000674 TwInit
                            *COM*:00000002 tw_mm_mutex
  C:\Temp/ccJWJ8uy.s:827    .text:000006ee TwSlaveRespond
  C:\Temp/ccJWJ8uy.s:945    .text:000007b2 TwSlaveListen
  C:\Temp/ccJWJ8uy.s:1053   .text:00000874 TwMasterTransact

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutGetCpuClock
__udivmodsi4
__mulsi3
sig_2WIRE_SERIAL
NutRegisterIrqHandler
NutEventPost
NutEventWait
NutSleep
