GAS LISTING C:\Temp/ccLhKdLp.s 			page 1


   1               		.file	"spidigio.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	SpiDigitalGet
  12               		.type	SpiDigitalGet, @function
  13               	SpiDigitalGet:
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0000 9598      		cbi 50-32,5
  17 0002 C79A      		sbi 56-32,7
  18 0004 6091 0000 		lds r22,us_loops
  19 0008 660F      		lsl r22
  20 000a 660F      		lsl r22
  21 000c 962F      		mov r25,r22
  22 000e 00C0      		rjmp .L2
  23               	.L3:
  24               	/* #APP */
  25               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
  26 0010 0000      		nop
  27               	 ;  0 "" 2
  28               	/* #NOAPP */
  29 0012 9150      		subi r25,lo8(-(-1))
  30               	.L2:
  31 0014 9923      		tst r25
  32 0016 01F4      		brne .L3
  33 0018 C798      		cbi 56-32,7
  34 001a 962F      		mov r25,r22
  35 001c 00C0      		rjmp .L4
  36               	.L5:
  37               	/* #APP */
  38               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
  39 001e 0000      		nop
  40               	 ;  0 "" 2
  41               	/* #NOAPP */
  42 0020 9150      		subi r25,lo8(-(-1))
  43               	.L4:
  44 0022 9923      		tst r25
  45 0024 01F4      		brne .L5
  46 0026 20E0      		ldi r18,lo8(0)
  47 0028 30E0      		ldi r19,hi8(0)
  48 002a 40E0      		ldi r20,hlo8(0)
  49 002c 50E0      		ldi r21,hhi8(0)
  50 002e 00C0      		rjmp .L6
  51               	.L12:
  52 0030 220F      		lsl r18
  53 0032 331F      		rol r19
  54 0034 441F      		rol r20
  55 0036 551F      		rol r21
  56 0038 8699      		sbic 48-32,6
  57 003a 2160      		ori r18,lo8(1)
GAS LISTING C:\Temp/ccLhKdLp.s 			page 2


  58               	.L7:
  59 003c 9798      		cbi 50-32,7
  60 003e 962F      		mov r25,r22
  61 0040 00C0      		rjmp .L8
  62               	.L9:
  63               	/* #APP */
  64               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
  65 0042 0000      		nop
  66               	 ;  0 "" 2
  67               	/* #NOAPP */
  68 0044 9150      		subi r25,lo8(-(-1))
  69               	.L8:
  70 0046 9923      		tst r25
  71 0048 01F4      		brne .L9
  72 004a 979A      		sbi 50-32,7
  73 004c 962F      		mov r25,r22
  74 004e 00C0      		rjmp .L10
  75               	.L11:
  76               	/* #APP */
  77               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
  78 0050 0000      		nop
  79               	 ;  0 "" 2
  80               	/* #NOAPP */
  81 0052 9150      		subi r25,lo8(-(-1))
  82               	.L10:
  83 0054 9923      		tst r25
  84 0056 01F4      		brne .L11
  85 0058 8150      		subi r24,lo8(-(-1))
  86               	.L6:
  87 005a 8823      		tst r24
  88 005c 01F4      		brne .L12
  89 005e B901      		movw r22,r18
  90 0060 CA01      		movw r24,r20
  91               	/* epilogue start */
  92 0062 0895      		ret
  93               		.size	SpiDigitalGet, .-SpiDigitalGet
  94               	.global	SpiDigitalSet
  95               		.type	SpiDigitalSet, @function
  96               	SpiDigitalSet:
  97 0064 EF92      		push r14
  98 0066 FF92      		push r15
  99 0068 0F93      		push r16
 100 006a 1F93      		push r17
 101               	/* prologue: function */
 102               	/* frame size = 0 */
 103 006c F82F      		mov r31,r24
 104 006e 7A01      		movw r14,r20
 105 0070 8B01      		movw r16,r22
 106 0072 8823      		tst r24
 107 0074 01F4      		brne .+2
 108 0076 00C0      		rjmp .L26
 109 0078 90E0      		ldi r25,lo8(0)
 110 007a 0197      		sbiw r24,1
 111 007c 21E0      		ldi r18,lo8(1)
 112 007e 30E0      		ldi r19,hi8(1)
 113 0080 40E0      		ldi r20,hlo8(1)
 114 0082 50E0      		ldi r21,hhi8(1)
GAS LISTING C:\Temp/ccLhKdLp.s 			page 3


 115 0084 00C0      		rjmp 2f
 116 0086 220F      	1:	lsl r18
 117 0088 331F      		rol r19
 118 008a 441F      		rol r20
 119 008c 551F      		rol r21
 120 008e 8A95      	2:	dec r24
 121 0090 02F4      		brpl 1b
 122 0092 E091 0000 		lds r30,us_loops
 123 0096 EE0F      		lsl r30
 124 0098 EE0F      		lsl r30
 125               	.L23:
 126 009a DA01      		movw r26,r20
 127 009c C901      		movw r24,r18
 128 009e 8E21      		and r24,r14
 129 00a0 9F21      		and r25,r15
 130 00a2 A023      		and r26,r16
 131 00a4 B123      		and r27,r17
 132 00a6 0097      		sbiw r24,0
 133 00a8 A105      		cpc r26,__zero_reg__
 134 00aa B105      		cpc r27,__zero_reg__
 135 00ac 01F0      		breq .L16
 136 00ae 959A      		sbi 50-32,5
 137 00b0 00C0      		rjmp .L29
 138               	.L16:
 139 00b2 9598      		cbi 50-32,5
 140               	.L29:
 141 00b4 8E2F      		mov r24,r30
 142 00b6 00C0      		rjmp .L28
 143               	.L18:
 144               	/* #APP */
 145               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 146 00b8 0000      		nop
 147               	 ;  0 "" 2
 148               	/* #NOAPP */
 149 00ba 8150      		subi r24,lo8(-(-1))
 150               	.L28:
 151 00bc 8823      		tst r24
 152 00be 01F4      		brne .L18
 153 00c0 9798      		cbi 50-32,7
 154 00c2 8E2F      		mov r24,r30
 155 00c4 00C0      		rjmp .L19
 156               	.L20:
 157               	/* #APP */
 158               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 159 00c6 0000      		nop
 160               	 ;  0 "" 2
 161               	/* #NOAPP */
 162 00c8 8150      		subi r24,lo8(-(-1))
 163               	.L19:
 164 00ca 8823      		tst r24
 165 00cc 01F4      		brne .L20
 166 00ce 979A      		sbi 50-32,7
 167 00d0 8E2F      		mov r24,r30
 168 00d2 00C0      		rjmp .L21
 169               	.L22:
 170               	/* #APP */
 171               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
GAS LISTING C:\Temp/ccLhKdLp.s 			page 4


 172 00d4 0000      		nop
 173               	 ;  0 "" 2
 174               	/* #NOAPP */
 175 00d6 8150      		subi r24,lo8(-(-1))
 176               	.L21:
 177 00d8 8823      		tst r24
 178 00da 01F4      		brne .L22
 179 00dc 5695      		lsr r21
 180 00de 4795      		ror r20
 181 00e0 3795      		ror r19
 182 00e2 2795      		ror r18
 183 00e4 F150      		subi r31,lo8(-(-1))
 184 00e6 01F4      		brne .L23
 185 00e8 C598      		cbi 56-32,5
 186 00ea 00C0      		rjmp .L24
 187               	.L25:
 188               	/* #APP */
 189               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 190 00ec 0000      		nop
 191               	 ;  0 "" 2
 192               	/* #NOAPP */
 193 00ee E150      		subi r30,lo8(-(-1))
 194               	.L24:
 195 00f0 EE23      		tst r30
 196 00f2 01F4      		brne .L25
 197 00f4 C59A      		sbi 56-32,5
 198               	.L26:
 199               	/* epilogue start */
 200 00f6 1F91      		pop r17
 201 00f8 0F91      		pop r16
 202 00fa FF90      		pop r15
 203 00fc EF90      		pop r14
 204 00fe 0895      		ret
 205               		.size	SpiDigitalSet, .-SpiDigitalSet
 206               		.type	CountDigitalShifts, @function
 207               	CountDigitalShifts:
 208               	/* prologue: function */
 209               	/* frame size = 0 */
 210 0100 582F      		mov r21,r24
 211 0102 4423      		tst r20
 212 0104 01F0      		breq .L31
 213 0106 C79A      		sbi 56-32,7
 214 0108 8091 0000 		lds r24,us_loops
 215 010c 880F      		lsl r24
 216 010e 880F      		lsl r24
 217 0110 00C0      		rjmp .L32
 218               	.L33:
 219               	/* #APP */
 220               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 221 0112 0000      		nop
 222               	 ;  0 "" 2
 223               	/* #NOAPP */
 224 0114 8150      		subi r24,lo8(-(-1))
 225               	.L32:
 226 0116 8823      		tst r24
 227 0118 01F4      		brne .L33
 228 011a C798      		cbi 56-32,7
GAS LISTING C:\Temp/ccLhKdLp.s 			page 5


 229               	.L31:
 230 011c 6623      		tst r22
 231 011e 01F0      		breq .L34
 232 0120 959A      		sbi 50-32,5
 233 0122 00C0      		rjmp .L35
 234               	.L34:
 235 0124 9598      		cbi 50-32,5
 236               	.L35:
 237 0126 3091 0000 		lds r19,us_loops
 238 012a 330F      		lsl r19
 239 012c 330F      		lsl r19
 240 012e 832F      		mov r24,r19
 241 0130 00C0      		rjmp .L36
 242               	.L37:
 243               	/* #APP */
 244               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 245 0132 0000      		nop
 246               	 ;  0 "" 2
 247               	/* #NOAPP */
 248 0134 8150      		subi r24,lo8(-(-1))
 249               	.L36:
 250 0136 8823      		tst r24
 251 0138 01F4      		brne .L37
 252 013a 20E0      		ldi r18,lo8(0)
 253 013c 91E0      		ldi r25,lo8(1)
 254 013e 00C0      		rjmp .L38
 255               	.L46:
 256 0140 869B      		sbis 48-32,6
 257 0142 00C0      		rjmp .L39
 258 0144 6623      		tst r22
 259 0146 01F0      		breq .L40
 260 0148 00C0      		rjmp .L49
 261               	.L39:
 262 014a 6623      		tst r22
 263 014c 01F4      		brne .L40
 264               	.L49:
 265 014e 4423      		tst r20
 266 0150 01F4      		brne .L41
 267 0152 2223      		tst r18
 268 0154 01F4      		brne .L40
 269               	.L41:
 270 0156 292F      		mov r18,r25
 271               	.L40:
 272 0158 9798      		cbi 50-32,7
 273 015a 832F      		mov r24,r19
 274 015c 00C0      		rjmp .L42
 275               	.L43:
 276               	/* #APP */
 277               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 278 015e 0000      		nop
 279               	 ;  0 "" 2
 280               	/* #NOAPP */
 281 0160 8150      		subi r24,lo8(-(-1))
 282               	.L42:
 283 0162 8823      		tst r24
 284 0164 01F4      		brne .L43
 285 0166 979A      		sbi 50-32,7
GAS LISTING C:\Temp/ccLhKdLp.s 			page 6


 286 0168 832F      		mov r24,r19
 287 016a 00C0      		rjmp .L44
 288               	.L45:
 289               	/* #APP */
 290               	 ;  226 "../../nut/arch/avr/dev/spidigio.c" 1
 291 016c 0000      		nop
 292               	 ;  0 "" 2
 293               	/* #NOAPP */
 294 016e 8150      		subi r24,lo8(-(-1))
 295               	.L44:
 296 0170 8823      		tst r24
 297 0172 01F4      		brne .L45
 298 0174 9F5F      		subi r25,lo8(-(1))
 299               	.L38:
 300 0176 892F      		mov r24,r25
 301 0178 8150      		subi r24,lo8(-(-1))
 302 017a 8517      		cp r24,r21
 303 017c 00F0      		brlo .L46
 304 017e 822F      		mov r24,r18
 305               	/* epilogue start */
 306 0180 0895      		ret
 307               		.size	CountDigitalShifts, .-CountDigitalShifts
 308               	.global	SpiDigitalInit
 309               		.type	SpiDigitalInit, @function
 310               	SpiDigitalInit:
 311 0182 EF92      		push r14
 312 0184 FF92      		push r15
 313 0186 0F93      		push r16
 314 0188 1F93      		push r17
 315 018a CF93      		push r28
 316 018c DF93      		push r29
 317               	/* prologue: function */
 318               	/* frame size = 0 */
 319 018e EC01      		movw r28,r24
 320 0190 7B01      		movw r14,r22
 321 0192 0E94 0000 		call NutGetCpuClock
 322 0196 605E      		subi r22,lo8(-(500000))
 323 0198 7E45      		sbci r23,hi8(-(500000))
 324 019a 884F      		sbci r24,hlo8(-(500000))
 325 019c 9F4F      		sbci r25,hhi8(-(500000))
 326 019e 20E0      		ldi r18,lo8(4000000)
 327 01a0 39E0      		ldi r19,hi8(4000000)
 328 01a2 4DE3      		ldi r20,hlo8(4000000)
 329 01a4 50E0      		ldi r21,hhi8(4000000)
 330 01a6 0E94 0000 		call __udivmodsi4
 331 01aa 2093 0000 		sts us_loops,r18
 332 01ae 2223      		tst r18
 333 01b0 01F4      		brne .L51
 334 01b2 81E0      		ldi r24,lo8(1)
 335 01b4 8093 0000 		sts us_loops,r24
 336               	.L51:
 337 01b8 8D9A      		sbi 49-32,5
 338 01ba 969A      		sbi 50-32,6
 339 01bc 8E98      		cbi 49-32,6
 340 01be 979A      		sbi 50-32,7
 341 01c0 8F9A      		sbi 49-32,7
 342 01c2 C59A      		sbi 56-32,5
GAS LISTING C:\Temp/ccLhKdLp.s 			page 7


 343 01c4 BD9A      		sbi 55-32,5
 344 01c6 C798      		cbi 56-32,7
 345 01c8 BF9A      		sbi 55-32,7
 346 01ca 40E0      		ldi r20,lo8(0)
 347 01cc 60E0      		ldi r22,lo8(0)
 348 01ce 80E2      		ldi r24,lo8(32)
 349 01d0 0E94 0000 		call CountDigitalShifts
 350 01d4 40E0      		ldi r20,lo8(0)
 351 01d6 61E0      		ldi r22,lo8(1)
 352 01d8 80E2      		ldi r24,lo8(32)
 353 01da 0E94 0000 		call CountDigitalShifts
 354 01de 182F      		mov r17,r24
 355 01e0 1150      		subi r17,lo8(-(-1))
 356 01e2 1882      		st Y,__zero_reg__
 357 01e4 00E0      		ldi r16,lo8(0)
 358               	.L54:
 359 01e6 41E0      		ldi r20,lo8(1)
 360 01e8 60E0      		ldi r22,lo8(0)
 361 01ea 812F      		mov r24,r17
 362 01ec 0E94 0000 		call CountDigitalShifts
 363 01f0 982F      		mov r25,r24
 364 01f2 8881      		ld r24,Y
 365 01f4 8917      		cp r24,r25
 366 01f6 00F4      		brsh .L52
 367 01f8 9883      		st Y,r25
 368               	.L52:
 369 01fa 41E0      		ldi r20,lo8(1)
 370 01fc 61E0      		ldi r22,lo8(1)
 371 01fe 812F      		mov r24,r17
 372 0200 0E94 0000 		call CountDigitalShifts
 373 0204 982F      		mov r25,r24
 374 0206 8881      		ld r24,Y
 375 0208 8917      		cp r24,r25
 376 020a 00F4      		brsh .L53
 377 020c 9883      		st Y,r25
 378               	.L53:
 379 020e 0F5F      		subi r16,lo8(-(1))
 380 0210 0530      		cpi r16,lo8(5)
 381 0212 01F4      		brne .L54
 382 0214 8881      		ld r24,Y
 383 0216 181B      		sub r17,r24
 384 0218 F701      		movw r30,r14
 385 021a 1083      		st Z,r17
 386               	/* epilogue start */
 387 021c DF91      		pop r29
 388 021e CF91      		pop r28
 389 0220 1F91      		pop r17
 390 0222 0F91      		pop r16
 391 0224 FF90      		pop r15
 392 0226 EF90      		pop r14
 393 0228 0895      		ret
 394               		.size	SpiDigitalInit, .-SpiDigitalInit
 395               		.data
 396               		.type	us_loops, @object
 397               		.size	us_loops, 1
 398               	us_loops:
 399 0000 01        		.byte	1
GAS LISTING C:\Temp/ccLhKdLp.s 			page 8


GAS LISTING C:\Temp/ccLhKdLp.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 spidigio.c
  C:\Temp/ccLhKdLp.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccLhKdLp.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccLhKdLp.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccLhKdLp.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccLhKdLp.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccLhKdLp.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccLhKdLp.s:13     .text:00000000 SpiDigitalGet
  C:\Temp/ccLhKdLp.s:398    .data:00000000 us_loops
  C:\Temp/ccLhKdLp.s:96     .text:00000064 SpiDigitalSet
  C:\Temp/ccLhKdLp.s:207    .text:00000100 CountDigitalShifts
  C:\Temp/ccLhKdLp.s:310    .text:00000182 SpiDigitalInit

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutGetCpuClock
__udivmodsi4
