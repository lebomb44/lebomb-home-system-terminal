GAS LISTING C:\Temp/ccCpKl2B.s 			page 1


   1               		.file	"hd44780_bus.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	LcdBusyWait, @function
  12               	LcdBusyWait:
  13               	/* prologue: function */
  14               	/* frame size = 0 */
  15 0000 E091 0000 		lds r30,lcd_base
  16 0004 F091 0000 		lds r31,(lcd_base)+1
  17 0008 3296      		adiw r30,2
  18 000a 00C0      		rjmp .L2
  19               	.L3:
  20               	/* #APP */
  21               	 ;  144 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  22 000c 0000      		nop
  23               	 ;  0 "" 2
  24               	/* #NOAPP */
  25               	.L2:
  26 000e 8081      		ld r24,Z
  27 0010 87FD      		sbrc r24,7
  28 0012 00C0      		rjmp .L3
  29               	/* #APP */
  30               	 ;  144 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  31 0014 0000      		nop
  32               	 ;  0 "" 2
  33               	 ;  145 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  34 0016 0000      		nop
  35               	 ;  0 "" 2
  36               	 ;  145 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  37 0018 0000      		nop
  38               	 ;  0 "" 2
  39               	 ;  146 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  40 001a 0000      		nop
  41               	 ;  0 "" 2
  42               	 ;  146 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  43 001c 0000      		nop
  44               	 ;  0 "" 2
  45               	 ;  147 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  46 001e 0000      		nop
  47               	 ;  0 "" 2
  48               	 ;  147 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  49 0020 0000      		nop
  50               	 ;  0 "" 2
  51               	 ;  148 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  52 0022 0000      		nop
  53               	 ;  0 "" 2
  54               	 ;  148 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  55 0024 0000      		nop
  56               	 ;  0 "" 2
  57               	 ;  149 "../../nut/arch/avr/dev/hd44780_bus.c" 1
GAS LISTING C:\Temp/ccCpKl2B.s 			page 2


  58 0026 0000      		nop
  59               	 ;  0 "" 2
  60               	 ;  149 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  61 0028 0000      		nop
  62               	 ;  0 "" 2
  63               	 ;  150 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  64 002a 0000      		nop
  65               	 ;  0 "" 2
  66               	 ;  150 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  67 002c 0000      		nop
  68               	 ;  0 "" 2
  69               	 ;  151 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  70 002e 0000      		nop
  71               	 ;  0 "" 2
  72               	 ;  151 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  73 0030 0000      		nop
  74               	 ;  0 "" 2
  75               	 ;  152 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  76 0032 0000      		nop
  77               	 ;  0 "" 2
  78               	 ;  152 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  79 0034 0000      		nop
  80               	 ;  0 "" 2
  81               	 ;  153 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  82 0036 0000      		nop
  83               	 ;  0 "" 2
  84               	 ;  153 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  85 0038 0000      		nop
  86               	 ;  0 "" 2
  87               	 ;  154 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  88 003a 0000      		nop
  89               	 ;  0 "" 2
  90               	 ;  154 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  91 003c 0000      		nop
  92               	 ;  0 "" 2
  93               	 ;  155 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  94 003e 0000      		nop
  95               	 ;  0 "" 2
  96               	 ;  155 "../../nut/arch/avr/dev/hd44780_bus.c" 1
  97 0040 0000      		nop
  98               	 ;  0 "" 2
  99               	 ;  156 "../../nut/arch/avr/dev/hd44780_bus.c" 1
 100 0042 0000      		nop
 101               	 ;  0 "" 2
 102               	 ;  156 "../../nut/arch/avr/dev/hd44780_bus.c" 1
 103 0044 0000      		nop
 104               	 ;  0 "" 2
 105               	/* epilogue start */
 106               	/* #NOAPP */
 107 0046 0895      		ret
 108               		.size	LcdBusyWait, .-LcdBusyWait
 109               		.type	LcdWriteData, @function
 110               	LcdWriteData:
 111 0048 1F93      		push r17
 112               	/* prologue: function */
 113               	/* frame size = 0 */
 114 004a 182F      		mov r17,r24
GAS LISTING C:\Temp/ccCpKl2B.s 			page 3


 115 004c 0E94 0000 		call LcdBusyWait
 116 0050 E091 0000 		lds r30,lcd_base
 117 0054 F091 0000 		lds r31,(lcd_base)+1
 118 0058 1183      		std Z+1,r17
 119               	/* epilogue start */
 120 005a 1F91      		pop r17
 121 005c 0895      		ret
 122               		.size	LcdWriteData, .-LcdWriteData
 123               		.type	LcdWriteCmd, @function
 124               	LcdWriteCmd:
 125 005e 1F93      		push r17
 126               	/* prologue: function */
 127               	/* frame size = 0 */
 128 0060 182F      		mov r17,r24
 129 0062 0E94 0000 		call LcdBusyWait
 130 0066 E091 0000 		lds r30,lcd_base
 131 006a F091 0000 		lds r31,(lcd_base)+1
 132 006e 1083      		st Z,r17
 133               	/* epilogue start */
 134 0070 1F91      		pop r17
 135 0072 0895      		ret
 136               		.size	LcdWriteCmd, .-LcdWriteCmd
 137               		.type	LcdSetCursor, @function
 138               	LcdSetCursor:
 139 0074 1F93      		push r17
 140 0076 DF93      		push r29
 141 0078 CF93      		push r28
 142 007a 00D0      		rcall .
 143 007c 00D0      		rcall .
 144 007e CDB7      		in r28,__SP_L__
 145 0080 DEB7      		in r29,__SP_H__
 146               	/* prologue: function */
 147               	/* frame size = 4 */
 148 0082 1982      		std Y+1,__zero_reg__
 149 0084 90E4      		ldi r25,lo8(64)
 150 0086 9A83      		std Y+2,r25
 151 0088 90E1      		ldi r25,lo8(16)
 152 008a 9B83      		std Y+3,r25
 153 008c 90E5      		ldi r25,lo8(80)
 154 008e 9C83      		std Y+4,r25
 155 0090 982F      		mov r25,r24
 156 0092 9F70      		andi r25,lo8(15)
 157 0094 8295      		swap r24
 158 0096 8F70      		andi r24,lo8(15)
 159 0098 8430      		cpi r24,lo8(4)
 160 009a 00F0      		brlo .L10
 161 009c 83E0      		ldi r24,lo8(3)
 162               	.L10:
 163 009e FE01      		movw r30,r28
 164 00a0 E80F      		add r30,r24
 165 00a2 F11D      		adc r31,__zero_reg__
 166 00a4 1181      		ldd r17,Z+1
 167 00a6 190F      		add r17,r25
 168 00a8 1068      		ori r17,lo8(-128)
 169 00aa 0E94 0000 		call LcdBusyWait
 170 00ae E091 0000 		lds r30,lcd_base
 171 00b2 F091 0000 		lds r31,(lcd_base)+1
GAS LISTING C:\Temp/ccCpKl2B.s 			page 4


 172 00b6 1083      		st Z,r17
 173               	/* epilogue start */
 174 00b8 0F90      		pop __tmp_reg__
 175 00ba 0F90      		pop __tmp_reg__
 176 00bc 0F90      		pop __tmp_reg__
 177 00be 0F90      		pop __tmp_reg__
 178 00c0 CF91      		pop r28
 179 00c2 DF91      		pop r29
 180 00c4 1F91      		pop r17
 181 00c6 0895      		ret
 182               		.size	LcdSetCursor, .-LcdSetCursor
 183               		.type	LcdCursorHome, @function
 184               	LcdCursorHome:
 185               	/* prologue: function */
 186               	/* frame size = 0 */
 187 00c8 0E94 0000 		call LcdBusyWait
 188 00cc E091 0000 		lds r30,lcd_base
 189 00d0 F091 0000 		lds r31,(lcd_base)+1
 190 00d4 82E0      		ldi r24,lo8(2)
 191 00d6 8083      		st Z,r24
 192               	/* epilogue start */
 193 00d8 0895      		ret
 194               		.size	LcdCursorHome, .-LcdCursorHome
 195               		.type	LcdCursorLeft, @function
 196               	LcdCursorLeft:
 197               	/* prologue: function */
 198               	/* frame size = 0 */
 199 00da 0E94 0000 		call LcdBusyWait
 200 00de E091 0000 		lds r30,lcd_base
 201 00e2 F091 0000 		lds r31,(lcd_base)+1
 202 00e6 80E1      		ldi r24,lo8(16)
 203 00e8 8083      		st Z,r24
 204               	/* epilogue start */
 205 00ea 0895      		ret
 206               		.size	LcdCursorLeft, .-LcdCursorLeft
 207               		.type	LcdCursorRight, @function
 208               	LcdCursorRight:
 209               	/* prologue: function */
 210               	/* frame size = 0 */
 211 00ec 0E94 0000 		call LcdBusyWait
 212 00f0 E091 0000 		lds r30,lcd_base
 213 00f4 F091 0000 		lds r31,(lcd_base)+1
 214 00f8 84E1      		ldi r24,lo8(20)
 215 00fa 8083      		st Z,r24
 216               	/* epilogue start */
 217 00fc 0895      		ret
 218               		.size	LcdCursorRight, .-LcdCursorRight
 219               		.type	LcdClear, @function
 220               	LcdClear:
 221               	/* prologue: function */
 222               	/* frame size = 0 */
 223 00fe 0E94 0000 		call LcdBusyWait
 224 0102 E091 0000 		lds r30,lcd_base
 225 0106 F091 0000 		lds r31,(lcd_base)+1
 226 010a 81E0      		ldi r24,lo8(1)
 227 010c 8083      		st Z,r24
 228               	/* epilogue start */
GAS LISTING C:\Temp/ccCpKl2B.s 			page 5


 229 010e 0895      		ret
 230               		.size	LcdClear, .-LcdClear
 231               		.type	LcdCursorMode, @function
 232               	LcdCursorMode:
 233               	/* prologue: function */
 234               	/* frame size = 0 */
 235 0110 0E94 0000 		call LcdBusyWait
 236 0114 E091 0000 		lds r30,lcd_base
 237 0118 F091 0000 		lds r31,(lcd_base)+1
 238 011c 82E0      		ldi r24,lo8(2)
 239 011e 8083      		st Z,r24
 240               	/* epilogue start */
 241 0120 0895      		ret
 242               		.size	LcdCursorMode, .-LcdCursorMode
 243               		.type	LcdInit, @function
 244               	LcdInit:
 245 0122 0F93      		push r16
 246 0124 1F93      		push r17
 247               	/* prologue: function */
 248               	/* frame size = 0 */
 249 0126 FC01      		movw r30,r24
 250 0128 1485      		ldd r17,Z+12
 251 012a 0585      		ldd r16,Z+13
 252 012c 1093 0000 		sts lcd_base,r17
 253 0130 0093 0000 		sts lcd_base+1,r16
 254 0134 0E94 0000 		call LcdBusyWait
 255 0138 E12F      		mov r30,r17
 256 013a F02F      		mov r31,r16
 257 013c 18E3      		ldi r17,lo8(56)
 258 013e 1083      		st Z,r17
 259 0140 82E3      		ldi r24,lo8(50)
 260 0142 0E94 0000 		call NutDelay
 261 0146 0E94 0000 		call LcdBusyWait
 262 014a E091 0000 		lds r30,lcd_base
 263 014e F091 0000 		lds r31,(lcd_base)+1
 264 0152 1083      		st Z,r17
 265 0154 82E3      		ldi r24,lo8(50)
 266 0156 0E94 0000 		call NutDelay
 267 015a 0E94 0000 		call LcdBusyWait
 268 015e E091 0000 		lds r30,lcd_base
 269 0162 F091 0000 		lds r31,(lcd_base)+1
 270 0166 1083      		st Z,r17
 271 0168 82E3      		ldi r24,lo8(50)
 272 016a 0E94 0000 		call NutDelay
 273 016e 0E94 0000 		call LcdBusyWait
 274 0172 0091 0000 		lds r16,lcd_base
 275 0176 1091 0000 		lds r17,(lcd_base)+1
 276 017a 81E0      		ldi r24,lo8(1)
 277 017c F801      		movw r30,r16
 278 017e 8083      		st Z,r24
 279 0180 0E94 0000 		call LcdBusyWait
 280 0184 86E0      		ldi r24,lo8(6)
 281 0186 F801      		movw r30,r16
 282 0188 8083      		st Z,r24
 283 018a 0E94 0000 		call LcdBusyWait
 284 018e 8CE0      		ldi r24,lo8(12)
 285 0190 F801      		movw r30,r16
GAS LISTING C:\Temp/ccCpKl2B.s 			page 6


 286 0192 8083      		st Z,r24
 287 0194 0E94 0000 		call LcdBusyWait
 288 0198 82E0      		ldi r24,lo8(2)
 289 019a F801      		movw r30,r16
 290 019c 8083      		st Z,r24
 291 019e 0E94 0000 		call LcdBusyWait
 292 01a2 80E8      		ldi r24,lo8(-128)
 293 01a4 F801      		movw r30,r16
 294 01a6 8083      		st Z,r24
 295               	/* epilogue start */
 296 01a8 1F91      		pop r17
 297 01aa 0F91      		pop r16
 298 01ac 0895      		ret
 299               		.size	LcdInit, .-LcdInit
 300               	.global	dcb_term
 301               		.data
 302               		.type	dcb_term, @object
 303               		.size	dcb_term, 32
 304               	dcb_term:
 305 0000 0000      		.word	gs(LcdInit)
 306 0002 0000      		.word	gs(LcdWriteData)
 307 0004 0000      		.word	gs(LcdWriteCmd)
 308 0006 0000      		.word	gs(LcdClear)
 309 0008 0000      		.word	gs(LcdSetCursor)
 310 000a 0000      		.word	gs(LcdCursorHome)
 311 000c 0000      		.word	gs(LcdCursorLeft)
 312 000e 0000      		.word	gs(LcdCursorRight)
 313 0010 0000      		.word	gs(LcdCursorMode)
 314 0012 00        		.byte	0
 315 0013 00        		.byte	0
 316 0014 00        		.byte	0
 317 0015 00        		.byte	0
 318 0016 00        		.byte	0
 319 0017 02        		.byte	2
 320 0018 10        		.byte	16
 321 0019 10        		.byte	16
 322 001a 00        		.byte	0
 323 001b 00        		.byte	0
 324 001c 0000      		.word	0
 325 001e 0000      		.skip 2,0
 326               	.global	devLcdBus
 327               		.type	devLcdBus, @object
 328               		.size	devLcdBus, 35
 329               	devLcdBus:
 330 0020 0000      		.word	0
 331 0022 6C        		.byte	108
 332 0023 63        		.byte	99
 333 0024 64        		.byte	100
 334 0025 62        		.byte	98
 335 0026 75        		.byte	117
 336 0027 73        		.byte	115
 337 0028 00        		.byte	0
 338 0029 00        		.byte	0
 339 002a 00        		.byte	0
 340 002b 02        		.byte	2
 341 002c 0000      		.word	0
 342 002e 00        		.byte	0
GAS LISTING C:\Temp/ccCpKl2B.s 			page 7


 343 002f 0000      		.word	0
 344 0031 0000      		.word	dcb_term
 345 0033 0000      		.word	gs(TermInit)
 346 0035 0000      		.word	gs(TermIOCtl)
 347 0037 0000      		.word	0
 348 0039 0000      		.word	gs(TermWrite)
 349 003b 0000      		.word	gs(TermWrite_P)
 350 003d 0000      		.word	gs(TermOpen)
 351 003f 0000      		.word	gs(TermClose)
 352 0041 0000      		.word	0
 353               		.lcomm lcd_base,2
GAS LISTING C:\Temp/ccCpKl2B.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 hd44780_bus.c
  C:\Temp/ccCpKl2B.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccCpKl2B.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccCpKl2B.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccCpKl2B.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccCpKl2B.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccCpKl2B.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccCpKl2B.s:12     .text:00000000 LcdBusyWait
                             .bss:00000000 lcd_base
  C:\Temp/ccCpKl2B.s:110    .text:00000048 LcdWriteData
  C:\Temp/ccCpKl2B.s:124    .text:0000005e LcdWriteCmd
  C:\Temp/ccCpKl2B.s:138    .text:00000074 LcdSetCursor
  C:\Temp/ccCpKl2B.s:184    .text:000000c8 LcdCursorHome
  C:\Temp/ccCpKl2B.s:196    .text:000000da LcdCursorLeft
  C:\Temp/ccCpKl2B.s:208    .text:000000ec LcdCursorRight
  C:\Temp/ccCpKl2B.s:220    .text:000000fe LcdClear
  C:\Temp/ccCpKl2B.s:232    .text:00000110 LcdCursorMode
  C:\Temp/ccCpKl2B.s:244    .text:00000122 LcdInit
  C:\Temp/ccCpKl2B.s:304    .data:00000000 dcb_term
  C:\Temp/ccCpKl2B.s:329    .data:00000020 devLcdBus

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutDelay
TermInit
TermIOCtl
TermWrite
TermWrite_P
TermOpen
TermClose
