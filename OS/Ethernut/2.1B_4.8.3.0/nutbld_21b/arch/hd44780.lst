GAS LISTING C:\Temp/cc6yKOdu.s 			page 1


   1               		.file	"hd44780.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               		.type	LcdSendNibble, @function
  12               	LcdSendNibble:
  13               	/* prologue: function */
  14               	/* frame size = 0 */
  15 0000 91B3      		in r25,49-32
  16 0002 906F      		ori r25,lo8(-16)
  17 0004 91BB      		out 49-32,r25
  18 0006 92B3      		in r25,50-32
  19 0008 807F      		andi r24,lo8(-16)
  20 000a 9F70      		andi r25,lo8(15)
  21 000c 892B      		or r24,r25
  22 000e 82BB      		out 50-32,r24
  23 0010 1B9A      		sbi 35-32,3
  24               	/* #APP */
  25               	 ;  387 "../../nut/arch/avr/dev/hd44780.c" 1
  26 0012 0000      		nop
  27               	 ;  0 "" 2
  28               	 ;  387 "../../nut/arch/avr/dev/hd44780.c" 1
  29 0014 0000      		nop
  30               	 ;  0 "" 2
  31               	 ;  387 "../../nut/arch/avr/dev/hd44780.c" 1
  32 0016 0000      		nop
  33               	 ;  0 "" 2
  34               	 ;  387 "../../nut/arch/avr/dev/hd44780.c" 1
  35 0018 0000      		nop
  36               	 ;  0 "" 2
  37               	/* #NOAPP */
  38 001a 1B98      		cbi 35-32,3
  39               	/* #APP */
  40               	 ;  389 "../../nut/arch/avr/dev/hd44780.c" 1
  41 001c 0000      		nop
  42               	 ;  0 "" 2
  43               	 ;  389 "../../nut/arch/avr/dev/hd44780.c" 1
  44 001e 0000      		nop
  45               	 ;  0 "" 2
  46               	 ;  389 "../../nut/arch/avr/dev/hd44780.c" 1
  47 0020 0000      		nop
  48               	 ;  0 "" 2
  49               	 ;  389 "../../nut/arch/avr/dev/hd44780.c" 1
  50 0022 0000      		nop
  51               	 ;  0 "" 2
  52               	/* epilogue start */
  53               	/* #NOAPP */
  54 0024 0895      		ret
  55               		.size	LcdSendNibble, .-LcdSendNibble
  56               		.type	LcdDelay, @function
  57               	LcdDelay:
GAS LISTING C:\Temp/cc6yKOdu.s 			page 2


  58               	/* prologue: function */
  59               	/* frame size = 0 */
  60 0026 0E94 0000 		call NutDelay
  61 002a 0895      		ret
  62               		.size	LcdDelay, .-LcdDelay
  63               		.type	LcdSendByte, @function
  64               	LcdSendByte:
  65 002c 0F93      		push r16
  66 002e 1F93      		push r17
  67               	/* prologue: function */
  68               	/* frame size = 0 */
  69 0030 082F      		mov r16,r24
  70 0032 162F      		mov r17,r22
  71 0034 0E94 0000 		call LcdSendNibble
  72 0038 1123      		tst r17
  73 003a 01F0      		breq .L8
  74 003c 812F      		mov r24,r17
  75 003e 0E94 0000 		call LcdDelay
  76               	.L8:
  77 0042 802F      		mov r24,r16
  78 0044 8295      		swap r24
  79 0046 807F      		andi r24,lo8(-16)
  80 0048 0E94 0000 		call LcdSendNibble
  81 004c 1123      		tst r17
  82 004e 01F0      		breq .L10
  83 0050 812F      		mov r24,r17
  84 0052 0E94 0000 		call LcdDelay
  85               	.L10:
  86               	/* epilogue start */
  87 0056 1F91      		pop r17
  88 0058 0F91      		pop r16
  89 005a 0895      		ret
  90               		.size	LcdSendByte, .-LcdSendByte
  91               		.type	LcdWriteCmd, @function
  92               	LcdWriteCmd:
  93               	/* prologue: function */
  94               	/* frame size = 0 */
  95 005c 129A      		sbi 34-32,2
  96 005e 1A98      		cbi 35-32,2
  97 0060 0E94 0000 		call LcdSendByte
  98               	/* epilogue start */
  99 0064 0895      		ret
 100               		.size	LcdWriteCmd, .-LcdWriteCmd
 101               		.type	LcdCursorMode, @function
 102               	LcdCursorMode:
 103               	/* prologue: function */
 104               	/* frame size = 0 */
 105 0066 62E0      		ldi r22,lo8(2)
 106 0068 82E0      		ldi r24,lo8(2)
 107 006a 0E94 0000 		call LcdWriteCmd
 108               	/* epilogue start */
 109 006e 0895      		ret
 110               		.size	LcdCursorMode, .-LcdCursorMode
 111               		.type	LcdCursorRight, @function
 112               	LcdCursorRight:
 113               	/* prologue: function */
 114               	/* frame size = 0 */
GAS LISTING C:\Temp/cc6yKOdu.s 			page 3


 115 0070 61E0      		ldi r22,lo8(1)
 116 0072 84E1      		ldi r24,lo8(20)
 117 0074 0E94 0000 		call LcdWriteCmd
 118               	/* epilogue start */
 119 0078 0895      		ret
 120               		.size	LcdCursorRight, .-LcdCursorRight
 121               		.type	LcdCursorLeft, @function
 122               	LcdCursorLeft:
 123               	/* prologue: function */
 124               	/* frame size = 0 */
 125 007a 61E0      		ldi r22,lo8(1)
 126 007c 80E1      		ldi r24,lo8(16)
 127 007e 0E94 0000 		call LcdWriteCmd
 128               	/* epilogue start */
 129 0082 0895      		ret
 130               		.size	LcdCursorLeft, .-LcdCursorLeft
 131               		.type	LcdCursorHome, @function
 132               	LcdCursorHome:
 133               	/* prologue: function */
 134               	/* frame size = 0 */
 135 0084 62E0      		ldi r22,lo8(2)
 136 0086 82E0      		ldi r24,lo8(2)
 137 0088 0E94 0000 		call LcdWriteCmd
 138               	/* epilogue start */
 139 008c 0895      		ret
 140               		.size	LcdCursorHome, .-LcdCursorHome
 141               		.type	LcdSetCursor, @function
 142               	LcdSetCursor:
 143 008e DF93      		push r29
 144 0090 CF93      		push r28
 145 0092 00D0      		rcall .
 146 0094 00D0      		rcall .
 147 0096 CDB7      		in r28,__SP_L__
 148 0098 DEB7      		in r29,__SP_H__
 149               	/* prologue: function */
 150               	/* frame size = 4 */
 151 009a 982F      		mov r25,r24
 152 009c 1982      		std Y+1,__zero_reg__
 153 009e 80E4      		ldi r24,lo8(64)
 154 00a0 8A83      		std Y+2,r24
 155 00a2 80E1      		ldi r24,lo8(16)
 156 00a4 8B83      		std Y+3,r24
 157 00a6 80E5      		ldi r24,lo8(80)
 158 00a8 8C83      		std Y+4,r24
 159 00aa E92F      		mov r30,r25
 160 00ac E295      		swap r30
 161 00ae EF70      		andi r30,lo8(15)
 162 00b0 F0E0      		ldi r31,lo8(0)
 163 00b2 E170      		andi r30,lo8(1)
 164 00b4 F070      		andi r31,hi8(1)
 165 00b6 EC0F      		add r30,r28
 166 00b8 FD1F      		adc r31,r29
 167 00ba 8181      		ldd r24,Z+1
 168 00bc 9F70      		andi r25,lo8(15)
 169 00be 890F      		add r24,r25
 170 00c0 61E0      		ldi r22,lo8(1)
 171 00c2 8068      		ori r24,lo8(-128)
GAS LISTING C:\Temp/cc6yKOdu.s 			page 4


 172 00c4 0E94 0000 		call LcdWriteCmd
 173               	/* epilogue start */
 174 00c8 0F90      		pop __tmp_reg__
 175 00ca 0F90      		pop __tmp_reg__
 176 00cc 0F90      		pop __tmp_reg__
 177 00ce 0F90      		pop __tmp_reg__
 178 00d0 CF91      		pop r28
 179 00d2 DF91      		pop r29
 180 00d4 0895      		ret
 181               		.size	LcdSetCursor, .-LcdSetCursor
 182               		.type	LcdClear, @function
 183               	LcdClear:
 184               	/* prologue: function */
 185               	/* frame size = 0 */
 186 00d6 62E0      		ldi r22,lo8(2)
 187 00d8 81E0      		ldi r24,lo8(1)
 188 00da 0E94 0000 		call LcdWriteCmd
 189               	/* epilogue start */
 190 00de 0895      		ret
 191               		.size	LcdClear, .-LcdClear
 192               		.type	LcdWriteData, @function
 193               	LcdWriteData:
 194               	/* prologue: function */
 195               	/* frame size = 0 */
 196 00e0 129A      		sbi 34-32,2
 197 00e2 1A9A      		sbi 35-32,2
 198 00e4 61E0      		ldi r22,lo8(1)
 199 00e6 0E94 0000 		call LcdSendByte
 200               	/* epilogue start */
 201 00ea 0895      		ret
 202               		.size	LcdWriteData, .-LcdWriteData
 203               		.type	LcdInit, @function
 204               	LcdInit:
 205 00ec 0F93      		push r16
 206 00ee 1F93      		push r17
 207               	/* prologue: function */
 208               	/* frame size = 0 */
 209 00f0 8C01      		movw r16,r24
 210 00f2 129A      		sbi 34-32,2
 211 00f4 139A      		sbi 34-32,3
 212 00f6 1A98      		cbi 35-32,2
 213 00f8 83E3      		ldi r24,lo8(51)
 214 00fa 0E94 0000 		call LcdSendNibble
 215 00fe 82E3      		ldi r24,lo8(50)
 216 0100 0E94 0000 		call LcdDelay
 217 0104 83E3      		ldi r24,lo8(51)
 218 0106 0E94 0000 		call LcdSendNibble
 219 010a 82E3      		ldi r24,lo8(50)
 220 010c 0E94 0000 		call LcdDelay
 221 0110 83E3      		ldi r24,lo8(51)
 222 0112 0E94 0000 		call LcdSendNibble
 223 0116 82E3      		ldi r24,lo8(50)
 224 0118 0E94 0000 		call LcdDelay
 225 011c 82E2      		ldi r24,lo8(34)
 226 011e 0E94 0000 		call LcdSendNibble
 227 0122 82E3      		ldi r24,lo8(50)
 228 0124 0E94 0000 		call LcdDelay
GAS LISTING C:\Temp/cc6yKOdu.s 			page 5


 229 0128 D801      		movw r26,r16
 230 012a 5196      		adiw r26,17
 231 012c ED91      		ld r30,X+
 232 012e FC91      		ld r31,X
 233 0130 5297      		sbiw r26,17+1
 234 0132 8789      		ldd r24,Z+23
 235 0134 8230      		cpi r24,lo8(2)
 236 0136 00F4      		brsh .L28
 237 0138 80E2      		ldi r24,lo8(32)
 238 013a 00C0      		rjmp .L29
 239               	.L28:
 240 013c 88E2      		ldi r24,lo8(40)
 241               	.L29:
 242 013e 61E0      		ldi r22,lo8(1)
 243 0140 0E94 0000 		call LcdWriteCmd
 244 0144 62E0      		ldi r22,lo8(2)
 245 0146 81E0      		ldi r24,lo8(1)
 246 0148 0E94 0000 		call LcdWriteCmd
 247 014c 62E0      		ldi r22,lo8(2)
 248 014e 86E0      		ldi r24,lo8(6)
 249 0150 0E94 0000 		call LcdWriteCmd
 250 0154 62E0      		ldi r22,lo8(2)
 251 0156 8CE0      		ldi r24,lo8(12)
 252 0158 0E94 0000 		call LcdWriteCmd
 253 015c 62E0      		ldi r22,lo8(2)
 254 015e 82E0      		ldi r24,lo8(2)
 255 0160 0E94 0000 		call LcdWriteCmd
 256 0164 62E0      		ldi r22,lo8(2)
 257 0166 80E8      		ldi r24,lo8(-128)
 258 0168 0E94 0000 		call LcdWriteCmd
 259 016c 1092 0000 		sts during_init,__zero_reg__
 260               	/* epilogue start */
 261 0170 1F91      		pop r17
 262 0172 0F91      		pop r16
 263 0174 0895      		ret
 264               		.size	LcdInit, .-LcdInit
 265               	.global	dcb_term
 266               		.data
 267               		.type	dcb_term, @object
 268               		.size	dcb_term, 32
 269               	dcb_term:
 270 0000 0000      		.word	gs(LcdInit)
 271 0002 0000      		.word	gs(LcdWriteData)
 272 0004 0000      		.word	gs(LcdWriteCmd)
 273 0006 0000      		.word	gs(LcdClear)
 274 0008 0000      		.word	gs(LcdSetCursor)
 275 000a 0000      		.word	gs(LcdCursorHome)
 276 000c 0000      		.word	gs(LcdCursorLeft)
 277 000e 0000      		.word	gs(LcdCursorRight)
 278 0010 0000      		.word	gs(LcdCursorMode)
 279 0012 00        		.byte	0
 280 0013 00        		.byte	0
 281 0014 00        		.byte	0
 282 0015 00        		.byte	0
 283 0016 00        		.byte	0
 284 0017 02        		.byte	2
 285 0018 10        		.byte	16
GAS LISTING C:\Temp/cc6yKOdu.s 			page 6


 286 0019 10        		.byte	16
 287 001a 00        		.byte	0
 288 001b 00        		.byte	0
 289 001c 0000      		.word	0
 290 001e 0000      		.skip 2,0
 291               	.global	devLcd
 292               		.type	devLcd, @object
 293               		.size	devLcd, 35
 294               	devLcd:
 295 0020 0000      		.word	0
 296 0022 6C        		.byte	108
 297 0023 63        		.byte	99
 298 0024 64        		.byte	100
 299 0025 00        		.byte	0
 300 0026 00        		.byte	0
 301 0027 00        		.byte	0
 302 0028 00        		.byte	0
 303 0029 00        		.byte	0
 304 002a 00        		.byte	0
 305 002b 02        		.byte	2
 306 002c 0000      		.word	0
 307 002e 00        		.byte	0
 308 002f 0000      		.word	0
 309 0031 0000      		.word	dcb_term
 310 0033 0000      		.word	gs(TermInit)
 311 0035 0000      		.word	gs(TermIOCtl)
 312 0037 0000      		.word	0
 313 0039 0000      		.word	gs(TermWrite)
 314 003b 0000      		.word	gs(TermWrite_P)
 315 003d 0000      		.word	gs(TermOpen)
 316 003f 0000      		.word	gs(TermClose)
 317 0041 0000      		.word	0
 318               		.type	during_init, @object
 319               		.size	during_init, 1
 320               	during_init:
 321 0043 01        		.byte	1
GAS LISTING C:\Temp/cc6yKOdu.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 hd44780.c
  C:\Temp/cc6yKOdu.s:2      *ABS*:0000003f __SREG__
  C:\Temp/cc6yKOdu.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/cc6yKOdu.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/cc6yKOdu.s:5      *ABS*:00000034 __CCP__
  C:\Temp/cc6yKOdu.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/cc6yKOdu.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/cc6yKOdu.s:12     .text:00000000 LcdSendNibble
  C:\Temp/cc6yKOdu.s:57     .text:00000026 LcdDelay
  C:\Temp/cc6yKOdu.s:64     .text:0000002c LcdSendByte
  C:\Temp/cc6yKOdu.s:92     .text:0000005c LcdWriteCmd
  C:\Temp/cc6yKOdu.s:102    .text:00000066 LcdCursorMode
  C:\Temp/cc6yKOdu.s:112    .text:00000070 LcdCursorRight
  C:\Temp/cc6yKOdu.s:122    .text:0000007a LcdCursorLeft
  C:\Temp/cc6yKOdu.s:132    .text:00000084 LcdCursorHome
  C:\Temp/cc6yKOdu.s:142    .text:0000008e LcdSetCursor
  C:\Temp/cc6yKOdu.s:183    .text:000000d6 LcdClear
  C:\Temp/cc6yKOdu.s:193    .text:000000e0 LcdWriteData
  C:\Temp/cc6yKOdu.s:204    .text:000000ec LcdInit
  C:\Temp/cc6yKOdu.s:320    .data:00000043 during_init
  C:\Temp/cc6yKOdu.s:269    .data:00000000 dcb_term
  C:\Temp/cc6yKOdu.s:294    .data:00000020 devLcd

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutDelay
TermInit
TermIOCtl
TermWrite
TermWrite_P
TermOpen
TermClose
