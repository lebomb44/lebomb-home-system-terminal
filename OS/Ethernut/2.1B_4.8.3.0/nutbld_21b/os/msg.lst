GAS LISTING C:\Temp/cc7flE3a.s 			page 1


   1               		.file	"msg.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	NutMsgQFull
  12               		.type	NutMsgQFull, @function
  13               	NutMsgQFull:
  14               	/* prologue: function */
  15               	/* frame size = 0 */
  16 0000 FC01      		movw r30,r24
  17 0002 2781      		ldd r18,Z+7
  18 0004 30E0      		ldi r19,lo8(0)
  19 0006 2F5F      		subi r18,lo8(-(1))
  20 0008 3F4F      		sbci r19,hi8(-(1))
  21 000a 8085      		ldd r24,Z+8
  22 000c 90E0      		ldi r25,lo8(0)
  23 000e 2823      		and r18,r24
  24 0010 3923      		and r19,r25
  25 0012 8681      		ldd r24,Z+6
  26 0014 90E0      		ldi r25,lo8(0)
  27 0016 2817      		cp r18,r24
  28 0018 3907      		cpc r19,r25
  29 001a 01F0      		breq .L2
  30 001c 20E0      		ldi r18,lo8(0)
  31 001e 30E0      		ldi r19,hi8(0)
  32 0020 00C0      		rjmp .L3
  33               	.L2:
  34 0022 2FEF      		ldi r18,lo8(-1)
  35 0024 3FEF      		ldi r19,hi8(-1)
  36               	.L3:
  37 0026 C901      		movw r24,r18
  38               	/* epilogue start */
  39 0028 0895      		ret
  40               		.size	NutMsgQFull, .-NutMsgQFull
  41               	.global	NutMsgQFlush
  42               		.type	NutMsgQFlush, @function
  43               	NutMsgQFlush:
  44               	/* prologue: function */
  45               	/* frame size = 0 */
  46 002a FC01      		movw r30,r24
  47               	/* #APP */
  48               	 ;  385 "../../nut/os/msg.c" 1
  49 002c 0FB6      		in  __tmp_reg__, __SREG__
  50 002e F894      		cli
  51 0030 0F92      		push __tmp_reg__
  52               		
  53               	 ;  0 "" 2
  54               	/* #NOAPP */
  55 0032 8781      		ldd r24,Z+7
  56 0034 8683      		std Z+6,r24
  57 0036 1182      		std Z+1,__zero_reg__
GAS LISTING C:\Temp/cc7flE3a.s 			page 2


  58 0038 1082      		st Z,__zero_reg__
  59               	/* #APP */
  60               	 ;  395 "../../nut/os/msg.c" 1
  61 003a 0F90      		pop __tmp_reg__
  62 003c 0FBE      		out __SREG__, __tmp_reg__
  63               		
  64               	 ;  0 "" 2
  65               	/* epilogue start */
  66               	/* #NOAPP */
  67 003e 0895      		ret
  68               		.size	NutMsgQFlush, .-NutMsgQFlush
  69               	.global	NutMsgQGetMessage
  70               		.type	NutMsgQGetMessage, @function
  71               	NutMsgQGetMessage:
  72 0040 EF92      		push r14
  73 0042 FF92      		push r15
  74 0044 0F93      		push r16
  75 0046 1F93      		push r17
  76 0048 CF93      		push r28
  77 004a DF93      		push r29
  78               	/* prologue: function */
  79               	/* frame size = 0 */
  80 004c EC01      		movw r28,r24
  81 004e 8B01      		movw r16,r22
  82               	/* #APP */
  83               	 ;  347 "../../nut/os/msg.c" 1
  84 0050 0FB6      		in  __tmp_reg__, __SREG__
  85 0052 F894      		cli
  86 0054 0F92      		push __tmp_reg__
  87               		
  88               	 ;  0 "" 2
  89               	/* #NOAPP */
  90 0056 F82E      		mov r15,r24
  91 0058 ED2E      		mov r14,r29
  92 005a BA01      		movw r22,r20
  93 005c A901      		movw r20,r18
  94 005e 0E94 0000 		call NutEventWait
  95 0062 892B      		or r24,r25
  96 0064 01F0      		breq .L8
  97               	/* #APP */
  98               	 ;  350 "../../nut/os/msg.c" 1
  99 0066 0F90      		pop __tmp_reg__
 100 0068 0FBE      		out __SREG__, __tmp_reg__
 101               		
 102               	 ;  0 "" 2
 103               	/* #NOAPP */
 104 006a 2FEF      		ldi r18,lo8(-1)
 105 006c 3FEF      		ldi r19,hi8(-1)
 106 006e 00C0      		rjmp .L9
 107               	.L8:
 108 0070 8E81      		ldd r24,Y+6
 109 0072 90E0      		ldi r25,lo8(0)
 110 0074 FC01      		movw r30,r24
 111 0076 EE0F      		lsl r30
 112 0078 FF1F      		rol r31
 113 007a EE0F      		lsl r30
 114 007c FF1F      		rol r31
GAS LISTING C:\Temp/cc7flE3a.s 			page 3


 115 007e E80F      		add r30,r24
 116 0080 F91F      		adc r31,r25
 117 0082 EC0F      		add r30,r28
 118 0084 FD1F      		adc r31,r29
 119 0086 D801      		movw r26,r16
 120 0088 3996      		adiw r30,9
 121 008a 85E0      		ldi r24,lo8(5)
 122               	.L10:
 123 008c 0190      		ld r0,Z+
 124 008e 0D92      		st X+,r0
 125 0090 8150      		subi r24,lo8(-(-1))
 126 0092 01F4      		brne .L10
 127 0094 8E81      		ldd r24,Y+6
 128 0096 8F5F      		subi r24,lo8(-(1))
 129 0098 9885      		ldd r25,Y+8
 130 009a 8923      		and r24,r25
 131 009c 8E83      		std Y+6,r24
 132 009e 9F81      		ldd r25,Y+7
 133 00a0 8917      		cp r24,r25
 134 00a2 01F0      		breq .L11
 135 00a4 8F2D      		mov r24,r15
 136 00a6 9E2D      		mov r25,r14
 137 00a8 0E94 0000 		call NutEventPostAsync
 138               	.L11:
 139               	/* #APP */
 140               	 ;  365 "../../nut/os/msg.c" 1
 141 00ac 0F90      		pop __tmp_reg__
 142 00ae 0FBE      		out __SREG__, __tmp_reg__
 143               		
 144               	 ;  0 "" 2
 145               	/* #NOAPP */
 146 00b0 F801      		movw r30,r16
 147 00b2 8081      		ld r24,Z
 148 00b4 8E3F      		cpi r24,lo8(-2)
 149 00b6 01F4      		brne .L12
 150 00b8 2381      		ldd r18,Z+3
 151 00ba 3481      		ldd r19,Z+4
 152 00bc F901      		movw r30,r18
 153 00be 8481      		ldd r24,Z+4
 154 00c0 9581      		ldd r25,Z+5
 155 00c2 F801      		movw r30,r16
 156 00c4 9483      		std Z+4,r25
 157 00c6 8383      		std Z+3,r24
 158 00c8 F901      		movw r30,r18
 159 00ca 8281      		ldd r24,Z+2
 160 00cc 9381      		ldd r25,Z+3
 161 00ce F801      		movw r30,r16
 162 00d0 9283      		std Z+2,r25
 163 00d2 8183      		std Z+1,r24
 164 00d4 F901      		movw r30,r18
 165 00d6 8285      		ldd r24,Z+10
 166 00d8 80FF      		sbrs r24,0
 167 00da 00C0      		rjmp .L12
 168 00dc EA81      		ldd r30,Y+2
 169 00de FB81      		ldd r31,Y+3
 170 00e0 DE01      		movw r26,r28
 171 00e2 1296      		adiw r26,2
GAS LISTING C:\Temp/cc7flE3a.s 			page 4


 172 00e4 00C0      		rjmp .L13
 173               	.L15:
 174 00e6 4085      		ldd r20,Z+8
 175 00e8 5185      		ldd r21,Z+9
 176 00ea E217      		cp r30,r18
 177 00ec F307      		cpc r31,r19
 178 00ee 01F4      		brne .L14
 179 00f0 4C93      		st X,r20
 180 00f2 1196      		adiw r26,1
 181 00f4 5C93      		st X,r21
 182 00f6 8091 0000 		lds r24,nutMsgFreeTimers
 183 00fa 9091 0000 		lds r25,(nutMsgFreeTimers)+1
 184 00fe 9187      		std Z+9,r25
 185 0100 8087      		std Z+8,r24
 186 0102 F093 0000 		sts (nutMsgFreeTimers)+1,r31
 187 0106 E093 0000 		sts nutMsgFreeTimers,r30
 188 010a 00C0      		rjmp .L12
 189               	.L14:
 190 010c DF01      		movw r26,r30
 191 010e 1896      		adiw r26,8
 192 0110 CA01      		movw r24,r20
 193 0112 FC01      		movw r30,r24
 194               	.L13:
 195 0114 3097      		sbiw r30,0
 196 0116 01F4      		brne .L15
 197               	.L12:
 198 0118 20E0      		ldi r18,lo8(0)
 199 011a 30E0      		ldi r19,hi8(0)
 200               	.L9:
 201 011c C901      		movw r24,r18
 202               	/* epilogue start */
 203 011e DF91      		pop r29
 204 0120 CF91      		pop r28
 205 0122 1F91      		pop r17
 206 0124 0F91      		pop r16
 207 0126 FF90      		pop r15
 208 0128 EF90      		pop r14
 209 012a 0895      		ret
 210               		.size	NutMsgQGetMessage, .-NutMsgQGetMessage
 211               	.global	NutMsgQPost
 212               		.type	NutMsgQPost, @function
 213               	NutMsgQPost:
 214 012c 1F93      		push r17
 215 012e CF93      		push r28
 216 0130 DF93      		push r29
 217               	/* prologue: function */
 218               	/* frame size = 0 */
 219 0132 DC01      		movw r26,r24
 220 0134 162F      		mov r17,r22
 221 0136 BA01      		movw r22,r20
 222 0138 E901      		movw r28,r18
 223               	/* #APP */
 224               	 ;  160 "../../nut/os/msg.c" 1
 225 013a 0FB6      		in  __tmp_reg__, __SREG__
 226 013c F894      		cli
 227 013e 0F92      		push __tmp_reg__
 228               		
GAS LISTING C:\Temp/cc7flE3a.s 			page 5


 229               	 ;  0 "" 2
 230               	/* #NOAPP */
 231 0140 1796      		adiw r26,7
 232 0142 8C91      		ld r24,X
 233 0144 1797      		sbiw r26,7
 234 0146 482F      		mov r20,r24
 235 0148 50E0      		ldi r21,lo8(0)
 236 014a 9A01      		movw r18,r20
 237 014c 2F5F      		subi r18,lo8(-(1))
 238 014e 3F4F      		sbci r19,hi8(-(1))
 239 0150 1896      		adiw r26,8
 240 0152 8C91      		ld r24,X
 241 0154 1897      		sbiw r26,8
 242 0156 90E0      		ldi r25,lo8(0)
 243 0158 2823      		and r18,r24
 244 015a 3923      		and r19,r25
 245 015c 1696      		adiw r26,6
 246 015e 8C91      		ld r24,X
 247 0160 1697      		sbiw r26,6
 248 0162 90E0      		ldi r25,lo8(0)
 249 0164 2817      		cp r18,r24
 250 0166 3907      		cpc r19,r25
 251 0168 01F4      		brne .L19
 252               	/* #APP */
 253               	 ;  163 "../../nut/os/msg.c" 1
 254 016a 0F90      		pop __tmp_reg__
 255 016c 0FBE      		out __SREG__, __tmp_reg__
 256               		
 257               	 ;  0 "" 2
 258               	/* #NOAPP */
 259 016e 2FEF      		ldi r18,lo8(-1)
 260 0170 3FEF      		ldi r19,hi8(-1)
 261               	.L20:
 262 0172 C901      		movw r24,r18
 263               	/* epilogue start */
 264 0174 DF91      		pop r29
 265 0176 CF91      		pop r28
 266 0178 1F91      		pop r17
 267 017a 0895      		ret
 268               	.L19:
 269 017c FA01      		movw r30,r20
 270 017e EE0F      		lsl r30
 271 0180 FF1F      		rol r31
 272 0182 EE0F      		lsl r30
 273 0184 FF1F      		rol r31
 274 0186 E40F      		add r30,r20
 275 0188 F51F      		adc r31,r21
 276 018a EA0F      		add r30,r26
 277 018c FB1F      		adc r31,r27
 278 018e 1187      		std Z+9,r17
 279 0190 7387      		std Z+11,r23
 280 0192 6287      		std Z+10,r22
 281 0194 D587      		std Z+13,r29
 282 0196 C487      		std Z+12,r28
 283 0198 1796      		adiw r26,7
 284 019a 8C91      		ld r24,X
 285 019c 1797      		sbiw r26,7
GAS LISTING C:\Temp/cc7flE3a.s 			page 6


 286 019e 8F5F      		subi r24,lo8(-(1))
 287 01a0 1896      		adiw r26,8
 288 01a2 9C91      		ld r25,X
 289 01a4 1897      		sbiw r26,8
 290 01a6 8923      		and r24,r25
 291 01a8 1796      		adiw r26,7
 292 01aa 8C93      		st X,r24
 293 01ac 1797      		sbiw r26,7
 294               	/* #APP */
 295               	 ;  176 "../../nut/os/msg.c" 1
 296 01ae 0F90      		pop __tmp_reg__
 297 01b0 0FBE      		out __SREG__, __tmp_reg__
 298               		
 299               	 ;  0 "" 2
 300               	/* #NOAPP */
 301 01b2 CD01      		movw r24,r26
 302 01b4 0E94 0000 		call NutEventPostAsync
 303 01b8 20E0      		ldi r18,lo8(0)
 304 01ba 30E0      		ldi r19,hi8(0)
 305 01bc 00C0      		rjmp .L20
 306               		.size	NutMsgQPost, .-NutMsgQPost
 307               	.global	NutMsgQBroadcast
 308               		.type	NutMsgQBroadcast, @function
 309               	NutMsgQBroadcast:
 310 01be BF92      		push r11
 311 01c0 CF92      		push r12
 312 01c2 DF92      		push r13
 313 01c4 EF92      		push r14
 314 01c6 FF92      		push r15
 315 01c8 0F93      		push r16
 316 01ca 1F93      		push r17
 317 01cc CF93      		push r28
 318 01ce DF93      		push r29
 319               	/* prologue: function */
 320               	/* frame size = 0 */
 321 01d0 B82E      		mov r11,r24
 322 01d2 6B01      		movw r12,r22
 323 01d4 7A01      		movw r14,r20
 324 01d6 C091 0000 		lds r28,nutMsgQue
 325 01da D091 0000 		lds r29,(nutMsgQue)+1
 326 01de 00E0      		ldi r16,lo8(0)
 327 01e0 10E0      		ldi r17,hi8(0)
 328 01e2 00C0      		rjmp .L23
 329               	.L24:
 330 01e4 9701      		movw r18,r14
 331 01e6 A601      		movw r20,r12
 332 01e8 6B2D      		mov r22,r11
 333 01ea CE01      		movw r24,r28
 334 01ec 0E94 0000 		call NutMsgQPost
 335 01f0 081B      		sub r16,r24
 336 01f2 190B      		sbc r17,r25
 337 01f4 0C80      		ldd __tmp_reg__,Y+4
 338 01f6 DD81      		ldd r29,Y+5
 339 01f8 C02D      		mov r28,__tmp_reg__
 340               	.L23:
 341 01fa 2097      		sbiw r28,0
 342 01fc 01F4      		brne .L24
GAS LISTING C:\Temp/cc7flE3a.s 			page 7


 343 01fe C801      		movw r24,r16
 344               	/* epilogue start */
 345 0200 DF91      		pop r29
 346 0202 CF91      		pop r28
 347 0204 1F91      		pop r17
 348 0206 0F91      		pop r16
 349 0208 FF90      		pop r15
 350 020a EF90      		pop r14
 351 020c DF90      		pop r13
 352 020e CF90      		pop r12
 353 0210 BF90      		pop r11
 354 0212 0895      		ret
 355               		.size	NutMsgQBroadcast, .-NutMsgQBroadcast
 356               	.global	NutMsgQStopTimer
 357               		.type	NutMsgQStopTimer, @function
 358               	NutMsgQStopTimer:
 359 0214 0F93      		push r16
 360 0216 1F93      		push r17
 361 0218 CF93      		push r28
 362 021a DF93      		push r29
 363               	/* prologue: function */
 364               	/* frame size = 0 */
 365 021c EC01      		movw r28,r24
 366 021e 0881      		ld r16,Y
 367 0220 1981      		ldd r17,Y+1
 368               	/* #APP */
 369               	 ;  314 "../../nut/os/msg.c" 1
 370 0222 0FB6      		in  __tmp_reg__, __SREG__
 371 0224 F894      		cli
 372 0226 0F92      		push __tmp_reg__
 373               		
 374               	 ;  0 "" 2
 375               	/* #NOAPP */
 376 0228 D801      		movw r26,r16
 377 022a 1696      		adiw r26,6
 378 022c 2C91      		ld r18,X
 379 022e 3FEF      		ldi r19,lo8(-1)
 380 0230 00C0      		rjmp .L27
 381               	.L29:
 382 0232 822F      		mov r24,r18
 383 0234 90E0      		ldi r25,lo8(0)
 384 0236 FC01      		movw r30,r24
 385 0238 EE0F      		lsl r30
 386 023a FF1F      		rol r31
 387 023c EE0F      		lsl r30
 388 023e FF1F      		rol r31
 389 0240 E80F      		add r30,r24
 390 0242 F91F      		adc r31,r25
 391 0244 E00F      		add r30,r16
 392 0246 F11F      		adc r31,r17
 393 0248 8185      		ldd r24,Z+9
 394 024a 8E3F      		cpi r24,lo8(-2)
 395 024c 01F4      		brne .L28
 396 024e 8485      		ldd r24,Z+12
 397 0250 9585      		ldd r25,Z+13
 398 0252 8C17      		cp r24,r28
 399 0254 9D07      		cpc r25,r29
GAS LISTING C:\Temp/cc7flE3a.s 			page 8


 400 0256 01F4      		brne .L28
 401 0258 3187      		std Z+9,r19
 402               	.L28:
 403 025a 2F5F      		subi r18,lo8(-(1))
 404 025c F801      		movw r30,r16
 405 025e 8085      		ldd r24,Z+8
 406 0260 2823      		and r18,r24
 407               	.L27:
 408 0262 D801      		movw r26,r16
 409 0264 1796      		adiw r26,7
 410 0266 8C91      		ld r24,X
 411 0268 2817      		cp r18,r24
 412 026a 01F4      		brne .L29
 413 026c 8E81      		ldd r24,Y+6
 414 026e 9F81      		ldd r25,Y+7
 415 0270 0097      		sbiw r24,0
 416 0272 01F0      		breq .L30
 417 0274 0E94 0000 		call NutTimerStop
 418               	.L30:
 419               	/* #APP */
 420               	 ;  330 "../../nut/os/msg.c" 1
 421 0278 0F90      		pop __tmp_reg__
 422 027a 0FBE      		out __SREG__, __tmp_reg__
 423               		
 424               	 ;  0 "" 2
 425               	/* #NOAPP */
 426 027c D801      		movw r26,r16
 427 027e 1296      		adiw r26,2
 428 0280 ED91      		ld r30,X+
 429 0282 FC91      		ld r31,X
 430 0284 1397      		sbiw r26,2+1
 431 0286 1296      		adiw r26,2
 432 0288 00C0      		rjmp .L31
 433               	.L34:
 434 028a 2085      		ldd r18,Z+8
 435 028c 3185      		ldd r19,Z+9
 436 028e EC17      		cp r30,r28
 437 0290 FD07      		cpc r31,r29
 438 0292 01F4      		brne .L32
 439 0294 2C93      		st X,r18
 440 0296 1196      		adiw r26,1
 441 0298 3C93      		st X,r19
 442 029a 8091 0000 		lds r24,nutMsgFreeTimers
 443 029e 9091 0000 		lds r25,(nutMsgFreeTimers)+1
 444 02a2 9187      		std Z+9,r25
 445 02a4 8087      		std Z+8,r24
 446 02a6 F093 0000 		sts (nutMsgFreeTimers)+1,r31
 447 02aa E093 0000 		sts nutMsgFreeTimers,r30
 448 02ae 00C0      		rjmp .L35
 449               	.L32:
 450 02b0 DF01      		movw r26,r30
 451 02b2 1896      		adiw r26,8
 452 02b4 C901      		movw r24,r18
 453 02b6 FC01      		movw r30,r24
 454               	.L31:
 455 02b8 3097      		sbiw r30,0
 456 02ba 01F4      		brne .L34
GAS LISTING C:\Temp/cc7flE3a.s 			page 9


 457               	.L35:
 458               	/* epilogue start */
 459 02bc DF91      		pop r29
 460 02be CF91      		pop r28
 461 02c0 1F91      		pop r17
 462 02c2 0F91      		pop r16
 463 02c4 0895      		ret
 464               		.size	NutMsgQStopTimer, .-NutMsgQStopTimer
 465               	.global	NutMsgQStartTimer
 466               		.type	NutMsgQStartTimer, @function
 467               	NutMsgQStartTimer:
 468 02c6 6F92      		push r6
 469 02c8 7F92      		push r7
 470 02ca 8F92      		push r8
 471 02cc 9F92      		push r9
 472 02ce AF92      		push r10
 473 02d0 BF92      		push r11
 474 02d2 CF92      		push r12
 475 02d4 DF92      		push r13
 476 02d6 EF92      		push r14
 477 02d8 0F93      		push r16
 478 02da 1F93      		push r17
 479 02dc CF93      		push r28
 480 02de DF93      		push r29
 481               	/* prologue: function */
 482               	/* frame size = 0 */
 483 02e0 6C01      		movw r12,r24
 484 02e2 4A01      		movw r8,r20
 485 02e4 5B01      		movw r10,r22
 486 02e6 3901      		movw r6,r18
 487 02e8 C091 0000 		lds r28,nutMsgFreeTimers
 488 02ec D091 0000 		lds r29,(nutMsgFreeTimers)+1
 489 02f0 2097      		sbiw r28,0
 490 02f2 01F0      		breq .L37
 491 02f4 8885      		ldd r24,Y+8
 492 02f6 9985      		ldd r25,Y+9
 493 02f8 9093 0000 		sts (nutMsgFreeTimers)+1,r25
 494 02fc 8093 0000 		sts nutMsgFreeTimers,r24
 495 0300 00C0      		rjmp .L38
 496               	.L37:
 497 0302 6BE0      		ldi r22,lo8(11)
 498 0304 70E0      		ldi r23,hi8(11)
 499 0306 80E0      		ldi r24,lo8(heapFreeList)
 500 0308 90E0      		ldi r25,hi8(heapFreeList)
 501 030a 0E94 0000 		call NutHeapRootAlloc
 502 030e EC01      		movw r28,r24
 503               	.L38:
 504 0310 D982      		std Y+1,r13
 505 0312 C882      		st Y,r12
 506 0314 1D83      		std Y+5,r17
 507 0316 0C83      		std Y+4,r16
 508 0318 7B82      		std Y+3,r7
 509 031a 6A82      		std Y+2,r6
 510 031c EA86      		std Y+10,r14
 511 031e 0E2D      		mov r16,r14
 512 0320 9E01      		movw r18,r28
 513 0322 40E0      		ldi r20,lo8(gs(NutMsgQTimerCb))
GAS LISTING C:\Temp/cc7flE3a.s 			page 10


 514 0324 50E0      		ldi r21,hi8(gs(NutMsgQTimerCb))
 515 0326 C501      		movw r24,r10
 516 0328 B401      		movw r22,r8
 517 032a 0E94 0000 		call NutTimerStart
 518 032e 9F83      		std Y+7,r25
 519 0330 8E83      		std Y+6,r24
 520 0332 F601      		movw r30,r12
 521 0334 8281      		ldd r24,Z+2
 522 0336 9381      		ldd r25,Z+3
 523 0338 9987      		std Y+9,r25
 524 033a 8887      		std Y+8,r24
 525 033c D383      		std Z+3,r29
 526 033e C283      		std Z+2,r28
 527 0340 CE01      		movw r24,r28
 528               	/* epilogue start */
 529 0342 DF91      		pop r29
 530 0344 CF91      		pop r28
 531 0346 1F91      		pop r17
 532 0348 0F91      		pop r16
 533 034a EF90      		pop r14
 534 034c DF90      		pop r13
 535 034e CF90      		pop r12
 536 0350 BF90      		pop r11
 537 0352 AF90      		pop r10
 538 0354 9F90      		pop r9
 539 0356 8F90      		pop r8
 540 0358 7F90      		pop r7
 541 035a 6F90      		pop r6
 542 035c 0895      		ret
 543               		.size	NutMsgQStartTimer, .-NutMsgQStartTimer
 544               		.type	NutMsgQTimerCb, @function
 545               	NutMsgQTimerCb:
 546 035e 0F93      		push r16
 547 0360 CF93      		push r28
 548 0362 DF93      		push r29
 549               	/* prologue: function */
 550               	/* frame size = 0 */
 551 0364 EB01      		movw r28,r22
 552 0366 9B01      		movw r18,r22
 553 0368 40E0      		ldi r20,lo8(0)
 554 036a 50E0      		ldi r21,hi8(0)
 555 036c 6EEF      		ldi r22,lo8(-2)
 556 036e 8881      		ld r24,Y
 557 0370 9981      		ldd r25,Y+1
 558 0372 0E94 0000 		call NutMsgQPost
 559 0376 2A85      		ldd r18,Y+10
 560 0378 892B      		or r24,r25
 561 037a 01F0      		breq .L41
 562 037c 2223      		tst r18
 563 037e 01F0      		breq .L43
 564 0380 01E0      		ldi r16,lo8(1)
 565 0382 9E01      		movw r18,r28
 566 0384 40E0      		ldi r20,lo8(gs(NutMsgQTimerCb))
 567 0386 50E0      		ldi r21,hi8(gs(NutMsgQTimerCb))
 568 0388 61E0      		ldi r22,lo8(1)
 569 038a 70E0      		ldi r23,hi8(1)
 570 038c 80E0      		ldi r24,hlo8(1)
GAS LISTING C:\Temp/cc7flE3a.s 			page 11


 571 038e 90E0      		ldi r25,hhi8(1)
 572 0390 0E94 0000 		call NutTimerStartTicks
 573 0394 9F83      		std Y+7,r25
 574 0396 8E83      		std Y+6,r24
 575 0398 00C0      		rjmp .L43
 576               	.L41:
 577 039a 2223      		tst r18
 578 039c 01F0      		breq .L43
 579 039e 1F82      		std Y+7,__zero_reg__
 580 03a0 1E82      		std Y+6,__zero_reg__
 581               	.L43:
 582               	/* epilogue start */
 583 03a2 DF91      		pop r29
 584 03a4 CF91      		pop r28
 585 03a6 0F91      		pop r16
 586 03a8 0895      		ret
 587               		.size	NutMsgQTimerCb, .-NutMsgQTimerCb
 588               	.global	NutMsgQSend
 589               		.type	NutMsgQSend, @function
 590               	NutMsgQSend:
 591               	/* prologue: function */
 592               	/* frame size = 0 */
 593 03aa 0E94 0000 		call NutMsgQPost
 594 03ae 892B      		or r24,r25
 595 03b0 01F0      		breq .L45
 596 03b2 2FEF      		ldi r18,lo8(-1)
 597 03b4 3FEF      		ldi r19,hi8(-1)
 598 03b6 00C0      		rjmp .L46
 599               	.L45:
 600 03b8 0E94 0000 		call NutThreadYield
 601 03bc 20E0      		ldi r18,lo8(0)
 602 03be 30E0      		ldi r19,hi8(0)
 603               	.L46:
 604 03c0 C901      		movw r24,r18
 605               	/* epilogue start */
 606 03c2 0895      		ret
 607               		.size	NutMsgQSend, .-NutMsgQSend
 608               	.global	NutMsgQCreate
 609               		.type	NutMsgQCreate, @function
 610               	NutMsgQCreate:
 611 03c4 1F93      		push r17
 612               	/* prologue: function */
 613               	/* frame size = 0 */
 614 03c6 21E0      		ldi r18,lo8(1)
 615 03c8 30E0      		ldi r19,hi8(1)
 616 03ca 00C0      		rjmp 2f
 617 03cc 220F      	1:	lsl r18
 618 03ce 331F      		rol r19
 619 03d0 8A95      	2:	dec r24
 620 03d2 02F4      		brpl 1b
 621 03d4 122F      		mov r17,r18
 622 03d6 65E0      		ldi r22,lo8(5)
 623 03d8 269F      		mul r18,r22
 624 03da B001      		movw r22,r0
 625 03dc 1124      		clr r1
 626 03de 625F      		subi r22,lo8(-(14))
 627 03e0 7F4F      		sbci r23,hi8(-(14))
GAS LISTING C:\Temp/cc7flE3a.s 			page 12


 628 03e2 80E0      		ldi r24,lo8(heapFreeList)
 629 03e4 90E0      		ldi r25,hi8(heapFreeList)
 630 03e6 0E94 0000 		call NutHeapRootAllocClear
 631 03ea FC01      		movw r30,r24
 632 03ec 0097      		sbiw r24,0
 633 03ee 01F0      		breq .L49
 634 03f0 1150      		subi r17,lo8(-(-1))
 635 03f2 1087      		std Z+8,r17
 636 03f4 8091 0000 		lds r24,nutMsgQue
 637 03f8 9091 0000 		lds r25,(nutMsgQue)+1
 638 03fc 9583      		std Z+5,r25
 639 03fe 8483      		std Z+4,r24
 640 0400 F093 0000 		sts (nutMsgQue)+1,r31
 641 0404 E093 0000 		sts nutMsgQue,r30
 642               	.L49:
 643 0408 CF01      		movw r24,r30
 644               	/* epilogue start */
 645 040a 1F91      		pop r17
 646 040c 0895      		ret
 647               		.size	NutMsgQCreate, .-NutMsgQCreate
 648               		.comm nutMsgQue,2,1
 649               		.comm nutMsgFreeTimers,2,1
GAS LISTING C:\Temp/cc7flE3a.s 			page 13


DEFINED SYMBOLS
                            *ABS*:00000000 msg.c
  C:\Temp/cc7flE3a.s:2      *ABS*:0000003f __SREG__
  C:\Temp/cc7flE3a.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/cc7flE3a.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/cc7flE3a.s:5      *ABS*:00000034 __CCP__
  C:\Temp/cc7flE3a.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/cc7flE3a.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/cc7flE3a.s:13     .text:00000000 NutMsgQFull
  C:\Temp/cc7flE3a.s:43     .text:0000002a NutMsgQFlush
  C:\Temp/cc7flE3a.s:71     .text:00000040 NutMsgQGetMessage
                            *COM*:00000002 nutMsgFreeTimers
  C:\Temp/cc7flE3a.s:213    .text:0000012c NutMsgQPost
  C:\Temp/cc7flE3a.s:309    .text:000001be NutMsgQBroadcast
                            *COM*:00000002 nutMsgQue
  C:\Temp/cc7flE3a.s:358    .text:00000214 NutMsgQStopTimer
  C:\Temp/cc7flE3a.s:467    .text:000002c6 NutMsgQStartTimer
  C:\Temp/cc7flE3a.s:545    .text:0000035e NutMsgQTimerCb
  C:\Temp/cc7flE3a.s:590    .text:000003aa NutMsgQSend
  C:\Temp/cc7flE3a.s:610    .text:000003c4 NutMsgQCreate

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutEventWait
NutEventPostAsync
NutTimerStop
heapFreeList
NutHeapRootAlloc
NutTimerStart
NutTimerStartTicks
NutThreadYield
NutHeapRootAllocClear
