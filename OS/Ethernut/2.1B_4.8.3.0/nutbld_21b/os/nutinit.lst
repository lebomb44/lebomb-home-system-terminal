GAS LISTING C:\Temp/ccBHrCh5.s 			page 1


   1               		.file	"nutinit.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.section	.init1,"ax",@progbits
  11               		.type	NutInitXRAM, @function
  12               	NutInitXRAM:
  13               	/* prologue: naked */
  14               	/* frame size = 0 */
  15 0000 80EC      		ldi r24,lo8(-64)
  16 0002 85BF      		out 85-32,r24
  17               	/* epilogue start */
  18               		.size	NutInitXRAM, .-NutInitXRAM
  19               		.text
  20               	.global	NutThreadSetSleepMode
  21               		.type	NutThreadSetSleepMode, @function
  22               	NutThreadSetSleepMode:
  23               	/* prologue: function */
  24               	/* frame size = 0 */
  25 0000 9091 0000 		lds r25,idle_sleep_mode
  26 0004 8093 0000 		sts idle_sleep_mode,r24
  27 0008 892F      		mov r24,r25
  28               	/* epilogue start */
  29 000a 0895      		ret
  30               		.size	NutThreadSetSleepMode, .-NutThreadSetSleepMode
  31               		.section	.init5,"ax",@progbits
  32               		.type	NutInitSP, @function
  33               	NutInitSP:
  34               	/* prologue: naked */
  35               	/* frame size = 0 */
  36 0000 8FEF      		ldi r24,lo8(32767)
  37 0002 9FE7      		ldi r25,hi8(32767)
  38 0004 9EBF      		out (93)+1-32,r25
  39 0006 8DBF      		out 93-32,r24
  40               	/* epilogue start */
  41               		.size	NutInitSP, .-NutInitSP
  42               		.section	.init1
  43               		.type	NutCustomInit, @function
  44               	NutCustomInit:
  45               	/* prologue: naked */
  46               	/* frame size = 0 */
  47 0004 87E0      		ldi r24,lo8(7)
  48 0006 89B9      		out 41-32,r24
  49 0008 8093 9900 		sts 153,r24
  50               	/* epilogue start */
  51               		.size	NutCustomInit, .-NutCustomInit
  52               		.section	.init5
  53               		.type	NutInitHeap, @function
  54               	NutInitHeap:
  55               	/* prologue: naked */
  56               	/* frame size = 0 */
  57 0008 8FEF      		ldi r24,lo8(32767)
GAS LISTING C:\Temp/ccBHrCh5.s 			page 2


  58 000a 9FE7      		ldi r25,hi8(32767)
  59 000c 8050      		subi r24,lo8(__heap_start)
  60 000e 9040      		sbci r25,hi8(__heap_start)
  61 0010 8158      		subi r24,lo8(385)
  62 0012 9140      		sbci r25,hi8(385)
  63 0014 00F0      		brlo .L11
  64 0016 4FEF      		ldi r20,lo8(32511)
  65 0018 5EE7      		ldi r21,hi8(32511)
  66 001a 4050      		subi r20,lo8(__heap_start)
  67 001c 5040      		sbci r21,hi8(__heap_start)
  68 001e 60E0      		ldi r22,lo8(__heap_start)
  69 0020 70E0      		ldi r23,hi8(__heap_start)
  70 0022 80E0      		ldi r24,lo8(heapFreeList)
  71 0024 90E0      		ldi r25,hi8(heapFreeList)
  72 0026 0E94 0000 		call NutHeapRootAdd
  73               	.L11:
  74               	/* epilogue start */
  75               		.size	NutInitHeap, .-NutInitHeap
  76               		.data
  77               	.LC0:
  78 0000 6964 6C65 		.string	"idle"
  78      00
  79               		.section	.init8,"ax",@progbits
  80               	.global	NutInit
  81               		.type	NutInit, @function
  82               	NutInit:
  83               	/* prologue: naked */
  84               	/* frame size = 0 */
  85 0000 0E94 0000 		call NutLoadConfig
  86 0004 20E8      		ldi r18,lo8(128)
  87 0006 30E0      		ldi r19,hi8(128)
  88 0008 40E0      		ldi r20,lo8(0)
  89 000a 50E0      		ldi r21,hi8(0)
  90 000c 60E0      		ldi r22,lo8(gs(NutIdle))
  91 000e 70E0      		ldi r23,hi8(gs(NutIdle))
  92 0010 80E0      		ldi r24,lo8(.LC0)
  93 0012 90E0      		ldi r25,hi8(.LC0)
  94 0014 0E94 0000 		call NutThreadCreate
  95               	/* epilogue start */
  96               		.size	NutInit, .-NutInit
  97               		.data
  98               	.LC1:
  99 0005 6D61 696E 		.string	"main"
  99      00
 100               		.text
 101               	.global	NutIdle
 102               		.type	NutIdle, @function
 103               	NutIdle:
 104               	/* prologue: function */
 105               	/* frame size = 0 */
 106 000c 0E94 0000 		call NutTimerInit
 107 0010 20E0      		ldi r18,lo8(1024)
 108 0012 34E0      		ldi r19,hi8(1024)
 109 0014 40E0      		ldi r20,lo8(0)
 110 0016 50E0      		ldi r21,hi8(0)
 111 0018 60E0      		ldi r22,lo8(gs(NutAppMain))
 112 001a 70E0      		ldi r23,hi8(gs(NutAppMain))
GAS LISTING C:\Temp/ccBHrCh5.s 			page 3


 113 001c 80E0      		ldi r24,lo8(.LC1)
 114 001e 90E0      		ldi r25,hi8(.LC1)
 115 0020 0E94 0000 		call NutThreadCreate
 116 0024 8EEF      		ldi r24,lo8(-2)
 117 0026 0E94 0000 		call NutThreadSetPriority
 118               	.L19:
 119 002a 0E94 0000 		call NutThreadYield
 120 002e 0E94 0000 		call NutThreadDestroy
 121 0032 2091 0000 		lds r18,idle_sleep_mode
 122 0036 2F3F      		cpi r18,lo8(-1)
 123 0038 01F0      		breq .L19
 124 003a 95B7      		in r25,85-32
 125 003c 85B7      		in r24,85-32
 126 003e 837E      		andi r24,lo8(-29)
 127 0040 822B      		or r24,r18
 128 0042 85BF      		out 85-32,r24
 129 0044 85B7      		in r24,85-32
 130 0046 8062      		ori r24,lo8(32)
 131 0048 85BF      		out 85-32,r24
 132               	/* #APP */
 133               	 ;  523 "../../nut/os/../arch/avr/os/nutinit.c" 1
 134 004a 8895      		sleep
 135               		
 136               	 ;  0 "" 2
 137               	/* #NOAPP */
 138 004c 85B7      		in r24,85-32
 139 004e 8F7D      		andi r24,lo8(-33)
 140 0050 85BF      		out 85-32,r24
 141 0052 85B7      		in r24,85-32
 142 0054 9C71      		andi r25,lo8(28)
 143 0056 837E      		andi r24,lo8(-29)
 144 0058 982B      		or r25,r24
 145 005a 95BF      		out 85-32,r25
 146 005c 00C0      		rjmp .L19
 147               		.size	NutIdle, .-NutIdle
 148               	.global	ms62_5
 149               	.global	ms62_5
 150               		.section .bss
 151               		.type	ms62_5, @object
 152               		.size	ms62_5, 1
 153               	ms62_5:
 154 0000 00        		.skip 1,0
 155               	.global	idle_sleep_mode
 156               		.data
 157               		.type	idle_sleep_mode, @object
 158               		.size	idle_sleep_mode, 1
 159               	idle_sleep_mode:
 160 000a FF        		.byte	-1
 161               		.comm nutmem_onchip,64,1
GAS LISTING C:\Temp/ccBHrCh5.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 nutinit.c
  C:\Temp/ccBHrCh5.s:2      *ABS*:0000003f __SREG__
  C:\Temp/ccBHrCh5.s:3      *ABS*:0000003e __SP_H__
  C:\Temp/ccBHrCh5.s:4      *ABS*:0000003d __SP_L__
  C:\Temp/ccBHrCh5.s:5      *ABS*:00000034 __CCP__
  C:\Temp/ccBHrCh5.s:6      *ABS*:00000000 __tmp_reg__
  C:\Temp/ccBHrCh5.s:7      *ABS*:00000001 __zero_reg__
  C:\Temp/ccBHrCh5.s:12     .init1:00000000 NutInitXRAM
  C:\Temp/ccBHrCh5.s:22     .text:00000000 NutThreadSetSleepMode
  C:\Temp/ccBHrCh5.s:159    .data:0000000a idle_sleep_mode
  C:\Temp/ccBHrCh5.s:33     .init5:00000000 NutInitSP
  C:\Temp/ccBHrCh5.s:44     .init1:00000004 NutCustomInit
  C:\Temp/ccBHrCh5.s:54     .init5:00000008 NutInitHeap
  C:\Temp/ccBHrCh5.s:82     .init8:00000000 NutInit
  C:\Temp/ccBHrCh5.s:103    .text:0000000c NutIdle
  C:\Temp/ccBHrCh5.s:153    .bss:00000000 ms62_5
                            *COM*:00000040 nutmem_onchip

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
__heap_start
heapFreeList
NutHeapRootAdd
NutLoadConfig
NutThreadCreate
NutTimerInit
NutAppMain
NutThreadSetPriority
NutThreadYield
NutThreadDestroy
