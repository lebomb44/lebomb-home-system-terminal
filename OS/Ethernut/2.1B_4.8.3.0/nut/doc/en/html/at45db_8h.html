<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_81006e530ae69d901a01dddafc7fbce4.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_29e0dcc87985a941e12843c236561edc.html">dev</a>
  </div>
<div class="contents">
<h1>at45db.h File Reference</h1>Dataflash helper routines.  
<a href="#_details">More...</a>
<p>

<p>
<a href="at45db_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#9e6270c72f15f1b345488425ee00c2e1">At45dbSendCmd</a> (int dd, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> op, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> parm, int len, CONST void *tdata, void *rdata, int datalen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send DataFlash command.  <a href="#9e6270c72f15f1b345488425ee00c2e1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#6c5d01b8aadfc21eaa9469c211bcf082">At45dbGetStatus</a> (int dd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#717e106697b405acaf04f86a18d4ad4b">At45dbWaitReady</a> (int dd, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> tmo, int poll)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait until flash memory cycle finished.  <a href="#717e106697b405acaf04f86a18d4ad4b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#4d2d2251e369a16d00756e25fc308f63">At45dbInit</a> (unsigned int spibas, unsigned int spipcs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize dataflash at specified interface and chip select.  <a href="#4d2d2251e369a16d00756e25fc308f63"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#7e93663d9c24c0abea32bc5dad438faf">At45dbPageErase</a> (int dd, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase sector at the specified offset.  <a href="#7e93663d9c24c0abea32bc5dad438faf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#a082ef4b06aedba7af195e57c0bacaf1">At45dbChipErase</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase entire flash memory chip.  <a href="#a082ef4b06aedba7af195e57c0bacaf1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#f036226b4496d4a5ef631aea8e0ca040">At45dbPageRead</a> (int dd, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn, void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from flash memory.  <a href="#f036226b4496d4a5ef631aea8e0ca040"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#b8b1a2c994f2806c76fcfc9403191c3d">At45dbPageWrite</a> (int dd, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn, CONST void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data into flash memory.  <a href="#b8b1a2c994f2806c76fcfc9403191c3d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#f7ff82f66beac6df849036542c6ffbc8">At45dbPages</a> (int dd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#a33340a7a840d40c901d904c1c1542b9">At45dbPageSize</a> (int dd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#12d29529ff4814c36394f96b683866cc">At45dbParamRead</a> (unsigned int pos, void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load configuration parameters from flash memory.  <a href="#12d29529ff4814c36394f96b683866cc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at45db_8h.html#403ccfda94df744eee47d85e6d35ef7d">At45dbParamWrite</a> (unsigned int pos, CONST void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store configuration parameters in flash memory.  <a href="#403ccfda94df744eee47d85e6d35ef7d"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Dataflash helper routines. 
<p>
<div class="fragment"><pre class="fragment">
 *
 * $Log$
 * Revision 1.5  2009/01/17 11:26:47  haraldkipp
 * Getting rid of two remaining BSD types in favor of stdint.
 * Replaced 'u_int' by 'unsinged int' and 'uptr_t' by 'uintptr_t'.
 *
 * Revision 1.4  2008/08/11 06:59:59  haraldkipp
 * BSD types replaced by stdint types (feature request #1282721).
 *
 * Revision 1.3  2008/02/15 17:10:44  haraldkipp
 * At45dbPageErase selected the wrong bank. Fixed. Parameter pgn (page number)
 * of At45dbPageWrite() changed from unsigned int to unsigned long.
 * New routines At45dbPages() and At45dbPageSize() allow to determine the
 * chip's layout.
 *
 * Revision 1.2  2006/10/08 16:48:09  haraldkipp
 * Documentation fixed
 *
 * Revision 1.1  2006/09/29 12:41:55  haraldkipp
 * Added support for AT45 serial DataFlash memory chips. Currently limited
 * to AT91 builds.
 *
 *
 * </pre></div> 
<p>Definition in file <a class="el" href="at45db_8h-source.html">at45db.h</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="9e6270c72f15f1b345488425ee00c2e1"></a><!-- doxytag: member="at45db.h::At45dbSendCmd" ref="9e6270c72f15f1b345488425ee00c2e1" args="(int dd, uint8_t op, uint32_t parm, int len, CONST void *tdata, void *rdata, int datalen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbSendCmd           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>parm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>datalen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send DataFlash command. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dd</em>&nbsp;</td><td>Device descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>op</em>&nbsp;</td><td>Command operation code. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parm</em>&nbsp;</td><td>Command parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Command length. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tdata</em>&nbsp;</td><td>Transmit data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>Receive data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>datalen</em>&nbsp;</td><td>Data length. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00301">301</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at91__spi_8c-source.html#l00617">At91SpiTransfer2()</a>, <a class="el" href="at45db_8c-source.html#l00094">MAX_AT45_CMDLEN</a>, and <a class="el" href="memset_8c-source.html#l00088">memset()</a>.</p>

<p>Referenced by <a class="el" href="at45db_8c-source.html#l00399">At45dbPageErase()</a>, <a class="el" href="at45db_8c-source.html#l00423">At45dbPageRead()</a>, and <a class="el" href="at45db_8c-source.html#l00441">At45dbPageWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6c5d01b8aadfc21eaa9469c211bcf082"></a><!-- doxytag: member="at45db.h::At45dbGetStatus" ref="6c5d01b8aadfc21eaa9469c211bcf082" args="(int dd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> At45dbGetStatus           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00318">318</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at91__spi_8c-source.html#l00617">At91SpiTransfer2()</a>, and <a class="el" href="at45d_8h-source.html#l00140">DFCMD_READ_STATUS</a>.</p>

<p>Referenced by <a class="el" href="at45db_8c-source.html#l00357">At45dbInit()</a>, and <a class="el" href="at45db_8c-source.html#l00333">At45dbWaitReady()</a>.</p>

</div>
</div><p>
<a class="anchor" name="717e106697b405acaf04f86a18d4ad4b"></a><!-- doxytag: member="at45db.h::At45dbWaitReady" ref="717e106697b405acaf04f86a18d4ad4b" args="(int dd, uint32_t tmo, int poll)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbWaitReady           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>poll</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait until flash memory cycle finished. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00333">333</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00318">At45dbGetStatus()</a>, and <a class="el" href="timer_8c-source.html#l00610">NutSleep()</a>.</p>

<p>Referenced by <a class="el" href="at45db_8c-source.html#l00441">At45dbPageWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4d2d2251e369a16d00756e25fc308f63"></a><!-- doxytag: member="at45db.h::At45dbInit" ref="4d2d2251e369a16d00756e25fc308f63" args="(unsigned int spibas, unsigned int spipcs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbInit           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>spibas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>spipcs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize dataflash at specified interface and chip select. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>spibas</em>&nbsp;</td><td>Interface base address. For ARM MCUs this may be the I/O base address of the hardware SPI. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>spipcs</em>&nbsp;</td><td>Device chip select.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Device descriptor or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00357">357</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="arm_8h-source.html#l00201">_BV</a>, <a class="el" href="at45db_8c-source.html#l00268">at45_devt</a>, <a class="el" href="at45db_8c-source.html#l00318">At45dbGetStatus()</a>, <a class="el" href="at91__spi_8c-source.html#l00257">At91SpiInit()</a>, <a class="el" href="at91__spi_8c-source.html#l00327">At91SpiInitChipSelects()</a>, <a class="el" href="at91__spi_8c-source.html#l00297">At91SpiReset()</a>, <a class="el" href="at91__spi_8c-source.html#l00436">At91SpiSetModeFlags()</a>, <a class="el" href="at91__spi_8c-source.html#l00353">At91SpiSetRate()</a>, <a class="el" href="at45db_8c-source.html#l00090">MAX_AT45_DEVICES</a>, <a class="el" href="dev_2at91__spi_8h-source.html#l00074">SPIMF_CAPRISE</a>, <a class="el" href="dev_2at91__spi_8h-source.html#l00069">SPIMF_MASTER</a>, and <a class="el" href="dev_2at91__spi_8h-source.html#l00073">SPIMF_SCKIAHI</a>.</p>

<p>Referenced by <a class="el" href="at45db_8c-source.html#l00490">At45dbParamSize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7e93663d9c24c0abea32bc5dad438faf"></a><!-- doxytag: member="at45db.h::At45dbPageErase" ref="7e93663d9c24c0abea32bc5dad438faf" args="(int dd, uint32_t pgn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbPageErase           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase sector at the specified offset. 
<p>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00399">399</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00301">At45dbSendCmd()</a>, and <a class="el" href="at45d_8h-source.html#l00079">DFCMD_PAGE_ERASE</a>.</p>

</div>
</div><p>
<a class="anchor" name="a082ef4b06aedba7af195e57c0bacaf1"></a><!-- doxytag: member="at45db.h::At45dbChipErase" ref="a082ef4b06aedba7af195e57c0bacaf1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbChipErase           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase entire flash memory chip. 
<p>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00408">408</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="f036226b4496d4a5ef631aea8e0ca040"></a><!-- doxytag: member="at45db.h::At45dbPageRead" ref="f036226b4496d4a5ef631aea8e0ca040" args="(int dd, uint32_t pgn, void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbPageRead           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data from flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dd</em>&nbsp;</td><td>Device descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgn</em>&nbsp;</td><td>Page number to read, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00423">423</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00301">At45dbSendCmd()</a>, and <a class="el" href="at45d_8h-source.html#l00148">DFCMD_CONT_READ</a>.</p>

<p>Referenced by <a class="el" href="at45db_8c-source.html#l00514">At45dbParamRead()</a>, and <a class="el" href="at45db_8c-source.html#l00540">At45dbParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b8b1a2c994f2806c76fcfc9403191c3d"></a><!-- doxytag: member="at45db.h::At45dbPageWrite" ref="b8b1a2c994f2806c76fcfc9403191c3d" args="(int dd, uint32_t pgn, CONST void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbPageWrite           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data into flash memory. 
<p>
The related sector must have been erased before calling this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dd</em>&nbsp;</td><td>Device descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgn</em>&nbsp;</td><td>Start location within the chip, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to write.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00441">441</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00114">AT45_WRITE_POLLS</a>, <a class="el" href="at45db_8c-source.html#l00301">At45dbSendCmd()</a>, <a class="el" href="at45db_8c-source.html#l00333">At45dbWaitReady()</a>, <a class="el" href="at45d_8h-source.html#l00087">DFCMD_BUF1_FLASH</a>, <a class="el" href="at45d_8h-source.html#l00091">DFCMD_BUF1_WRITE</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, and <a class="el" href="icc_8h-source.html#l00142">malloc</a>.</p>

<p>Referenced by <a class="el" href="at45db_8c-source.html#l00540">At45dbParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f7ff82f66beac6df849036542c6ffbc8"></a><!-- doxytag: member="at45db.h::At45dbPages" ref="f7ff82f66beac6df849036542c6ffbc8" args="(int dd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> At45dbPages           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00460">460</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="a33340a7a840d40c901d904c1c1542b9"></a><!-- doxytag: member="at45db.h::At45dbPageSize" ref="a33340a7a840d40c901d904c1c1542b9" args="(int dd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int At45dbPageSize           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00465">465</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="12d29529ff4814c36394f96b683866cc"></a><!-- doxytag: member="at45db.h::At45dbParamRead" ref="12d29529ff4814c36394f96b683866cc" args="(unsigned int pos, void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbParamRead           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load configuration parameters from flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the contents. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00514">514</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00423">At45dbPageRead()</a>, <a class="el" href="at45db_8c-source.html#l00470">At45dbParamPage()</a>, <a class="el" href="at45db_8c-source.html#l00490">At45dbParamSize()</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00105">NutNvMemLoad()</a>.</p>

</div>
</div><p>
<a class="anchor" name="403ccfda94df744eee47d85e6d35ef7d"></a><!-- doxytag: member="at45db.h::At45dbParamWrite" ref="403ccfda94df744eee47d85e6d35ef7d" args="(unsigned int pos, CONST void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At45dbParamWrite           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store configuration parameters in flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to store. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to store.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at45db_8c-source.html#l00540">540</a> of file <a class="el" href="at45db_8c-source.html">at45db.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00423">At45dbPageRead()</a>, <a class="el" href="at45db_8c-source.html#l00441">At45dbPageWrite()</a>, <a class="el" href="at45db_8c-source.html#l00470">At45dbParamPage()</a>, <a class="el" href="at45db_8c-source.html#l00490">At45dbParamSize()</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="memcmp_8c-source.html#l00091">memcmp()</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00136">NutNvMemSave()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
