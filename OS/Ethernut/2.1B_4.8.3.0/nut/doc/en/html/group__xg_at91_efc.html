<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>Embedded Flash Controller<br>
<small>
[<a class="el" href="group__xg_nut_arch_arm_at91.html">AT91 Support</a>]</small>
</h1>Embedded flash controller registers.  
<a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Collaboration diagram for Embedded Flash Controller:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__xg_at91_efc.png" border="0" alt="" usemap="#group____xg__at91__efc_map">
<map name="group____xg__at91__efc_map">
<area shape="rect" href="group__xg_nut_arch_arm_at91.html" title="AT91 peripheral registers." alt="AT91 Support" coords="17,5,111,26"></map></td></tr></table></center>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g8092a6e9a75028e1cd074eb4d1171a8c">FLASH_CHIP_BASE</a>&nbsp;&nbsp;&nbsp;0x00100000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Base address of the flash memory chip.  <a href="#g8092a6e9a75028e1cd074eb4d1171a8c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g595dfd7b134ea9a53694d15d1257e8bb">FLASH_CONF_SECTOR</a>&nbsp;&nbsp;&nbsp;0x0003FF00</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Address offset of the configuration sector.  <a href="#g595dfd7b134ea9a53694d15d1257e8bb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g8e065f9b904e53143ae888c7fda42f05">FLASH_CONF_SIZE</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of the configuration area.  <a href="#g8e065f9b904e53143ae888c7fda42f05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#gacf9be0ebbe27b3946107e80eab71187">FLASH_WRITE_WAIT</a>&nbsp;&nbsp;&nbsp;60000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g0a20c30c2fc87d1ae24d0e87eacf31a5">FLASH_ERASE_WAIT</a>&nbsp;&nbsp;&nbsp;60000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g8eb72aea6c09ce611a2eb1fdcb0f90de">FLASH_CHIP_ERASE_WAIT</a>&nbsp;&nbsp;&nbsp;600000</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g4675bd1d7d87956594ce6fa5a4e26390">flashdat_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#gc0623a540fa40efe5ef5aab73db3b29b">flashadr_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef volatile <a class="el" href="at49bv_8c.html#92b194b352bee41ff91a169896c948a1">flashdat_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#gb4cbfef5302d042e1e56bf34c497422a">flashptr_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">RAMFUNC int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#ga023dac60c83ca0a115a78a09d1d7503">At91EfcCmd</a> (unsigned int cmd, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> tmo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute flash controller command.  <a href="#ga023dac60c83ca0a115a78a09d1d7503"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g2d623df273e1ea7cf78f106452d34ba3">At91EfcSectorRead</a> (unsigned int off, void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from flash memory.  <a href="#g2d623df273e1ea7cf78f106452d34ba3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#gdc029df0303c39750db82268a4f69d82">At91EfcSectorWrite</a> (unsigned int off, CONST void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data into flash memory.  <a href="#gdc029df0303c39750db82268a4f69d82"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g44eceeb3eefc83d58368dddb92e706d4">At91EfcSectorErase</a> (unsigned int off)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase sector at the specified offset.  <a href="#g44eceeb3eefc83d58368dddb92e706d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#gdf838420be2862f0cc0967678b6a851a">At91EfcRegionLock</a> (unsigned int off)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock specified region.  <a href="#gdf838420be2862f0cc0967678b6a851a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g88dd492ad5906d8775958dfa32ace2a5">At91EfcRegionUnlock</a> (unsigned int off)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock specified region.  <a href="#g88dd492ad5906d8775958dfa32ace2a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#gde437bc357f6a11778bb746aad15ab73">At91EfcParamRead</a> (unsigned int pos, void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load configuration parameters from embedded flash memory.  <a href="#gde437bc357f6a11778bb746aad15ab73"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_at91_efc.html#g4a417f5fa6cb2544033200d4c16c40e0">At91EfcParamWrite</a> (unsigned int pos, CONST void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store configuration parameters in embedded flash memory.  <a href="#g4a417f5fa6cb2544033200d4c16c40e0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Embedded flash controller registers. <hr><h2>Define Documentation</h2>
<a class="anchor" name="g8092a6e9a75028e1cd074eb4d1171a8c"></a><!-- doxytag: member="at91_efc.c::FLASH_CHIP_BASE" ref="g8092a6e9a75028e1cd074eb4d1171a8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_CHIP_BASE&nbsp;&nbsp;&nbsp;0x00100000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Base address of the flash memory chip. 
<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00076">76</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00217">At49bvSectorErase()</a>, <a class="el" href="at49bv_8c-source.html#l00251">At49bvSectorRead()</a>, <a class="el" href="at49bv_8c-source.html#l00269">At49bvSectorWrite()</a>, <a class="el" href="at91__efc_8c-source.html#l00166">At91EfcSectorRead()</a>, and <a class="el" href="at91__efc_8c-source.html#l00185">At91EfcSectorWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g595dfd7b134ea9a53694d15d1257e8bb"></a><!-- doxytag: member="at91_efc.c::FLASH_CONF_SECTOR" ref="g595dfd7b134ea9a53694d15d1257e8bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_CONF_SECTOR&nbsp;&nbsp;&nbsp;0x0003FF00          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Address offset of the configuration sector. 
<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00082">82</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00302">At49bvParamRead()</a>, <a class="el" href="at49bv_8c-source.html#l00316">At49bvParamWrite()</a>, <a class="el" href="at91__efc_8c-source.html#l00259">At91EfcParamRead()</a>, and <a class="el" href="at91__efc_8c-source.html#l00278">At91EfcParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8e065f9b904e53143ae888c7fda42f05"></a><!-- doxytag: member="at91_efc.c::FLASH_CONF_SIZE" ref="g8e065f9b904e53143ae888c7fda42f05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_CONF_SIZE&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of the configuration area. 
<p>
During write operations a buffer with this size is allocated from heap and may cause memory problems with large sectors. Thus, this value may be less than the size of the configuration sector, in which case the rest of the sector is unused.<p>
Currently only 1 sector can be used for system configurations. 
<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00095">95</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00316">At49bvParamWrite()</a>, and <a class="el" href="at91__efc_8c-source.html#l00278">At91EfcParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gacf9be0ebbe27b3946107e80eab71187"></a><!-- doxytag: member="at91_efc.c::FLASH_WRITE_WAIT" ref="gacf9be0ebbe27b3946107e80eab71187" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_WRITE_WAIT&nbsp;&nbsp;&nbsp;60000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00099">99</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>Referenced by <a class="el" href="at91__efc_8c-source.html#l00231">At91EfcRegionLock()</a>, <a class="el" href="at91__efc_8c-source.html#l00243">At91EfcRegionUnlock()</a>, and <a class="el" href="at91__efc_8c-source.html#l00185">At91EfcSectorWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0a20c30c2fc87d1ae24d0e87eacf31a5"></a><!-- doxytag: member="at91_efc.c::FLASH_ERASE_WAIT" ref="g0a20c30c2fc87d1ae24d0e87eacf31a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_ERASE_WAIT&nbsp;&nbsp;&nbsp;60000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00103">103</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00217">At49bvSectorErase()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8eb72aea6c09ce611a2eb1fdcb0f90de"></a><!-- doxytag: member="at91_efc.c::FLASH_CHIP_ERASE_WAIT" ref="g8eb72aea6c09ce611a2eb1fdcb0f90de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_CHIP_ERASE_WAIT&nbsp;&nbsp;&nbsp;600000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00107">107</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00232">At49bvChipErase()</a>.</p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="g4675bd1d7d87956594ce6fa5a4e26390"></a><!-- doxytag: member="at91_efc.c::flashdat_t" ref="g4675bd1d7d87956594ce6fa5a4e26390" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="at49bv_8c.html#92b194b352bee41ff91a169896c948a1">flashdat_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00111">111</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc0623a540fa40efe5ef5aab73db3b29b"></a><!-- doxytag: member="at91_efc.c::flashadr_t" ref="gc0623a540fa40efe5ef5aab73db3b29b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned long <a class="el" href="at49bv_8c.html#c0623a540fa40efe5ef5aab73db3b29b">flashadr_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00112">112</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb4cbfef5302d042e1e56bf34c497422a"></a><!-- doxytag: member="at91_efc.c::flashptr_t" ref="gb4cbfef5302d042e1e56bf34c497422a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef volatile <a class="el" href="at49bv_8c.html#92b194b352bee41ff91a169896c948a1">flashdat_t</a>* <a class="el" href="at49bv_8c.html#b4cbfef5302d042e1e56bf34c497422a">flashptr_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00113">113</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga023dac60c83ca0a115a78a09d1d7503"></a><!-- doxytag: member="at91_efc.c::At91EfcCmd" ref="ga023dac60c83ca0a115a78a09d1d7503" args="(unsigned int cmd, uint32_t tmo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAMFUNC int At91EfcCmd           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>tmo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute flash controller command. 
<p>
This routine must not be located in internal flash memory. 
<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00121">121</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="arm_8h-source.html#l00199">inr</a>, <a class="el" href="at91__mc_8h-source.html#l00096">MC_FCR</a>, <a class="el" href="at91__mc_8h-source.html#l00084">MC_FRDY</a>, <a class="el" href="at91__mc_8h-source.html#l00111">MC_FSR</a>, <a class="el" href="at91__mc_8h-source.html#l00108">MC_KEY</a>, <a class="el" href="at91__mc_8h-source.html#l00085">MC_LOCKE</a>, <a class="el" href="at91__mc_8h-source.html#l00086">MC_PROGE</a>, <a class="el" href="include_2arch_2arm_2atom_8h-source.html#l00136">NutEnterCritical</a>, <a class="el" href="include_2arch_2arm_2atom_8h-source.html#l00147">NutExitCritical</a>, and <a class="el" href="arm_8h-source.html#l00195">outr</a>.</p>

<p>Referenced by <a class="el" href="at91__efc_8c-source.html#l00231">At91EfcRegionLock()</a>, <a class="el" href="at91__efc_8c-source.html#l00243">At91EfcRegionUnlock()</a>, and <a class="el" href="at91__efc_8c-source.html#l00185">At91EfcSectorWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g2d623df273e1ea7cf78f106452d34ba3"></a><!-- doxytag: member="at91_efc.c::At91EfcSectorRead" ref="g2d623df273e1ea7cf78f106452d34ba3" args="(unsigned int off, void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcSectorRead           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data from flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Start location within the chip, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00166">166</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00076">FLASH_CHIP_BASE</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="at91__efc_8c-source.html#l00259">At91EfcParamRead()</a>, and <a class="el" href="at91__efc_8c-source.html#l00278">At91EfcParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gdc029df0303c39750db82268a4f69d82"></a><!-- doxytag: member="at91_efc.c::At91EfcSectorWrite" ref="gdc029df0303c39750db82268a4f69d82" args="(unsigned int off, CONST void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcSectorWrite           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data into flash memory. 
<p>
The related sector will be automatically erased before writing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Start location within the chip, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to be written. If this is a NULL pointer, then the sector will be reased. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to write, 1 full sector max.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00185">185</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00121">At91EfcCmd()</a>, <a class="el" href="at91__efc_8c-source.html#l00076">FLASH_CHIP_BASE</a>, <a class="el" href="at91__efc_8c-source.html#l00099">FLASH_WRITE_WAIT</a>, <a class="el" href="arm_8h-source.html#l00199">inr</a>, <a class="el" href="at91__mc_8h-source.html#l00099">MC_FCMD_WP</a>, <a class="el" href="at91__mc_8h-source.html#l00083">MC_FMR</a>, <a class="el" href="at91__mc_8h-source.html#l00087">MC_NEBP</a>, <a class="el" href="at91__mc_8h-source.html#l00107">MC_PAGEN_MASK</a>, and <a class="el" href="arm_8h-source.html#l00195">outr</a>.</p>

<p>Referenced by <a class="el" href="at91__efc_8c-source.html#l00278">At91EfcParamWrite()</a>, and <a class="el" href="at91__efc_8c-source.html#l00219">At91EfcSectorErase()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g44eceeb3eefc83d58368dddb92e706d4"></a><!-- doxytag: member="at91_efc.c::At91EfcSectorErase" ref="g44eceeb3eefc83d58368dddb92e706d4" args="(unsigned int off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcSectorErase           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase sector at the specified offset. 
<p>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00219">219</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00185">At91EfcSectorWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gdf838420be2862f0cc0967678b6a851a"></a><!-- doxytag: member="at91_efc.c::At91EfcRegionLock" ref="gdf838420be2862f0cc0967678b6a851a" args="(unsigned int off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcRegionLock           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock specified region. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Location within the region to be locked.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00231">231</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00121">At91EfcCmd()</a>, <a class="el" href="at91__efc_8c-source.html#l00099">FLASH_WRITE_WAIT</a>, <a class="el" href="at91__mc_8h-source.html#l00100">MC_FCMD_SLB</a>, and <a class="el" href="at91__mc_8h-source.html#l00107">MC_PAGEN_MASK</a>.</p>

<p>Referenced by <a class="el" href="at91__efc_8c-source.html#l00278">At91EfcParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g88dd492ad5906d8775958dfa32ace2a5"></a><!-- doxytag: member="at91_efc.c::At91EfcRegionUnlock" ref="g88dd492ad5906d8775958dfa32ace2a5" args="(unsigned int off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcRegionUnlock           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unlock specified region. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Location within the region to be unlocked.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00243">243</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00121">At91EfcCmd()</a>, <a class="el" href="at91__efc_8c-source.html#l00099">FLASH_WRITE_WAIT</a>, <a class="el" href="at91__mc_8h-source.html#l00102">MC_FCMD_CLB</a>, and <a class="el" href="at91__mc_8h-source.html#l00107">MC_PAGEN_MASK</a>.</p>

<p>Referenced by <a class="el" href="at91__efc_8c-source.html#l00278">At91EfcParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gde437bc357f6a11778bb746aad15ab73"></a><!-- doxytag: member="at91_efc.c::At91EfcParamRead" ref="gde437bc357f6a11778bb746aad15ab73" args="(unsigned int pos, void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcParamRead           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load configuration parameters from embedded flash memory. 
<p>
Applications should call <a class="el" href="group__xg_nut_nv_mem.html#g83a8fa6e7f9c1d90cca22c5c9840f05c" title="Load data from AVR EEPROM.">NutNvMemLoad()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the contents. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00259">259</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00166">At91EfcSectorRead()</a>, and <a class="el" href="at91__efc_8c-source.html#l00082">FLASH_CONF_SECTOR</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00105">NutNvMemLoad()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4a417f5fa6cb2544033200d4c16c40e0"></a><!-- doxytag: member="at91_efc.c::At91EfcParamWrite" ref="g4a417f5fa6cb2544033200d4c16c40e0" args="(unsigned int pos, CONST void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At91EfcParamWrite           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store configuration parameters in embedded flash memory. 
<p>
Applications should call <a class="el" href="group__xg_nut_nv_mem.html#g2eb04b74f80407950b723c4978594b41" title="Save data in non-volatile memory.">NutNvMemSave()</a>.<p>
The region that contains the configuration sector will be automatically locked.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to store. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to store.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at91__efc_8c-source.html#l00278">278</a> of file <a class="el" href="at91__efc_8c-source.html">at91_efc.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00231">At91EfcRegionLock()</a>, <a class="el" href="at91__efc_8c-source.html#l00243">At91EfcRegionUnlock()</a>, <a class="el" href="at91__efc_8c-source.html#l00166">At91EfcSectorRead()</a>, <a class="el" href="at91__efc_8c-source.html#l00185">At91EfcSectorWrite()</a>, <a class="el" href="at91__efc_8c-source.html#l00082">FLASH_CONF_SECTOR</a>, <a class="el" href="at91__efc_8c-source.html#l00095">FLASH_CONF_SIZE</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="memcmp_8c-source.html#l00091">memcmp()</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00136">NutNvMemSave()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
