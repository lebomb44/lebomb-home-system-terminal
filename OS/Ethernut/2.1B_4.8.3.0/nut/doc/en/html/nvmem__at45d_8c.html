<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_62cc943d9a5c6ffd14cbda02228b93ec.html">dev</a>
  </div>
<div class="contents">
<h1>nvmem_at45d.c File Reference</h1>Non-volatile memory support using Atmel AT45 serial DataFlash memory chips.  
<a href="#_details">More...</a>
<p>

<p>
<a href="nvmem__at45d_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvmem__at45d_8c.html#d70b1387cb350d5a438b9fd287b3eff9">SpiAt45dConfigSize</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get size of configuration area.  <a href="#d70b1387cb350d5a438b9fd287b3eff9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvmem__at45d_8c.html#4dfe8d76a63e3f0379039bbcf74e7760">SpiAt45dConfigRead</a> (size_t pos, void *data, size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load configuration parameters from flash memory.  <a href="#4dfe8d76a63e3f0379039bbcf74e7760"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvmem__at45d_8c.html#f4070fbe96bc548a132c126be392c6ac">SpiAt45dConfigWrite</a> (size_t pos, CONST void *data, size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store configuration parameters in flash memory.  <a href="#f4070fbe96bc548a132c126be392c6ac"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Non-volatile memory support using Atmel AT45 serial DataFlash memory chips. 
<p>
<div class="fragment"><pre class="fragment">
 * $Id: nvmem_at45d.c 2463 2009-02-13 14:52:05Z haraldkipp $
 * </pre></div> 
<p>Definition in file <a class="el" href="nvmem__at45d_8c-source.html">nvmem_at45d.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d70b1387cb350d5a438b9fd287b3eff9"></a><!-- doxytag: member="nvmem_at45d.c::SpiAt45dConfigSize" ref="d70b1387cb350d5a438b9fd287b3eff9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t SpiAt45dConfigSize           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get size of configuration area. 
<p>
A part of the DataFlash may be used to store configuration parameters, like the network interface MAC address, the local hostname etc. The size of this area may be configured by defining NUT_CONFIG_AT45D_SIZE. Otherwise one full page is used.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of bytes available for configuration data. In case of an error, -1 is returned. </dd></dl>

<p>Definition at line <a class="el" href="nvmem__at45d_8c-source.html#l00134">134</a> of file <a class="el" href="nvmem__at45d_8c-source.html">nvmem_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, and <a class="el" href="spi__at45d_8c-source.html#l00440">SpiAt45dPageSize()</a>.</p>

<p>Referenced by <a class="el" href="nvmem__at45d_8c-source.html#l00158">SpiAt45dConfigRead()</a>, and <a class="el" href="nvmem__at45d_8c-source.html#l00187">SpiAt45dConfigWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4dfe8d76a63e3f0379039bbcf74e7760"></a><!-- doxytag: member="nvmem_at45d.c::SpiAt45dConfigRead" ref="4dfe8d76a63e3f0379039bbcf74e7760" args="(size_t pos, void *data, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dConfigRead           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load configuration parameters from flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the contents. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="nvmem__at45d_8c-source.html#l00158">158</a> of file <a class="el" href="nvmem__at45d_8c-source.html">nvmem_at45d.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>, <a class="el" href="nvmem__at45d_8c-source.html#l00134">SpiAt45dConfigSize()</a>, and <a class="el" href="spi__at45d_8c-source.html#l00314">SpiAt45dPageRead()</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00105">NutNvMemLoad()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f4070fbe96bc548a132c126be392c6ac"></a><!-- doxytag: member="nvmem_at45d.c::SpiAt45dConfigWrite" ref="f4070fbe96bc548a132c126be392c6ac" args="(size_t pos, CONST void *data, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dConfigWrite           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store configuration parameters in flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to store. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to store.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="nvmem__at45d_8c-source.html#l00187">187</a> of file <a class="el" href="nvmem__at45d_8c-source.html">nvmem_at45d.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="memcmp_8c-source.html#l00091">memcmp()</a>, <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>, <a class="el" href="nvmem__at45d_8c-source.html#l00134">SpiAt45dConfigSize()</a>, <a class="el" href="spi__at45d_8c-source.html#l00314">SpiAt45dPageRead()</a>, and <a class="el" href="spi__at45d_8c-source.html#l00354">SpiAt45dPageWrite()</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00136">NutNvMemSave()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
