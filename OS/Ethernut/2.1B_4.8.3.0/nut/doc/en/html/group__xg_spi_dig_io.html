<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>SPI Digital I/O<br>
<small>
[<a class="el" href="group__xg_hardware_avr.html">Special Hardware</a>]</small>
</h1>SPI controlled digital input and output ports.  
<a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Collaboration diagram for SPI Digital I/O:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__xg_spi_dig_io.png" border="0" alt="" usemap="#group____xg__spi__dig__io_map">
<map name="group____xg__spi__dig__io_map">
<area shape="rect" href="group__xg_hardware_avr.html" title="Support routines for direct hardware access." alt="Special Hardware" coords="19,5,131,26"></map></td></tr></table></center>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_spi_dig_io.html#gf09afc0da334a903f2c6d8c98c85c6e3">SpiDigitalGet</a> (<a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a> num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query digital inputs.  <a href="#gf09afc0da334a903f2c6d8c98c85c6e3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_spi_dig_io.html#g8d6321737dadc1a2cc92a6911497485a">SpiDigitalSet</a> (<a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a> num, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> bits)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set digital outputs.  <a href="#g8d6321737dadc1a2cc92a6911497485a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_spi_dig_io.html#gc166df3b02135dbbc8bb0582c24cb5b0">SpiDigitalInit</a> (<a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a> *inputs, <a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a> *outputs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the digital I/O shift register interface.  <a href="#gc166df3b02135dbbc8bb0582c24cb5b0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
SPI controlled digital input and output ports. 
<p>
This simple driver supports digital I/O ports like relay outputs and optocoupler inputs. <hr><h2>Function Documentation</h2>
<a class="anchor" name="gf09afc0da334a903f2c6d8c98c85c6e3"></a><!-- doxytag: member="spidigio.c::SpiDigitalGet" ref="gf09afc0da334a903f2c6d8c98c85c6e3" args="(ureg_t num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> SpiDigitalGet           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a>&nbsp;</td>
          <td class="paramname"> <em>num</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Query digital inputs. 
<p>
<a class="el" href="spidigio_8h.html#a4c775ac4621267b278413108527b5e6">SpiDigitalInit()</a> must have been called by the application before calling this function.<p>
This routine does not check the validity of the parameter.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of bits to query, typically 8, 16, 24 or the maximum value of 32. This number should exactly match the number of input pins. If it is lower, only the most significant bits are returned. However, this may be used by an application to scan these bits more often with reduced overhead.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Binary value of the requested inputs. Only the specified number of bits are used. Bit 0 is the one, which has been shifted out last. </dd></dl>

<p>Definition at line <a class="el" href="spidigio_8c-source.html#l00272">272</a> of file <a class="el" href="spidigio_8c-source.html">spidigio.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00272">bit_is_set</a>, <a class="el" href="icc_8h-source.html#l00265">cbi</a>, <a class="el" href="icc_8h-source.html#l00266">sbi</a>, <a class="el" href="avrpio_8h-source.html#l00171">SPIDIGIO_LDI_BIT</a>, <a class="el" href="spidigio_8c-source.html#l00177">SPIDIGIO_LDI_PORT</a>, <a class="el" href="avrpio_8h-source.html#l00147">SPIDIGIO_SIN_BIT</a>, <a class="el" href="avrpio_8h-source.html#l00151">SPIDIGIO_SIN_PIN</a>, <a class="el" href="avrpio_8h-source.html#l00139">SPIDIGIO_SOUT_BIT</a>, and <a class="el" href="spidigio_8c-source.html#l00102">SPIDIGIO_SOUT_PORT</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8d6321737dadc1a2cc92a6911497485a"></a><!-- doxytag: member="spidigio.c::SpiDigitalSet" ref="g8d6321737dadc1a2cc92a6911497485a" args="(ureg_t num, uint32_t bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SpiDigitalSet           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a>&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>bits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set digital outputs. 
<p>
<a class="el" href="spidigio_8h.html#a4c775ac4621267b278413108527b5e6">SpiDigitalInit()</a> must have been called by the application before calling this function.<p>
This routine does not check the validity of any parameter.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of bits to set, typically 8, 16, 24 or 32, which is the maximum. The number must not be lower than the number of shift register output bits. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bits</em>&nbsp;</td><td>The bit value to set. Only the number of bits specified are used, of which the most significant bit is shifted in first. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="spidigio_8c-source.html#l00326">326</a> of file <a class="el" href="spidigio_8c-source.html">spidigio.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00265">cbi</a>, <a class="el" href="icc_8h-source.html#l00266">sbi</a>, <a class="el" href="avrpio_8h-source.html#l00179">SPIDIGIO_LDO_BIT</a>, <a class="el" href="spidigio_8c-source.html#l00159">SPIDIGIO_LDO_PORT</a>, <a class="el" href="avrpio_8h-source.html#l00139">SPIDIGIO_SOUT_BIT</a>, and <a class="el" href="spidigio_8c-source.html#l00102">SPIDIGIO_SOUT_PORT</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc166df3b02135dbbc8bb0582c24cb5b0"></a><!-- doxytag: member="spidigio.c::SpiDigitalInit" ref="gc166df3b02135dbbc8bb0582c24cb5b0" args="(ureg_t *inputs, ureg_t *outputs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SpiDigitalInit           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a> *&nbsp;</td>
          <td class="paramname"> <em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_nut_o_s.html#ge15262a08334eeeacd9a24f219a89d46">ureg_t</a> *&nbsp;</td>
          <td class="paramname"> <em>outputs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the digital I/O shift register interface. 
<p>
This routine must be called before using the interface.<p>
Automatically detects the number of digital inputs and outputs. However, the method used is limited and may fail on fast changing inputs. The application should check the result for plausibility. It is save to call the routine more than once.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inputs</em>&nbsp;</td><td>Pointer to an 8-bit value, where the number of detected inputs will be stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputs</em>&nbsp;</td><td>Pointer to an 8-bit value, where the number of detected outputs will be stored. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="spidigio_8c-source.html#l00471">471</a> of file <a class="el" href="spidigio_8c-source.html">spidigio.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00265">cbi</a>, <a class="el" href="timer_8c-source.html#l00800">NutGetCpuClock()</a>, <a class="el" href="icc_8h-source.html#l00266">sbi</a>, <a class="el" href="avrpio_8h-source.html#l00171">SPIDIGIO_LDI_BIT</a>, <a class="el" href="spidigio_8c-source.html#l00178">SPIDIGIO_LDI_DDR</a>, <a class="el" href="spidigio_8c-source.html#l00177">SPIDIGIO_LDI_PORT</a>, <a class="el" href="avrpio_8h-source.html#l00179">SPIDIGIO_LDO_BIT</a>, <a class="el" href="spidigio_8c-source.html#l00160">SPIDIGIO_LDO_DDR</a>, <a class="el" href="spidigio_8c-source.html#l00159">SPIDIGIO_LDO_PORT</a>, <a class="el" href="avrpio_8h-source.html#l00163">SPIDIGIO_SCLK_BIT</a>, <a class="el" href="spidigio_8c-source.html#l00142">SPIDIGIO_SCLK_DDR</a>, <a class="el" href="spidigio_8c-source.html#l00141">SPIDIGIO_SCLK_PORT</a>, <a class="el" href="avrpio_8h-source.html#l00147">SPIDIGIO_SIN_BIT</a>, <a class="el" href="avrpio_8h-source.html#l00159">SPIDIGIO_SIN_DDR</a>, <a class="el" href="avrpio_8h-source.html#l00155">SPIDIGIO_SIN_PORT</a>, <a class="el" href="avrpio_8h-source.html#l00139">SPIDIGIO_SOUT_BIT</a>, and <a class="el" href="spidigio_8c-source.html#l00103">SPIDIGIO_SOUT_DDR</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
