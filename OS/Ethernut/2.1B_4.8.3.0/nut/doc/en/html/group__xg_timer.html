<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>Timer Management<br>
<small>
[<a class="el" href="group__xg_nut_o_s.html">Nut/OS API</a>]</small>
</h1>Asynchronous timer support.  
<a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Collaboration diagram for Timer Management:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__xg_timer.png" border="0" alt="" usemap="#group____xg__timer_map">
<map name="group____xg__timer_map">
<area shape="rect" href="group__xg_nut_o_s.html" title="Operating System API." alt="Nut/OS API" coords="19,5,99,26"></map></td></tr></table></center>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g063e0628286de93e67e90fd168681aae">NutTimerInit</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize system timer.  <a href="#g063e0628286de93e67e90fd168681aae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gd28bfb11b33161792bea7f571133589e">NutMicroDelay</a> (<a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> us)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loop for a specified number of microseconds.  <a href="#gd28bfb11b33161792bea7f571133589e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gf787dc0e6bd39a4d32f431ae11c2add3">NutDelay</a> (<a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> ms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loop for a specified number of milliseconds.  <a href="#gf787dc0e6bd39a4d32f431ae11c2add3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g681ca3c989be2bdeb5f0cc97e11d6e06">NutTimerInsert</a> (NUTTIMERINFO *tn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert a new timer in the global timer list.  <a href="#g681ca3c989be2bdeb5f0cc97e11d6e06"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gf719e88403b4ccc78f071ce5c85a5a71">NutTimerProcessElapsed</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process elapsed timers.  <a href="#gf719e88403b4ccc78f071ce5c85a5a71"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTTIMERINFO *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g1e47b683a996583386ebef7e7c92501e">NutTimerCreate</a> (<a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> ticks, void(*callback)(<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, void *), void *arg, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new system timer.  <a href="#g1e47b683a996583386ebef7e7c92501e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gf104e0c3660b2a77bd0d7b00c4fd741c">NutTimerStartTicks</a> (<a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> ticks, void(*callback)(<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, void *), void *arg, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start a system timer.  <a href="#gf104e0c3660b2a77bd0d7b00c4fd741c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g91b42f5fd833e1b72c27b3bfb0ed0af7">NutTimerStart</a> (<a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> ms, void(*callback)(<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, void *), void *arg, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start a system timer.  <a href="#g91b42f5fd833e1b72c27b3bfb0ed0af7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gfefcf81d05019a8134b49fa44d8c114a">NutSleep</a> (<a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> ms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporarily suspends the current thread.  <a href="#gfefcf81d05019a8134b49fa44d8c114a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gfb23f6965312663a72d41fefc574dc00">NutTimerStop</a> (<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a> handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop a specified timer.  <a href="#gfb23f6965312663a72d41fefc574dc00"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g940f66286dcf28b8280e41b605064446">NutGetTickCount</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of system timer ticks.  <a href="#g940f66286dcf28b8280e41b605064446"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g8bc858a1ca645b9e0cf9d03d7c9adfb3">NutGetSeconds</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the seconds counter value.  <a href="#g8bc858a1ca645b9e0cf9d03d7c9adfb3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gc1887264221d66b13d1e86d034227f1c">NutGetMillis</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the milliseconds counter value.  <a href="#gc1887264221d66b13d1e86d034227f1c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gf01fcbd16c4970f2647efafd7a3e01dc">NutClockSet</a> (int idx, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> freq)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the specified clock frequency.  <a href="#gf01fcbd16c4970f2647efafd7a3e01dc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g784a7f52b5167c777149fd1d874c99f0">NutGetCpuClock</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the CPU clock frequency.  <a href="#g784a7f52b5167c777149fd1d874c99f0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTTIMERINFO *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gcaf8d9a1a901f73165dce220e4d11b71">nutTimerList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list of all system timers.  <a href="#gcaf8d9a1a901f73165dce220e4d11b71"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#g9daf6de56d3a057c4146046229f5bb4c">nut_ticks</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">System tick counter.  <a href="#g9daf6de56d3a057c4146046229f5bb4c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_timer.html#gfc4e0f1f05ea82eda77869c202b2239e">nut_delay_loops</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loops per microsecond.  <a href="#gfc4e0f1f05ea82eda77869c202b2239e"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Asynchronous timer support. 
<p>
The timer management provides functions to start and stop asynchronous timers, determine the CPU speed and let a thread give up the CPU for a specified time period. <hr><h2>Function Documentation</h2>
<a class="anchor" name="g063e0628286de93e67e90fd168681aae"></a><!-- doxytag: member="timer.c::NutTimerInit" ref="g063e0628286de93e67e90fd168681aae" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutTimerInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize system timer. 
<p>
This function is automatically called by Nut/OS during system initialization. It calls the hardware dependent layer to initialze the timer hardware and register a timer interrupt handler. 
<p>Definition at line <a class="el" href="timer_8c-source.html#l00306">306</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="timer_8c-source.html#l00267">nut_delay_loops</a>, <a class="el" href="arch_2arm_2timer_8h-source.html#l00084">NutEnableTimerIrq</a>, <a class="el" href="timer_8c-source.html#l00681">NutGetTickCount()</a>, and <a class="el" href="avr_2dev_2ostimer_8c-source.html#l00309">NutRegisterTimer()</a>.</p>

<p>Referenced by <a class="el" href="arch_2avr_2os_2nutinit_8c-source.html#l00471">NutIdle()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd28bfb11b33161792bea7f571133589e"></a><!-- doxytag: member="timer.c::NutMicroDelay" ref="gd28bfb11b33161792bea7f571133589e" args="(uint32_t us)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutMicroDelay           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>us</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loop for a specified number of microseconds. 
<p>
This call will not release the CPU and will not switch to another thread. However, interrupts are not disabled and introduce some jitter. Furthermore, unless NUT_DELAYLOOPS is not defined, the deviation may be greater than 10%.<p>
If you need exact timing, use timer/counter hardware instead.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>us</em>&nbsp;</td><td>Delay time in microseconds. Values above 255 milliseconds may not work.</td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000035">Todo:</a></b></dt><dd>Overflow handling. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00355">355</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="arm_8h-source.html#l00187">_NOP</a>, and <a class="el" href="timer_8c-source.html#l00267">nut_delay_loops</a>.</p>

<p>Referenced by <a class="el" href="timer_8c-source.html#l00379">NutDelay()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf787dc0e6bd39a4d32f431ae11c2add3"></a><!-- doxytag: member="timer.c::NutDelay" ref="gf787dc0e6bd39a4d32f431ae11c2add3" args="(uint8_t ms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutDelay           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>ms</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loop for a specified number of milliseconds. 
<p>
This call will not release the CPU and will not switch to another thread. Because of absent thread switching, the delay time is more exact than with <a class="el" href="group__xg_timer.html#gfefcf81d05019a8134b49fa44d8c114a" title="Temporarily suspends the current thread.">NutSleep()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ms</em>&nbsp;</td><td>Delay time in milliseconds, maximum is 255.</td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>New applications should use <a class="el" href="group__xg_timer.html#gd28bfb11b33161792bea7f571133589e" title="Loop for a specified number of microseconds.">NutMicroDelay()</a>. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00379">379</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="timer_8c-source.html#l00355">NutMicroDelay()</a>.</p>

<p>Referenced by <a class="el" href="cs8900a_8c-source.html#l00541">cs8900Init()</a>, <a class="el" href="cs8900_8c-source.html#l00564">CSNicInit()</a>, <a class="el" href="cs8900_8c-source.html#l00532">CSSoftwareWakeup()</a>, <a class="el" href="isp2_8c-source.html#l00244">SpiFlashErase()</a>, <a class="el" href="isp2_8c-source.html#l00183">SpiFlashWriteByte()</a>, <a class="el" href="vs1001k_8c-source.html#l01035">VsBeep()</a>, <a class="el" href="vs1001k_8c-source.html#l00993">VsMemoryTest()</a>, <a class="el" href="vs1001k_8c-source.html#l00781">VsPlayerInit()</a>, and <a class="el" href="vs1001k_8c-source.html#l00865">VsPlayerReset()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g681ca3c989be2bdeb5f0cc97e11d6e06"></a><!-- doxytag: member="timer.c::NutTimerInsert" ref="g681ca3c989be2bdeb5f0cc97e11d6e06" args="(NUTTIMERINFO *tn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutTimerInsert           </td>
          <td>(</td>
          <td class="paramtype">NUTTIMERINFO *&nbsp;</td>
          <td class="paramname"> <em>tn</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Insert a new timer in the global timer list. 
<p>
Applications should not call this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tn</em>&nbsp;</td><td>Pointer to the timer structure to insert.</td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000036">Todo:</a></b></dt><dd>Make this local function static. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00393">393</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, and <a class="el" href="timer_8c-source.html#l00245">nutTimerList</a>.</p>

<p>Referenced by <a class="el" href="timer_8c-source.html#l00426">NutTimerProcessElapsed()</a>, <a class="el" href="timer_8c-source.html#l00544">NutTimerStartTicks()</a>, and <a class="el" href="timer_8c-source.html#l00647">NutTimerStop()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf719e88403b4ccc78f071ce5c85a5a71"></a><!-- doxytag: member="timer.c::NutTimerProcessElapsed" ref="gf719e88403b4ccc78f071ce5c85a5a71" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutTimerProcessElapsed           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process elapsed timers. 
<p>
This routine is called during context switch processing. Applications should not use this function. 
<p>Definition at line <a class="el" href="timer_8c-source.html#l00426">426</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="timer_8c-source.html#l00681">NutGetTickCount()</a>, <a class="el" href="heap_8h-source.html#l00087">NutHeapFree</a>, <a class="el" href="timer_8c-source.html#l00393">NutTimerInsert()</a>, and <a class="el" href="timer_8c-source.html#l00245">nutTimerList</a>.</p>

<p>Referenced by <a class="el" href="os_2thread_8c-source.html#l00382">NutThreadResume()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1e47b683a996583386ebef7e7c92501e"></a><!-- doxytag: member="timer.c::NutTimerCreate" ref="g1e47b683a996583386ebef7e7c92501e" args="(uint32_t ticks, void(*callback)(HANDLE, void *), void *arg, uint8_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTTIMERINFO* NutTimerCreate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ticks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, void *)&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new system timer. 
<p>
Applications should not call this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ticks</em>&nbsp;</td><td>Specifies the timer interval in system ticks. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Identifies the function to be called on each timer interval. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The argument passed to the callback function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>If set to TM_ONESHOT, the timer will be stopped after the first interval. Set to 0 for periodic timers.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Timer handle if successfull, 0 otherwise. The handle may be used to release the timer by calling TimerStop.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000037">Todo:</a></b></dt><dd>Make this local function static or directly integrate it into <a class="el" href="group__xg_timer.html#gf104e0c3660b2a77bd0d7b00c4fd741c" title="Start a system timer.">NutTimerStartTicks()</a>. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00493">493</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="timer_8c-source.html#l00681">NutGetTickCount()</a>, <a class="el" href="heap_8h-source.html#l00085">NutHeapAlloc</a>, and <a class="el" href="sys_2timer_8h-source.html#l00151">TM_ONESHOT</a>.</p>

<p>Referenced by <a class="el" href="timer_8c-source.html#l00544">NutTimerStartTicks()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf104e0c3660b2a77bd0d7b00c4fd741c"></a><!-- doxytag: member="timer.c::NutTimerStartTicks" ref="gf104e0c3660b2a77bd0d7b00c4fd741c" args="(uint32_t ticks, void(*callback)(HANDLE, void *), void *arg, uint8_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a> NutTimerStartTicks           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ticks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, void *)&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start a system timer. 
<p>
The function returns immediately, while the timer runs asynchronously in the background.<p>
The timer counts for a specified number of ticks, then calls the callback routine with a given argument.<p>
Even after the timer elapsed, the callback function is not executed before the currently running thread is ready to give up the CPU. Thus, system timers may not fulfill the required accuracy. For precise or high resolution timing, native timer interrupt routines are a better choice.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ticks</em>&nbsp;</td><td>Specifies the timer interval in system ticks. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Identifies the function to be called on each timer interval. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The argument passed to the callback function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>If set to TM_ONESHOT, the timer will be stopped after the first interval. Set to 0 for periodic timers.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Timer handle if successfull, 0 otherwise. The handle may be used to stop the timer by calling TimerStop. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00544">544</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="timer_8c-source.html#l00493">NutTimerCreate()</a>, and <a class="el" href="timer_8c-source.html#l00393">NutTimerInsert()</a>.</p>

<p>Referenced by <a class="el" href="timer_8c-source.html#l00584">NutTimerStart()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g91b42f5fd833e1b72c27b3bfb0ed0af7"></a><!-- doxytag: member="timer.c::NutTimerStart" ref="g91b42f5fd833e1b72c27b3bfb0ed0af7" args="(uint32_t ms, void(*callback)(HANDLE, void *), void *arg, uint8_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a> NutTimerStart           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, void *)&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start a system timer. 
<p>
The function returns immediately, while the timer runs asynchronously in the background.<p>
The timer counts for a specified number of milliseconds, then calls the callback routine with a given argument.<p>
Even after the timer elapsed, the callback function is not executed before the currently running thread is ready to give up the CPU. Thus, system timers may not fulfill the required accuracy. For precise or high resolution timing, native timer interrupt routines are a better choice.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ms</em>&nbsp;</td><td>Specifies the timer interval in milliseconds. The resolution is limited to the granularity of the system timer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Identifies the function to be called on each timer interval. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The argument passed to the callback function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>If set to TM_ONESHOT, the timer will be stopped after the first interval. Set to 0 for periodic timers.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Timer handle if successfull, 0 otherwise. The handle may be used to stop the timer by calling TimerStop. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00584">584</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="avr_2dev_2ostimer_8c-source.html#l00372">NutTimerMillisToTicks()</a>, and <a class="el" href="timer_8c-source.html#l00544">NutTimerStartTicks()</a>.</p>

<p>Referenced by <a class="el" href="timers_8c-source.html#l00239">main()</a>, <a class="el" href="event_8c-source.html#l00271">NutEventWait()</a>, <a class="el" href="msg_8c-source.html#l00253">NutMsgQStartTimer()</a>, and <a class="el" href="timer_8c-source.html#l00610">NutSleep()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gfefcf81d05019a8134b49fa44d8c114a"></a><!-- doxytag: member="timer.c::NutSleep" ref="gfefcf81d05019a8134b49fa44d8c114a" args="(uint32_t ms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutSleep           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ms</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Temporarily suspends the current thread. 
<p>
Causes the current thread to wait for a specified interval or, if the specified interval is zero, to give up the CPU for another thread with higher or same priority.<p>
This function may switch to another application thread, that got the same or a higher priority and is ready to run.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Threads may sleep longer than the specified number of milliseconds, depending on the number of threads with higher or equal priority, which are ready to run.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ms</em>&nbsp;</td><td>Milliseconds to sleep. If 0, the current thread will not sleep, but may give up the CPU. The resolution is limited to the granularity of the system timer.</td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000038">Todo:</a></b></dt><dd>Code size can be reduced by trying to create the timer before removing the thread from the run queue. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00610">610</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="os_2thread_8c-source.html#l00341">NutThreadRemoveQueue()</a>, <a class="el" href="os_2thread_8c-source.html#l00382">NutThreadResume()</a>, <a class="el" href="os_2thread_8c-source.html#l00450">NutThreadWake()</a>, <a class="el" href="os_2thread_8c-source.html#l00468">NutThreadYield()</a>, <a class="el" href="timer_8c-source.html#l00584">NutTimerStart()</a>, <a class="el" href="os_2thread_8c-source.html#l00248">runningThread</a>, <a class="el" href="os_2thread_8c-source.html#l00275">runQueue</a>, <a class="el" href="thread_8h-source.html#l00198">TDS_RUNNING</a>, <a class="el" href="thread_8h-source.html#l00200">TDS_SLEEP</a>, <a class="el" href="sys_2timer_8h-source.html#l00151">TM_ONESHOT</a>, <a class="el" href="tracer_8h-source.html#l00274">TRACE_ADD_ITEM</a>, and <a class="el" href="tracer_8h-source.html#l00080">TRACE_TAG_THREAD_SLEEP</a>.</p>

<p>Referenced by <a class="el" href="ahdlcavr_8c-source.html#l00407">AhdlcRx()</a>, <a class="el" href="at45db_8c-source.html#l00333">At45dbWaitReady()</a>, <a class="el" href="avrtarget_8c-source.html#l00398">AvrTargetPollReady()</a>, <a class="el" href="ide_8c-source.html#l01120">CFChange()</a>, <a class="el" href="cs8900_8c-source.html#l00451">CSNICrx()</a>, <a class="el" href="discover_8c-source.html#l00210">DiscoveryResponder()</a>, <a class="el" href="at91__emac_8c-source.html#l00815">EmacRxThread()</a>, <a class="el" href="hxcodec_8c-source.html#l00267">FeederThread()</a>, <a class="el" href="events_8c-source.html#l00078">High()</a>, <a class="el" href="events_8c-source.html#l00099">Low()</a>, <a class="el" href="candemo_8c-source.html#l00084">main()</a>, <a class="el" href="nicrtl_8c-source.html#l01376">NicInit()</a>, <a class="el" href="nicrtl_8c-source.html#l01287">NicRx()</a>, <a class="el" href="ax88796_8c-source.html#l00792">NicRxAsix()</a>, <a class="el" href="lanc111_8c-source.html#l01188">NicRxLanc()</a>, <a class="el" href="dhcpc_8c-source.html#l01934">NutDhcpIfConfig()</a>, <a class="el" href="pppin_8c-source.html#l00140">NutPppInput()</a>, <a class="el" href="pppout_8c-source.html#l00142">NutPppOutput()</a>, <a class="el" href="pppsm_8c-source.html#l00117">NutPppSm()</a>, <a class="el" href="scanner_8c-source.html#l00263">Scanner()</a>, <a class="el" href="httpserv_8c-source.html#l00646">Service()</a>, <a class="el" href="timers_8c-source.html#l00196">Sleeper1()</a>, <a class="el" href="timers_8c-source.html#l00208">Sleeper2()</a>, <a class="el" href="timers_8c-source.html#l00217">Sleeper3()</a>, <a class="el" href="timers_8c-source.html#l00226">Sleeper4()</a>, <a class="el" href="sntp_8c-source.html#l00134">SNTP_resync()</a>, <a class="el" href="threads_8c-source.html#l00098">Thread1()</a>, <a class="el" href="threads_8c-source.html#l00113">Thread2()</a>, <a class="el" href="twif_8c-source.html#l00535">TwMasterTransact()</a>, <a class="el" href="spi__vscodec_8c-source.html#l00136">VsCodecMode()</a>, <a class="el" href="wlandrv_8c-source.html#l01385">wlandrv_ProbeDevice()</a>, and <a class="el" href="x12rtc_8c-source.html#l00546">X12Init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gfb23f6965312663a72d41fefc574dc00"></a><!-- doxytag: member="timer.c::NutTimerStop" ref="gfb23f6965312663a72d41fefc574dc00" args="(HANDLE handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutTimerStop           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Stop a specified timer. 
<p>
Only periodic timers need to be stopped. One-shot timers are automatically stopped by the timer management after ther first timer interval. Anyway, long running one-shot timers may be stopped to release the occupied memory.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>Identifies the timer to be stopped. This handle must have been created by calling <a class="el" href="group__xg_timer.html#g91b42f5fd833e1b72c27b3bfb0ed0af7" title="Start a system timer.">NutTimerStart()</a> or <a class="el" href="group__xg_timer.html#gf104e0c3660b2a77bd0d7b00c4fd741c" title="Start a system timer.">NutTimerStartTicks()</a>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00647">647</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, <a class="el" href="timer_8c-source.html#l00393">NutTimerInsert()</a>, and <a class="el" href="timer_8c-source.html#l00245">nutTimerList</a>.</p>

<p>Referenced by <a class="el" href="timers_8c-source.html#l00239">main()</a>, <a class="el" href="event_8c-source.html#l00384">NutEventPostAsync()</a>, and <a class="el" href="msg_8c-source.html#l00305">NutMsgQStopTimer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g940f66286dcf28b8280e41b605064446"></a><!-- doxytag: member="timer.c::NutGetTickCount" ref="g940f66286dcf28b8280e41b605064446" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> NutGetTickCount           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the number of system timer ticks. 
<p>
This function returns the number of system ticks since the system was started.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Number of ticks. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00681">681</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="timer_8c-source.html#l00255">nut_ticks</a>, <a class="el" href="include_2arch_2arm_2atom_8h-source.html#l00136">NutEnterCritical</a>, and <a class="el" href="include_2arch_2arm_2atom_8h-source.html#l00147">NutExitCritical</a>.</p>

<p>Referenced by <a class="el" href="discover_8c-source.html#l00210">DiscoveryResponder()</a>, <a class="el" href="inetq_8c-source.html#l00126">main()</a>, <a class="el" href="timer_8c-source.html#l00734">NutGetMillis()</a>, <a class="el" href="timer_8c-source.html#l00713">NutGetSeconds()</a>, <a class="el" href="tcpsock_8c-source.html#l00375">NutTcpCreateSocket()</a>, <a class="el" href="timer_8c-source.html#l00493">NutTimerCreate()</a>, <a class="el" href="timer_8c-source.html#l00306">NutTimerInit()</a>, and <a class="el" href="timer_8c-source.html#l00426">NutTimerProcessElapsed()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8bc858a1ca645b9e0cf9d03d7c9adfb3"></a><!-- doxytag: member="timer.c::NutGetSeconds" ref="g8bc858a1ca645b9e0cf9d03d7c9adfb3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> NutGetSeconds           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the seconds counter value. 
<p>
This function returns the value of a counter, which is incremented every second. During system start, the counter is cleared to zero.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>There is intentionally no provision to modify the seconds counter. Callers can rely on a continuous update and use this value for system tick independend timeout calculations. Applications, which want to use this counter for date and time functions, should use an offset value.</dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="union_value.html">Value</a> of the seconds counter. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00713">713</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="avr_2dev_2ostimer_8c-source.html#l00364">NutGetTickClock()</a>, and <a class="el" href="timer_8c-source.html#l00681">NutGetTickCount()</a>.</p>

<p>Referenced by <a class="el" href="dhcpc_8c-source.html#l01353">NutDhcpClient()</a>, <a class="el" href="time_8c-source.html#l00119">stime()</a>, and <a class="el" href="time_8c-source.html#l00089">time()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc1887264221d66b13d1e86d034227f1c"></a><!-- doxytag: member="timer.c::NutGetMillis" ref="gc1887264221d66b13d1e86d034227f1c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> NutGetMillis           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the milliseconds counter value. 
<p>
This function returns the value of a counter, which is incremented every system timer tick. During system start, the counter is cleared to zero and will overflow with the 32 bit tick counter (4294967296). With the default 1024 ticks/s this will happen after 7.9 years. The resolution is also given by the system ticks.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>There is intentionally no provision to modify the seconds counter. Callers can rely on a continuous update and use this value for system tick independend timeout calculations. Depending on</dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="union_value.html">Value</a> of the seconds counter. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00734">734</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="avr_2dev_2ostimer_8c-source.html#l00364">NutGetTickClock()</a>, and <a class="el" href="timer_8c-source.html#l00681">NutGetTickCount()</a>.</p>

<p>Referenced by <a class="el" href="condition_8c-source.html#l00167">NutConditionTimedWait()</a>, <a class="el" href="dhcpc_8c-source.html#l01353">NutDhcpClient()</a>, <a class="el" href="tcputil_8c-source.html#l00103">NutTcpCalcRtt()</a>, <a class="el" href="tcpout_8c-source.html#l00209">NutTcpOutput()</a>, <a class="el" href="tcpsm_8c-source.html#l01643">NutTcpSm()</a>, and <a class="el" href="tcpsm_8c-source.html#l00943">NutTcpStateRetranTimeout()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf01fcbd16c4970f2647efafd7a3e01dc"></a><!-- doxytag: member="timer.c::NutClockSet" ref="gf01fcbd16c4970f2647efafd7a3e01dc" args="(int idx, uint32_t freq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutClockSet           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>freq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the specified clock frequency. 
<p>
If only 1 hardware clock is defined, then this function is mapped to <a class="el" href="group__xg_timer.html#g784a7f52b5167c777149fd1d874c99f0" title="Return the CPU clock frequency.">NutGetCpuClock()</a>.<p>
The number of available hardware clocks depends on the target harware and is specified by NUT_HWCLK_MAX + 1.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Index of the hardware clock. Can be any of the following:<ul>
<li>NUT_HWCLK_CPU</li><li>NUT_HWCLK_PERIPHERAL</li></ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>CPU clock frequency in Hertz.</dd></dl>
Set the specified clock frequency. In the future this may be used to set any hardware clock. For now, this simply clears the clock value cache and must be called after changing any clock frequency.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Index of the hardware clock, currently ignored. Set to -1 (all clocks) to maintain upward compatibility. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>freq</em>&nbsp;</td><td>Clock frequency in Hertz, currently ignored. Set to NUT_CACHE_LVALID (release cached value) to maintain upward compatibility.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00783">783</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="memset_8c-source.html#l00088">memset()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g784a7f52b5167c777149fd1d874c99f0"></a><!-- doxytag: member="timer.c::NutGetCpuClock" ref="g784a7f52b5167c777149fd1d874c99f0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> NutGetCpuClock           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the CPU clock frequency. 
<p>
Same as <a class="el" href="sys_2timer_8h.html#3a0f6d372c4649ae0090254455b028cc">NutClockGet(NUT_HWCLK_CPU)</a> but faster, specially when NUT_CPU_FREQ is defined.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>CPU clock frequency in Hertz. </dd></dl>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00800">800</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>References <a class="el" href="sys_2timer_8h-source.html#l00153">NUT_CACHE_LVALID</a>, <a class="el" href="ostimer__at91_8c-source.html#l00149">NUT_CPU_FREQ</a>, <a class="el" href="sys_2timer_8h-source.html#l00157">NUT_HWCLK_CPU</a>, <a class="el" href="avr_2dev_2ostimer_8c-source.html#l00354">NutArchClockGet()</a>, and <a class="el" href="sys_2timer_8h-source.html#l00200">NutClockGet</a>.</p>

<p>Referenced by <a class="el" href="at91__ahdlc_8c-source.html#l00879">AhdlcAt91Init()</a>, <a class="el" href="at91__ahdlc_8c-source.html#l00729">AhdlcAt91IOCtl()</a>, <a class="el" href="ahdlcavr_8c-source.html#l00784">AhdlcAvrIOCtl()</a>, <a class="el" href="wdt__at91_8c-source.html#l00067">At91WatchDogStart()</a>, <a class="el" href="irblast_8c-source.html#l00119">IrblastFreq2Ocr()</a>, <a class="el" href="irblast_8c-source.html#l00144">IrblastPeriod2Ocr()</a>, <a class="el" href="timers_8c-source.html#l00239">main()</a>, <a class="el" href="ostimer__at91_8c-source.html#l00391">NutGetTickClock()</a>, <a class="el" href="arch_2arm_2os_2nutinit_8c-source.html#l00260">NutInit()</a>, <a class="el" href="ostimer__at91_8c-source.html#l00174">NutRegisterTimer()</a>, <a class="el" href="sbbif0_8c-source.html#l00102">Sbbi0SetSpeed()</a>, <a class="el" href="spidigio_8c-source.html#l00471">SpiDigitalInit()</a>, <a class="el" href="sppif0_8c-source.html#l00099">Sppi0SetSpeed()</a>, <a class="el" href="at91__twi_8c-source.html#l00438">TwIOCtl()</a>, and <a class="el" href="uartavr_8c-source.html#l00400">UartAvrIOCtl()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="gcaf8d9a1a901f73165dce220e4d11b71"></a><!-- doxytag: member="timer.c::nutTimerList" ref="gcaf8d9a1a901f73165dce220e4d11b71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTTIMERINFO* <a class="el" href="group__xg_timer.html#gcaf8d9a1a901f73165dce220e4d11b71">nutTimerList</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Double linked list of all system timers. 
<p>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00245">245</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>Referenced by <a class="el" href="osdebug_8c-source.html#l00205">NutDumpTimerList()</a>, <a class="el" href="timer_8c-source.html#l00393">NutTimerInsert()</a>, <a class="el" href="timer_8c-source.html#l00426">NutTimerProcessElapsed()</a>, <a class="el" href="timer_8c-source.html#l00647">NutTimerStop()</a>, and <a class="el" href="pppc_8c-source.html#l00191">ProcessRequests()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g9daf6de56d3a057c4146046229f5bb4c"></a><!-- doxytag: member="timer.c::nut_ticks" ref="g9daf6de56d3a057c4146046229f5bb4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="group__xg_timer.html#g9daf6de56d3a057c4146046229f5bb4c">nut_ticks</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
System tick counter. 
<p>
Emulate a Nut hardware interrupt on Unix. 
<p>Definition at line <a class="el" href="timer_8c-source.html#l00255">255</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>Referenced by <a class="el" href="timer_8c-source.html#l00681">NutGetTickCount()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gfc4e0f1f05ea82eda77869c202b2239e"></a><!-- doxytag: member="timer.c::nut_delay_loops" ref="gfc4e0f1f05ea82eda77869c202b2239e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="group__xg_timer.html#gfc4e0f1f05ea82eda77869c202b2239e">nut_delay_loops</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Loops per microsecond. 
<p>

<p>Definition at line <a class="el" href="timer_8c-source.html#l00267">267</a> of file <a class="el" href="timer_8c-source.html">timer.c</a>.</p>

<p>Referenced by <a class="el" href="timer_8c-source.html#l00355">NutMicroDelay()</a>, and <a class="el" href="timer_8c-source.html#l00306">NutTimerInit()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
