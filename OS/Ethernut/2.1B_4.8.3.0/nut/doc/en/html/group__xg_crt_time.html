<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>Time handling Functions<br>
<small>
[<a class="el" href="group__xg_crt.html">C Runtime Library.</a>]</small>
</h1>Implements some standard C time functions.  
<a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Collaboration diagram for Time handling Functions:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__xg_crt_time.png" border="0" alt="" usemap="#group____xg__crt__time_map">
<map name="group____xg__crt__time_map">
<area shape="rect" href="group__xg_crt.html" title="Complementary runtime support." alt="C Runtime Library." coords="17,5,137,26"></map></td></tr></table></center>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__tm.html">tm</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">structure to store a date/time value.  <a href="struct__tm.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serial date/time. Holds number of seconds after January 1st, 1970.  <a href="#ge33b844d9ee195d9df95b93b5fb312c5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g26c7d1dbf93fa8c23c5effbacec91f8c">time</a> (<a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *timer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the system time.  <a href="#g26c7d1dbf93fa8c23c5effbacec91f8c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#gaa7031886dc783f76006ff1b370406b3">gmtime_r</a> (CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *timer, tm *ptm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a time value to a structure.  <a href="#gaa7031886dc783f76006ff1b370406b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">tm *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g4bf5c1b09409b70880b839f0ff9aeb9a">gmtime</a> (CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *timer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a time value to a structure.  <a href="#g4bf5c1b09409b70880b839f0ff9aeb9a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g35785f4de9013a460456443a18117291">localtime_r</a> (CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *timer, tm *ptm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a time value and correct for the local time zone.  <a href="#g35785f4de9013a460456443a18117291"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">tm *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g7a9f8811ccb83dee7960cbd77dc133e9">localtime</a> (CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *timer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a time value and correct for the local time zone.  <a href="#g7a9f8811ccb83dee7960cbd77dc133e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g1e9a05d0b48dcf984238438fa8efd2d8">stime</a> (<a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *timer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the system time.  <a href="#g1e9a05d0b48dcf984238438fa8efd2d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g60ebe794537631d5c944d2580577068a">mktime</a> (tm *timeptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert the local time to a calendar value.  <a href="#g60ebe794537631d5c944d2580577068a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#gda9feb24e45d91e9e56774ef223abe9b">_mkgmtime</a> (tm *timeptr)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g2bb3d0de4c753758209b935de23f09ae">_daylight</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to control daylight conversions.  <a href="#g2bb3d0de4c753758209b935de23f09ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g9493c776d7de0e689626895324bd2d6e">_timezone</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines your local timezone.  <a href="#g9493c776d7de0e689626895324bd2d6e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_crt_time.html#g8ab2ad3557476430d80335c8df4ff374">_dstbias</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Difference between standard and daylight savings time in seconds.  <a href="#g8ab2ad3557476430d80335c8df4ff374"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implements some standard C time functions. 
<p>
Use these functions to get the current time and convert, adjust, and store it as necessary. The current time is the system time. <hr><h2>Typedef Documentation</h2>
<a class="anchor" name="ge33b844d9ee195d9df95b93b5fb312c5"></a><!-- doxytag: member="time.h::time_t" ref="ge33b844d9ee195d9df95b93b5fb312c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serial date/time. Holds number of seconds after January 1st, 1970. 
<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a15">caltime/caltime.c</a>, <a class="el" href="ftpd_2ftpserv_8c-example.html#a44">ftpd/ftpserv.c</a>, <a class="el" href="httpd_2httpserv_8c-example.html#a38">httpd/httpserv.c</a>, and <a class="el" href="logtime_2logtime_8c-example.html#a7">logtime/logtime.c</a>.</dl>
<p>Definition at line <a class="el" href="time_8h-source.html#l00114">114</a> of file <a class="el" href="time_8h-source.html">time.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g26c7d1dbf93fa8c23c5effbacec91f8c"></a><!-- doxytag: member="time.h::time" ref="g26c7d1dbf93fa8c23c5effbacec91f8c" args="(time_t *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> time           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the system time. 
<p>
The <b>time</b> function returns the number of seconds elapsed since midnight (00:00:00), January 1, 1970, coordinated universal time (UTC), according to the system clock. The return value is stored in the location given by <em>timer</em>. This parameter may be <b>NULL</b>, in which case the return value is not stored.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to the storage location for time. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Return the time in elapsed seconds. There is no error return. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a13">caltime/caltime.c</a>, <a class="el" href="ftpd_2ftpserv_8c-example.html#a64">ftpd/ftpserv.c</a>, and <a class="el" href="httpd_2httpserv_8c-example.html#a39">httpd/httpserv.c</a>.</dl>
<p>Definition at line <a class="el" href="time_8c-source.html#l00089">89</a> of file <a class="el" href="time_8c-source.html">time.c</a>.</p>

<p>References <a class="el" href="mktime_8c-source.html#l00284">_mkgmtime()</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="timer_8c-source.html#l00713">NutGetSeconds()</a>, <a class="el" href="rtc_8c-source.html#l00091">NutRtcGetTime()</a>, and <a class="el" href="time_8h-source.html#l00104">tm::tm_isdst</a>.</p>

<p>Referenced by <a class="el" href="phatutil_8c-source.html#l00102">GetDosTimeStamp()</a>, <a class="el" href="ftpserv_8c-source.html#l00482">main()</a>, <a class="el" href="mib2sys_8c-source.html#l00135">MibRegisterSysVars()</a>, <a class="el" href="ftpd_8c-source.html#l01193">NutFtpServerSession()</a>, <a class="el" href="httpd_8c-source.html#l00234">NutHttpSendHeaderTop()</a>, <a class="el" href="httpserv_8c-source.html#l00585">SSIDemoCGI()</a>, <a class="el" href="syslog_8c-source.html#l00142">vsyslog()</a>, and <a class="el" href="syslog_8c-source.html#l00242">vsyslog_P()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gaa7031886dc783f76006ff1b370406b3"></a><!-- doxytag: member="time.h::gmtime_r" ref="gaa7031886dc783f76006ff1b370406b3" args="(CONST time_t *timer, tm *ptm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gmtime_r           </td>
          <td>(</td>
          <td class="paramtype">CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tm *&nbsp;</td>
          <td class="paramname"> <em>ptm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a time value to a structure. 
<p>
Thread safe version of <b>gmtime</b>. See <a class="el" href="group__xg_crt_time.html#g4bf5c1b09409b70880b839f0ff9aeb9a" title="Convert a time value to a structure.">gmtime</a> for more information.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to stored time. The time is represented as seconds elapsed since midnight (00:00:00), January 1, 1970, coordinated universal time (UTC). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptm</em>&nbsp;</td><td>Pointer to structure tm where the converted time is stored. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns nonzero value if any error occured. </dd></dl>

<p>Definition at line <a class="el" href="gmtime_8c-source.html#l00100">100</a> of file <a class="el" href="gmtime_8c-source.html">gmtime.c</a>.</p>

<p>References <a class="el" href="ctime_8h-source.html#l00053">_BASE_DOW</a>, <a class="el" href="ctime_8h-source.html#l00048">_DAY_SEC</a>, <a class="el" href="gmtime_8c-source.html#l00080">_days</a>, <a class="el" href="ctime_8h-source.html#l00050">_FOUR_YEAR_SEC</a>, <a class="el" href="gmtime_8c-source.html#l00077">_lpdays</a>, and <a class="el" href="ctime_8h-source.html#l00049">_YEAR_SEC</a>.</p>

<p>Referenced by <a class="el" href="gmtime_8c-source.html#l00195">gmtime()</a>, and <a class="el" href="localtim_8c-source.html#l00084">localtime_r()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4bf5c1b09409b70880b839f0ff9aeb9a"></a><!-- doxytag: member="time.h::gmtime" ref="g4bf5c1b09409b70880b839f0ff9aeb9a" args="(CONST time_t *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tm * gmtime           </td>
          <td>(</td>
          <td class="paramtype">CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a time value to a structure. 
<p>
The <b>gmtime</b> function breaks down the <em>timer</em> value and stores it in a statically allocated structure of type tm, defined in <a class="el" href="time_8h.html" title="Standard C time handling functions.">time.h</a>. The value of <em>timer</em> is usually obtained from a call to the <a class="el" href="group__xg_crt_time.html#g26c7d1dbf93fa8c23c5effbacec91f8c" title="Get the system time.">time</a> function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to stored time. The time is represented as seconds elapsed since midnight (00:00:00), January 1, 1970, coordinated universal time (UTC). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns a pointer to a structure of type tm. The fields of the returned structure hold the evaluated value of the timer argument in UTC rather than in local time.</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This function is not thread safe, because it uses a static variable to store the calculated values. To be safe, you must surround the call to <b>gmtime</b> and the usage of the returned pointer with <a class="el" href="include_2arch_2arm_2atom_8h.html#87280d882ea631ee08df697179c5d9ad">NutEnterCritical()</a> and <a class="el" href="include_2arch_2arm_2atom_8h.html#06e861b2acb2eb533dd1928acdd868d9">NutExitCritical()</a>! </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a16">caltime/caltime.c</a>, and <a class="el" href="ftpd_2ftpserv_8c-example.html#a49">ftpd/ftpserv.c</a>.</dl>
<p>Definition at line <a class="el" href="gmtime_8c-source.html#l00195">195</a> of file <a class="el" href="gmtime_8c-source.html">gmtime.c</a>.</p>

<p>References <a class="el" href="gmtime_8c-source.html#l00072">_tb</a>, and <a class="el" href="gmtime_8c-source.html#l00100">gmtime_r()</a>.</p>

<p>Referenced by <a class="el" href="ftpd_8c-source.html#l00784">NutFtpTransferDirectory()</a>, <a class="el" href="httpd_8c-source.html#l00234">NutHttpSendHeaderTop()</a>, and <a class="el" href="time_8c-source.html#l00119">stime()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g35785f4de9013a460456443a18117291"></a><!-- doxytag: member="time.h::localtime_r" ref="g35785f4de9013a460456443a18117291" args="(CONST time_t *timer, tm *ptm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int localtime_r           </td>
          <td>(</td>
          <td class="paramtype">CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tm *&nbsp;</td>
          <td class="paramname"> <em>ptm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a time value and correct for the local time zone. 
<p>
Thread safe version of <b>localtime</b>. See <a class="el" href="group__xg_crt_time.html#g7a9f8811ccb83dee7960cbd77dc133e9" title="Convert a time value and correct for the local time zone.">localtime</a> for more information.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to stored time. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptm</em>&nbsp;</td><td>Pointer to structure tm where the converted time is stored. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always return 0. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="httpd_2httpserv_8c-example.html#a40">httpd/httpserv.c</a>.</dl>
<p>Definition at line <a class="el" href="localtim_8c-source.html#l00084">84</a> of file <a class="el" href="localtim_8c-source.html">localtim.c</a>.</p>

<p>References <a class="el" href="ctime_8h-source.html#l00048">_DAY_SEC</a>, <a class="el" href="tzset_8c-source.html#l00065">_daylight</a>, <a class="el" href="tzset_8c-source.html#l00066">_dstbias</a>, <a class="el" href="tzset_8c-source.html#l00165">_isindst()</a>, <a class="el" href="tzset_8c-source.html#l00067">_timezone</a>, <a class="el" href="gmtime_8c-source.html#l00100">gmtime_r()</a>, <a class="el" href="localtim_8c-source.html#l00067">LONG_MAX</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

<p>Referenced by <a class="el" href="localtim_8c-source.html#l00209">localtime()</a>, and <a class="el" href="httpserv_8c-source.html#l00585">SSIDemoCGI()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7a9f8811ccb83dee7960cbd77dc133e9"></a><!-- doxytag: member="time.h::localtime" ref="g7a9f8811ccb83dee7960cbd77dc133e9" args="(CONST time_t *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tm * localtime           </td>
          <td>(</td>
          <td class="paramtype">CONST <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a time value and correct for the local time zone. 
<p>
The localtime function converts a time stored as a time_t value and stores the result in a structure of type tm. The long value <em>timer</em> represents the seconds elapsed since midnight (00:00:00), January 1, 1970, UTC. This value is usually obtained from the <a class="el" href="group__xg_crt_time.html#g26c7d1dbf93fa8c23c5effbacec91f8c" title="Get the system time.">time</a> function.<p>
<a class="el" href="group__xg_crt_time.html#g4bf5c1b09409b70880b839f0ff9aeb9a" title="Convert a time value to a structure.">gmtime</a>, <a class="el" href="group__xg_crt_time.html#g60ebe794537631d5c944d2580577068a" title="Convert the local time to a calendar value.">mktime</a>, and <b>localtime</b> all use a single statically allocated tm structure for the conversion. Each call to one of these routines destroys the result of the previous call.<p>
<b>localtime</b> corrects for the local time zone if the user first sets the global variable <a class="el" href="group__xg_crt_time.html#g9493c776d7de0e689626895324bd2d6e" title="Defines your local timezone.">_timezone</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to stored time. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Return a pointer to the structure result. If the value in <em>timer</em> represents a date before midnight, January 1, 1970, return <b>NULL</b>. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a17">caltime/caltime.c</a>, and <a class="el" href="ftpd_2ftpserv_8c-example.html#a65">ftpd/ftpserv.c</a>.</dl>
<p>Definition at line <a class="el" href="localtim_8c-source.html#l00209">209</a> of file <a class="el" href="localtim_8c-source.html">localtim.c</a>.</p>

<p>References <a class="el" href="gmtime_8c-source.html#l00072">_tb</a>, and <a class="el" href="localtim_8c-source.html#l00084">localtime_r()</a>.</p>

<p>Referenced by <a class="el" href="phatutil_8c-source.html#l00102">GetDosTimeStamp()</a>, <a class="el" href="ftpserv_8c-source.html#l00482">main()</a>, <a class="el" href="ftpd_8c-source.html#l01193">NutFtpServerSession()</a>, <a class="el" href="syslog_8c-source.html#l00142">vsyslog()</a>, and <a class="el" href="syslog_8c-source.html#l00242">vsyslog_P()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1e9a05d0b48dcf984238438fa8efd2d8"></a><!-- doxytag: member="time.h::stime" ref="g1e9a05d0b48dcf984238438fa8efd2d8" args="(time_t *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stime           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> *&nbsp;</td>
          <td class="paramname"> <em>timer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the system time. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timer</em>&nbsp;</td><td>Pointer to the storage location for time. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>This function always returns 0. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a24">caltime/caltime.c</a>, <a class="el" href="ftpd_2ftpserv_8c-example.html#a47">ftpd/ftpserv.c</a>, and <a class="el" href="logtime_2logtime_8c-example.html#a39">logtime/logtime.c</a>.</dl>
<p>Definition at line <a class="el" href="time_8c-source.html#l00119">119</a> of file <a class="el" href="time_8c-source.html">time.c</a>.</p>

<p>References <a class="el" href="gmtime_8c-source.html#l00195">gmtime()</a>, <a class="el" href="timer_8c-source.html#l00713">NutGetSeconds()</a>, and <a class="el" href="rtc_8c-source.html#l00109">NutRtcSetTime()</a>.</p>

<p>Referenced by <a class="el" href="logtime_8c-source.html#l00129">main()</a>, and <a class="el" href="sntp_8c-source.html#l00134">SNTP_resync()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g60ebe794537631d5c944d2580577068a"></a><!-- doxytag: member="time.h::mktime" ref="g60ebe794537631d5c944d2580577068a" args="(tm *timeptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> mktime           </td>
          <td>(</td>
          <td class="paramtype">tm *&nbsp;</td>
          <td class="paramname"> <em>timeptr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert the local time to a calendar value. 
<p>
The <b>mktime</b> function converts the supplied time structure (possibly incomplete) pointed to by <em>timeptr</em> into a fully defined structure with normalized values and then converts it to a <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5" title="Serial date/time. Holds number of seconds after January 1st, 1970.">time_t</a> calendar time value. The converted time has the same encoding as the values returned by the <a class="el" href="group__xg_crt_time.html#g26c7d1dbf93fa8c23c5effbacec91f8c" title="Get the system time.">time</a> function. The original values of the <code>tm_wday</code> and <code>tm_yday</code> components of the <em>timeptr</em> structure are ignored, and the original values of the other components are not restricted to their normal ranges.<p>
After an adjustment to Greenwich Mean Time (GMT), <b>mktime</b> handles dates from midnight, January 1, 1970, to January 19, 3:14:07, 2038. This adjustment may cause <b>mktime</b> to return -1 (cast to <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5" title="Serial date/time. Holds number of seconds after January 1st, 1970.">time_t</a>) even though the date you specify is within range. For example, if you are in Cairo, Egypt, which is two hours ahead of GMT, two hours will first be subtracted from the date you specify in <em>timeptr</em>; this may now put your date out of range.<p>
If successful, <b>mktime</b> sets the values of <code>tm_wday</code> and <code>tm_yday</code> as appropriate and sets the other components to represent the specified calendar time, but with their values forced to the normal ranges. The final value of tm_mday is not set until tm_mon and tm_year are determined. When specifying a tm structure time, set the <code>tm_isdst</code> field to:<p>
<ul>
<li>Zero (0) to indicate that standard time is in effect.</li><li>A value greater than 0 to indicate that daylight savings time is in effect.</li></ul>
<p>
<code>tm_isdst</code> is a required field. If not set, its value is undefined and the return value from <b>mktime</b> is unpredictable. If <em>timeptr</em> points to a tm structure returned by a previous call to <a class="el" href="group__xg_crt_time.html#g4bf5c1b09409b70880b839f0ff9aeb9a" title="Convert a time value to a structure.">gmtime</a> or <a class="el" href="group__xg_crt_time.html#g7a9f8811ccb83dee7960cbd77dc133e9" title="Convert a time value and correct for the local time zone.">localtime</a>, the <code>tm_isdst</code> field contains the correct value.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Note that <a class="el" href="group__xg_crt_time.html#g4bf5c1b09409b70880b839f0ff9aeb9a" title="Convert a time value to a structure.">gmtime</a> and <a class="el" href="group__xg_crt_time.html#g7a9f8811ccb83dee7960cbd77dc133e9" title="Convert a time value and correct for the local time zone.">localtime</a> use a single statically allocated buffer for the conversion. If you supply this buffer to <b>mktime</b>, the previous contents are destroyed.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timeptr</em>&nbsp;</td><td>Pointer to time structure. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><b>mktime</b> returns the specified calendar time encoded as a value of type <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5" title="Serial date/time. Holds number of seconds after January 1st, 1970.">time_t</a>. If <em>timeptr</em> references a date before midnight, January 1, 1970, or if the calendar time cannot be represented, <b>mktime</b> returns –1 cast to type <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5" title="Serial date/time. Holds number of seconds after January 1st, 1970.">time_t</a>. When using <b>mktime</b> and if <em>timeptr</em> references a date after 3:14:07 January 19, 2038, UTC, it will return –1 cast to type <a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5" title="Serial date/time. Holds number of seconds after January 1st, 1970.">time_t</a>. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a22">caltime/caltime.c</a>.</dl>
<p>Definition at line <a class="el" href="mktime_8c-source.html#l00279">279</a> of file <a class="el" href="mktime_8c-source.html">mktime.c</a>.</p>

<p>Referenced by <a class="el" href="phatdir_8c-source.html#l01155">PhatDirEntryStatus()</a>, and <a class="el" href="rfctime_8c-source.html#l00264">RfcTimeParse()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gda9feb24e45d91e9e56774ef223abe9b"></a><!-- doxytag: member="time.h::_mkgmtime" ref="gda9feb24e45d91e9e56774ef223abe9b" args="(tm *timeptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5">time_t</a> _mkgmtime           </td>
          <td>(</td>
          <td class="paramtype">tm *&nbsp;</td>
          <td class="paramname"> <em>timeptr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ftpd_2ftpserv_8c-example.html#a56">ftpd/ftpserv.c</a>.</dl>
<p>Definition at line <a class="el" href="mktime_8c-source.html#l00284">284</a> of file <a class="el" href="mktime_8c-source.html">mktime.c</a>.</p>

<p>Referenced by <a class="el" href="rfctime_8c-source.html#l00264">RfcTimeParse()</a>, and <a class="el" href="time_8c-source.html#l00089">time()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="g2bb3d0de4c753758209b935de23f09ae"></a><!-- doxytag: member="time.h::_daylight" ref="g2bb3d0de4c753758209b935de23f09ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xg_crt_time.html#g2bb3d0de4c753758209b935de23f09ae">_daylight</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to control daylight conversions. 
<p>
Assign a nonzero value to enable daylight conversions. If enabled the hour part of time values is adjusted if we are in daylight saving time. Zero value to disable conversion. Default is enabled. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a41">caltime/caltime.c</a>.</dl>
<p>Definition at line <a class="el" href="tzset_8c-source.html#l00065">65</a> of file <a class="el" href="tzset_8c-source.html">tzset.c</a>.</p>

<p>Referenced by <a class="el" href="tzset_8c-source.html#l00165">_isindst()</a>, <a class="el" href="localtim_8c-source.html#l00084">localtime_r()</a>, <a class="el" href="caltime_8c-source.html#l00334">main()</a>, and <a class="el" href="phatdir_8c-source.html#l01155">PhatDirEntryStatus()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g9493c776d7de0e689626895324bd2d6e"></a><!-- doxytag: member="time.h::_timezone" ref="g9493c776d7de0e689626895324bd2d6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="group__xg_crt_time.html#g9493c776d7de0e689626895324bd2d6e">_timezone</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Defines your local timezone. 
<p>
Difference in seconds between universal coordinated time and local time. This value is subtracted from the universal coordinated time to calculate your local time. Default value is 5 * 60 * 60 = 18000, which defines the time zone EST (GMT-5).<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Before using the time functions, set <b>_timezone</b> to your local value. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a18">caltime/caltime.c</a>, <a class="el" href="ftpd_2ftpserv_8c-example.html#a51">ftpd/ftpserv.c</a>, and <a class="el" href="logtime_2logtime_8c-example.html#a35">logtime/logtime.c</a>.</dl>
<p>Definition at line <a class="el" href="tzset_8c-source.html#l00067">67</a> of file <a class="el" href="tzset_8c-source.html">tzset.c</a>.</p>

<p>Referenced by <a class="el" href="localtim_8c-source.html#l00084">localtime_r()</a>, and <a class="el" href="logtime_8c-source.html#l00129">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8ab2ad3557476430d80335c8df4ff374"></a><!-- doxytag: member="time.h::_dstbias" ref="g8ab2ad3557476430d80335c8df4ff374" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="group__xg_crt_time.html#g8ab2ad3557476430d80335c8df4ff374">_dstbias</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Difference between standard and daylight savings time in seconds. 
<p>
This value is used to calculate the daylight savings time by subtracting this value from the standard time. Unit is seconds. Usually daylight savings time is one hour in advance to standard time, thus the default value is -1 * 60 * 60 = -3600. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="caltime_2caltime_8c-example.html#a20">caltime/caltime.c</a>.</dl>
<p>Definition at line <a class="el" href="tzset_8c-source.html#l00066">66</a> of file <a class="el" href="tzset_8c-source.html">tzset.c</a>.</p>

<p>Referenced by <a class="el" href="localtim_8c-source.html#l00084">localtime_r()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
