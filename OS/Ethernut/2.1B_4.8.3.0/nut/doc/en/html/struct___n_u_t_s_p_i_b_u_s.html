<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>NUTSPIBUS Struct Reference</h1><!-- doxytag: class="_NUTSPIBUS" -->SPI bus structure.  
<a href="#_details">More...</a>
<p>
<div class="dynheader">
Collaboration diagram for NUTSPIBUS:</div>
<div class="dynsection">
<p><center><img src="struct___n_u_t_s_p_i_b_u_s__coll__graph.png" border="0" usemap="#_n_u_t_s_p_i_b_u_s__coll__map" alt="Collaboration graph"></center>
<map name="_n_u_t_s_p_i_b_u_s__coll__map">
<area shape="rect" href="struct_i_r_q___h_a_n_d_l_e_r.html" title="IRQ_HANDLER" alt="IRQ_HANDLER" coords="7,16,108,37"></map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#d74d7dcc16aad726c4e2f227f88d4c61">bus_mutex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bus lock queue.  <a href="#d74d7dcc16aad726c4e2f227f88d4c61"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#294c3c91a88c1712092c872abf699dde">bus_ready</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bus wait ready queue.  <a href="#294c3c91a88c1712092c872abf699dde"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#2c8c1b9f53772a86b0827ce7399b68aa">uintptr_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#f5d9c71cf8f30ffc7a9a99b0ddf1646e">bus_base</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bus base address.  <a href="#f5d9c71cf8f30ffc7a9a99b0ddf1646e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_i_r_q___h_a_n_d_l_e_r.html">IRQ_HANDLER</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#e96aa6b8fdc1398a3c4d39efd2948b3c">bus_sig</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bus interrupt handler.  <a href="#e96aa6b8fdc1398a3c4d39efd2948b3c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#11961176f6a9e903e51e1d85ba5b7c0e">bus_initnode</a> )(NUTSPINODE *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize bus controller.  <a href="#11961176f6a9e903e51e1d85ba5b7c0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#23b8f4be983031643d25daedd0200326">bus_alloc</a> )(NUTSPINODE *, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate the bus.  <a href="#23b8f4be983031643d25daedd0200326"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#8a5bd31d36cebc027c448ad3931745a3">bus_release</a> )(NUTSPINODE *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release the bus.  <a href="#8a5bd31d36cebc027c448ad3931745a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#97920d8f74b047e0ca8ecda90798e556">bus_transfer</a> )(NUTSPINODE *, CONST void *, void *, int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transfer data.  <a href="#97920d8f74b047e0ca8ecda90798e556"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#836dbc37bd5a1eb7717e0c253f2d9556">bus_wait</a> )(NUTSPINODE *, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for transfer ready.  <a href="#836dbc37bd5a1eb7717e0c253f2d9556"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#6ed085329b153773ff76afa0702cf897">uint_fast16_t</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#8e5274b4d9a51b037b1082ded96e373a">bus_set_mode</a> )(NUTSPINODE *, <a class="el" href="stdint_8h.html#6ed085329b153773ff76afa0702cf897">uint_fast16_t</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set node's SPI mode.  <a href="#8e5274b4d9a51b037b1082ded96e373a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#8f075c759c74e109e8184306c663809d">uint_fast32_t</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#77bb24bfe4430c98ef1439aef8d1a97d">bus_set_rate</a> )(NUTSPINODE *, <a class="el" href="stdint_8h.html#8f075c759c74e109e8184306c663809d">uint_fast32_t</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set node's clock rate.  <a href="#77bb24bfe4430c98ef1439aef8d1a97d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#d0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_s_p_i_b_u_s.html#5207ad8425e2c9c04c279b46af183180">bus_set_bits</a> )(NUTSPINODE *, <a class="el" href="stdint_8h.html#d0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set node's data bit size.  <a href="#5207ad8425e2c9c04c279b46af183180"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
SPI bus structure. 
<p>Definition at line <a class="el" href="spibus_8h-source.html#l00079">79</a> of file <a class="el" href="spibus_8h-source.html">spibus.h</a>.</p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="d74d7dcc16aad726c4e2f227f88d4c61"></a><!-- doxytag: member="_NUTSPIBUS::bus_mutex" ref="d74d7dcc16aad726c4e2f227f88d4c61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a> NUTSPIBUS::bus_mutex          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bus lock queue. 
<p>

<p>Definition at line <a class="el" href="spibus_8h-source.html#l00082">82</a> of file <a class="el" href="spibus_8h-source.html">spibus.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="294c3c91a88c1712092c872abf699dde"></a><!-- doxytag: member="_NUTSPIBUS::bus_ready" ref="294c3c91a88c1712092c872abf699dde" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_nut_o_s.html#ga8c0374618b33785ccb02f74bcfebc46">HANDLE</a> NUTSPIBUS::bus_ready          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bus wait ready queue. 
<p>

<p>Definition at line <a class="el" href="spibus_8h-source.html#l00086">86</a> of file <a class="el" href="spibus_8h-source.html">spibus.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="f5d9c71cf8f30ffc7a9a99b0ddf1646e"></a><!-- doxytag: member="_NUTSPIBUS::bus_base" ref="f5d9c71cf8f30ffc7a9a99b0ddf1646e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#2c8c1b9f53772a86b0827ce7399b68aa">uintptr_t</a> NUTSPIBUS::bus_base          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bus base address. 
<p>

<p>Definition at line <a class="el" href="spibus_8h-source.html#l00090">90</a> of file <a class="el" href="spibus_8h-source.html">spibus.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="e96aa6b8fdc1398a3c4d39efd2948b3c"></a><!-- doxytag: member="_NUTSPIBUS::bus_sig" ref="e96aa6b8fdc1398a3c4d39efd2948b3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_i_r_q___h_a_n_d_l_e_r.html">IRQ_HANDLER</a>* NUTSPIBUS::bus_sig          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bus interrupt handler. 
<p>

<p>Definition at line <a class="el" href="spibus_8h-source.html#l00094">94</a> of file <a class="el" href="spibus_8h-source.html">spibus.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="11961176f6a9e903e51e1d85ba5b7c0e"></a><!-- doxytag: member="_NUTSPIBUS::bus_initnode" ref="11961176f6a9e903e51e1d85ba5b7c0e" args=")(NUTSPINODE *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* NUTSPIBUS::bus_initnode)(NUTSPINODE *)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize bus controller. 
<p>
This routine is called during device registration. 
</div>
</div><p>
<a class="anchor" name="23b8f4be983031643d25daedd0200326"></a><!-- doxytag: member="_NUTSPIBUS::bus_alloc" ref="23b8f4be983031643d25daedd0200326" args=")(NUTSPINODE *, uint32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* NUTSPIBUS::bus_alloc)(NUTSPINODE *, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocate the bus. 
<p>
Locks the bus and activates the chip select. 
</div>
</div><p>
<a class="anchor" name="8a5bd31d36cebc027c448ad3931745a3"></a><!-- doxytag: member="_NUTSPIBUS::bus_release" ref="8a5bd31d36cebc027c448ad3931745a3" args=")(NUTSPINODE *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* NUTSPIBUS::bus_release)(NUTSPINODE *)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Release the bus. 
<p>
Deactivates the chip select and unlocks the bus. 
</div>
</div><p>
<a class="anchor" name="97920d8f74b047e0ca8ecda90798e556"></a><!-- doxytag: member="_NUTSPIBUS::bus_transfer" ref="97920d8f74b047e0ca8ecda90798e556" args=")(NUTSPINODE *, CONST void *, void *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* NUTSPIBUS::bus_transfer)(NUTSPINODE *, CONST void *, void *, int)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Transfer data. 
<p>

</div>
</div><p>
<a class="anchor" name="836dbc37bd5a1eb7717e0c253f2d9556"></a><!-- doxytag: member="_NUTSPIBUS::bus_wait" ref="836dbc37bd5a1eb7717e0c253f2d9556" args=")(NUTSPINODE *, uint32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* NUTSPIBUS::bus_wait)(NUTSPINODE *, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for transfer ready. 
<p>

</div>
</div><p>
<a class="anchor" name="8e5274b4d9a51b037b1082ded96e373a"></a><!-- doxytag: member="_NUTSPIBUS::bus_set_mode" ref="8e5274b4d9a51b037b1082ded96e373a" args=")(NUTSPINODE *, uint_fast16_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#6ed085329b153773ff76afa0702cf897">uint_fast16_t</a>(* NUTSPIBUS::bus_set_mode)(NUTSPINODE *, <a class="el" href="stdint_8h.html#6ed085329b153773ff76afa0702cf897">uint_fast16_t</a>)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set node's SPI mode. 
<p>

</div>
</div><p>
<a class="anchor" name="77bb24bfe4430c98ef1439aef8d1a97d"></a><!-- doxytag: member="_NUTSPIBUS::bus_set_rate" ref="77bb24bfe4430c98ef1439aef8d1a97d" args=")(NUTSPINODE *, uint_fast32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#8f075c759c74e109e8184306c663809d">uint_fast32_t</a>(* NUTSPIBUS::bus_set_rate)(NUTSPINODE *, <a class="el" href="stdint_8h.html#8f075c759c74e109e8184306c663809d">uint_fast32_t</a>)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set node's clock rate. 
<p>

</div>
</div><p>
<a class="anchor" name="5207ad8425e2c9c04c279b46af183180"></a><!-- doxytag: member="_NUTSPIBUS::bus_set_bits" ref="5207ad8425e2c9c04c279b46af183180" args=")(NUTSPINODE *, uint_fast8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#d0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a>(* NUTSPIBUS::bus_set_bits)(NUTSPINODE *, <a class="el" href="stdint_8h.html#d0fca8b15c218d2c687f8c373a71d228">uint_fast8_t</a>)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set node's data bit size. 
<p>

</div>
</div><p>
<hr>The documentation for this struct was generated from the following file:<ul>
<li>include/dev/<a class="el" href="spibus_8h-source.html">spibus.h</a></ul>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
