<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>ARP<br>
<small>
[<a class="el" href="group__xg_base_pro.html">Base Protocols</a>]</small>
</h1>RFC 826 address resolution protocol.  
<a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Collaboration diagram for ARP:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__xg_a_r_p.png" border="0" alt="" usemap="#group____xg__a__r__p_map">
<map name="group____xg__a__r__p_map">
<area shape="rect" href="group__xg_base_pro.html" title="TCP/IP and UDP applications." alt="Base Protocols" coords="19,5,117,26"></map></td></tr></table></center>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___a_r_p_e_n_t_r_y.html">ARPENTRY</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ARP entry structure.  <a href="struct___a_r_p_e_n_t_r_y.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#g2576f3ba0fd45696e1827878305944d6">ATF_REM</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Entry marked for removal.  <a href="#g2576f3ba0fd45696e1827878305944d6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#g1d6c998dda361d89fbf2f867e88ef575">ATF_COM</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Completed entry.  <a href="#g1d6c998dda361d89fbf2f867e88ef575"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gd9461bf03d724ba90c0defb77c623fd8">ATF_PERM</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Permanent entry.  <a href="#gd9461bf03d724ba90c0defb77c623fd8"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#g714762bc6a1a681504fa425746497e7d">NutArpCacheUpdate</a> (NUTDEVICE *dev, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="structip.html">ip</a>, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *ha)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update an ARP entry.  <a href="#g714762bc6a1a681504fa425746497e7d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga81c81a0e20751199a14e0bf10773a0d">NutArpCacheQuery</a> (NUTDEVICE *dev, CONST <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="structip.html">ip</a>, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *mac)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query MAC address for a specified IP address.  <a href="#ga81c81a0e20751199a14e0bf10773a0d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#g7561577580e637513a02fc8cf82ccc2d">NutArpInput</a> (NUTDEVICE *dev, NETBUF *nb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle incoming ARP packets.  <a href="#g7561577580e637513a02fc8cf82ccc2d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NETBUF *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gbac6d94d31a9cac4a198e893e148ff11">NutArpAllocNetBuf</a> (<a class="el" href="stdint_8h.html#1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> type, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="structip.html">ip</a>, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *mac)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate an ARP network buffer structure.  <a href="#gbac6d94d31a9cac4a198e893e148ff11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#g6a7db32bf7002c79ca97cc405360ffd0">NutArpOutput</a> (NUTDEVICE *dev, NETBUF *nb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send an ARP packet.  <a href="#g6a7db32bf7002c79ca97cc405360ffd0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>ARP Configuration</h2></td></tr>
<tr><td colspan="2">The Nut/OS Configurator may be used to override the default values. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga04ce72a347eb29b9fa64e976337f878">MAX_ARPAGE</a>&nbsp;&nbsp;&nbsp;9</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum age of an entry in the ARP cache in minutes.  <a href="#ga04ce72a347eb29b9fa64e976337f878"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#ga8285ef314585a34c8733a3d2cd8e3f1">MAX_ARPREQUESTS</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of ARP requests generated per query.  <a href="#ga8285ef314585a34c8733a3d2cd8e3f1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_a_r_p.html#gecc6cb0b5229e10736fd83a78c14bf80">MIN_ARPWAIT</a>&nbsp;&nbsp;&nbsp;500</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Minimum wait before sending out a new ARP request.  <a href="#gecc6cb0b5229e10736fd83a78c14bf80"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
RFC 826 address resolution protocol. 
<p>
ARP is used to map IP addresses to hardware addresses. Each network interface of Nut/Net keeps its own mapping table.<p>
When an IP packet has to be sent out, IP needs the hardware address to pass it to the Ethernet layer. If the mapping is not in the ARP cache, an Ethernet broadcast packet is sent to the local network requesting the physical hardware address for the given IP address.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>Add functions to manually add or remove ARP entries. <p>
Add function to query ARP tables. </dd></dl>
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000039">Todo:</a></b></dt><dd>Response may reuse received ARP packet. </dd></dl>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="g2576f3ba0fd45696e1827878305944d6"></a><!-- doxytag: member="if_var.h::ATF_REM" ref="g2576f3ba0fd45696e1827878305944d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATF_REM&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Entry marked for removal. 
<p>

<p>Definition at line <a class="el" href="if__var_8h-source.html#l00125">125</a> of file <a class="el" href="if__var_8h-source.html">if_var.h</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00448">NutArpCacheQuery()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1d6c998dda361d89fbf2f867e88ef575"></a><!-- doxytag: member="if_var.h::ATF_COM" ref="g1d6c998dda361d89fbf2f867e88ef575" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATF_COM&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Completed entry. 
<p>

<p>Definition at line <a class="el" href="if__var_8h-source.html#l00126">126</a> of file <a class="el" href="if__var_8h-source.html">if_var.h</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00448">NutArpCacheQuery()</a>, and <a class="el" href="arpcache_8c-source.html#l00393">NutArpCacheUpdate()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd9461bf03d724ba90c0defb77c623fd8"></a><!-- doxytag: member="if_var.h::ATF_PERM" ref="gd9461bf03d724ba90c0defb77c623fd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATF_PERM&nbsp;&nbsp;&nbsp;0x04          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Permanent entry. 
<p>

<p>Definition at line <a class="el" href="if__var_8h-source.html#l00127">127</a> of file <a class="el" href="if__var_8h-source.html">if_var.h</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00393">NutArpCacheUpdate()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ga04ce72a347eb29b9fa64e976337f878"></a><!-- doxytag: member="arpcache.c::MAX_ARPAGE" ref="ga04ce72a347eb29b9fa64e976337f878" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ARPAGE&nbsp;&nbsp;&nbsp;9          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum age of an entry in the ARP cache in minutes. 
<p>
Outdated entries will be regularly removed, forcing the Ethernet interface to generate new ARP requests. This way MAC address changes are detected. 
<p>Definition at line <a class="el" href="arpcache_8c-source.html#l00200">200</a> of file <a class="el" href="arpcache_8c-source.html">arpcache.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ga8285ef314585a34c8733a3d2cd8e3f1"></a><!-- doxytag: member="arpcache.c::MAX_ARPREQUESTS" ref="ga8285ef314585a34c8733a3d2cd8e3f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ARPREQUESTS&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum number of ARP requests generated per query. 
<p>
If no ARP response is received after sending out the specified number of request, the related IP address is considered unreachable. 
<p>Definition at line <a class="el" href="arpcache_8c-source.html#l00211">211</a> of file <a class="el" href="arpcache_8c-source.html">arpcache.c</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00448">NutArpCacheQuery()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gecc6cb0b5229e10736fd83a78c14bf80"></a><!-- doxytag: member="arpcache.c::MIN_ARPWAIT" ref="gecc6cb0b5229e10736fd83a78c14bf80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_ARPWAIT&nbsp;&nbsp;&nbsp;500          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Minimum wait before sending out a new ARP request. 
<p>
The specified number of milliseconds will be doubled on each retry. 
<p>Definition at line <a class="el" href="arpcache_8c-source.html#l00221">221</a> of file <a class="el" href="arpcache_8c-source.html">arpcache.c</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00448">NutArpCacheQuery()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g714762bc6a1a681504fa425746497e7d"></a><!-- doxytag: member="arpcache.c::NutArpCacheUpdate" ref="g714762bc6a1a681504fa425746497e7d" args="(NUTDEVICE *dev, uint32_t ip, uint8_t *ha)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutArpCacheUpdate           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ha</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update an ARP entry. 
<p>
If an entry with the same IP address exists, then this entry is updated. If no entry exists, a new one is created. All threads waiting for address resolution are woken up.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This function is automatically called on each incoming ARP telegram. Applications typically do not call this function.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structip.html" title="Structure of an internet header.">ip</a></em>&nbsp;</td><td>Requested IP address in network byte order. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ha</em>&nbsp;</td><td>Pointer to a buffer which receives the MAC address. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="arpcache_8c-source.html#l00393">393</a> of file <a class="el" href="arpcache_8c-source.html">arpcache.c</a>.</p>

<p>References <a class="el" href="netdebug_8c-source.html#l00103">__tcp_trf</a>, <a class="el" href="netdebug_8c-source.html#l00102">__tcp_trs</a>, <a class="el" href="if__var_8h-source.html#l00126">ATF_COM</a>, <a class="el" href="if__var_8h-source.html#l00127">ATF_PERM</a>, <a class="el" href="fprintf_8c-source.html#l00068">fprintf()</a>, <a class="el" href="fputc_8c-source.html#l00069">fputc()</a>, <a class="el" href="inet_8c-source.html#l00175">inet_ntoa()</a>, <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>, and <a class="el" href="event_8c-source.html#l00533">NutEventBroadcast()</a>.</p>

<p>Referenced by <a class="el" href="arpin_8c-source.html#l00143">NutArpInput()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ga81c81a0e20751199a14e0bf10773a0d"></a><!-- doxytag: member="arpcache.c::NutArpCacheQuery" ref="ga81c81a0e20751199a14e0bf10773a0d" args="(NUTDEVICE *dev, CONST uint32_t ip, uint8_t *mac)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutArpCacheQuery           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mac</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Query MAC address for a specified IP address. 
<p>
If no entry is available in the ARP cache, an incomplete entry is created and ARP requests are generated on increasing time intervals. The calling thread is suspended until a matching ARP response is received or until a number of requests have been generated without receiving a response.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This function is automatically called on each outgoing IP packet. Applications typically do not call this function.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structip.html" title="Structure of an internet header.">ip</a></em>&nbsp;</td><td>IP address of which the caller asked the MAC address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mac</em>&nbsp;</td><td>Buffer for the retrieved MAC address.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if address resolved, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="arpcache_8c-source.html#l00448">448</a> of file <a class="el" href="arpcache_8c-source.html">arpcache.c</a>.</p>

<p>References <a class="el" href="netdebug_8c-source.html#l00103">__tcp_trf</a>, <a class="el" href="netdebug_8c-source.html#l00102">__tcp_trs</a>, <a class="el" href="if__arp_8h-source.html#l00100">ARPOP_REQUEST</a>, <a class="el" href="if__var_8h-source.html#l00126">ATF_COM</a>, <a class="el" href="if__var_8h-source.html#l00125">ATF_REM</a>, <a class="el" href="fprintf_8c-source.html#l00068">fprintf()</a>, <a class="el" href="inet_8c-source.html#l00175">inet_ntoa()</a>, <a class="el" href="arpcache_8c-source.html#l00211">MAX_ARPREQUESTS</a>, <a class="el" href="arpcache_8c-source.html#l00221">MIN_ARPWAIT</a>, <a class="el" href="arpout_8c-source.html#l00141">NutArpAllocNetBuf()</a>, <a class="el" href="arpout_8c-source.html#l00186">NutArpOutput()</a>, <a class="el" href="event_8c-source.html#l00271">NutEventWait()</a>, and <a class="el" href="netbuf_8c-source.html#l00299">NutNetBufFree()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7561577580e637513a02fc8cf82ccc2d"></a><!-- doxytag: member="arpin.c::NutArpInput" ref="g7561577580e637513a02fc8cf82ccc2d" args="(NUTDEVICE *dev, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutArpInput           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NETBUF *&nbsp;</td>
          <td class="paramname"> <em>nb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle incoming ARP packets. 
<p>
Packets not destined to us or packets with unsupported address type or item length are silently discarded.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This routine is called by the Ethernet layer on incoming ARP packets. Applications typically do not call this function.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device that received the packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nb</em>&nbsp;</td><td>Pointer to a network buffer structure containing the ARP packet. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="arpin_8c-source.html#l00143">143</a> of file <a class="el" href="arpin_8c-source.html">arpin.c</a>.</p>

<p>References <a class="el" href="if__arp_8h-source.html#l00118">ARPHDR::ar_hln</a>, <a class="el" href="if__arp_8h-source.html#l00112">ARPHDR::ar_hrd</a>, <a class="el" href="if__arp_8h-source.html#l00120">ARPHDR::ar_op</a>, <a class="el" href="if__arp_8h-source.html#l00119">ARPHDR::ar_pln</a>, <a class="el" href="if__arp_8h-source.html#l00115">ARPHDR::ar_pro</a>, <a class="el" href="if__ether_8h-source.html#l00165">ETHERARP::arp_sha</a>, <a class="el" href="if__ether_8h-source.html#l00166">ETHERARP::arp_spa</a>, <a class="el" href="if__ether_8h-source.html#l00168">ETHERARP::arp_tpa</a>, <a class="el" href="if__arp_8h-source.html#l00098">ARPHRD_ETHER</a>, <a class="el" href="if__arp_8h-source.html#l00101">ARPOP_REPLY</a>, <a class="el" href="if__arp_8h-source.html#l00100">ARPOP_REQUEST</a>, <a class="el" href="if__ether_8h-source.html#l00164">ETHERARP::ea_hdr</a>, <a class="el" href="if__ether_8h-source.html#l00103">ETHERTYPE_IP</a>, <a class="el" href="types_8h-source.html#l00321">htons</a>, <a class="el" href="types_8h-source.html#l00339">ntohs</a>, <a class="el" href="arpout_8c-source.html#l00141">NutArpAllocNetBuf()</a>, <a class="el" href="arpcache_8c-source.html#l00393">NutArpCacheUpdate()</a>, <a class="el" href="arpout_8c-source.html#l00186">NutArpOutput()</a>, and <a class="el" href="netbuf_8c-source.html#l00299">NutNetBufFree()</a>.</p>

<p>Referenced by <a class="el" href="ethin_8c-source.html#l00156">NutEtherInput()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gbac6d94d31a9cac4a198e893e148ff11"></a><!-- doxytag: member="arpout.c::NutArpAllocNetBuf" ref="gbac6d94d31a9cac4a198e893e148ff11" args="(uint16_t type, uint32_t ip, uint8_t *mac)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NETBUF* NutArpAllocNetBuf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mac</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocate an ARP network buffer structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of ARP packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structip.html" title="Structure of an internet header.">ip</a></em>&nbsp;</td><td>Target IP address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mac</em>&nbsp;</td><td>Target MAC address, null pointer for broadcast.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to the allocated network buffer structure or 0 on failure. </dd></dl>

<p>Definition at line <a class="el" href="arpout_8c-source.html#l00141">141</a> of file <a class="el" href="arpout_8c-source.html">arpout.c</a>.</p>

<p>References <a class="el" href="if__arp_8h-source.html#l00118">ARPHDR::ar_hln</a>, <a class="el" href="if__arp_8h-source.html#l00112">ARPHDR::ar_hrd</a>, <a class="el" href="if__arp_8h-source.html#l00120">ARPHDR::ar_op</a>, <a class="el" href="if__arp_8h-source.html#l00119">ARPHDR::ar_pln</a>, <a class="el" href="if__arp_8h-source.html#l00115">ARPHDR::ar_pro</a>, <a class="el" href="if__ether_8h-source.html#l00167">ETHERARP::arp_tha</a>, <a class="el" href="if__ether_8h-source.html#l00168">ETHERARP::arp_tpa</a>, <a class="el" href="if__arp_8h-source.html#l00098">ARPHRD_ETHER</a>, <a class="el" href="if__ether_8h-source.html#l00164">ETHERARP::ea_hdr</a>, <a class="el" href="if__ether_8h-source.html#l00103">ETHERTYPE_IP</a>, <a class="el" href="types_8h-source.html#l00321">htons</a>, <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>, <a class="el" href="memset_8c-source.html#l00088">memset()</a>, <a class="el" href="netbuf_8h-source.html#l00130">NBAF_NETWORK</a>, and <a class="el" href="netbuf_8c-source.html#l00173">NutNetBufAlloc()</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00448">NutArpCacheQuery()</a>, and <a class="el" href="arpin_8c-source.html#l00143">NutArpInput()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g6a7db32bf7002c79ca97cc405360ffd0"></a><!-- doxytag: member="arpout.c::NutArpOutput" ref="g6a7db32bf7002c79ca97cc405360ffd0" args="(NUTDEVICE *dev, NETBUF *nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutArpOutput           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NETBUF *&nbsp;</td>
          <td class="paramname"> <em>nb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send an ARP packet. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Applications typically do not call this function.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nb</em>&nbsp;</td><td>Network buffer structure containing the packet to be sent. The structure must have been allocated by a previous call <a class="el" href="group__xgnetbuf.html#g7a733aed1e6c15aaabb6657abe5f4e39" title="Allocate or re-allocate a network buffer part.">NutNetBufAlloc()</a>.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 in case of any errors. </dd></dl>

<p>Definition at line <a class="el" href="arpout_8c-source.html#l00186">186</a> of file <a class="el" href="arpout_8c-source.html">arpout.c</a>.</p>

<p>References <a class="el" href="if__ether_8h-source.html#l00165">ETHERARP::arp_sha</a>, <a class="el" href="if__ether_8h-source.html#l00166">ETHERARP::arp_spa</a>, <a class="el" href="if__ether_8h-source.html#l00167">ETHERARP::arp_tha</a>, <a class="el" href="if__ether_8h-source.html#l00104">ETHERTYPE_ARP</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="arpcache_8c-source.html#l00448">NutArpCacheQuery()</a>, and <a class="el" href="arpin_8c-source.html#l00143">NutArpInput()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
