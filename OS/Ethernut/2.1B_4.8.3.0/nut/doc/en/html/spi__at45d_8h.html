<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_81006e530ae69d901a01dddafc7fbce4.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_29e0dcc87985a941e12843c236561edc.html">dev</a>
  </div>
<div class="contents">
<h1>spi_at45d.h File Reference</h1>AT45D.  
<a href="#_details">More...</a>
<p>

<p>
<a href="spi__at45d_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#2de83058ef84bb3361b18313eda4e738">SpiAt45dInit</a> (NUTDEVICE *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the DataFlash device.  <a href="#2de83058ef84bb3361b18313eda4e738"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#3974fe03afec8af1bf1c32e6fee28e90">SpiAt45dCommand</a> (NUTDEVICE *dev, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> op, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> parm, int len, CONST void *tdata, void *rdata, int datalen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send DataFlash command.  <a href="#3974fe03afec8af1bf1c32e6fee28e90"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#e1d03f2c983832328f1c9abb64442ba0">SpiAt45dStatus</a> (NUTDEVICE *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query the status of the DataFlash.  <a href="#e1d03f2c983832328f1c9abb64442ba0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#f8533b6e6328d02e9f50a6bf56410624">SpiAt45dWaitReady</a> (NUTDEVICE *dev, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> tmo, int poll)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait until DataFlash memory cycle finished.  <a href="#f8533b6e6328d02e9f50a6bf56410624"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#7d428e8797fa4c40d2f40d6abc7065b1">SpiAt45dPageErase</a> (NUTDEVICE *dev, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase specified DataFlash page.  <a href="#7d428e8797fa4c40d2f40d6abc7065b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#019516018349fe5f0ffab6ca98494025">SpiAt45dChipErase</a> (NUTDEVICE *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase all DataFlash pages.  <a href="#019516018349fe5f0ffab6ca98494025"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#25cb2b6fad5064288ec0d52a86a9421d">SpiAt45dPageRead</a> (NUTDEVICE *dev, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn, void *data, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from DataFlash memory.  <a href="#25cb2b6fad5064288ec0d52a86a9421d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#7363f4646087da35b082f2bc61e5948e">SpiAt45dPageWrite</a> (NUTDEVICE *dev, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn, CONST void *data, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data to DataFlash memory.  <a href="#7363f4646087da35b082f2bc61e5948e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#511e65d18ee1e3223f5d077f9db35ace">SpiAt45dPages</a> (NUTDEVICE *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of pages.  <a href="#511e65d18ee1e3223f5d077f9db35ace"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#a0c27889cf7245d2266c92c32bd0fdee">SpiAt45dPageSize</a> (NUTDEVICE *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the page size.  <a href="#a0c27889cf7245d2266c92c32bd0fdee"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#98cec9a103ede98743d6ff9a20c07a9f">SpiAt45dPageWrite_P</a> (NUTDEVICE *dev, <a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> pgn, PGM_P data, int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#b4c9fa59e861034fee22f78c0d1b2185">SpiAt45dIOCtl</a> (NUTDEVICE *dev, int req, void *conf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform block I/O device control functions.  <a href="#b4c9fa59e861034fee22f78c0d1b2185"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTSPINODE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#c846aafb731d00d126e9cc5a06c69a3a">nodeSpiAt45d0</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash SPI node implementation structure.  <a href="#c846aafb731d00d126e9cc5a06c69a3a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTDEVICE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#ef47a1b45754425a84c801cf1f55a1c8">devSpiAt45d0</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash device implementation structure.  <a href="#ef47a1b45754425a84c801cf1f55a1c8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTSPINODE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#6d816173859b9176b26e8acc3f3a871b">nodeSpiAt45d1</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash SPI node implementation structure.  <a href="#6d816173859b9176b26e8acc3f3a871b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTDEVICE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#9732aab68135ea4a1e98b4a5170a0dfe">devSpiAt45d1</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash device implementation structure.  <a href="#9732aab68135ea4a1e98b4a5170a0dfe"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTSPINODE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#78deb92dc0415b4661c4f67800efed12">nodeSpiAt45d2</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash SPI node implementation structure.  <a href="#78deb92dc0415b4661c4f67800efed12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTDEVICE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#8ebfc0a52106f4ff1fabef982760d9d4">devSpiAt45d2</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash device implementation structure.  <a href="#8ebfc0a52106f4ff1fabef982760d9d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTSPINODE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#ee99253984021ea73f737b75ee6ba6b8">nodeSpiAt45d3</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash SPI node implementation structure.  <a href="#ee99253984021ea73f737b75ee6ba6b8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTDEVICE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__at45d_8h.html#b929dc523048374fbd5c960ac650a530">devSpiAt45d3</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT45D DataFlash device implementation structure.  <a href="#b929dc523048374fbd5c960ac650a530"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
AT45D. 
<p>
<div class="fragment"><pre class="fragment">
 * $Id: nvmem_at45d.h 2379 2009-01-09 17:59:05Z haraldkipp $
 * </pre></div><p>
<div class="fragment"><pre class="fragment">
 * $Id: spi_at45d.h 2379 2009-01-09 17:59:05Z haraldkipp $
 * </pre></div> 
<p>Definition in file <a class="el" href="spi__at45d_8h-source.html">spi_at45d.h</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="2de83058ef84bb3361b18313eda4e738"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dInit" ref="2de83058ef84bb3361b18313eda4e738" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dInit           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the DataFlash device. 
<p>
This routine determines the DataFlash type. It is internally called by Nut/OS during device registration.<p>
The driver framework may call this function more than once.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the DataFlash device.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 if no valid DataFlash was found. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00274">274</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="spi__at45d_8c-source.html#l00063">at45d_info</a>, <a class="el" href="spi__at45d_8c-source.html#l00083">at45d_known_types</a>, <a class="el" href="at45d_8h-source.html#l00161">AT45D_STATUS_DENSITY</a>, <a class="el" href="at45d_8h-source.html#l00165">AT45D_STATUS_PAGE_SIZE</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="3974fe03afec8af1bf1c32e6fee28e90"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dCommand" ref="3974fe03afec8af1bf1c32e6fee28e90" args="(NUTDEVICE *dev, uint8_t op, uint32_t parm, int len, CONST void *tdata, void *rdata, int datalen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dCommand           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>parm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>oplen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>txbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>rxbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send DataFlash command. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the DataFlash device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>op</em>&nbsp;</td><td>Command operation code. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parm</em>&nbsp;</td><td>Optional command parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oplen</em>&nbsp;</td><td>Command length. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>txbuf</em>&nbsp;</td><td>Pointer to the transmit data buffer, may be set to NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rxbuf</em>&nbsp;</td><td>Pointer to the receive data buffer, may be set to NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xlen</em>&nbsp;</td><td>Number of byte to receive and/or transmit. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00195">195</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="e1d03f2c983832328f1c9abb64442ba0"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dStatus" ref="e1d03f2c983832328f1c9abb64442ba0" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> SpiAt45dStatus           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Query the status of the DataFlash. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the Flash device.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00208">208</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="f8533b6e6328d02e9f50a6bf56410624"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dWaitReady" ref="f8533b6e6328d02e9f50a6bf56410624" args="(NUTDEVICE *dev, uint32_t tmo, int poll)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dWaitReady           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>poll</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait until DataFlash memory cycle finished. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the DataFlash device.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00221">221</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="7d428e8797fa4c40d2f40d6abc7065b1"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dPageErase" ref="7d428e8797fa4c40d2f40d6abc7065b1" args="(NUTDEVICE *dev, uint32_t pgn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dPageErase           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase specified DataFlash page. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the registered DataFlash device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgn</em>&nbsp;</td><td>Page number to erase, starting at 0.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00235">235</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="at45d_8h-source.html#l00079">DFCMD_PAGE_ERASE</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="019516018349fe5f0ffab6ca98494025"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dChipErase" ref="019516018349fe5f0ffab6ca98494025" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dChipErase           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase all DataFlash pages. 
<p>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00257">257</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="25cb2b6fad5064288ec0d52a86a9421d"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dPageRead" ref="25cb2b6fad5064288ec0d52a86a9421d" args="(NUTDEVICE *dev, uint32_t pgn, void *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dPageRead           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data from DataFlash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the registered DataFlash device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgn</em>&nbsp;</td><td>Page number to read, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of bytes actually read. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00314">314</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="at45d_8h-source.html#l00148">DFCMD_CONT_READ</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

<p>Referenced by <a class="el" href="nvmem__at45d_8c-source.html#l00158">SpiAt45dConfigRead()</a>, and <a class="el" href="nvmem__at45d_8c-source.html#l00187">SpiAt45dConfigWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7363f4646087da35b082f2bc61e5948e"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dPageWrite" ref="7363f4646087da35b082f2bc61e5948e" args="(NUTDEVICE *dev, uint32_t pgn, CONST void *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dPageWrite           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data to DataFlash memory. 
<p>
Each page will be automatically erased before writing the data. If the last page is not completely filled with new data, the contents of remaining bytes at the end of the page is undetermined.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the registered DataFlash device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgn</em>&nbsp;</td><td>The page number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to the buffer that contains the bytes to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes available in the buffer. This may be less than the page size, in which case the remaining bytes of the page will be set to 0xff.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of bytes actually written. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00354">354</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="at45db_8c-source.html#l00114">AT45_WRITE_POLLS</a>, <a class="el" href="at45d_8h-source.html#l00087">DFCMD_BUF1_FLASH</a>, <a class="el" href="at45d_8h-source.html#l00091">DFCMD_BUF1_WRITE</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

<p>Referenced by <a class="el" href="nvmem__at45d_8c-source.html#l00187">SpiAt45dConfigWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="511e65d18ee1e3223f5d077f9db35ace"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dPages" ref="511e65d18ee1e3223f5d077f9db35ace" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a> SpiAt45dPages           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the number of pages. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the registered DataFlash device.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The total number of pages available in this device. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00421">421</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="a0c27889cf7245d2266c92c32bd0fdee"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dPageSize" ref="a0c27889cf7245d2266c92c32bd0fdee" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dPageSize           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the page size. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the registered DataFlash device.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of bytes per page. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00440">440</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

<p>Referenced by <a class="el" href="nvmem__at45d_8c-source.html#l00134">SpiAt45dConfigSize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="98cec9a103ede98743d6ff9a20c07a9f"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dPageWrite_P" ref="98cec9a103ede98743d6ff9a20c07a9f" args="(NUTDEVICE *dev, uint32_t pgn, PGM_P data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dPageWrite_P           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#06896e8c53f721507066c079052171f8">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pgn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGM_P&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00408">408</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="b4c9fa59e861034fee22f78c0d1b2185"></a><!-- doxytag: member="spi_at45d.h::SpiAt45dIOCtl" ref="b4c9fa59e861034fee22f78c0d1b2185" args="(NUTDEVICE *dev, int req, void *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SpiAt45dIOCtl           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>conf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Perform block I/O device control functions. 
<p>
This function is called by the ioctl() function of the C runtime library. Applications should not directly call this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device that receives the control command. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>Requested control command. May be set to one of the following constants:<ul>
<li><a class="el" href="group__xg_block_dev.html#gd5bcfe283715d269e64a3d70fa58c3d3">NUTBLKDEV_MEDIAAVAIL</a></li><li><a class="el" href="group__xg_block_dev.html#g0021380fd206ad6327ee752d3df8722c">NUTBLKDEV_MEDIACHANGE</a></li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Points to a buffer that contains any data required for the given control function or receives data from that function. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="spi__at45d_8c-source.html#l00469">469</a> of file <a class="el" href="spi__at45d_8c-source.html">spi_at45d.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, <a class="el" href="blockdev_8h-source.html#l00076">NUTBLKDEV_MEDIAAVAIL</a>, and <a class="el" href="blockdev_8h-source.html#l00078">NUTBLKDEV_MEDIACHANGE</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="c846aafb731d00d126e9cc5a06c69a3a"></a><!-- doxytag: member="spi_at45d.h::nodeSpiAt45d0" ref="c846aafb731d00d126e9cc5a06c69a3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTSPINODE <a class="el" href="spi__at45d0_8c.html#c846aafb731d00d126e9cc5a06c69a3a">nodeSpiAt45d0</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash SPI node implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d0_8c-source.html#l00088">88</a> of file <a class="el" href="spi__at45d0_8c-source.html">spi_at45d0.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ef47a1b45754425a84c801cf1f55a1c8"></a><!-- doxytag: member="spi_at45d.h::devSpiAt45d0" ref="ef47a1b45754425a84c801cf1f55a1c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTDEVICE <a class="el" href="spi__at45d0_8c.html#ef47a1b45754425a84c801cf1f55a1c8">devSpiAt45d0</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash device implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d0_8c-source.html#l00117">117</a> of file <a class="el" href="spi__at45d0_8c-source.html">spi_at45d0.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="6d816173859b9176b26e8acc3f3a871b"></a><!-- doxytag: member="spi_at45d.h::nodeSpiAt45d1" ref="6d816173859b9176b26e8acc3f3a871b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTSPINODE <a class="el" href="spi__at45d1_8c.html#6d816173859b9176b26e8acc3f3a871b">nodeSpiAt45d1</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash SPI node implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d1_8c-source.html#l00072">72</a> of file <a class="el" href="spi__at45d1_8c-source.html">spi_at45d1.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="9732aab68135ea4a1e98b4a5170a0dfe"></a><!-- doxytag: member="spi_at45d.h::devSpiAt45d1" ref="9732aab68135ea4a1e98b4a5170a0dfe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTDEVICE <a class="el" href="spi__at45d1_8c.html#9732aab68135ea4a1e98b4a5170a0dfe">devSpiAt45d1</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash device implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d1_8c-source.html#l00101">101</a> of file <a class="el" href="spi__at45d1_8c-source.html">spi_at45d1.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="78deb92dc0415b4661c4f67800efed12"></a><!-- doxytag: member="spi_at45d.h::nodeSpiAt45d2" ref="78deb92dc0415b4661c4f67800efed12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTSPINODE <a class="el" href="spi__at45d2_8c.html#78deb92dc0415b4661c4f67800efed12">nodeSpiAt45d2</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash SPI node implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d2_8c-source.html#l00072">72</a> of file <a class="el" href="spi__at45d2_8c-source.html">spi_at45d2.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="8ebfc0a52106f4ff1fabef982760d9d4"></a><!-- doxytag: member="spi_at45d.h::devSpiAt45d2" ref="8ebfc0a52106f4ff1fabef982760d9d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTDEVICE <a class="el" href="spi__at45d2_8c.html#8ebfc0a52106f4ff1fabef982760d9d4">devSpiAt45d2</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash device implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d2_8c-source.html#l00101">101</a> of file <a class="el" href="spi__at45d2_8c-source.html">spi_at45d2.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ee99253984021ea73f737b75ee6ba6b8"></a><!-- doxytag: member="spi_at45d.h::nodeSpiAt45d3" ref="ee99253984021ea73f737b75ee6ba6b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTSPINODE <a class="el" href="spi__at45d3_8c.html#ee99253984021ea73f737b75ee6ba6b8">nodeSpiAt45d3</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash SPI node implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d3_8c-source.html#l00072">72</a> of file <a class="el" href="spi__at45d3_8c-source.html">spi_at45d3.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="b929dc523048374fbd5c960ac650a530"></a><!-- doxytag: member="spi_at45d.h::devSpiAt45d3" ref="b929dc523048374fbd5c960ac650a530" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTDEVICE <a class="el" href="spi__at45d3_8c.html#b929dc523048374fbd5c960ac650a530">devSpiAt45d3</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
AT45D DataFlash device implementation structure. 
<p>

<p>Definition at line <a class="el" href="spi__at45d3_8c-source.html#l00101">101</a> of file <a class="el" href="spi__at45d3_8c-source.html">spi_at45d3.c</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
