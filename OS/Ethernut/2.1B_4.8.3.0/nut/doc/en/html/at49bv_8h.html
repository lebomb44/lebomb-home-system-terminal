<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_81006e530ae69d901a01dddafc7fbce4.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_29e0dcc87985a941e12843c236561edc.html">dev</a>
  </div>
<div class="contents">
<h1>at49bv.h File Reference</h1>
<p>
<a href="at49bv_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#c63880253e2192c51356349836bd7bce">At49bvInit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#5b39683acb0f34efed48d5031be10e34">AT49bvReadProtectionRegister</a> (int factory)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read user or factory id from protection register.  <a href="#5b39683acb0f34efed48d5031be10e34"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#3c6978d34ce20c00a85f3faa3867ff2a">At49bvChipErase</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase entire flash memory chip.  <a href="#3c6978d34ce20c00a85f3faa3867ff2a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#243ead0301d1af4db802c993a002771f">At49bvSectorErase</a> (unsigned int off)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase sector at the specified offset.  <a href="#243ead0301d1af4db802c993a002771f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#97ffdcc6578d05c3f547ea1bdc1c63a3">At49bvSectorRead</a> (unsigned int off, void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from flash memory.  <a href="#97ffdcc6578d05c3f547ea1bdc1c63a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#bd54940655c8650bfcaa838bd2577707">At49bvSectorWrite</a> (unsigned int off, CONST void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data into flash memory.  <a href="#bd54940655c8650bfcaa838bd2577707"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#7a1d192aeca94aafd12bdd3d1c01354a">At49bvParamRead</a> (unsigned int pos, void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load configuration parameters from flash memory.  <a href="#7a1d192aeca94aafd12bdd3d1c01354a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at49bv_8h.html#2511e9c522d75d7ae41837cd7d274d7b">At49bvParamWrite</a> (unsigned int pos, CONST void *data, unsigned int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store configuration parameters in flash memory.  <a href="#2511e9c522d75d7ae41837cd7d274d7b"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="c63880253e2192c51356349836bd7bce"></a><!-- doxytag: member="at49bv.h::At49bvInit" ref="c63880253e2192c51356349836bd7bce" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long At49bvInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00164">164</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at49bv_8c-source.html#l00138">FLASH_CMD_ENTER_ID</a>, <a class="el" href="at49bv_8c-source.html#l00139">FLASH_CMD_EXIT_ID</a>, <a class="el" href="at49bv_8c-source.html#l00130">FLASH_COMMAND</a>, and <a class="el" href="at49bv_8c-source.html#l00125">FLASH_UNLOCK</a>.</p>

</div>
</div><p>
<a class="anchor" name="5b39683acb0f34efed48d5031be10e34"></a><!-- doxytag: member="at49bv.h::AT49bvReadProtectionRegister" ref="5b39683acb0f34efed48d5031be10e34" args="(int factory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long AT49bvReadProtectionRegister           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>factory</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read user or factory id from protection register. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>factory</em>&nbsp;</td><td>If true, read factory id, otherwise read user id</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The ID read, 64 bit long! </dd></dl>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00185">185</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at49bv_8c-source.html#l00138">FLASH_CMD_ENTER_ID</a>, <a class="el" href="at49bv_8c-source.html#l00139">FLASH_CMD_EXIT_ID</a>, <a class="el" href="at49bv_8c-source.html#l00130">FLASH_COMMAND</a>, and <a class="el" href="at49bv_8c-source.html#l00125">FLASH_UNLOCK</a>.</p>

</div>
</div><p>
<a class="anchor" name="3c6978d34ce20c00a85f3faa3867ff2a"></a><!-- doxytag: member="at49bv.h::At49bvChipErase" ref="3c6978d34ce20c00a85f3faa3867ff2a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At49bvChipErase           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase entire flash memory chip. 
<p>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00232">232</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00107">FLASH_CHIP_ERASE_WAIT</a>, <a class="el" href="at49bv_8c-source.html#l00134">FLASH_CMD_ERASE</a>, <a class="el" href="at49bv_8c-source.html#l00135">FLASH_CMD_ERASE_CHIP</a>, <a class="el" href="at49bv_8c-source.html#l00130">FLASH_COMMAND</a>, and <a class="el" href="at49bv_8c-source.html#l00125">FLASH_UNLOCK</a>.</p>

</div>
</div><p>
<a class="anchor" name="243ead0301d1af4db802c993a002771f"></a><!-- doxytag: member="at49bv.h::At49bvSectorErase" ref="243ead0301d1af4db802c993a002771f" args="(unsigned int off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At49bvSectorErase           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erase sector at the specified offset. 
<p>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00217">217</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00076">FLASH_CHIP_BASE</a>, <a class="el" href="at49bv_8c-source.html#l00134">FLASH_CMD_ERASE</a>, <a class="el" href="at49bv_8c-source.html#l00136">FLASH_CMD_ERASE_SECTOR</a>, <a class="el" href="at49bv_8c-source.html#l00130">FLASH_COMMAND</a>, <a class="el" href="at91__efc_8c-source.html#l00103">FLASH_ERASE_WAIT</a>, and <a class="el" href="at49bv_8c-source.html#l00125">FLASH_UNLOCK</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00316">At49bvParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="97ffdcc6578d05c3f547ea1bdc1c63a3"></a><!-- doxytag: member="at49bv.h::At49bvSectorRead" ref="97ffdcc6578d05c3f547ea1bdc1c63a3" args="(unsigned int off, void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At49bvSectorRead           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data from flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Start location within the chip, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00251">251</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00076">FLASH_CHIP_BASE</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00302">At49bvParamRead()</a>, and <a class="el" href="at49bv_8c-source.html#l00316">At49bvParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="bd54940655c8650bfcaa838bd2577707"></a><!-- doxytag: member="at49bv.h::At49bvSectorWrite" ref="bd54940655c8650bfcaa838bd2577707" args="(unsigned int off, CONST void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At49bvSectorWrite           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data into flash memory. 
<p>
The related sector must have been erased before calling this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Start location within the chip, starting at 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to write.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00269">269</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at91__efc_8c-source.html#l00076">FLASH_CHIP_BASE</a>, <a class="el" href="at49bv_8c-source.html#l00141">FLASH_CMD_PROGRAM</a>, <a class="el" href="at49bv_8c-source.html#l00130">FLASH_COMMAND</a>, <a class="el" href="at49bv_8c-source.html#l00125">FLASH_UNLOCK</a>, and <a class="el" href="at49bv_8c-source.html#l00110">FLASH_WRITE_POLLS</a>.</p>

<p>Referenced by <a class="el" href="at49bv_8c-source.html#l00316">At49bvParamWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7a1d192aeca94aafd12bdd3d1c01354a"></a><!-- doxytag: member="at49bv.h::At49bvParamRead" ref="7a1d192aeca94aafd12bdd3d1c01354a" args="(unsigned int pos, void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At49bvParamRead           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load configuration parameters from flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that receives the contents. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00302">302</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at49bv_8c-source.html#l00251">At49bvSectorRead()</a>, and <a class="el" href="at91__efc_8c-source.html#l00082">FLASH_CONF_SECTOR</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00105">NutNvMemLoad()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2511e9c522d75d7ae41837cd7d274d7b"></a><!-- doxytag: member="at49bv.h::At49bvParamWrite" ref="2511e9c522d75d7ae41837cd7d274d7b" args="(unsigned int pos, CONST void *data, unsigned int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int At49bvParamWrite           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store configuration parameters in flash memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Start location within configuration sector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Points to a buffer that contains the bytes to store. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to store.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or -1 in case of an error. </dd></dl>

<p>Definition at line <a class="el" href="at49bv_8c-source.html#l00316">316</a> of file <a class="el" href="at49bv_8c-source.html">at49bv.c</a>.</p>

<p>References <a class="el" href="at49bv_8c-source.html#l00217">At49bvSectorErase()</a>, <a class="el" href="at49bv_8c-source.html#l00251">At49bvSectorRead()</a>, <a class="el" href="at49bv_8c-source.html#l00269">At49bvSectorWrite()</a>, <a class="el" href="at91__efc_8c-source.html#l00082">FLASH_CONF_SECTOR</a>, <a class="el" href="at91__efc_8c-source.html#l00095">FLASH_CONF_SIZE</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="memcmp_8c-source.html#l00091">memcmp()</a>, and <a class="el" href="memcpy_8c-source.html#l00114">memcpy()</a>.</p>

<p>Referenced by <a class="el" href="nvmem_8c-source.html#l00136">NutNvMemSave()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
