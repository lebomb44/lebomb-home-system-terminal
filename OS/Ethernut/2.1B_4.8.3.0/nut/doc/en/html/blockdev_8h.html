<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_81006e530ae69d901a01dddafc7fbce4.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_29e0dcc87985a941e12843c236561edc.html">dev</a>
  </div>
<div class="contents">
<h1>blockdev.h File Reference</h1>Block device driver definitions.  
<a href="#_details">More...</a>
<p>

<p>
<a href="blockdev_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_b_l_k_p_a_r___s_e_e_k.html">BLKPAR_SEEK</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block seek parameter structure.  <a href="struct_b_l_k_p_a_r___s_e_e_k.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_b_l_k_p_a_r___i_n_f_o.html">BLKPAR_INFO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Device information parameter structure.  <a href="struct_b_l_k_p_a_r___i_n_f_o.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_u_t_b_l_o_c_k_i_o.html">NUTBLOCKIO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic block I/O device interface structure.  <a href="struct___n_u_t_b_l_o_c_k_i_o.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#8dff5efbfd16eb8e5469cebdb4a48dd7">NutBlockDeviceInit</a> (NUTDEVICE *dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the block I/O device.  <a href="#8dff5efbfd16eb8e5469cebdb4a48dd7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTFILE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#fffc23aaf619cbd701ae56f1f564add7">NutBlockDeviceOpen</a> (NUTDEVICE *dev, CONST char *name, int mode, int acc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mount a volume.  <a href="#fffc23aaf619cbd701ae56f1f564add7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#a2cb41faba478283c8f2d20ecd20f2de">NutBlockDeviceClose</a> (NUTFILE *nfp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unmount a currently mounted volume.  <a href="#a2cb41faba478283c8f2d20ecd20f2de"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#4bf0f1d91269e65455d063c5e202add1">NutBlockDeviceIOCtl</a> (NUTDEVICE *dev, int req, void *conf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform block I/O device control functions.  <a href="#4bf0f1d91269e65455d063c5e202add1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#6d4988c118b95110454bc6e5c0b369bd">NutBlockDeviceRead</a> (NUTFILE *nfp, void *buffer, int num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data blocks from a mounted volume.  <a href="#6d4988c118b95110454bc6e5c0b369bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#06d1a07ba0114de8976c9eb814b448df">NutBlockDeviceWrite</a> (NUTFILE *nfp, CONST void *buffer, int num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data blocks to a mounted volume.  <a href="#06d1a07ba0114de8976c9eb814b448df"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#d65b4cb4433a4cde45dce7cbb8fd3333">NutBlockDeviceSize</a> (NUTFILE *nfp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the size of a mounted volume.  <a href="#d65b4cb4433a4cde45dce7cbb8fd3333"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="blockdev_8h.html#38e4c131ecf1add88ecf497563483ddd">NutBlockDeviceWrite_P</a> (NUTFILE *nfp, PGM_P buffer, int num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write data blocks from program space to a mounted volume.  <a href="#38e4c131ecf1add88ecf497563483ddd"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Control Codes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_block_dev.html#gd5bcfe283715d269e64a3d70fa58c3d3">NUTBLKDEV_MEDIAAVAIL</a>&nbsp;&nbsp;&nbsp;0x1200</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query for media change.  <a href="group__xg_block_dev.html#gd5bcfe283715d269e64a3d70fa58c3d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_block_dev.html#g0021380fd206ad6327ee752d3df8722c">NUTBLKDEV_MEDIACHANGE</a>&nbsp;&nbsp;&nbsp;0x1201</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query for media change.  <a href="group__xg_block_dev.html#g0021380fd206ad6327ee752d3df8722c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_block_dev.html#g4bbfed5ff6ce9e59e382558829f3c8ff">NUTBLKDEV_INFO</a>&nbsp;&nbsp;&nbsp;0x1202</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve device information.  <a href="group__xg_block_dev.html#g4bbfed5ff6ce9e59e382558829f3c8ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_block_dev.html#g2c6a77c523c97bfc14789c8ab369fe58">NUTBLKDEV_SEEK</a>&nbsp;&nbsp;&nbsp;0x1203</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block seek request.  <a href="group__xg_block_dev.html#g2c6a77c523c97bfc14789c8ab369fe58"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Block device driver definitions. 
<p>
<div class="fragment"><pre class="fragment">
 *
 * $Log$
 * Revision 1.4  2009/01/09 17:59:05  haraldkipp
 * Added target independent AT45D block device drivers and non-volatile
 * memory support based on the new bus controllers.
 *
 * Revision 1.3  2008/08/11 06:59:59  haraldkipp
 * BSD types replaced by stdint types (feature request #1282721).
 *
 * Revision 1.2  2006/04/07 12:57:48  haraldkipp
 * Added ioctl(NUTBLKDEV_MEDIAAVAIL).
 *
 * Revision 1.1  2006/01/05 16:32:05  haraldkipp
 * First check-in.
 *
 *
 * </pre></div> 
<p>Definition in file <a class="el" href="blockdev_8h-source.html">blockdev.h</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="8dff5efbfd16eb8e5469cebdb4a48dd7"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceInit" ref="8dff5efbfd16eb8e5469cebdb4a48dd7" args="(NUTDEVICE *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutBlockDeviceInit           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the block I/O device. 
<p>
This dummy routine may be used by drivers, which do not need any specific initialization.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the device.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Always 0. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00131">131</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="fffc23aaf619cbd701ae56f1f564add7"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceOpen" ref="fffc23aaf619cbd701ae56f1f564add7" args="(NUTDEVICE *dev, CONST char *name, int mode, int acc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTFILE* NutBlockDeviceOpen           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>acc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mount a volume. 
<p>
Nut/OS doesn't provide specific routines for mounting. Instead routines for opening files are used.<p>
Applications should not directly call this function, but use the high level stdio routines for opening a file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Specifies the block I/O device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Partition number followed by a slash followed by a name of the file system device. Both items are optional. If no file system driver name is given, the first file system driver found in the list of registered devices will be used. If no partition number is specified or if partition zero is given, the first active primary partition will be used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>Opening mode. Currently ignored, but <div class="fragment"><pre class="fragment"> <a class="code" href="group__xg_crt_lowio.html#g010187fb7398870cb57af650e65bded1">_O_RDWR</a> | <a class="code" href="group__xg_crt_lowio.html#g166a079a4990ddeb0a32475728bbacd0">_O_BINARY</a> 
</pre></div> should be used for compatibility with future enhancements. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>acc</em>&nbsp;</td><td>File attributes, ignored.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to a newly created file pointer to the mounted partition or NUTFILE_EOF in case of any error. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00163">163</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="errno_8h-source.html#l00072">ENODEV</a>, <a class="el" href="errno_8c-source.html#l00042">errno</a>, <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="fs_2fs_8h-source.html#l00123">FS_VOL_MOUNT</a>, <a class="el" href="fs_2fs_8h-source.html#l00153">FSCP_VOL_MOUNT::fscp_bmnt</a>, <a class="el" href="fs_2fs_8h-source.html#l00155">FSCP_VOL_MOUNT::fscp_part_type</a>, <a class="el" href="device_8h-source.html#l00143">IFTYP_FS</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, <a class="el" href="devreg_8c-source.html#l00090">NutDeviceLookup()</a>, and <a class="el" href="file_8h-source.html#l00088">NUTFILE_EOF</a>.</p>

</div>
</div><p>
<a class="anchor" name="a2cb41faba478283c8f2d20ecd20f2de"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceClose" ref="a2cb41faba478283c8f2d20ecd20f2de" args="(NUTFILE *nfp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutBlockDeviceClose           </td>
          <td>(</td>
          <td class="paramtype">NUTFILE *&nbsp;</td>
          <td class="paramname"> <em>nfp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unmount a currently mounted volume. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nfp</em>&nbsp;</td><td>File pointer to a previously mounted volume.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00241">241</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="fs_2fs_8h-source.html#l00124">FS_VOL_UNMOUNT</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="4bf0f1d91269e65455d063c5e202add1"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceIOCtl" ref="4bf0f1d91269e65455d063c5e202add1" args="(NUTDEVICE *dev, int req, void *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutBlockDeviceIOCtl           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>conf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Perform block I/O device control functions. 
<p>
This function is called by the ioctl() function of the C runtime library. Applications should not directly call this function.<p>
Unkown requests are passed to the block I/O device.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>Identifies the device that receives the device-control function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>Requested control function. May be set to one of the following constants:<ul>
<li><a class="el" href="group__xg_block_dev.html#g4bbfed5ff6ce9e59e382558829f3c8ff">NUTBLKDEV_INFO</a>, conf points to a <a class="el" href="struct_b_l_k_p_a_r___i_n_f_o.html">BLKPAR_INFO</a> structure.</li><li><a class="el" href="group__xg_block_dev.html#g2c6a77c523c97bfc14789c8ab369fe58">NUTBLKDEV_SEEK</a>, conf points to a <a class="el" href="struct_b_l_k_p_a_r___s_e_e_k.html">BLKPAR_SEEK</a> structure.</li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Points to a buffer that contains any data required for the given control function or receives data from that function.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00280">280</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, <a class="el" href="blockdev_8h-source.html#l00080">NUTBLKDEV_INFO</a>, <a class="el" href="blockdev_8h-source.html#l00082">NUTBLKDEV_SEEK</a>, <a class="el" href="blockdev_8h-source.html#l00105">BLKPAR_INFO::par_blkbp</a>, <a class="el" href="blockdev_8h-source.html#l00093">BLKPAR_SEEK::par_blknum</a>, <a class="el" href="blockdev_8h-source.html#l00104">BLKPAR_INFO::par_blksz</a>, <a class="el" href="blockdev_8h-source.html#l00103">BLKPAR_INFO::par_nblks</a>, <a class="el" href="blockdev_8h-source.html#l00102">BLKPAR_INFO::par_nfp</a>, and <a class="el" href="blockdev_8h-source.html#l00092">BLKPAR_SEEK::par_nfp</a>.</p>

</div>
</div><p>
<a class="anchor" name="6d4988c118b95110454bc6e5c0b369bd"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceRead" ref="6d4988c118b95110454bc6e5c0b369bd" args="(NUTFILE *nfp, void *buffer, int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutBlockDeviceRead           </td>
          <td>(</td>
          <td class="paramtype">NUTFILE *&nbsp;</td>
          <td class="paramname"> <em>nfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data blocks from a mounted volume. 
<p>
The current position may have been set by a previous I/O control <a class="el" href="group__xg_block_dev.html#g2c6a77c523c97bfc14789c8ab369fe58">NUTBLKDEV_SEEK</a>.<p>
Applications should not call this function directly, but use the stdio interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nfp</em>&nbsp;</td><td>File pointer to a previously mounted volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to the data buffer to fill. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of blocks to read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of blocks actually read. The current position is set to the next unread block. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00348">348</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="06d1a07ba0114de8976c9eb814b448df"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceWrite" ref="06d1a07ba0114de8976c9eb814b448df" args="(NUTFILE *nfp, CONST void *buffer, int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutBlockDeviceWrite           </td>
          <td>(</td>
          <td class="paramtype">NUTFILE *&nbsp;</td>
          <td class="paramname"> <em>nfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data blocks to a mounted volume. 
<p>
The current position may have been set by a previous I/O control <a class="el" href="group__xg_block_dev.html#g2c6a77c523c97bfc14789c8ab369fe58">NUTBLKDEV_SEEK</a>.<p>
Applications should not call this function directly, but use the stdio interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nfp</em>&nbsp;</td><td>File pointer to a previously mounted volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to the data to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of blocks to write.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of blocks actually written. The current position is set to the next block. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00400">400</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="arm_8h-source.html#l00143">CONST</a>, and <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="d65b4cb4433a4cde45dce7cbb8fd3333"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceSize" ref="d65b4cb4433a4cde45dce7cbb8fd3333" args="(NUTFILE *nfp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long NutBlockDeviceSize           </td>
          <td>(</td>
          <td class="paramtype">NUTFILE *&nbsp;</td>
          <td class="paramname"> <em>nfp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the size of a mounted volume. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nfp</em>&nbsp;</td><td>File pointer to a previously mounted volume.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Total number of bytes. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00495">495</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>.</p>

</div>
</div><p>
<a class="anchor" name="38e4c131ecf1add88ecf497563483ddd"></a><!-- doxytag: member="blockdev.h::NutBlockDeviceWrite_P" ref="38e4c131ecf1add88ecf497563483ddd" args="(NUTFILE *nfp, PGM_P buffer, int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutBlockDeviceWrite_P           </td>
          <td>(</td>
          <td class="paramtype">NUTFILE *&nbsp;</td>
          <td class="paramname"> <em>nfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGM_P&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data blocks from program space to a mounted volume. 
<p>
Similar to <a class="el" href="blockdev_8h.html#06d1a07ba0114de8976c9eb814b448df" title="Write data blocks to a mounted volume.">NutBlockDeviceWrite()</a> except that the data is located in program memory.<p>
Applications should not call this function directly, but use the stdio interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nfp</em>&nbsp;</td><td>File pointer to a previously mounted volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Pointer to the data bytes in program space to be written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>Number of blocks to write.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of blocks actually written. The current position is set to the next block. A return value of -1 indicates an error. </dd></dl>

<p>Definition at line <a class="el" href="blockdev_8c-source.html#l00452">452</a> of file <a class="el" href="blockdev_8c-source.html">blockdev.c</a>.</p>

<p>References <a class="el" href="nutdebug_8h-source.html#l00047">NUTASSERT</a>, and <a class="el" href="arm_8h-source.html#l00158">PGM_P</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
