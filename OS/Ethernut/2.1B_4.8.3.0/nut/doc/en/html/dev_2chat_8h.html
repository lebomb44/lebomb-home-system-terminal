<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_81006e530ae69d901a01dddafc7fbce4.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_29e0dcc87985a941e12843c236561edc.html">dev</a>
  </div>
<div class="contents">
<h1>chat.h File Reference</h1>
<p>
<a href="dev_2chat_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#c0e5ff3f5a875c03f6661b07fa3bd789">CHAT_ARG_SEND</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#2808a5c8c29fb8106812d00495226bda">CHAT_ARG_ABORT</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#86570a71a8d15d1f9758a3b68e51fea7">CHAT_ARG_TIMEOUT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#d049c54a37581f33e61976ff142e2bd4">CHAT_ARG_REPORT</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#716d868fe207a77036f45ba673223fe9">CHAT_MAX_ABORTS</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of abort strings.  <a href="#716d868fe207a77036f45ba673223fe9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#ffb677b5adbf8c05dab5518356c3d605">CHAT_MAX_REPORT_SIZE</a>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum size of report strings.  <a href="#ffb677b5adbf8c05dab5518356c3d605"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#edf2e7762a4f812d27adc4a350e25f58">CHAT_DEFAULT_TIMEOUT</a>&nbsp;&nbsp;&nbsp;45</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default timeout.  <a href="#edf2e7762a4f812d27adc4a350e25f58"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#a904081e1ee612dc1f0bc2b872f19ae1">NutTraceChat</a> (<a class="el" href="group__xg_crt_stdio.html#gb940bd570245f248e9464829cd7c8c75">FILE</a> *stream, <a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Control chat tracing.  <a href="#a904081e1ee612dc1f0bc2b872f19ae1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#9d3f3d072d73ab905676c8e5e257f5be">NutChatExpectString</a> (<a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *ci, char *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for a specific string to appear.  <a href="#9d3f3d072d73ab905676c8e5e257f5be"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#651478362c5bb5d1d4682aa189cfd7d1">NutChatExpect</a> (<a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *ci, char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#7d26dca8abac0598c4819f95575f8466">NutChatSend</a> (<a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *ci, char *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a chat send argument.  <a href="#7d26dca8abac0598c4819f95575f8466"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#9fb8e478abd6806964b0b5cb5602335a">NutChatCreate</a> (int fd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure.  <a href="#9fb8e478abd6806964b0b5cb5602335a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#f968a697034eff4a5201656e48da1b03">NutChatDestroy</a> (<a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *ci)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy a previously created <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure.  <a href="#f968a697034eff4a5201656e48da1b03"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#f4857d26bf25c81b1ebe9392bd46d00c">NutChat</a> (int fd, CONST char *script)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute a conversational exchange with a serial device.  <a href="#f4857d26bf25c81b1ebe9392bd46d00c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#b8317f741209bc6889137d695b6c98ef">NutChat_P</a> (int fd, PGM_P script)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute a conversational exchange with a serial device.  <a href="#b8317f741209bc6889137d695b6c98ef"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev_2chat_8h.html#50b8866358673bc9071a33fef4e56514">chat_report</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="c0e5ff3f5a875c03f6661b07fa3bd789"></a><!-- doxytag: member="chat.h::CHAT_ARG_SEND" ref="c0e5ff3f5a875c03f6661b07fa3bd789" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_ARG_SEND&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00079">79</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2808a5c8c29fb8106812d00495226bda"></a><!-- doxytag: member="chat.h::CHAT_ARG_ABORT" ref="2808a5c8c29fb8106812d00495226bda" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_ARG_ABORT&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00080">80</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00357">NutChatExpect()</a>, and <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="86570a71a8d15d1f9758a3b68e51fea7"></a><!-- doxytag: member="chat.h::CHAT_ARG_TIMEOUT" ref="86570a71a8d15d1f9758a3b68e51fea7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_ARG_TIMEOUT&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00081">81</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00357">NutChatExpect()</a>, and <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d049c54a37581f33e61976ff142e2bd4"></a><!-- doxytag: member="chat.h::CHAT_ARG_REPORT" ref="d049c54a37581f33e61976ff142e2bd4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_ARG_REPORT&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00082">82</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00357">NutChatExpect()</a>, and <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="716d868fe207a77036f45ba673223fe9"></a><!-- doxytag: member="chat.h::CHAT_MAX_ABORTS" ref="716d868fe207a77036f45ba673223fe9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_MAX_ABORTS&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum number of abort strings. 
<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00088">88</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ffb677b5adbf8c05dab5518356c3d605"></a><!-- doxytag: member="chat.h::CHAT_MAX_REPORT_SIZE" ref="ffb677b5adbf8c05dab5518356c3d605" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_MAX_REPORT_SIZE&nbsp;&nbsp;&nbsp;32          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum size of report strings. 
<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00095">95</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00131">NutChatExpectString()</a>, and <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="edf2e7762a4f812d27adc4a350e25f58"></a><!-- doxytag: member="chat.h::CHAT_DEFAULT_TIMEOUT" ref="edf2e7762a4f812d27adc4a350e25f58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHAT_DEFAULT_TIMEOUT&nbsp;&nbsp;&nbsp;45          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default timeout. 
<p>

<p>Definition at line <a class="el" href="dev_2chat_8h-source.html#l00102">102</a> of file <a class="el" href="dev_2chat_8h-source.html">chat.h</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a904081e1ee612dc1f0bc2b872f19ae1"></a><!-- doxytag: member="chat.h::NutTraceChat" ref="a904081e1ee612dc1f0bc2b872f19ae1" args="(FILE *stream, uint8_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutTraceChat           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_crt_stdio.html#gb940bd570245f248e9464829cd7c8c75">FILE</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Control chat tracing. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>Pointer to a previously opened stream or null to disable trace output. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Flags to enable specific traces. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00089">89</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="h8_8h-source.html#l00077">fprintf_P</a>, and <a class="el" href="arm_8h-source.html#l00157">prog_char</a>.</p>

</div>
</div><p>
<a class="anchor" name="9d3f3d072d73ab905676c8e5e257f5be"></a><!-- doxytag: member="chat.h::NutChatExpectString" ref="9d3f3d072d73ab905676c8e5e257f5be" args="(NUTCHAT *ci, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutChatExpectString           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *&nbsp;</td>
          <td class="paramname"> <em>ci</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for a specific string to appear. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ci</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure, which must have been created by <a class="el" href="dev_2chat_8h.html#9fb8e478abd6806964b0b5cb5602335a" title="Create a NUTCHAT structure.">NutChatCreate()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>Expected string. May be empty if nothing is expected.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 3 in case of a timeout error while waiting for an expected string, or the index of an abort string plus 4, if one has been received. </dd></dl>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00131">131</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="io_8h.html#a7278892ff16de3dd3d00ff4a89d11e4">_read()</a>, <a class="el" href="dev_2chat_8h-source.html#l00110">NUTCHAT::chat_abomat</a>, <a class="el" href="dev_2chat_8h-source.html#l00109">NUTCHAT::chat_abort</a>, <a class="el" href="dev_2chat_8h-source.html#l00108">NUTCHAT::chat_aborts</a>, <a class="el" href="dev_2chat_8h-source.html#l00106">NUTCHAT::chat_fd</a>, <a class="el" href="dev_2chat_8h-source.html#l00095">CHAT_MAX_REPORT_SIZE</a>, <a class="el" href="dev_2chat_8h-source.html#l00112">NUTCHAT::chat_repmat</a>, <a class="el" href="chat_8c-source.html#l00075">chat_report</a>, <a class="el" href="dev_2chat_8h-source.html#l00111">NUTCHAT::chat_report_search</a>, <a class="el" href="dev_2chat_8h-source.html#l00113">NUTCHAT::chat_report_state</a>, <a class="el" href="fprintf_8c-source.html#l00068">fprintf()</a>, <a class="el" href="h8_8h-source.html#l00077">fprintf_P</a>, <a class="el" href="fputc_8c-source.html#l00069">fputc()</a>, <a class="el" href="h8_8h-source.html#l00076">fputs_P</a>, and <a class="el" href="arm_8h-source.html#l00157">prog_char</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00357">NutChatExpect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="651478362c5bb5d1d4682aa189cfd7d1"></a><!-- doxytag: member="chat.h::NutChatExpect" ref="651478362c5bb5d1d4682aa189cfd7d1" args="(NUTCHAT *ci, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutChatExpect           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *&nbsp;</td>
          <td class="paramname"> <em>ci</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00357">357</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="dev_2chat_8h-source.html#l00107">NUTCHAT::chat_arg</a>, <a class="el" href="dev_2chat_8h-source.html#l00080">CHAT_ARG_ABORT</a>, <a class="el" href="dev_2chat_8h-source.html#l00082">CHAT_ARG_REPORT</a>, <a class="el" href="dev_2chat_8h-source.html#l00081">CHAT_ARG_TIMEOUT</a>, <a class="el" href="dev_2chat_8h-source.html#l00106">NUTCHAT::chat_fd</a>, <a class="el" href="dev_2chat_8h-source.html#l00112">NUTCHAT::chat_repmat</a>, <a class="el" href="dev_2chat_8h-source.html#l00113">NUTCHAT::chat_report_state</a>, <a class="el" href="chat_8c-source.html#l00131">NutChatExpectString()</a>, and <a class="el" href="strcmp_8c-source.html#l00091">strcmp()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7d26dca8abac0598c4819f95575f8466"></a><!-- doxytag: member="chat.h::NutChatSend" ref="7d26dca8abac0598c4819f95575f8466" args="(NUTCHAT *ci, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutChatSend           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *&nbsp;</td>
          <td class="paramname"> <em>ci</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process a chat send argument. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ci</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure, which must have been created by <a class="el" href="dev_2chat_8h.html#9fb8e478abd6806964b0b5cb5602335a" title="Create a NUTCHAT structure.">NutChatCreate()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>String containing the chat send argument.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 1 in case of invalid parameters, 2 in case of an I/O error, 3 in case of a timeout error while waiting for an expected string, or the index of an abort string plus 4, if one has been received. </dd></dl>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00413">413</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="ioctl_8c-source.html#l00080">_ioctl()</a>, <a class="el" href="atol_8c-source.html#l00091">atol()</a>, <a class="el" href="dev_2chat_8h-source.html#l00109">NUTCHAT::chat_abort</a>, <a class="el" href="dev_2chat_8h-source.html#l00108">NUTCHAT::chat_aborts</a>, <a class="el" href="dev_2chat_8h-source.html#l00107">NUTCHAT::chat_arg</a>, <a class="el" href="dev_2chat_8h-source.html#l00080">CHAT_ARG_ABORT</a>, <a class="el" href="dev_2chat_8h-source.html#l00082">CHAT_ARG_REPORT</a>, <a class="el" href="dev_2chat_8h-source.html#l00079">CHAT_ARG_SEND</a>, <a class="el" href="dev_2chat_8h-source.html#l00081">CHAT_ARG_TIMEOUT</a>, <a class="el" href="dev_2chat_8h-source.html#l00102">CHAT_DEFAULT_TIMEOUT</a>, <a class="el" href="dev_2chat_8h-source.html#l00106">NUTCHAT::chat_fd</a>, <a class="el" href="dev_2chat_8h-source.html#l00088">CHAT_MAX_ABORTS</a>, <a class="el" href="dev_2chat_8h-source.html#l00095">CHAT_MAX_REPORT_SIZE</a>, <a class="el" href="chat_8c-source.html#l00075">chat_report</a>, <a class="el" href="dev_2chat_8h-source.html#l00111">NUTCHAT::chat_report_search</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="strlen_8c-source.html#l00087">strlen()</a>, and <a class="el" href="dev_2uart_8h-source.html#l00175">UART_SETREADTIMEOUT</a>.</p>

</div>
</div><p>
<a class="anchor" name="9fb8e478abd6806964b0b5cb5602335a"></a><!-- doxytag: member="chat.h::NutChatCreate" ref="9fb8e478abd6806964b0b5cb5602335a" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a>* NutChatCreate           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to a new <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure. </dd></dl>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00516">516</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="dev_2chat_8h-source.html#l00106">NUTCHAT::chat_fd</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, and <a class="el" href="memset_8c-source.html#l00088">memset()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f968a697034eff4a5201656e48da1b03"></a><!-- doxytag: member="chat.h::NutChatDestroy" ref="f968a697034eff4a5201656e48da1b03" args="(NUTCHAT *ci)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NutChatDestroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> *&nbsp;</td>
          <td class="paramname"> <em>ci</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a previously created <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ci</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_n_u_t_c_h_a_t.html">NUTCHAT</a> structure, which must have been created by <a class="el" href="dev_2chat_8h.html#9fb8e478abd6806964b0b5cb5602335a" title="Create a NUTCHAT structure.">NutChatCreate()</a>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00533">533</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="dev_2chat_8h-source.html#l00109">NUTCHAT::chat_abort</a>, <a class="el" href="dev_2chat_8h-source.html#l00108">NUTCHAT::chat_aborts</a>, and <a class="el" href="icc_8h-source.html#l00145">free</a>.</p>

</div>
</div><p>
<a class="anchor" name="f4857d26bf25c81b1ebe9392bd46d00c"></a><!-- doxytag: member="chat.h::NutChat" ref="f4857d26bf25c81b1ebe9392bd46d00c" args="(int fd, CONST char *script)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutChat           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONST char *&nbsp;</td>
          <td class="paramname"> <em>script</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute a conversational exchange with a serial device. 
<p>
Its primary purpose is to establish a modem connection.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>Descriptor of a previously opened device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>script</em>&nbsp;</td><td>Pointer to a string containing the chat script.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 1 in case of invalid parameters, 2 in case of an I/O error, 3 in case of a timeout error while waiting for an expected string, or the index of an abort string plus 4, if one has been received. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="pppc_2pppc_8c-example.html#a56">pppc/pppc.c</a>.</dl>
<p>Definition at line <a class="el" href="chat_8c-source.html#l00662">662</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00145">free</a>, and <a class="el" href="c_2string_2strdup_8c-source.html#l00089">strdup()</a>.</p>

<p>Referenced by <a class="el" href="pppc_8c-source.html#l00312">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b8317f741209bc6889137d695b6c98ef"></a><!-- doxytag: member="chat.h::NutChat_P" ref="b8317f741209bc6889137d695b6c98ef" args="(int fd, PGM_P script)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NutChat_P           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGM_P&nbsp;</td>
          <td class="paramname"> <em>script</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute a conversational exchange with a serial device. 
<p>
Similar to <a class="el" href="dev_2chat_8h.html#f4857d26bf25c81b1ebe9392bd46d00c" title="Execute a conversational exchange with a serial device.">NutChat()</a> except that the chat string is located in program memory.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 1 in case of invalid parameters, 2 in case of an I/O error, 3 in case of a timeout error while waiting for an expected string, or the index of an abort string plus 4, if one has been received. </dd></dl>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00689">689</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>References <a class="el" href="icc_8h-source.html#l00145">free</a>, <a class="el" href="icc_8h-source.html#l00142">malloc</a>, <a class="el" href="arm_8h-source.html#l00168">strcpy_P</a>, and <a class="el" href="arm_8h-source.html#l00167">strlen_P</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="50b8866358673bc9071a33fef4e56514"></a><!-- doxytag: member="chat.h::chat_report" ref="50b8866358673bc9071a33fef4e56514" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>* <a class="el" href="chat_8c.html#50b8866358673bc9071a33fef4e56514">chat_report</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="chat_8c-source.html#l00075">75</a> of file <a class="el" href="chat_8c-source.html">chat.c</a>.</p>

<p>Referenced by <a class="el" href="chat_8c-source.html#l00131">NutChatExpectString()</a>, and <a class="el" href="chat_8c-source.html#l00413">NutChatSend()</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
