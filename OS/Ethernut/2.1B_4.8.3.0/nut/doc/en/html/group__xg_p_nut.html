<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>Peanut File System<br>
<small>
[<a class="el" href="group__xg_file_system.html">File System API.</a>]</small>
</h1>Volatile RAM file system.  
<a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Collaboration diagram for Peanut File System:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__xg_p_nut.png" border="0" alt="" usemap="#group____xg__p__nut_map">
<map name="group____xg__p__nut_map">
<area shape="rect" href="group__xg_file_system.html" title="File System API." alt="File System API." coords="19,5,128,26"></map></td></tr></table></center>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gd2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#ge9cc3f70052dd31a2e9eb7ef5ccba0b8">NODETYPE_REG</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gc4183a62d414b9d45cfb2753acf68345">NODETYPE_DIR</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g5c33ceb9dfe33aa33dc7c0cb741ad679">PNUT_MAX_NAMELEN</a>&nbsp;&nbsp;&nbsp;(PNUT_DIRENT_SIZE - sizeof(<a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a>) - sizeof(<a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) - 1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum length of a base name.  <a href="#g5c33ceb9dfe33aa33dc7c0cb741ad679"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g5a13a0b0b8f7b78b710c9f156625e31c">PNUT_MAX_FILESIZE</a>&nbsp;&nbsp;&nbsp;(PNUT_BLOCKS_PER_NODE * PNUT_BLOCK_SIZE)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum size of a file or directory.  <a href="#g5a13a0b0b8f7b78b710c9f156625e31c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g26a2c011ea6632c117da727631f11a1f">NUTBANK_SIZE</a>&nbsp;&nbsp;&nbsp;16384</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of each memory bank.  <a href="#g26a2c011ea6632c117da727631f11a1f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g7ca418ff25e56062efc19694a920aef8">PNUT_TOTAL_BLOCKS</a>&nbsp;&nbsp;&nbsp;(PNUTBANK_COUNT * (NUTBANK_SIZE / PNUT_BLOCK_SIZE))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Total number of blocks on this device.  <a href="#g7ca418ff25e56062efc19694a920aef8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g55570d30e39bb5d1ef421dab4a326dd8">BLOCKS_PER_BANK</a>&nbsp;&nbsp;&nbsp;(NUTBANK_SIZE / PNUT_BLOCK_SIZE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g14bf50b6797af8fb3bda12c9aef80887">NUTBANK_SR</a>&nbsp;&nbsp;&nbsp;0xFF00</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g500d68a36132539458d98c8966ec3b18">NUTBANK_START</a>&nbsp;&nbsp;&nbsp;0x8000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g93247ae4ecd231b533806d35307e68a8">NUTBANK_PTR</a>&nbsp;&nbsp;&nbsp;((char *)NUTBANK_START)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gcabe6f787aea232ef3b91b8151c743ee">BankSelect</a> (<a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a> blk)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make the bank visible, which contains the specified block.  <a href="#gcabe6f787aea232ef3b91b8151c743ee"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PNUT_NODE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g5f3fdbd70697b26f533c03712c9e7f28">BankNodePointer</a> (<a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a> blk)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select specified bank and return pointer to block.  <a href="#g5f3fdbd70697b26f533c03712c9e7f28"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g4f8f4eb4ba13ea50c4c9f636980e1584">PnutIOCtl</a> (NUTDEVICE *dev, int req, void *conf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Device specific functions.  <a href="#g4f8f4eb4ba13ea50c4c9f636980e1584"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NUTDEVICE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gca108170da851cf5f834b85bb066cbaa">devPnut</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Peanut device information structure.  <a href="#gca108170da851cf5f834b85bb066cbaa"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Peanut File System Configuration</h2></td></tr>
<tr><td colspan="2">The Nut/OS Configurator may be used to override the default values. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gfe7b66c5d4d005c0eb561138db5f58c7">PNUT_BLOCK_SIZE</a>&nbsp;&nbsp;&nbsp;512</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of a filesystem block.  <a href="#gfe7b66c5d4d005c0eb561138db5f58c7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#ge2da73bc0e5b28eb88d65afb7e9d358d">PNUT_DIRENT_SIZE</a>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of a directory entry.  <a href="#ge2da73bc0e5b28eb88d65afb7e9d358d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#gd35267ab23b76e3ab82648bf23580256">PNUT_BLOCKS_PER_NODE</a>&nbsp;&nbsp;&nbsp;250</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of blocks per node.  <a href="#gd35267ab23b76e3ab82648bf23580256"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xg_p_nut.html#g4293e35138194851cce8bef591a894ad">PNUTBANK_COUNT</a>&nbsp;&nbsp;&nbsp;30</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Volatile RAM file system. <hr><h2>Define Documentation</h2>
<a class="anchor" name="gfe7b66c5d4d005c0eb561138db5f58c7"></a><!-- doxytag: member="pnutfs.c::PNUT_BLOCK_SIZE" ref="gfe7b66c5d4d005c0eb561138db5f58c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUT_BLOCK_SIZE&nbsp;&nbsp;&nbsp;512          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of a filesystem block. 
<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00129">129</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

<p>Referenced by <a class="el" href="pnutfs_8c-source.html#l00367">BankNodePointer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge2da73bc0e5b28eb88d65afb7e9d358d"></a><!-- doxytag: member="pnutfs.c::PNUT_DIRENT_SIZE" ref="ge2da73bc0e5b28eb88d65afb7e9d358d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUT_DIRENT_SIZE&nbsp;&nbsp;&nbsp;32          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of a directory entry. 
<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00139">139</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd35267ab23b76e3ab82648bf23580256"></a><!-- doxytag: member="pnutfs.c::PNUT_BLOCKS_PER_NODE" ref="gd35267ab23b76e3ab82648bf23580256" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUT_BLOCKS_PER_NODE&nbsp;&nbsp;&nbsp;250          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum number of blocks per node. 
<p>
Peanut supports only one node per file. Thus, this number multiplied by PNUT_BLOCK_SIZE specifies the maximum file size.<p>
Changings this number will change the size of the node structure, which must fit into a single filesystem block. 
<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00155">155</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4293e35138194851cce8bef591a894ad"></a><!-- doxytag: member="pnutfs.c::PNUTBANK_COUNT" ref="g4293e35138194851cce8bef591a894ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUTBANK_COUNT&nbsp;&nbsp;&nbsp;30          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00168">168</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0d112bae8fd35be772185b6ec6bcbe64"></a><!-- doxytag: member="pnutfs.c::SEEK_SET" ref="g0d112bae8fd35be772185b6ec6bcbe64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEEK_SET&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00176">176</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4c8d0b76b470ba65a43ca46a88320f39"></a><!-- doxytag: member="pnutfs.c::SEEK_CUR" ref="g4c8d0b76b470ba65a43ca46a88320f39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEEK_CUR&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00177">177</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd2a2e6c114780c3071efd24f16c7f7d8"></a><!-- doxytag: member="pnutfs.c::SEEK_END" ref="gd2a2e6c114780c3071efd24f16c7f7d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEEK_END&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00178">178</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge9cc3f70052dd31a2e9eb7ef5ccba0b8"></a><!-- doxytag: member="pnutfs.c::NODETYPE_REG" ref="ge9cc3f70052dd31a2e9eb7ef5ccba0b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODETYPE_REG&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00181">181</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc4183a62d414b9d45cfb2753acf68345"></a><!-- doxytag: member="pnutfs.c::NODETYPE_DIR" ref="gc4183a62d414b9d45cfb2753acf68345" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODETYPE_DIR&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00182">182</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5c33ceb9dfe33aa33dc7c0cb741ad679"></a><!-- doxytag: member="pnutfs.c::PNUT_MAX_NAMELEN" ref="g5c33ceb9dfe33aa33dc7c0cb741ad679" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUT_MAX_NAMELEN&nbsp;&nbsp;&nbsp;(PNUT_DIRENT_SIZE - sizeof(<a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a>) - sizeof(<a class="el" href="group__xg_crt_string.html#gba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) - 1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum length of a base name. 
<p>
This is a calculated value and depends on the definition of the block size and the size of a directory entry. 
<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00230">230</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5a13a0b0b8f7b78b710c9f156625e31c"></a><!-- doxytag: member="pnutfs.c::PNUT_MAX_FILESIZE" ref="g5a13a0b0b8f7b78b710c9f156625e31c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUT_MAX_FILESIZE&nbsp;&nbsp;&nbsp;(PNUT_BLOCKS_PER_NODE * PNUT_BLOCK_SIZE)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum size of a file or directory. 
<p>
This is a calculated value and depends on the definition of the block size and the number of blocks per directory entry. 
<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00267">267</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g26a2c011ea6632c117da727631f11a1f"></a><!-- doxytag: member="pnutfs.c::NUTBANK_SIZE" ref="g26a2c011ea6632c117da727631f11a1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUTBANK_SIZE&nbsp;&nbsp;&nbsp;16384          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of each memory bank. 
<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00312">312</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7ca418ff25e56062efc19694a920aef8"></a><!-- doxytag: member="pnutfs.c::PNUT_TOTAL_BLOCKS" ref="g7ca418ff25e56062efc19694a920aef8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNUT_TOTAL_BLOCKS&nbsp;&nbsp;&nbsp;(PNUTBANK_COUNT * (NUTBANK_SIZE / PNUT_BLOCK_SIZE))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Total number of blocks on this device. 
<p>
This value is calulated by multiplying the number of memory banks reserved for the file system by the number of blocks per bank.<p>
For example, if all 30 banks, which are available on Ethernut 2, are reserved for PNUT and if the size of a block is 512 bytes, then 960 blocks are available. 
<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00326">326</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g55570d30e39bb5d1ef421dab4a326dd8"></a><!-- doxytag: member="pnutfs.c::BLOCKS_PER_BANK" ref="g55570d30e39bb5d1ef421dab4a326dd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCKS_PER_BANK&nbsp;&nbsp;&nbsp;(NUTBANK_SIZE / PNUT_BLOCK_SIZE)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00329">329</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

<p>Referenced by <a class="el" href="pnutfs_8c-source.html#l00367">BankNodePointer()</a>, and <a class="el" href="pnutfs_8c-source.html#l00352">BankSelect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g14bf50b6797af8fb3bda12c9aef80887"></a><!-- doxytag: member="pnutfs.c::NUTBANK_SR" ref="g14bf50b6797af8fb3bda12c9aef80887" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUTBANK_SR&nbsp;&nbsp;&nbsp;0xFF00          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00332">332</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g500d68a36132539458d98c8966ec3b18"></a><!-- doxytag: member="pnutfs.c::NUTBANK_START" ref="g500d68a36132539458d98c8966ec3b18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUTBANK_START&nbsp;&nbsp;&nbsp;0x8000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00336">336</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g93247ae4ecd231b533806d35307e68a8"></a><!-- doxytag: member="pnutfs.c::NUTBANK_PTR" ref="g93247ae4ecd231b533806d35307e68a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUTBANK_PTR&nbsp;&nbsp;&nbsp;((char *)NUTBANK_START)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00339">339</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

<p>Referenced by <a class="el" href="pnutfs_8c-source.html#l00367">BankNodePointer()</a>.</p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gb1df3a55e86e5ea88e4db13d08662ad4"></a><!-- doxytag: member="pnutfs.c::PNUT_BLKNUM" ref="gb1df3a55e86e5ea88e4db13d08662ad4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef short <a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00185">185</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gcabe6f787aea232ef3b91b8151c743ee"></a><!-- doxytag: member="pnutfs.c::BankSelect" ref="gcabe6f787aea232ef3b91b8151c743ee" args="(PNUT_BLKNUM blk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BankSelect           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a>&nbsp;</td>
          <td class="paramname"> <em>blk</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Make the bank visible, which contains the specified block. 
<p>
On Ethernut 2 we select a bank by writing the bank number to the bank register base address plus the bank number.<p>
For example, writing 0x12 to 0xFF12 selects bank 18 (0x12), assuming that 0xFF00 is the bank register base address.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>blk</em>&nbsp;</td><td>Block number to access. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00352">352</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

<p>References <a class="el" href="pnutfs_8c-source.html#l00329">BLOCKS_PER_BANK</a>, and <a class="el" href="sys_2bankmem_8h-source.html#l00103">NutSegBufEnable</a>.</p>

<p>Referenced by <a class="el" href="pnutfs_8c-source.html#l00367">BankNodePointer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5f3fdbd70697b26f533c03712c9e7f28"></a><!-- doxytag: member="pnutfs.c::BankNodePointer" ref="g5f3fdbd70697b26f533c03712c9e7f28" args="(PNUT_BLKNUM blk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PNUT_NODE* BankNodePointer           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xg_p_nut.html#gb1df3a55e86e5ea88e4db13d08662ad4">PNUT_BLKNUM</a>&nbsp;</td>
          <td class="paramname"> <em>blk</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Select specified bank and return pointer to block. 
<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l00367">367</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

<p>References <a class="el" href="pnutfs_8c-source.html#l00352">BankSelect()</a>, <a class="el" href="pnutfs_8c-source.html#l00329">BLOCKS_PER_BANK</a>, <a class="el" href="pnutfs_8c-source.html#l00339">NUTBANK_PTR</a>, and <a class="el" href="pnutfs_8c-source.html#l00129">PNUT_BLOCK_SIZE</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4f8f4eb4ba13ea50c4c9f636980e1584"></a><!-- doxytag: member="pnutfs.c::PnutIOCtl" ref="g4f8f4eb4ba13ea50c4c9f636980e1584" args="(NUTDEVICE *dev, int req, void *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PnutIOCtl           </td>
          <td>(</td>
          <td class="paramtype">NUTDEVICE *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>conf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Device specific functions. 
<p>

<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l01268">1268</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

<p>References <a class="el" href="fs_2fs_8h-source.html#l00099">FS_DIR_CLOSE</a>, <a class="el" href="fs_2fs_8h-source.html#l00084">FS_DIR_CREATE</a>, <a class="el" href="fs_2fs_8h-source.html#l00094">FS_DIR_OPEN</a>, <a class="el" href="fs_2fs_8h-source.html#l00104">FS_DIR_READ</a>, <a class="el" href="fs_2fs_8h-source.html#l00089">FS_DIR_REMOVE</a>, <a class="el" href="fs_2fs_8h-source.html#l00114">FS_FILE_DELETE</a>, <a class="el" href="fs_2fs_8h-source.html#l00119">FS_FILE_SEEK</a>, <a class="el" href="fs_2fs_8h-source.html#l00109">FS_FILE_STATUS</a>, <a class="el" href="fs_2fs_8h-source.html#l00079">FS_STATUS</a>, <a class="el" href="fs_2fs_8h-source.html#l00164">FSCP_STATUS::par_path</a>, and <a class="el" href="fs_2fs_8h-source.html#l00165">FSCP_STATUS::par_stp</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="gca108170da851cf5f834b85bb066cbaa"></a><!-- doxytag: member="pnutfs.c::devPnut" ref="gca108170da851cf5f834b85bb066cbaa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NUTDEVICE <a class="el" href="group__xg_p_nut.html#gca108170da851cf5f834b85bb066cbaa">devPnut</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    0,                          
    {<span class="charliteral">'P'</span>, <span class="charliteral">'N'</span>, <span class="charliteral">'U'</span>, <span class="charliteral">'T'</span>, 0, 0, 0, 0, 0}
    ,                           
    <a class="code" href="group__xg_device.html#gdaf0becb8e956d286be219588232f118" title="RAM device.">IFTYP_RAM</a>,                  
    0,                          
    0,                          
    0,                          
    0,                          
    PnutInit,                   
    <a class="code" href="group__xg_p_nut.html#g4f8f4eb4ba13ea50c4c9f636980e1584" title="Device specific functions.">PnutIOCtl</a>,                  
    PnutFileRead,               
    PnutFileWrite,              

    PnutFileWrite_P,            

    PnutFileOpen,               
    PnutFileClose,              
    PnutFileSize                
}
</pre></div>Peanut device information structure. 
<p>
$Log$ Revision 1.1 2005/02/05 20:37:17 haraldkipp Peanut added 
<p>Definition at line <a class="el" href="pnutfs_8c-source.html#l01369">1369</a> of file <a class="el" href="pnutfs_8c-source.html">pnutfs.c</a>.</p>

</div>
</div><p>
</div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
