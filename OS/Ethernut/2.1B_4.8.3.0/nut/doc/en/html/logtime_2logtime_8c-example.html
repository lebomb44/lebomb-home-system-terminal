<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Nut/OS API</title>
    <link href="nut_en.css" rel="stylesheet" type="text/css">
    <link href="nut_entabs.css" rel="stylesheet" type="text/css">
</head>
<body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>logtime/logtime.c</h1>Copyright (C) 2001-2005 by egnite Software GmbH. All rights reserved.<p>
Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:<p>
1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. 3. Neither the name of the copyright holders nor the names of contributors may be used to endorse or promote products derived from this software without specific prior written permission.<p>
THIS SOFTWARE IS PROVIDED BY EGNITE SOFTWARE GMBH AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL EGNITE SOFTWARE GMBH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.<p>
For additional information see <a href="http://www.ethernut.de/">http://www.ethernut.de/</a><p>
$Log$ Revision 1.3 2008/01/31 09:38:15 haraldkipp Added return statement in main to avoid warnings with latest GCC.<p>
Revision 1.2 2005/11/22 09:14:13 haraldkipp Replaced specific device names by generalized macros.<p>
Revision 1.1 2004/09/19 11:23:12 haraldkipp Syslog/SNTP application added<p>
Shows how to use syslog and SNTP.<p>
<div class="fragment"><pre class="fragment">
<span class="preprocessor">#include &lt;<a class="code" href="stdio_8h.html" title="C Standard I/O.">stdio.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">io.h</a>&gt;</span>

<span class="preprocessor">#include &lt;<a class="code" href="inet_8h.html" title="Internet address conversion.">arpa/inet.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="route_8h.html" title="Routing information definitions.">net/route.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="pro_2dhcp_8h.html" title="DHCP protocol definitions.">pro/dhcp.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="pro_2sntp_8h.html">pro/sntp.h</a>&gt;</span>

<span class="preprocessor">#include &lt;<a class="code" href="version_8h.html">sys/version.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="confnet_8h.html" title="Header file for network configuration.">sys/confnet.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="sys_2timer_8h.html" title="Timer management definitions.">sys/timer.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="heap_8h.html" title="Heap management definitions.">sys/heap.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="sys_2syslog_8h.html">sys/syslog.h</a>&gt;</span>

<span class="preprocessor">#include &lt;<a class="code" href="board_8h.html">dev/board.h</a>&gt;</span>

<span class="keyword">static</span> <span class="keywordtype">char</span> *version = <span class="stringliteral">"1.0.1"</span>;

<span class="comment">/*</span>
<span class="comment"> * User configuration.</span>
<span class="comment"> */</span>

<span class="preprocessor">#define MYMAC   0x00, 0x06, 0x98, 0x00, 0x00, 0x00</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYIP    "192.168.192.100"</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYMASK  "255.255.255.0"</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYGATE  "192.168.192.1"</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYLOGD  "192.168.192.222"</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYTIMED "130.149.17.21"</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYUART  "uart0"</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYBAUD  115200</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYDEV   DEV_UART</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define MYTZ    -1</span>
<span class="preprocessor"></span>

<span class="preprocessor">#ifdef __IMAGECRAFT__</span>
<span class="preprocessor"></span><span class="preprocessor">#define COMPILERNAME "ICCAVR"</span>
<span class="preprocessor"></span><span class="preprocessor">#else</span>
<span class="preprocessor"></span><span class="preprocessor">#define COMPILERNAME "GCC"</span>
<span class="preprocessor"></span><span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="comment">/* Result codes. */</span>
<span class="preprocessor">#define UART_OK     0x0001</span>
<span class="preprocessor"></span><span class="preprocessor">#define STDOUT_OK   0x0002</span>
<span class="preprocessor"></span><span class="preprocessor">#define STDERR_OK   0x0004</span>
<span class="preprocessor"></span><span class="preprocessor">#define BAUDRATE_OK 0x0008</span>
<span class="preprocessor"></span><span class="preprocessor">#define LANDEV_OK   0x0010</span>
<span class="preprocessor"></span><span class="preprocessor">#define NETIF_OK    0x0020</span>
<span class="preprocessor"></span><span class="preprocessor">#define NETROUTE_OK 0x0040</span>
<span class="preprocessor"></span><span class="preprocessor">#define TIMED_OK    0x0080</span>
<span class="preprocessor"></span>
<span class="comment">/*</span>
<span class="comment"> * Application entry.</span>
<span class="comment"> */</span>
<span class="keywordtype">int</span> <a name="a0"></a><a class="code" href="arm_8h.html#a4e97f3782107649d3e4eb3875090b3a">main</a>(<span class="keywordtype">void</span>)
{
    <a name="a1"></a><a class="code" href="group__xg_nut_o_s.html#g8f25a50daf29ce2cee1ec038a4d744ea" title="Unsigned 32-bit value.">u_long</a> baud = <a name="a2"></a><a class="code" href="logtime_8c.html#920640ecb20b8bbaedc841e6e2fb151e" title="UART baudrate.">MYBAUD</a>;
    <a name="a3"></a><a class="code" href="group__xg_nut_o_s.html#ge2b02ed168fc99cff3851603910b1fb6" title="Unsigned 8-bit value.">u_char</a> mac[6] = { <a name="a4"></a><a class="code" href="logtime_8c.html#ccc4044515717578d28f67caace38fe0" title="Default MAC. Used if EEPROM is empty.">MYMAC</a> };
    <a class="code" href="group__xg_nut_o_s.html#g8f25a50daf29ce2cee1ec038a4d744ea" title="Unsigned 32-bit value.">u_long</a> timeserver = <a name="a5"></a><a class="code" href="group__xg_i_p.html#gdbce564458332a83ab871b91a54269dd" title="Convert decimal dotted ASCII representation into numeric IP address.">inet_addr</a>(<a name="a6"></a><a class="code" href="ftpserv_8c.html#d17354034d3690ec4cf495da58a92161" title="IP address of the host running a time daemon.">MYTIMED</a>);
    <span class="keywordtype">int</span> rc = 0;
    <a name="a7"></a><a class="code" href="group__xg_crt_time.html#ge33b844d9ee195d9df95b93b5fb312c5" title="Serial date/time. Holds number of seconds after January 1st, 1970.">time_t</a> now;

    <span class="comment">/*</span>
<span class="comment">     * Register UART devices, assign stdout and stderr to this device</span>
<span class="comment">     * and set the baudrate.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span>(<a name="a8"></a><a class="code" href="group__xg_device.html#g0d73e3153bf9f210194bd862d9b91c61" title="Register and initialize a device.">NutRegisterDevice</a>(&amp;<a name="a9"></a><a class="code" href="logtime_8c.html#28880b858781ebf6dbe0866f4ecc13e2" title="Output device.">MYDEV</a>, 0, 0) == 0) {
        rc |= <a name="a10"></a><a class="code" href="logtime_8c.html#863b8337279a122c4c90dfcefeb4f6ed">UART_OK</a>;
        <span class="keywordflow">if</span>(<a name="a11"></a><a class="code" href="group__xg_crt_stdio.html#g76767cc4b7500920d83e53caad264189" title="Reassign a stream.">freopen</a>(<a name="a12"></a><a class="code" href="logtime_8c.html#e645b693ed30a9decb478a8f7d812060" title="Device name used for UART output.">MYUART</a>, <span class="stringliteral">"w"</span>, <a name="a13"></a><a class="code" href="group__xg_crt_stdio.html#g0c0ef221f95f64e8632451312fd18cc8" title="Standard output stream.">stdout</a>)) {
            rc |= <a name="a14"></a><a class="code" href="logtime_8c.html#f740e8c411a2270d20a225250b4c9102">STDOUT_OK</a>;
            <span class="keywordflow">if</span>(<a name="a15"></a><a class="code" href="group__xg_crt_lowio.html#g6b356746f1f26fb46f2afe4357ab3534" title="Perform device specific control functions.">_ioctl</a>(<a name="a16"></a><a class="code" href="group__xg_crt_stdio.html#gb5ec3b6c064aca1b990c342a82e64aae" title="Get the file descriptor associated with a stream.">_fileno</a>(<a class="code" href="group__xg_crt_stdio.html#g0c0ef221f95f64e8632451312fd18cc8" title="Standard output stream.">stdout</a>), <a name="a17"></a><a class="code" href="group__xg_u_a_r_t_i_o_c_t_l.html#g2f1b5053775ad3be83ae499273a04de8" title="UART _ioctl() command code to set the line speed.">UART_SETSPEED</a>, &amp;baud) == 0) {
                rc |= <a name="a18"></a><a class="code" href="logtime_8c.html#6739a049dbad07cbaaa11be032d2e900">BAUDRATE_OK</a>;
            }
        }
        <span class="keywordflow">if</span>(<a class="code" href="group__xg_crt_stdio.html#g76767cc4b7500920d83e53caad264189" title="Reassign a stream.">freopen</a>(<a class="code" href="logtime_8c.html#e645b693ed30a9decb478a8f7d812060" title="Device name used for UART output.">MYUART</a>, <span class="stringliteral">"w"</span>, <a name="a19"></a><a class="code" href="group__xg_crt_stdio.html#g5ce35bd5ba5021fd3b2e951e8f497656" title="Standard error output stream.">stderr</a>)) {
            rc |= <a name="a20"></a><a class="code" href="logtime_8c.html#b8d2e8ecbd4bf519f2f4d2e9b32c6a6e">STDERR_OK</a>;
        }
    }

    <span class="comment">/*</span>
<span class="comment">     * Print banner.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span>(rc &amp; <a class="code" href="logtime_8c.html#f740e8c411a2270d20a225250b4c9102">STDOUT_OK</a>) {
        <a name="a21"></a><a class="code" href="icc_8h.html#3cb9f0894fab1c8fbb0753c9c7c2a8d9" title="Specify enhanced AVR target.">printf</a>(<span class="stringliteral">"\n\nTimeLog %s\nNut/OS %s\n"</span>, version, <a name="a22"></a><a class="code" href="group__xg_nut_version.html#gfc224f8837d06742cb90826cdf1dea12" title="Return Nut/OS version string.">NutVersionString</a>());
        <a name="a23"></a><a class="code" href="icc_8h.html#80022cbe72a24b85437c2326543509be">puts</a>(<span class="stringliteral">"Compiled by "</span> <a name="a24"></a><a class="code" href="logtime_8c.html#bc6e88b8537040410da871702d55fee5">COMPILERNAME</a>);
        <a class="code" href="icc_8h.html#80022cbe72a24b85437c2326543509be">puts</a>(<span class="stringliteral">"Configure network"</span>);
    }

    <span class="comment">/*</span>
<span class="comment">     * Register LAN device and configure network interface.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span>(<a class="code" href="group__xg_device.html#g0d73e3153bf9f210194bd862d9b91c61" title="Register and initialize a device.">NutRegisterDevice</a>(&amp;<a name="a25"></a><a class="code" href="dev_2at91__emac_8h.html#c8dd96e43e6ce38f3259b56db85065c9">DEV_ETHER</a>, 0x8300, 5) == 0) {
        rc |= <a name="a26"></a><a class="code" href="logtime_8c.html#9de47c3afd71cd560f493d8ad64aa1bd">LANDEV_OK</a>;
        <span class="keywordflow">if</span> (<a name="a27"></a><a class="code" href="group__xg_d_h_c_p_c.html#g23fddfde13e6e0581258ac7f0fc1d025" title="Automatically configure an Ethernet network interface.">NutDhcpIfConfig</a>(<span class="stringliteral">"eth0"</span>, 0, 60000) == 0) {
            rc |= <a name="a28"></a><a class="code" href="logtime_8c.html#bb36885122caebce081e50e4304586ad">NETIF_OK</a>;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__xg_d_h_c_p_c.html#g23fddfde13e6e0581258ac7f0fc1d025" title="Automatically configure an Ethernet network interface.">NutDhcpIfConfig</a>(<span class="stringliteral">"eth0"</span>, mac, 60000) == 0) {
            rc |= <a class="code" href="logtime_8c.html#bb36885122caebce081e50e4304586ad">NETIF_OK</a>;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a name="a29"></a><a class="code" href="group__xg_i_p.html#g3d6e30d2a89522f9166d59cde5c85b94" title="Configure a network interface.">NutNetIfConfig</a>(<span class="stringliteral">"eth0"</span>, mac, <a class="code" href="group__xg_i_p.html#gdbce564458332a83ab871b91a54269dd" title="Convert decimal dotted ASCII representation into numeric IP address.">inet_addr</a>(<a name="a30"></a><a class="code" href="logtime_8c.html#cd4051b15a69b92c800f560790ea72e8" title="Default local IP address. Used if EEPROM configuration and DHCP is unavailable.">MYIP</a>), <a class="code" href="group__xg_i_p.html#gdbce564458332a83ab871b91a54269dd" title="Convert decimal dotted ASCII representation into numeric IP address.">inet_addr</a>(<a name="a31"></a><a class="code" href="logtime_8c.html#2605f394fb9779b0e66a85fd187820fd" title="Default IP mask. Used if EEPROM configuration and DHCP is unavailable.">MYMASK</a>)) == 0) {
            rc |= <a class="code" href="logtime_8c.html#bb36885122caebce081e50e4304586ad">NETIF_OK</a>;
<span class="preprocessor">#ifdef MYGATE</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span>(<a name="a32"></a><a class="code" href="group__xg_i_p.html#geb3b4f86e57db7d3e047b0c53aa94e60" title="Add a new entry to the IP routing table.">NutIpRouteAdd</a>(0, 0, <a class="code" href="group__xg_i_p.html#gdbce564458332a83ab871b91a54269dd" title="Convert decimal dotted ASCII representation into numeric IP address.">inet_addr</a>(<a name="a33"></a><a class="code" href="logtime_8c.html#8690c050343ef94d8f7e61934e108527" title="Default gateway address. Used if EEPROM configuration and DHCP is unavailable. Only...">MYGATE</a>), &amp;<a class="code" href="dev_2at91__emac_8h.html#c8dd96e43e6ce38f3259b56db85065c9">DEV_ETHER</a>) == 0) {
                rc |= <a name="a34"></a><a class="code" href="logtime_8c.html#6f46ad8ae6451745eb0ebbf1ed36d60b">NETROUTE_OK</a>;
            }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
    }

    <span class="keywordflow">if</span>(rc &amp; <a class="code" href="logtime_8c.html#bb36885122caebce081e50e4304586ad">NETIF_OK</a>) {
        <span class="comment">/*</span>
<span class="comment">         * Set timezone, query SNTP server and set system time.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span>(rc &amp; STDOUT_OK) {
            <a class="code" href="icc_8h.html#80022cbe72a24b85437c2326543509be">puts</a>(<span class="stringliteral">"Query time from "</span> <a class="code" href="ftpserv_8c.html#d17354034d3690ec4cf495da58a92161" title="IP address of the host running a time daemon.">MYTIMED</a>);
        }
        <a name="a35"></a><a class="code" href="group__xg_crt_time.html#g9493c776d7de0e689626895324bd2d6e" title="Defines your local timezone.">_timezone</a> = <a name="a36"></a><a class="code" href="ftpserv_8c.html#f702d84d775a2da20847e0776cbcc1e6" title="Local timezone, -1 for Central Europe.">MYTZ</a> * 60L * 60L;
        <span class="keywordflow">if</span>(<a name="a37"></a><a class="code" href="group__xg_sntp.html#gd2dcefed95ef5ff0f942fe0263000a3d">NutSNTPGetTime</a>(&amp;timeserver, &amp;now) == 0) {
            rc |= <a name="a38"></a><a class="code" href="logtime_8c.html#e7b783afb1423b7fcd2a9610c33b85d6">TIMED_OK</a>;
            <a name="a39"></a><a class="code" href="group__xg_crt_time.html#g1e9a05d0b48dcf984238438fa8efd2d8" title="Set the system time.">stime</a>(&amp;now);
        }
    }

    <span class="comment">/*</span>
<span class="comment">     * Open syslog output and route messages to stderr and to</span>
<span class="comment">     * a remote server.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span>(rc &amp; STDOUT_OK) {
        <a class="code" href="icc_8h.html#80022cbe72a24b85437c2326543509be">puts</a>(<span class="stringliteral">"Initialize syslog"</span>);
    }
    <a name="a40"></a><a class="code" href="group__xg_syslog.html#g0fa6949f4f8f5a1b7813fa0cbd784b8f" title="Open logging for specialized processing.">openlog</a>(<span class="stringliteral">"logtime"</span>, (rc &amp; <a class="code" href="logtime_8c.html#b8d2e8ecbd4bf519f2f4d2e9b32c6a6e">STDERR_OK</a>) ? <a name="a41"></a><a class="code" href="sys_2syslog_8h.html#542160b84335cc94dfb75604fd40d341">LOG_PERROR</a> : 0, <a name="a42"></a><a class="code" href="sys_2syslog_8h.html#c8b1ae5666bff93a5db0bb45f99f5832">LOG_USER</a>);
    <span class="keywordflow">if</span>(rc &amp; NETIF_OK) {
        <a name="a43"></a><a class="code" href="group__xg_syslog.html#g44d477111f17732d673c93fb12b2233b" title="Set the log server&amp;#39;s IP address.">setlogserver</a>(<a class="code" href="group__xg_i_p.html#gdbce564458332a83ab871b91a54269dd" title="Convert decimal dotted ASCII representation into numeric IP address.">inet_addr</a>(<a name="a44"></a><a class="code" href="logtime_8c.html#08a0d66d10b552655a2c6b4247d77dc4" title="IP address of the host running a syslog daemon.">MYLOGD</a>), 0);
    }
    <a name="a45"></a><a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a name="a46"></a><a class="code" href="sys_2syslog_8h.html#eb4f36db01bd128c7afeac5889dac311">LOG_INFO</a>, <span class="stringliteral">"TimeLog %s started on Nut/OS %s"</span>, version, <a class="code" href="group__xg_nut_version.html#gfc224f8837d06742cb90826cdf1dea12" title="Return Nut/OS version string.">NutVersionString</a>());

    <span class="comment">/*</span>
<span class="comment">     * Print the result of our initialization.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span>((rc &amp; <a class="code" href="logtime_8c.html#863b8337279a122c4c90dfcefeb4f6ed">UART_OK</a>) == 0) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a name="a47"></a><a class="code" href="sys_2syslog_8h.html#96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">"Registering UART device failed"</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((rc &amp; STDOUT_OK) == 0) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">"Assigning stdout failed"</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((rc &amp; STDERR_OK) == 0) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">"Assigning stderr failed"</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((rc &amp; <a class="code" href="logtime_8c.html#6739a049dbad07cbaaa11be032d2e900">BAUDRATE_OK</a>) == 0) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">"Setting baudrate failed"</span>);
    }
    <span class="keywordflow">if</span>((rc &amp; <a class="code" href="logtime_8c.html#9de47c3afd71cd560f493d8ad64aa1bd">LANDEV_OK</a>) == 0) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">"Registering Ethernet device failed"</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((rc &amp; NETIF_OK) == 0) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#96fad55b3f5adf08c39e4c877cf185e3">LOG_ERR</a>, <span class="stringliteral">"Configuring network interface failed"</span>);
    }
    <span class="keywordflow">else</span> {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#eb4f36db01bd128c7afeac5889dac311">LOG_INFO</a>, <span class="stringliteral">"IP %s"</span>, <a name="a48"></a><a class="code" href="group__xg_i_p.html#g9daa3cef32d6bcb76a95d0e869fd8b7a" title="Convert numeric IP address into decimal dotted ASCII representation.">inet_ntoa</a>(<a name="a49"></a><a class="code" href="group__xg_conf_net.html#g7096052825ae4f4e42da20d38997842b" title="Global network configuration structure.">confnet</a>.cdn_ip_addr));
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#eb4f36db01bd128c7afeac5889dac311">LOG_INFO</a>, <span class="stringliteral">"Gate %s"</span>, <a class="code" href="group__xg_i_p.html#g9daa3cef32d6bcb76a95d0e869fd8b7a" title="Convert numeric IP address into decimal dotted ASCII representation.">inet_ntoa</a>(<a class="code" href="group__xg_conf_net.html#g7096052825ae4f4e42da20d38997842b" title="Global network configuration structure.">confnet</a>.cdn_gateway));
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#eb4f36db01bd128c7afeac5889dac311">LOG_INFO</a>, <span class="stringliteral">"Timed "</span> <a class="code" href="ftpserv_8c.html#d17354034d3690ec4cf495da58a92161" title="IP address of the host running a time daemon.">MYTIMED</a>);
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a class="code" href="sys_2syslog_8h.html#eb4f36db01bd128c7afeac5889dac311">LOG_INFO</a>, <span class="stringliteral">"Syslogd "</span> <a class="code" href="logtime_8c.html#08a0d66d10b552655a2c6b4247d77dc4" title="IP address of the host running a syslog daemon.">MYLOGD</a>);
    }

    <span class="comment">/*</span>
<span class="comment">     * Endless loop.</span>
<span class="comment">     */</span>
    <span class="keywordflow">for</span>(;;) {
        <a class="code" href="group__xg_syslog.html#g383446f1735e40ccff448c0821cb46d7" title="Print log message.">syslog</a>(<a name="a50"></a><a class="code" href="sys_2syslog_8h.html#6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">"%d bytes free"</span>, <a name="a51"></a><a class="code" href="heap_8h.html#59ff999107d29a73d3bdbeaee8dce952">NutHeapAvailable</a>());
        <a name="a52"></a><a class="code" href="group__xg_timer.html#gfefcf81d05019a8134b49fa44d8c114a" title="Temporarily suspends the current thread.">NutSleep</a>(60000);
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
<hr>
<address>
  <small>
    &copy;&nbsp;2000-2007 by egnite Software GmbH - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
